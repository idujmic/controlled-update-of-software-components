openproject/test_v1/
(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"+1L4":function(e,t,i){"use strict";i.d(t,"b",(function(){return l})),i.d(t,"a",(function(){return d}));var n=i("d/TE"),s=i("AEvm"),a=i("fXoL"),r=i("ofXK"),o=i("cJ7v");function c(e,t){if(1&amp;e&amp;&amp;a.ic(0,"notification",3),2&amp;e){const e=t.$implicit;a.Dc("notification",e)}}const l="notifications-container";class d extends s.a{constructor(e,t){super(),this.notificationsService=e,this.cdRef=t,this.stack=[]}ngOnInit(){this.notificationsService.current.values$("Subscribing to changes in the notification stack").pipe(this.untilDestroyed()).subscribe(e=&gt;{this.stack=e,this.cdRef.detectChanges()})}}d.\u0275fac=function(e){return new(e||d)(a.hc(n.a),a.hc(a.i))},d.\u0275cmp=a.bc({type:d,selectors:[["notifications-container"]],features:[a.Qb],decls:3,vars:1,consts:[[1,"notification-box--wrapper"],[1,"notification-box--casing"],[3,"notification",4,"ngFor","ngForOf"],[3,"notification"]],template:function(e,t){1&amp;e&amp;&amp;(a.nc(0,"div",0),a.nc(1,"div",1),a.ad(2,c,1,1,"notification",2),a.mc(),a.mc()),2&amp;e&amp;&amp;(a.Tb(2),a.Dc("ngForOf",t.stack))},directives:[r.p,o.a],encapsulation:2,changeDetection:0})},"+B5R":function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("4lR/"),s=i("PUHT"),a=i("wZYP"),r=i("Va5K"),o=i("PtkW"),c=i("fXoL");class l extends s.a{constructor(e,t,i,n,s){super(e,t),this.elementRef=e,this.opContextMenu=t,this.I18n=i,this.wpDisplayRepresentationService=n,this.wpTableTimeline=s}open(e){this.buildItems(),this.opContextMenu.show(this,e)}get locals(){return{items:this.items,contextMenuId:"wp-view-context-menu"}}buildItems(){this.items=[],this.wpDisplayRepresentationService.current!==r.b&amp;&amp;this.items.push({linkText:this.I18n.t("js.views.card"),icon:"icon-view-card",onClick:e=&gt;(this.wpDisplayRepresentationService.setDisplayRepresentation(r.b),this.wpTableTimeline.isVisible&amp;&amp;this.wpTableTimeline.toggle(),!0)}),(this.wpTableTimeline.isVisible||this.wpDisplayRepresentationService.current===r.b)&amp;&amp;this.items.push({linkText:this.I18n.t("js.views.list"),icon:"icon-view-list",onClick:e=&gt;(this.wpDisplayRepresentationService.setDisplayRepresentation(r.c),this.wpTableTimeline.isVisible&amp;&amp;this.wpTableTimeline.toggle(),!0)}),this.wpTableTimeline.isVisible&amp;&amp;this.wpDisplayRepresentationService.current!==r.b||this.items.push({linkText:this.I18n.t("js.views.timeline"),icon:"icon-view-timeline",onClick:e=&gt;(this.wpTableTimeline.isVisible||this.wpTableTimeline.toggle(),this.wpDisplayRepresentationService.setDisplayRepresentation(r.c),!0)})}}l.\u0275fac=function(e){return new(e||l)(c.hc(c.q),c.hc(n.a),c.hc(a.a),c.hc(r.a),c.hc(o.a))},l.\u0275dir=c.cc({type:l,selectors:[["","wpViewDropdown",""]],features:[c.Qb]})},"+NA0":function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("GntA");class s extends n.a{setValue(e,t){super.setValue(e,t),"project"!==e&amp;&amp;"type"!==e||this.updateForm()}applyChanges(e){return delete e.description,super.applyChanges(e)}setNewDefaultFor(e,t){"description"===e&amp;&amp;this.pristineResource.isNew?this.pristineResource.description=t:super.setNewDefaultFor(e,t)}}},"+oAL":function(e,t,i){"use strict";i.d(t,"a",(function(){return x}));var n=i("iMRi"),s=i("ug4p"),a=i("W6hW"),r=i("Kg8T"),o=i("E2tj"),c=i("2Qcm"),l=i("IzEk"),d=i("Uyc6"),u=i("Va5K"),h=i("EnRq"),p=i("JY8V"),m=i("6yP5"),g=i("ONn1"),f=i("wyKs"),b=i("Zq3F"),v=i("PtkW"),w=i("AeZM"),y=i("F5Dh"),k=i("FB4C"),C=i("fXoL");class x{constructor(e,t,i,n,s,a,r,o,c,l,d,u,h,p,m,g,f,b){this.states=e,this.querySpace=t,this.wpTableColumns=i,this.wpTableGroupBy=n,this.wpTableSortBy=s,this.wpTableFilters=a,this.wpTableSum=r,this.wpTableTimeline=o,this.wpTableHierarchies=c,this.wpTableHighlighting=l,this.wpTableRelationColumns=d,this.wpTablePagination=u,this.wpTableOrder=h,this.wpTableAdditionalElements=p,this.wpCacheService=m,this.wpListChecksumService=g,this.authorisationService=f,this.wpDisplayRepresentation=b}initialize(e,t){this.clearStates(),this.querySpace.query.putValue(e),this.initializeFromQuery(e,t),this.updateQuerySpace(e,t),this.updateChecksum(e,t)}updateStatesFromForm(e,t){let i=t.schema;_.each(i.filtersSchemas.elements,e=&gt;{this.states.schemas.get(e.$href).putValue(e)}),this.wpTableFilters.initializeFilters(e,i),this.querySpace.queryForm.putValue(t),this.states.queries.columns.putValue(i.columns.allowedValues),this.states.queries.sortBy.putValue(i.sortBy.allowedValues),this.states.queries.groupBy.putValue(i.groupBy.allowedValues),this.states.queries.displayRepresentation.putValue(i.displayRepresentation.allowedValues)}updateQuerySpace(e,t){this.querySpace.additionalRequiredWorkPackages.clear("Clearing additional WPs before updating rows"),this.querySpace.tableRendered.clear("Clearing rendered data before upgrading query space"),t.schemas&amp;&amp;_.each(t.schemas.elements,e=&gt;{this.states.schemas.get(e.href).putValue(e)}),this.querySpace.query.putValue(e),this.authorisationService.initModelAuth("work_packages",t.$links),t.elements.forEach(e=&gt;this.wpCacheService.updateWorkPackage(e,!0)),this.querySpace.results.putValue(t),this.querySpace.groups.putValue(t.groups),this.wpTablePagination.initialize(e,t),this.wpTableRelationColumns.initialize(e,t),this.wpTableAdditionalElements.initialize(t.elements),this.wpTableOrder.initialize(e,t),this.wpDisplayRepresentation.initialize(e,t),this.querySpace.additionalRequiredWorkPackages.values$().pipe(Object(l.a)(1)).subscribe(()=&gt;this.querySpace.initialized.putValue(null))}updateChecksum(e,t){this.wpListChecksumService.updateIfDifferent(this.querySpace.query.value,this.wpTablePagination.current),this.authorisationService.initModelAuth("work_packages",t.$links)}initializeFromQuery(e,t){this.querySpace.query.putValue(e),this.wpTableSum.initialize(e),this.wpTableColumns.initialize(e,t),this.wpTableSortBy.initialize(e,t),this.wpTableGroupBy.initialize(e,t),this.wpTableTimeline.initialize(e,t),this.wpTableHierarchies.initialize(e,t),this.wpTableHighlighting.initialize(e,t),this.wpDisplayRepresentation.initialize(e,t),this.authorisationService.initModelAuth("query",e.$links),this.authorisationService.initModelAuth("work_packages",t.$links)}applyToQuery(e){this.wpTableFilters.applyToQuery(e),this.wpTableSum.applyToQuery(e),this.wpTableColumns.applyToQuery(e),this.wpTableSortBy.applyToQuery(e),this.wpTableGroupBy.applyToQuery(e),this.wpTableTimeline.applyToQuery(e),this.wpTableHighlighting.applyToQuery(e),this.wpTableHierarchies.applyToQuery(e),this.wpTableOrder.applyToQuery(e),this.wpDisplayRepresentation.applyToQuery(e)}clearStates(){const e="Clearing states before re-initialization.";this.querySpace.initialized.clear(e),this.querySpace.query.clear(e),this.querySpace.results.clear(e),this.querySpace.groups.clear(e),this.querySpace.additionalRequiredWorkPackages.clear(e),this.wpTableFilters.clear(e),this.wpTableColumns.clear(e),this.wpTableSortBy.clear(e),this.wpTableGroupBy.clear(e),this.wpDisplayRepresentation.clear(e),this.wpTableSum.clear(e),this.querySpace.tableRendered.clear(e)}}x.\u0275fac=function(e){return new(e||x)(C.rc(n.a),C.rc(o.a),C.rc(p.a),C.rc(w.a),C.rc(m.a),C.rc(y.a),C.rc(h.a),C.rc(v.a),C.rc(f.a),C.rc(c.a),C.rc(k.a),C.rc(b.a),C.rc(d.a),C.rc(g.a),C.rc(s.a),C.rc(a.a),C.rc(r.a),C.rc(u.a))},x.\u0275prov=C.dc({token:x,factory:x.\u0275fac})},"+pCT":function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));i("y2Tr");var n=i("wZYP"),s=i("fXoL"),a=i("ofXK");function r(e,t){if(1&amp;e&amp;&amp;s.ic(0,"a",2),2&amp;e){const e=s.xc();s.Dc("textContent",e.name),s.Ub("href",e.href,s.Vc)("title",e.label)}}function o(e,t){if(1&amp;e&amp;&amp;(s.lc(0),s.cd(1),s.jc(2),s.kc()),2&amp;e){const e=s.xc();s.Tb(1),s.ed(" ",e.name," ")}}class c{constructor(e){this.I18n=e}get href(){return this.user&amp;&amp;this.user.showUserPath}get name(){return this.user&amp;&amp;this.user.name}get label(){return this.I18n.t("js.label_author",{user:this.name})}}c.\u0275fac=function(e){return new(e||c)(s.hc(n.a))},c.\u0275cmp=s.bc({type:c,selectors:[["user-link"]],inputs:{user:"user"},decls:2,vars:2,consts:[[3,"textContent",4,"ngIf"],[4,"ngIf"],[3,"textContent"]],template:function(e,t){1&amp;e&amp;&amp;(s.ad(0,r,1,3,"a",0),s.ad(1,o,3,1,"ng-container",1)),2&amp;e&amp;&amp;(s.Dc("ngIf",t.href),s.Tb(1),s.Dc("ngIf",!t.href))},directives:[a.q],encapsulation:2,changeDetection:0})},"+ytV":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("711n"),s=i("fXoL");class a{constructor(e,t){this.wpeditForm=e,this.elementRef=t}ngOnInit(){this.$element=jQuery(this.elementRef.nativeElement)}activate(e){if(jQuery(e.target).closest(".help-text--entry").length)return!0;const t=this.wpeditForm.fields[this.fieldName];return t&amp;&amp;t.handleUserActivate(null),!1}}a.\u0275fac=function(e){return new(e||a)(s.hc(n.a),s.hc(s.q))},a.\u0275cmp=s.bc({type:a,selectors:[["wp-replacement-label"]],inputs:{fieldName:"fieldName"},ngContentSelectors:["*"],decls:2,vars:0,consts:[["tabindex","-1",1,"wp-replacement-label",3,"click"]],template:function(e,t){1&amp;e&amp;&amp;(s.Cc(),s.nc(0,"span",0),s.vc("click",(function(e){return t.activate(e)})),s.Bc(1),s.mc())},encapsulation:2})},"/8SZ":function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("hxxE");class s extends n.a{$initialize(e){super.$initialize(e),this.elements=this.elements||[]}}},"/C7M":function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("XNiG"),s=i("pLZG"),a=i("p9/F"),r=i("Kj3r"),o=i("Kqap"),c=i("fXoL");class l{constructor(){this._events=new n.a,this.events$=this._events.asObservable()}aggregated$(e,t=500){return this.events$.pipe(Object(s.a)(t=&gt;t.resourceType===e),Object(a.a)(this.events$.pipe(Object(r.a)(t))),Object(o.a)((e,t)=&gt;e.concat(t)))}push(e,t){t.id=e.id,t.resourceType=e._type,this._events.next(t)}}l.\u0275fac=function(e){return new(e||l)},l.\u0275prov=c.dc({token:l,factory:l.\u0275fac,providedIn:"root"})},"/Rze":function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("fXoL"),s=i("ofXK"),a=i("kor4");class r{constructor(){this.execute=new n.s}handleClick(e){return this.isDisabled||this.execute.emit(e),!1}}r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=n.bc({type:r,selectors:[["accessible-by-keyboard"]],inputs:{isDisabled:"isDisabled",linkClass:"linkClass",linkTitle:"linkTitle",spanClass:"spanClass",linkAriaLabel:"linkAriaLabel"},outputs:{execute:"execute"},ngContentSelectors:["*"],decls:3,vars:5,consts:[["role","link","href","",3,"ngClass","accessibleClick"],[3,"ngClass"]],template:function(e,t){1&amp;e&amp;&amp;(n.Cc(),n.nc(0,"a",0),n.vc("accessibleClick",(function(e){return t.handleClick(e)})),n.nc(1,"span",1),n.Bc(2),n.mc(),n.mc()),2&amp;e&amp;&amp;(n.Dc("ngClass",t.linkClass),n.Ub("disabled",t.isDisabled||void 0)("title",t.linkTitle)("aria-label",t.linkAriaLabel),n.Tb(1),n.Dc("ngClass",t.spanClass))},directives:[s.n,a.a],encapsulation:2})},"/cHX":function(e,t,i){"use strict";i.d(t,"e",(function(){return r})),i.d(t,"d",(function(){return o})),i.d(t,"c",(function(){return c})),i.d(t,"b",(function(){return l})),i.d(t,"a",(function(){return d}));var n=i("mrSG"),s=i("wZYP"),a=i("r0MM");const r="wp-table--context-menu-td",o="wp-table--context-menu-span",c="wp-table-context-menu-link",l="wp-table-context-menu-icon";class d{constructor(e,t){this.injector=e,this.workPackage=t}}Object(n.c)([Object(a.a)(),Object(n.e)("design:type",s.a)],d.prototype,"I18n",void 0)},"/qfM":function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("gvAf"),s=i("ODu2"),a=i("qs3h"),r=i("ylTo"),o=i("ZGxV"),c=i("4fM7");function l(e,t,i,l=o.a){return[{name:e+".details",url:"/details/{workPackageId:[0-9]+}",redirectTo:e+".details.overview",reloadOnSearch:!1,data:{bodyClasses:"router--work-packages-partitioned-split-view-details",menuItem:t,baseRoute:e,partition:"-split",newRoute:e+".new"},views:{"content-right@^.^":{component:i}}},{name:e+".details.overview",url:"/overview",component:n.a,data:{menuItem:t,parent:e+".details"}},{name:e+".details.activity",url:"/activity",component:s.a,data:{menuItem:t,parent:e+".details"}},{name:e+".details.relations",url:"/relations",component:a.a,data:{menuItem:t,parent:e+".details"}},{name:e+".details.watchers",url:"/watchers",component:r.a,data:{menuItem:t,parent:e+".details"}},{name:e+".new",url:"/create_new?{type:[0-9]+}&amp;{parent_id:[0-9]+}",reloadOnSearch:!1,data:{partition:"-split",allowMovingInEditMode:!0,bodyClasses:"router--work-packages-partitioned-split-view-new",baseRoute:e,parent:e},views:{"content-right@^.^":{component:l}}},{name:e+".copy",url:"/details/{copiedFromWorkPackageId:[0-9]+}/copy",views:{"content-right@^.^":{component:c.a}},reloadOnSearch:!1,data:{baseRoute:e,parent:e,allowMovingInEditMode:!0,bodyClasses:"router--work-packages-partitioned-split-view",menuItem:t,partition:"-split"}}]}},0:function(e,t,i){e.exports=i("zUnb")},"07mJ":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("Jui0"),s=i("fXoL");class a{constructor(e){this.pathHelper=e}projectImportIssuePath(e){return this.pathHelper.projectPath(e)+"/issues/upload"}projectExportIssuesPath(e,t){return t?this.pathHelper.projectPath(e)+"/work_packages.bcf?filters="+t:this.pathHelper.projectPath(e)+"/work_packages.bcf"}snapshotPath(e){return e.href+"/snapshot"}}a.\u0275fac=function(e){return new(e||a)(s.rc(n.a))},a.\u0275prov=s.dc({token:a,factory:a.\u0275fac})},"0To3":function(e,t,i){"use strict";i.d(t,"a",(function(){return O}));var n=i("mrSG"),s=i("wZYP"),a=i("qHU1"),r=i("iMRi"),o=i("SKFm"),c=i("QOiP"),l=i("pXZk"),d=i("6XbZ"),u=i("r0MM");function h(e){return`__relations-expanded-from-${e}`}class p extends d.a{constructor(e,t){super(e,t),this.injector=e,this.workPackageTable=t}buildCell(e,t){return Object(c.a)(t)?this.emptyRelationCell(t):super.buildCell(e,t)}buildEmptyRelationRow(e,t,i){const n=t.denormalized(e),s=this.states.workPackages.get(n.targetId).value,a=this.createEmptyRelationRow(e,s),[r,o]=super.buildEmptyRow(s,a);return[r,s]}createEmptyRelationRow(e,t){const i=this.relationClassIdentifier(e,t);let n=document.createElement("tr");return n.dataset.workPackageId=t.id,n.dataset.classIdentifier=i,n.classList.add(d.b,d.c,"issue","wp-table--relations-aditional-row",i,`${i}-table`,h(e.id)),n}relationClassIdentifier(e,t){return i=t.id,`wp-relation-row-${e.id}-to-${i}`;var i}appendRelationLabel(e,t,i,n,s){const a=i.denormalized(t);let r="";if("toType"===s&amp;&amp;(r=this.I18n.t(`js.relation_labels.${a.reverseRelationType}`)),"ofType"===s){r=this.states.workPackages.get(a.target.id).value.type.name}const o=document.createElement("span");o.classList.add("relation-row--type-label"),o.textContent=r;document.createTextNode(a.target.name);e.find(".wp-table--relation-cell-td").empty(),e.find(`.wp-table--relation-cell-td.${n}`).append(o)}emptyRelationCell(e){const t=document.createElement("td");return t.classList.add("wp-table--relation-cell-td",l.c,e.id),t}}Object(n.c)([Object(u.a)(),Object(n.e)("design:type",r.a)],p.prototype,"states",void 0),Object(n.c)([Object(u.a)(),Object(n.e)("design:type",s.a)],p.prototype,"I18n",void 0);var m=i("uSJ+"),g=i("JY8V"),f=i("FB4C");class b{constructor(e,t,i){this.injector=e,this.table=t,this.tablePass=i,this.relationRowBuilder=new p(e,t)}render(){if(!this.isApplicable)return;_.clone(this.tablePass.renderedOrder).forEach((e,t)=&gt;{if(!e.workPackage)return;const i=e.workPackage,n=i.id,s=this.wpRelations.state(n);s.hasValue()&amp;&amp;0!==_.size(s.value)&amp;&amp;this.wpTableRelationColumns.relationsToExtendFor(i,s.value,(t,s,a)=&gt;{const[r,o]=this.relationRowBuilder.buildEmptyRelationRow(i,t,a);r.classList.add(...e.additionalClasses),this.relationRowBuilder.appendRelationLabel(jQuery(r),i,t,s.id,a),this.tablePass.spliceRow(r,`.${this.relationRowBuilder.classIdentifier(i)},.${h(n)}`,{classIdentifier:this.relationRowBuilder.relationClassIdentifier(i,o),additionalClasses:e.additionalClasses.concat(["wp-table--relations-aditional-row"]),workPackage:o,belongsTo:i,renderType:"relations",hidden:e.hidden,data:{relation:t,columnId:s.id,relationType:a}})})})}refreshRelationRow(e,t,i){const n=this.relationRowBuilder.refreshRow(t,i);return this.relationRowBuilder.appendRelationLabel(n,e.belongsTo,e.data.relation,e.data.columnId,e.data.relationType),n}get isApplicable(){return this.wpTableColumns.hasRelationColumns()}}Object(n.c)([Object(u.a)(),Object(n.e)("design:type",m.a)],b.prototype,"wpRelations",void 0),Object(n.c)([Object(u.a)(),Object(n.e)("design:type",g.a)],b.prototype,"wpTableColumns",void 0),Object(n.c)([Object(u.a)(),Object(n.e)("design:type",f.a)],b.prototype,"wpTableRelationColumns",void 0);var v=i("9nXh");class w{constructor(e,t,i){this.injector=e,this.table=t,this.tablePass=i}render(){this.timelineBody=document.createDocumentFragment(),this.timelineBuilder=new v.a(this.injector,this.table),this.tablePass.renderedOrder.forEach(e=&gt;{const t=e.workPackage?e.workPackage.id:null,i=this.timelineBuilder.build(t);i.classList.add(e.classIdentifier,`${e.classIdentifier}-timeline`,...e.additionalClasses),this.timelineBody.appendChild(i)})}}var y=i("2Qcm"),k=i("RGDJ"),C=i("E2tj");class x{constructor(e,t,i){this.injector=e,this.table=t,this.tablePass=i}render(){if(!this.isApplicable)return;const e=this.wpTableHighlighting.current.mode;window.getComputedStyle(document.body);this.tablePass.renderedOrder.forEach((t,i)=&gt;{if(!t.workPackage)return;const n=t.workPackage[e];if(!n)return;const s=n.id;this.tablePass.tableBody.children[i].classList.add(k.a.backgroundClass(e,s))})}get isApplicable(){return!(this.wpTableHighlighting.isInline||this.wpTableHighlighting.isDisabled)}}Object(n.c)([Object(u.a)(),Object(n.e)("design:type",y.a)],x.prototype,"wpTableHighlighting",void 0),Object(n.c)([Object(u.a)(),Object(n.e)("design:type",C.a)],x.prototype,"querySpace",void 0);var j=i("pSHE"),S=i("FlxY");class T{constructor(e){this.injector=e;const t=this.injector.get(j.a);this.actionService=t.get(e)}build(e,t){let i=document.createElement("td");if(!this.actionService.canPickup(e))return i;i.classList.add(l.c,"wp-table--sort-td",S.b.id,"hide-when-print");let n=document.createElement("span");return n.classList.add("wp-table--drag-and-drop-handle","icon-drag-handle"),i.appendChild(n),i}}var P=i("Uyc6");class I{constructor(e,t,i){this.injector=e,this.table=t,this.tablePass=i,this.dragDropHandleBuilder=new T(this.injector)}render(){this.table.configuration.dragAndDropEnabled&amp;&amp;this.wpTableOrder.withLoadedPositions().then(e=&gt;{this.tablePass.renderedOrder.forEach((t,i)=&gt;{if(!t.workPackage||"relations"===t.renderType)return;const n=this.dragDropHandleBuilder.build(t.workPackage,e[t.workPackage.id]);n&amp;&amp;t.element.replaceChild(n,t.element.firstElementChild)})})}}Object(n.c)([Object(u.a)(),Object(n.e)("design:type",g.a)],I.prototype,"wpTableColumns",void 0),Object(n.c)([Object(u.a)(),Object(n.e)("design:type",P.a)],I.prototype,"wpTableOrder",void 0);class O{constructor(e,t,i){this.injector=e,this.workPackageTable=t,this.rowBuilder=i}render(){return Object(a.b)("Primary render pass",()=&gt;{this.prepare(),this.doRender(),this.postRender()}),this.highlighting.render(),Object(a.b)("Relations render pass",()=&gt;{this.relations.render()}),Object(a.b)("Drag handle render pass",()=&gt;{this.dragDropHandle.render()}),Object(a.b)("Timelines render pass",()=&gt;{this.timeline.render()}),this}refresh(e,t,i){let n=jQuery(i).find(`.${e.classIdentifier}`),s=null;switch(e.renderType){case"primary":s=this.rowBuilder.refreshRow(t,n);break;case"relations":s=this.relations.refreshRelationRow(e,t,n)}null!==s&amp;&amp;n.length&amp;&amp;n.replaceWith(s)}get result(){return this.renderedOrder.map(e=&gt;({classIdentifier:e.classIdentifier,workPackageId:e.workPackage?e.workPackage.id:null,hidden:e.hidden}))}spliceRow(e,t,i){const n=jQuery(this.tableBody).find(t).last();n.after(e);const s=n.index();this.renderedOrder.splice(s+1,0,i)}prepare(){this.timeline=new w(this.injector,this.workPackageTable,this),this.relations=new b(this.injector,this.workPackageTable,this),this.dragDropHandle=new I(this.injector,this.workPackageTable,this),this.highlighting=new x(this.injector,this.workPackageTable,this),this.tableBody=document.createDocumentFragment(),this.renderedOrder=[]}postRender(){0===this.renderedOrder.length&amp;&amp;this.workPackageTable.renderPlaceholderRow&amp;&amp;this.tableBody.appendChild(this.rowBuilder.placeholderRow)}appendRow(e,t,i=[],n=!1){this.tableBody.appendChild(t),this.renderedOrder.push({classIdentifier:this.rowBuilder.classIdentifier(e),additionalClasses:i,workPackage:e,renderType:"primary",element:t,hidden:n})}appendNonWorkPackageRow(e,t,i=[],n=!1){e.classList.add(t),this.tableBody.appendChild(e),this.renderedOrder.push({element:e,classIdentifier:t,additionalClasses:i,workPackage:null,renderType:"primary",hidden:n})}}Object(n.c)([Object(u.a)(),Object(n.e)("design:type",o.a)],O.prototype,"halEditing",void 0),Object(n.c)([Object(u.a)(),Object(n.e)("design:type",r.a)],O.prototype,"states",void 0),Object(n.c)([Object(u.a)(),Object(n.e)("design:type",s.a)],O.prototype,"I18n",void 0)},"0Usb":function(e,t,i){"use strict";i.d(t,"c",(function(){return l})),i.d(t,"b",(function(){return d})),i.d(t,"a",(function(){return u}));var n=i("mrSG"),s=i("iMRi"),a=i("pXZk"),r=i("uSJ+"),o=i("FB4C"),c=i("r0MM");const l="wp-table--relation-cell-td",d="wp-table--relation-indicator";class u{constructor(e){this.injector=e}build(e,t){const i=document.createElement("td");i.classList.add(a.c,l,t.id),i.dataset.columnId=t.id;const n=this.wpTableRelationColumns.getExpandFor(e.id)===t.id,s=this.wpRelations.state(e.id).value,r=this.wpTableRelationColumns.relationsForColumn(e,s,t),o=this.renderIndicator(),c=this.renderBadge(r);return n&amp;&amp;i.classList.add("-expanded"),r.length&gt;0&amp;&amp;(i.appendChild(c),i.appendChild(o)),i}renderIndicator(){const e=document.createElement("span");return e.classList.add(d),e.setAttribute("aria-hidden","true"),e.setAttribute("tabindex","0"),e}renderBadge(e){const t=document.createElement("span");return t.classList.add("wp-table--relation-count"),t.textContent=""+e.length,t.classList.add("badge","-border-only"),t}}Object(n.c)([Object(c.a)(),Object(n.e)("design:type",s.a)],u.prototype,"states",void 0),Object(n.c)([Object(c.a)(),Object(n.e)("design:type",r.a)],u.prototype,"wpRelations",void 0),Object(n.c)([Object(c.a)(),Object(n.e)("design:type",o.a)],u.prototype,"wpTableRelationColumns",void 0)},"0XIV":function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));i("ii2/");var n=i("fXoL"),s=i("0loS");const a=function(e,t){return{workPackageId:e,"#":t}};class r{ngOnInit(){this.activityHtmlId=`activity-${this.activityNo}`,this.activityLabel=`#${this.activityNo}`}}r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=n.bc({type:r,selectors:[["activity-link"]],inputs:{workPackage:"workPackage",activityNo:"activityNo"},decls:1,vars:6,consts:[["uiSref","work-packages.show.activity",3,"id","textContent","uiParams"]],template:function(e,t){1&amp;e&amp;&amp;n.ic(0,"a",0),2&amp;e&amp;&amp;(n.Fc("id","",t.activityHtmlId,"-link"),n.Dc("textContent",t.activityLabel)("uiParams",n.Jc(3,a,t.workPackage.id,t.activityHtmlId)))},directives:[s.AnchorUISref,s.UISref],encapsulation:2})},"0bag":function(e,t,i){"use strict";i.d(t,"a",(function(){return h}));var n=i("kTsZ"),s=i("6x6j"),a=i("pL6k"),r=i("Jui0"),o=i("1SJX"),c=i("ciXH"),l=i("yQm5"),d=i("fXoL"),u=i("tk/3");class h extends c.a{constructor(e,t,i,n,s,a){super(e,i),this.halResourceService=e,this.http=t,this.pathHelper=i,this.UrlParamsHelper=n,this.QueryFilters=s,this.PayloadDm=a}stream(e,t,i){let n;return n=t?this.pathHelper.api.v3.queries.id(t).toString():this.pathHelper.api.v3.withOptionalProject(i).queries.default.toString(),this.halResourceService.get(n,e)}find(e,t,i){return this.stream(e,t,i).toPromise()}findDefault(e,t){return this.find(e,void 0,t)}reload(e,t){let i=this.pathHelper.api.v3.queries.id(e.id).toString();return this.halResourceService.get(i,t).toPromise()}loadResults(e,t){if(!e.results)throw"No results embedded when expected";let i=this.UrlParamsHelper.buildV3GetQueryFromQueryResource(e,t),n=l(e.href).path();return this.halResourceService.get(n,i).toPromise()}loadIdsUpdatedSince(e,t){const i=[{id:{operator:"=",values:e.filter(e=&gt;e)}},{updatedAt:{operator:"&lt;&gt;d",values:[t,""]}}];return this.halResourceService.get(this.pathHelper.api.v3.work_packages.toString(),{filters:JSON.stringify(i)}).toPromise()}update(e,t){const i=this.extractPayload(e,t);return this.patch(e.id,i)}patch(e,t){let i=this.pathHelper.api.v3.queries.id(e).toString();return this.halResourceService.patch(i,t)}create(e,t){const i=this.extractPayload(e,t);let n=this.pathHelper.api.v3.queries.toString();return this.halResourceService.post(n,i).toPromise()}delete(e){return e.delete()}toggleStarred(e){return e.starred?e.unstar():e.star()}listNonHidden(e){let t={filters:[["hidden","=",["f"]]]};return e?t.filters.push(["project_identifier","=",[e]]):t.filters.push(["project","!*",[]]),this.list(t)}extractPayload(e,t){return this.QueryFilters.mapSchemasIntoFilters(e,t),this.PayloadDm.extract(e,t.schema)}listUrl(){return this.pathHelper.api.v3.queries.toString()}oneUrl(e){return this.pathHelper.api.v3.queries.id(e).toString()}}h.\u0275fac=function(e){return new(e||h)(d.rc(n.a),d.rc(u.b),d.rc(r.a),d.rc(a.a),d.rc(o.a),d.rc(s.a))},h.\u0275prov=d.dc({token:h,factory:h.\u0275fac})},"0lDN":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));const n=new(i("fXoL").z)("CONTEXT_MENU_LOCALS")},"0zio":function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("wZYP"),s=i("tN7n"),a=i("ho3E"),r=i("fXoL");class o extends s.a{constructor(e,t){super(t),this.locals=e,this.I18n=t}get tabs(){const e=this.locals.disabledTabs||{};return this._tabs.map(t=&gt;{const i=e[t.name];return null!=i&amp;&amp;(t.disableBecause=i),t})}}o.\u0275fac=function(e){return new(e||o)(r.rc(a.a),r.rc(n.a))},o.\u0275prov=r.dc({token:o,factory:o.\u0275fac})},"13ri":function(e,t,i){"use strict";var n;i.d(t,"a",(function(){return n})),function(e){e.isClickedWithModifier=function(e){const t=e.ctrlKey||e.shiftKey||e.metaKey,i=1===e.button;return t||i}}(n||(n={}))},"1EAr":function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");class s{constructor(){this.stopEventPropagation=!0,this.eventHandler=new n.s}handleClick(e){return"dblclick"!==e.type&amp;&amp;2!==e.tapCount||(this.eventHandler.emit(e),this.eventStopReturnCode(e))}eventStopReturnCode(e){return!this.stopEventPropagation||(e.preventDefault(),e.stopPropagation&amp;&amp;e.stopPropagation(),!1)}}s.\u0275fac=function(e){return new(e||s)},s.\u0275dir=n.cc({type:s,selectors:[["","doubleClickOrTap",""]],hostBindings:function(e,t){1&amp;e&amp;&amp;n.vc("dblclick",(function(e){return t.handleClick(e)}))("tap",(function(e){return t.handleClick(e)}))},inputs:{stopEventPropagation:["doubleClickOrTapStopEvent","stopEventPropagation"]},outputs:{eventHandler:"doubleClickOrTap"}})},"1MaS":function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("kTsZ"),s=i("RhL0"),a=i("Jui0"),r=i("fXoL");class o{constructor(e,t){this.halResourceService=e,this.pathHelper=t}load(e){return this.halResourceService.get(this.pathHelper.api.v3.work_packages.id(e).relations,{}).toPromise().then(e=&gt;e.elements)}loadInvolved(e){let t=_.filter(e,e=&gt;/\d+/.test(e));return 0===t.length?Promise.resolve([]):this.halResourceService.get(this.pathHelper.api.v3.relations.toPath(),{filters:Object(s.b)("involved","=",t).toJson()}).toPromise().then(e=&gt;e.elements)}}o.\u0275fac=function(e){return new(e||o)(r.rc(n.a),r.rc(a.a))},o.\u0275prov=r.dc({token:o,factory:o.\u0275fac})},"1SJX":function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");class s{getFilterSchema(e,t){const i=t.$embedded.schema.filtersSchemas.elements;return _.find(i,t=&gt;t.allowedFilterValue.href===e.filter.href)}mapSchemasIntoFilters(e,t){e.filters.forEach(e=&gt;{e.schema=this.getFilterSchema(e,t)})}}s.\u0275fac=function(e){return new(e||s)},s.\u0275prov=n.dc({token:s,factory:s.\u0275fac})},"1zMF":function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i("4lR/"),s=i("PUHT"),a=i("SKFm"),r=i("iMRi"),o=i("fXoL");class c extends s.a{constructor(e,t,i,n){super(e,t),this.elementRef=e,this.opContextMenu=t,this.states=i,this.halEditing=n}open(e){const t=this.states.workPackages.get("new").value;if(t){this.halEditing.changeFor(t).getForm().then(t=&gt;{this.buildItems(t),this.opContextMenu.show(this,e)})}}positionArgs(e){let t=super.positionArgs(e);return _.assign(t,{my:"right top",at:"right bottom"}),t}buildItems(e){this.items=[];const t=e.configureForm,i=e.customFields;i&amp;&amp;this.items.push({href:i.href,icon:"icon-custom-fields",linkText:i.name,onClick:()=&gt;!1}),t&amp;&amp;this.items.push({href:t.href,icon:"icon-settings3",linkText:t.name,onClick:()=&gt;!1})}}c.\u0275fac=function(e){return new(e||c)(o.hc(o.q),o.hc(n.a),o.hc(r.a),o.hc(a.a))},c.\u0275dir=o.cc({type:c,selectors:[["","wpCreateSettingsMenu",""]],features:[o.Qb]})},"2Qcm":function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i("zqrF"),s=i("E2tj"),a=i("iMRi"),r=i("fbLK"),o=i("fXoL");class c extends n.a{constructor(e,t,i){super(i),this.states=e,this.Banners=t,this.querySpace=i}initialize(e,t,i){super.initialize(e,t,i)}shouldHighlightInline(e){return!(!this.isInline||this.Banners.eeShowBanners)&amp;&amp;(void 0===this.current.selectedAttributes||this.current.selectedAttributes===[]||!!_.find(this.current.selectedAttributes,t=&gt;t.id===e))}get current(){let e=this.lastUpdatedState.getValueOr({mode:"inline"});return this.filteredValue(e)}get isInline(){return"inline"===this.current.mode}get isDisabled(){return"none"===this.current.mode}update(e){super.update(this.filteredValue(e))}valueFromQuery(e){const t={mode:e.highlightingMode||"inline",selectedAttributes:e.highlightedAttributes};return this.filteredValue(t)}hasChanged(e){return e.highlightingMode!==this.current.mode||!_.isEqual(e.highlightedAttributes,this.current.selectedAttributes)}applyToQuery(e){const t=this.current;return e.highlightingMode=t.mode,e.highlightedAttributes=t.selectedAttributes,!1}filteredValue(e){return _.isEmpty(e.selectedAttributes)&amp;&amp;(e.selectedAttributes=void 0),this.Banners.conditional(()=&gt;{e.mode="none",e.selectedAttributes=void 0}),e}}c.\u0275fac=function(e){return new(e||c)(o.rc(a.a),o.rc(r.a),o.rc(s.a))},c.\u0275prov=o.dc({token:c,factory:c.\u0275fac})},"2TbE":function(e,t,i){"use strict";i.d(t,"a",(function(){return p}));var n=i("iB+3"),s=i("wZYP"),a=i("sjKJ"),r=i("Kg8T"),o=i("AEvm"),c=i("Hg4z"),l=i("fXoL"),d=i("8YXA"),u=i("N5AO"),h=i("ofXK");class p extends o.a{constructor(e,t,i,n,s,a){super(),this.$state=e,this.currentProject=t,this.authorisationService=i,this.transition=n,this.I18n=s,this.cdRef=a,this.text={createWithDropdown:this.I18n.t("js.work_packages.create.button"),createButton:this.I18n.t("js.label_work_package"),explanation:this.I18n.t("js.label_create_work_package")}}ngOnInit(){this.projectIdentifier=this.currentProject.identifier,this.authorisationService.observeUntil(Object(c.b)(this)).subscribe(()=&gt;{this.allowed=!!this.allowedWhen.find(e=&gt;{let[t,i]=e.split(".");return this.authorisationService.can(t,i)}),this.updateDisabledState()}),this.transitionUnregisterFn=this.transition.onSuccess({},this.updateDisabledState.bind(this))}ngOnDestroy(){super.ngOnDestroy(),this.transitionUnregisterFn()}updateDisabledState(){this.disabled=!this.allowed||this.$state.includes("**.new"),this.cdRef.detectChanges()}}p.\u0275fac=function(e){return new(e||p)(l.hc(n.G),l.hc(a.a),l.hc(r.a),l.hc(n.O),l.hc(s.a),l.hc(l.i))},p.\u0275cmp=l.bc({type:p,selectors:[["wp-create-button"]],inputs:{allowedWhen:["allowed","allowedWhen"],stateName$:"stateName$"},features:[l.Qb],decls:6,vars:8,consts:[[1,"wp-create-button"],["opTypesCreateDropdown","",1,"button","-alt-highlight","add-work-package",3,"disabled","projectIdentifier","stateName","dropdownActive"],["icon-classes","button--icon icon-add"],["aria-hidden","true",1,"button--text",3,"textContent"],["icon-classes","button--icon icon-small icon-pulldown hidden-for-mobile"]],template:function(e,t){1&amp;e&amp;&amp;(l.nc(0,"div",0),l.nc(1,"button",1),l.yc(2,"async"),l.ic(3,"op-icon",2),l.ic(4,"span",3),l.ic(5,"op-icon",4),l.mc(),l.mc()),2&amp;e&amp;&amp;(l.Tb(1),l.Dc("disabled",t.disabled)("projectIdentifier",t.projectIdentifier)("stateName",l.zc(2,6,t.stateName$))("dropdownActive",t.allowed),l.Ub("aria-label",t.text.explanation),l.Tb(3),l.Dc("textContent",t.text.createWithDropdown))},directives:[d.a,u.a],pipes:[h.a],encapsulation:2,changeDetection:0})},"2Uhg":function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("kgyZ"),s=i("XNiG"),a=i("+NA0"),r=i("fXoL");class o extends n.a{constructor(e,t){super(),this.elementRef=e,this.injector=t,this.fieldName="comment",this.handler=this,this.active=!1,this.inEditMode=!1,this.inFlight=!1,this.onDestroy=new s.a}ngOnInit(){this.change=new a.a(this.workPackage)}reset(e=""){e.length&gt;0&amp;&amp;(e+="\n"),this.change.setValue("comment",{raw:e})}get schema(){return{name:I18n.t("js.label_comment"),writable:!0,required:!1,type:"_comment",hasDefault:!1}}get rawComment(){return _.get(this.commentValue,"raw","")}get commentValue(){return this.change.value("comment")}handleUserCancel(){this.deactivate(!0)}activate(e){this.active=!0,this.reset(e)}deactivate(e){this.active=!1,this.onDestroy.next(),this.onDestroy.complete()}focus(){const e=this.elementRef.nativeElement.querySelector(".inplace-editing--trigger-container");e&amp;&amp;e.focus()}onFocusOut(){}handleUserKeydown(e,t){}isChanged(){return!1}stopPropagation(e){return!1}}o.\u0275fac=function(e){return new(e||o)(r.hc(r.q),r.hc(r.A))},o.\u0275dir=r.cc({type:o,features:[r.Qb]})},"2bW2":function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("fXoL"),s=i("wZYP"),a=i("711n"),r=i("N5AO");class o{constructor(e,t,i){this.I18n=e,this.editForm=t,this.cdRef=i,this.onSave=new n.s,this.onCancel=new n.s,this._saving=!1,this.text={save:this.I18n.t("js.button_save"),cancel:this.I18n.t("js.button_cancel")}}set saving(e){this._saving=e,this.cdRef.detectChanges()}get saving(){return this._saving}save(){this.saving||(this.saving=!0,this.editForm.save().then(()=&gt;{this.saving=!1,this.onSave.emit()}).catch(()=&gt;{this.saving=!1}))}cancel(){this.editForm.stop(),this.onCancel.emit()}}o.\u0275fac=function(e){return new(e||o)(n.hc(s.a),n.hc(a.a),n.hc(n.i))},o.\u0275cmp=n.bc({type:o,selectors:[["wp-edit-actions-bar"]],outputs:{onSave:"onSave",onCancel:"onCancel"},decls:7,vars:3,consts:[[1,"work-packages--edit-actions"],["id","work-packages--edit-actions-save","accesskey","3",1,"button","-highlight",3,"disabled","click"],["icon-classes","button--icon icon-checkmark"],[1,"button--text",3,"textContent"],["id","work-packages--edit-actions-cancel","accesskey","7",1,"button",3,"click"],["icon-classes","button--icon icon-close"]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"div",0),n.nc(1,"button",1),n.vc("click",(function(){return t.save()})),n.ic(2,"op-icon",2),n.ic(3,"span",3),n.mc(),n.nc(4,"button",4),n.vc("click",(function(){return t.cancel()})),n.ic(5,"op-icon",5),n.ic(6,"span",3),n.mc(),n.mc()),2&amp;e&amp;&amp;(n.Tb(1),n.Dc("disabled",t.saving),n.Tb(2),n.Dc("textContent",t.text.save),n.Tb(3),n.Dc("textContent",t.text.cancel))},directives:[r.a],encapsulation:2,changeDetection:0})},"2dSq":function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("+rOU"),s=i("kl08"),a=i("6eua"),r=i("fXoL");class o{constructor(e,t,i){this.appRef=e,this.componentFactoryResolver=t,this.injector=i}create(e,t,i=!1){const r=new n.d(e,this.componentFactoryResolver,this.appRef,this.injector),o=Object(a.c)(this.injector,t,i),c=new n.c(s.a,null,o);return setTimeout(()=&gt;r.attachComponentPortal(c)),r}}o.\u0275fac=function(e){return new(e||o)(r.rc(r.f),r.rc(r.l),r.rc(r.A))},o.\u0275prov=r.dc({token:o,factory:o.\u0275fac,providedIn:"root"})},"2hMx":function(e,t,i){"use strict";i.d(t,"a",(function(){return h}));var n=i("wZYP"),s=i("Jui0"),a=(i("Mo6U"),i("juWA")),r=i("fXoL"),o=i("ofXK");function c(e,t){if(1&amp;e&amp;&amp;r.ic(0,"span",4),2&amp;e){const e=r.xc();r.Dc("textContent",e.author.name)}}function l(e,t){if(1&amp;e&amp;&amp;r.ic(0,"a",4),2&amp;e){const e=r.xc();r.Dc("textContent",e.author.name),r.Ub("href",e.userLink,r.Vc)}}function d(e,t){if(1&amp;e&amp;&amp;(r.nc(0,"span",5),r.ic(1,"a",4),r.mc()),2&amp;e){const e=r.xc();r.Tb(1),r.Dc("textContent",e.timeago),r.Ub("title",e.time)("href",e.activityFromPath(e.createdOnTime.format("YYYY-MM-DD")),r.Vc)}}function u(e,t){if(1&amp;e&amp;&amp;r.ic(0,"span",6),2&amp;e){const e=r.xc();r.Dc("textContent",e.timeago),r.Ub("title",e.time)}}class h{constructor(e,t,i){this.PathHelper=e,this.I18n=t,this.timezoneService=i}ngOnInit(){this.createdOnTime=this.timezoneService.parseDatetime(this.createdOn),this.timeago=this.createdOnTime.fromNow(),this.time=this.createdOnTime.format("LLL"),this.userLink=this.PathHelper.userPath(this.author.idFromLink)}activityFromPath(e){var t=this.PathHelper.projectActivityPath(this.project);return e&amp;&amp;(t+="?from="+e),t}}h.\u0275fac=function(e){return new(e||h)(r.hc(s.a),r.hc(n.a),r.hc(a.a))},h.\u0275cmp=r.bc({type:h,selectors:[["authoring"]],inputs:{createdOn:"createdOn",author:"author",showAuthorAsLink:"showAuthorAsLink",project:"project",activity:"activity"},decls:5,vars:4,consts:[[1,"authoring-entry"],[3,"textContent",4,"ngIf"],["class","timestamp",4,"ngIf"],["class","timestamp",3,"textContent",4,"ngIf"],[3,"textContent"],[1,"timestamp"],[1,"timestamp",3,"textContent"]],template:function(e,t){1&amp;e&amp;&amp;(r.nc(0,"div",0),r.ad(1,c,1,1,"span",1),r.ad(2,l,1,2,"a",1),r.ad(3,d,2,3,"span",2),r.ad(4,u,1,2,"span",3),r.mc()),2&amp;e&amp;&amp;(r.Tb(1),r.Dc("ngIf",t.showAuthorAsLink),r.Tb(1),r.Dc("ngIf",!t.showAuthorAsLink),r.Tb(1),r.Dc("ngIf",t.activity),r.Tb(1),r.Dc("ngIf",!t.activity))},directives:[o.q],styles:['.timestamp[_ngcontent-%COMP%]:before{content:" ";white-space:pre}']})},"2orT":function(e,t,i){"use strict";i.d(t,"a",(function(){return g}));i("ii2/");var n=i("wZYP"),s=i("fXoL"),a=i("ofXK"),r=i("Eofd"),o=i("0loS");const c=function(e){return{"icon4 icon-small icon-arrow-right5":e}},l=function(e){return{workPackageId:e}};function d(e,t){if(1&amp;e&amp;&amp;(s.nc(0,"li",8),s.ic(1,"a",9),s.mc()),2&amp;e){const e=s.xc(),t=e.first,i=e.$implicit;s.Dc("ngClass",s.Ic(4,c,!t)),s.Tb(1),s.Dc("textContent",i.name)("uiParams",s.Ic(6,l,i.id)),s.Ub("title",i.name)}}function u(e,t){if(1&amp;e&amp;&amp;(s.lc(0),s.ad(1,d,2,8,"li",7),s.kc()),2&amp;e){const e=t.last;s.Tb(1),s.Dc("ngIf",!e)}}function h(e,t){if(1&amp;e&amp;&amp;(s.lc(0),s.nc(1,"li"),s.nc(2,"span"),s.cd(3),s.mc(),s.mc(),s.ad(4,u,2,1,"ng-container",6),s.kc()),2&amp;e){const e=s.xc(2);s.Tb(3),s.ed("",e.hierarchyLabel,": "),s.Tb(1),s.Dc("ngForOf",e.workPackage.ancestors)}}const p=function(e,t){return{"active-parent-select":e,"icon4 icon-small icon-arrow-right5":t}};function m(e,t){if(1&amp;e){const e=s.oc();s.nc(0,"div",1),s.nc(1,"ul",2),s.ad(2,h,5,2,"ng-container",3),s.nc(3,"li",4),s.nc(4,"wp-breadcrumb-parent",5),s.vc("onSwitch",(function(){s.Sc(e);const t=s.xc();return t.inputActive=!t.inputActive})),s.mc(),s.mc(),s.mc(),s.mc()}if(2&amp;e){const e=s.xc();s.Tb(2),s.Dc("ngIf",!e.inputActive&amp;&amp;e.hierarchyCount&gt;0),s.Tb(1),s.Dc("ngClass",s.Jc(3,p,e.inputActive,!e.inputActive&amp;&amp;e.hierarchyCount&gt;1)),s.Tb(1),s.Dc("workPackage",e.workPackage)}}class g{constructor(e){this.I18n=e,this.text={parent:this.I18n.t("js.relations_hierarchy.parent_headline"),hierarchy:this.I18n.t("js.relations_hierarchy.hierarchy_headline")},this.inputActive=!1}get hierarchyCount(){return this.workPackage.ancestors.length}get hierarchyLabel(){return 1===this.hierarchyCount?this.text.parent:this.text.hierarchy}}g.\u0275fac=function(e){return new(e||g)(s.hc(n.a))},g.\u0275cmp=s.bc({type:g,selectors:[["wp-breadcrumb"]],inputs:{workPackage:"workPackage"},decls:1,vars:1,consts:[["class","wp-breadcrumb -show",4,"ngIf"],[1,"wp-breadcrumb","-show"],[1,"breadcrumb"],[4,"ngIf"],[3,"ngClass"],[3,"workPackage","onSwitch"],[4,"ngFor","ngForOf"],["class","wp-breadcrumb--ellipsed",3,"ngClass",4,"ngIf"],[1,"wp-breadcrumb--ellipsed",3,"ngClass"],["uiSref","work-packages.show.activity",1,"breadcrumb-project-title","nocut",3,"textContent","uiParams"]],template:function(e,t){1&amp;e&amp;&amp;s.ad(0,m,5,6,"div",0),2&amp;e&amp;&amp;s.Dc("ngIf",t.workPackage)},directives:[a.q,a.n,r.a,a.p,o.AnchorUISref,o.UISref],styles:[".active-parent-select[_ngcontent-%COMP%]{width:100%}"]})},"2yvi":function(e,t,i){"use strict";i.d(t,"a",(function(){return m}));var n=i("8zkO"),s=i("wZYP"),a=(i("Mo6U"),i("kTsZ")),r=i("d/TE"),o=i("fXoL"),c=i("ofXK"),l=i("kor4"),d=i("N5AO");const u=["hiddenFileInput"],h=function(e){return{"-dragging":e}};function p(e,t){if(1&amp;e){const e=o.oc();o.nc(0,"div",1),o.vc("drop",(function(t){return o.Sc(e),o.xc().onDropFiles(t)}))("dragover",(function(t){return o.Sc(e),o.xc().onDragOver(t)}))("dragleave",(function(t){return o.Sc(e),o.xc().onDragLeave(t)})),o.nc(1,"input",2,3),o.vc("change",(function(){return o.Sc(e),o.xc().onFilePickerChanged()})),o.mc(),o.nc(3,"div",4),o.vc("accessibleClick",(function(t){return o.Sc(e),o.xc().triggerFileInput(t)})),o.nc(4,"div",5),o.ic(5,"op-icon",6),o.nc(6,"label",7),o.cd(7),o.ic(8,"br"),o.cd(9),o.mc(),o.mc(),o.mc(),o.mc()}if(2&amp;e){const e=o.xc();o.Ub("aria-label",e.text.uploadLabel),o.Tb(3),o.Dc("ngClass",o.Ic(4,h,e.draggingOver)),o.Tb(4),o.ed(" ",e.text.dropFiles," "),o.Tb(2),o.ed(" ",e.text.dropFilesHint," ")}}class m{constructor(e,t,i,n,s){this.I18n=e,this.ConfigurationService=t,this.notificationsService=i,this.elementRef=n,this.halResourceService=s,this.draggingOver=!1,this.text={uploadLabel:e.t("js.label_add_attachments"),dropFiles:e.t("js.label_drop_files"),dropFilesHint:e.t("js.label_drop_files_hint"),foldersWarning:e.t("js.label_drop_folders_hint")}}ngOnInit(){this.$element=jQuery(this.elementRef.nativeElement),this.ConfigurationService.initialized.then(()=&gt;this.maxFileSize=this.ConfigurationService.maximumAttachmentFileSize)}triggerFileInput(e){return this.filePicker.nativeElement.click(),e.preventDefault(),e.stopPropagation(),!1}onDropFiles(e){e.dataTransfer.dropEffect="copy",e.preventDefault(),e.stopPropagation();let t=e.dataTransfer.files,i=t?t.length:0,n=[];for(let s=0;s
<i;s++)n.push(t[s]);this.uploadfiles(n),this.draggingover=!1}ondragover(e){this.containsfiles(e.datatransfer)&&(e.datatransfer.dropeffect="copy",this.draggingover=!0),e.preventdefault(),e.stoppropagation()}ondragleave(e){this.draggingover=!1,e.preventdefault(),e.stoppropagation()}onfilepickerchanged(){const e="Array.from(this.filePicker.nativeElement.files);this.uploadFiles(e)}containsFiles(e){return" e.types.contains?e.types.contains("files"):e.types.indexof("files")="">
 =0}uploadFiles(e){const t=(e=e||[]).length;0!==(e=this.filterFolders(e)).length?this.resource.uploadAttachments(e):t&gt;0&amp;&amp;this.notificationsService.addNotice(this.text.foldersWarning)}filterFolders(e){return e.filter(e=&gt;""!==e.type||(0!==e.size&amp;&amp;4096!==e.size||(console.warn(`Skipping file because of file size (${e.size}) %O`,e),!1)))}}m.\u0275fac=function(e){return new(e||m)(o.hc(s.a),o.hc(n.a),o.hc(r.a),o.hc(o.q),o.hc(a.a))},m.\u0275cmp=o.bc({type:m,selectors:[["attachments-upload"]],viewQuery:function(e,t){var i;(1&amp;e&amp;&amp;o.hd(u,!0),2&amp;e)&amp;&amp;(o.Pc(i=o.wc())&amp;&amp;(t.filePicker=i.first))},inputs:{resource:"resource"},decls:1,vars:1,consts:[["class","wp-attachment-upload hide-when-print",3,"drop","dragover","dragleave",4,"ngIf"],[1,"wp-attachment-upload","hide-when-print",3,"drop","dragover","dragleave"],["type","file","id","attachment_files","name","attachment_files","hidden","","multiple","",3,"change"],["hiddenFileInput",""],["tabindex","0",1,"work-package--attachments--drop-box",3,"ngClass","accessibleClick"],[1,"work-package--attachments--label"],["icon-classes","icon-attachment"],["for","attachment_files"]],template:function(e,t){1&amp;e&amp;&amp;o.ad(0,p,10,6,"div",0),2&amp;e&amp;&amp;o.Dc("ngIf",t.resource.canAddAttachments)},directives:[c.q,c.n,l.a,d.a],encapsulation:2})},"32V0":function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i("fXoL"),s=(i("V4eP"),i("ofXK")),a=i("/Rze"),r=i("N5AO");function o(e,t){if(1&amp;e){const e=n.oc();n.nc(0,"div",2),n.nc(1,"accessible-by-keyboard",3),n.vc("execute",(function(){return n.Sc(e),n.xc().save()})),n.ic(2,"op-icon",4),n.mc(),n.nc(3,"accessible-by-keyboard",5),n.vc("execute",(function(){return n.Sc(e),n.xc().cancel()})),n.ic(4,"op-icon",6),n.mc(),n.mc()}if(2&amp;e){const e=n.xc();n.Tb(1),n.Dc("linkTitle",e.saveTitle),n.Ub("disabled",e.field.required&amp;&amp;e.field.isEmpty()||void 0),n.Tb(1),n.Dc("icon-title",e.saveTitle),n.Tb(1),n.Dc("linkTitle",e.cancelTitle),n.Tb(1),n.Dc("icon-title",e.cancelTitle)}}class c{constructor(){this.onSave=new n.s,this.onCancel=new n.s}save(){this.onSave.emit()}cancel(){this.onCancel.emit()}}c.\u0275fac=function(e){return new(e||c)},c.\u0275cmp=n.bc({type:c,selectors:[["edit-field-controls"]],inputs:{cancelTitle:"cancelTitle",saveTitle:"saveTitle",field:["fieldController","field"]},outputs:{onSave:"onSave",onCancel:"onCancel"},decls:2,vars:1,consts:[[1,"inplace-edit--dashboard"],["class","inplace-edit--controls",4,"ngIf"],[1,"inplace-edit--controls"],[1,"inplace-edit--control","inplace-edit--control--save",3,"linkTitle","execute"],["icon-classes","icon-checkmark",3,"icon-title"],[1,"inplace-edit--control","inplace-edit--control--cancel",3,"linkTitle","execute"],["icon-classes","icon-close",3,"icon-title"]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"div",0),n.ad(1,o,5,5,"div",1),n.mc()),2&amp;e&amp;&amp;(n.Tb(1),n.Dc("ngIf",t.field.handler.active))},directives:[s.q,a.a,r.a],encapsulation:2})},"3VS2":function(e,t,i){"use strict";i.d(t,"a",(function(){return P}));var n=i("JLFs");class s extends n.a{constructor(e,t,i){super(t,i),this.injector=e}}class a extends n.b{constructor(e,t,i,n){super(t,i,n),this.injector=e,this.basePath=t,this.resource=n}id(e){return new(this.resource||s)(this.injector,this.path,e)}}var r=i("mrSG"),o=i("tk/3"),c=i("6HfZ"),l=i("Ng29"),d=i("lJxs"),u=i("JIr8"),h=i("vLqr"),p=i("r0MM");class m{constructor(e,t){this.injector=e,this.resourceClass=t}get(e,t,i={}){const n={headers:i,params:new o.f({encoder:new l.a,fromObject:t}),withCredentials:!0,responseType:"json"};return this._request("get",e,n)}request(e,t,i={},n={}){if("get"===e)return this.get(t,i,n);const s={body:i||{},headers:n,withCredentials:!0,responseType:"json"};return this._request(e,t,s)}_request(e,t,i){return this.http.request(e,t,i).pipe(Object(d.a)(e=&gt;this.deserialize(e)),Object(u.a)(i=&gt;(console.error(`Failed to ${e} ${t}: ${i.name}`),Object(h.throwError)(i))))}deserialize(e){if(this.resourceClass){return new c.TypedJSON(this.resourceClass).parse(e)}return e}}Object(r.c)([Object(p.a)(),Object(r.e)("design:type",o.b)],m.prototype,"http",void 0);let g=class{};Object(r.c)([c.jsonMember,Object(r.e)("design:type",Number)],g.prototype,"project_id",void 0),Object(r.c)([c.jsonMember,Object(r.e)("design:type",String)],g.prototype,"name",void 0),g=Object(r.c)([c.jsonObject],g);var f=i("wd/R");let b=class{};Object(r.c)([Object(c.jsonArrayMember)(String),Object(r.e)("design:type",Array)],b.prototype,"topic_actions",void 0),Object(r.c)([Object(c.jsonArrayMember)(String),Object(r.e)("design:type",Array)],b.prototype,"topic_status",void 0),b=Object(r.c)([c.jsonObject],b);let v=class{};Object(r.c)([c.jsonMember,Object(r.e)("design:type",String)],v.prototype,"guid",void 0),Object(r.c)([c.jsonMember,Object(r.e)("design:type",String)],v.prototype,"topic_type",void 0),Object(r.c)([c.jsonMember,Object(r.e)("design:type",String)],v.prototype,"topic_status",void 0),Object(r.c)([c.jsonMember,Object(r.e)("design:type",String)],v.prototype,"priority",void 0),Object(r.c)([Object(c.jsonArrayMember)(String),Object(r.e)("design:type",Array)],v.prototype,"reference_links",void 0),Object(r.c)([c.jsonMember,Object(r.e)("design:type",String)],v.prototype,"title",void 0),Object(r.c)([Object(c.jsonMember)({preserveNull:!0}),Object(r.e)("design:type",Object)],v.prototype,"index",void 0),Object(r.c)([Object(c.jsonArrayMember)(String),Object(r.e)("design:type",Array)],v.prototype,"labels",void 0),Object(r.c)([Object(c.jsonMember)({deserializer:e=&gt;f(e),serializer:e=&gt;e.toISOString()}),Object(r.e)("design:type",Object)],v.prototype,"creation_date",void 0),Object(r.c)([c.jsonMember,Object(r.e)("design:type",String)],v.prototype,"creation_author",void 0),Object(r.c)([Object(c.jsonMember)({deserializer:e=&gt;f(e),serializer:e=&gt;e.toISOString()}),Object(r.e)("design:type",Object)],v.prototype,"modified_date",void 0),Object(r.c)([Object(c.jsonMember)({preserveNull:!0}),Object(r.e)("design:type",Object)],v.prototype,"modified_author",void 0),Object(r.c)([c.jsonMember,Object(r.e)("design:type",String)],v.prototype,"assigned_to",void 0),Object(r.c)([Object(c.jsonMember)({preserveNull:!0}),Object(r.e)("design:type",Object)],v.prototype,"stage",void 0),Object(r.c)([c.jsonMember,Object(r.e)("design:type",String)],v.prototype,"description",void 0),Object(r.c)([Object(c.jsonMember)({deserializer:e=&gt;f(e),serializer:e=&gt;e.format("YYYY-MM-DD")}),Object(r.e)("design:type",Object)],v.prototype,"due_date",void 0),Object(r.c)([c.jsonMember,Object(r.e)("design:type",b)],v.prototype,"authorization",void 0),v=Object(r.c)([c.jsonObject],v);class w extends s{constructor(){super(...arguments),this.bcfTopicService=new m(this.injector)}get(e={},t={}){return this.bcfTopicService.get(this.toPath(),e,t)}delete(e={}){return this.bcfTopicService.request("delete",this.toPath(),{},e)}}class y extends a{constructor(){super(...arguments),this.bcfTopicService=new m(this.injector)}get(e={},t={}){throw new Error("Not implemented")}post(e){return this.bcfTopicService.request("post",this.toPath(),e)}}class k extends s{constructor(){super(...arguments),this.bcfTopicService=new m(this.injector,v),this.comments=new a(this.injector,this.path,"comments"),this.viewpoints=new y(this.injector,this.path,"viewpoints",w)}get(e={},t={}){return this.bcfTopicService.get(this.toPath(),e,t)}}class C extends a{constructor(e,t,i){super(e,t,i,k),this.injector=e,this.basePath=t,this.bcfTopicService=new m(this.injector,v)}get(e={},t={}){throw new Error("Not implemented")}post(e){return this.bcfTopicService.request("post",this.toPath(),e)}}let x=class{};Object(r.c)([Object(c.jsonArrayMember)(String),Object(r.e)("design:type",Array)],x.prototype,"topic_actions",void 0),Object(r.c)([Object(c.jsonArrayMember)(String),Object(r.e)("design:type",Array)],x.prototype,"project_actions",void 0),Object(r.c)([Object(c.jsonArrayMember)(String),Object(r.e)("design:type",Array)],x.prototype,"comment_actions",void 0),x=Object(r.c)([c.jsonObject],x);class j extends s{constructor(){super(...arguments),this.bcfExtensionService=new m(this.injector,x)}get(e={},t={}){return this.bcfExtensionService.get(this.toPath(),e,t)}}class S extends s{constructor(){super(...arguments),this.bcfProjectService=new m(this.injector,g),this.topics=new C(this.injector,this.path,"topics"),this.extensions=new j(this.injector,this.path,"extensions")}get(e={},t={}){return this.bcfProjectService.get(this.toPath(),e,t)}}var T=i("fXoL");class P{constructor(e){this.injector=e,this.bcfApiVersion="2.1",this.appBasePath=window.appBasePath||"",this.bcfApiBase=`${this.appBasePath}/api/bcf/${this.bcfApiVersion}`,this.projects=new a(this.injector,this.bcfApiBase,"projects",S)}parse(e){if(!e.startsWith(this.bcfApiBase))throw new Error(`Cannot parse ${e} into BCF resource.`);const t=e.replace(this.bcfApiBase+"/","").split("/");let i=this;for(let n=0;n
 <t.length;n++){let 0:i}}p.\u0275fac="function(e){return" a))break;i="i.id(e)}}return" e="t[n];if(e" i="this?void" i)i="i[e];else{if(!(i" in="" instanceof="" n,s='i("Mo6U");!function(e){function' new(e||p)(t.rc(t.a))},p.\u0275prov='T.dc({token:P,factory:P.\u0275fac,providedIn:"root"})},"4EDS":function(e,t,i){"use' n}));var="" strict";i.d(t,"a",(function(){return="" t(e){return(t,i)="">
  !t&amp;&amp;!i||!!t&amp;&amp;!!i&amp;&amp;t[e]===i[e]}function i(e,t){return!e&amp;&amp;!t||!!e&amp;&amp;!!t&amp;&amp;e.$href===t.$href}e.halHref=function(e,t){return t.$href},e.compareByName=function(e,i){return t("name")(e,i)},e.compareByAttribute=t,e.trackByName=function(e,t){return _.get(t,"name")},e.trackByHref=function(e,t){return _.get(t,"href")},e.trackByProperty=function(e){return(t,i)=&gt;_.get(i,e)},e.trackByHrefAndProperty=function(e){return(t,i)=&gt;{let n=_.get(i,"href"),s=_.get(i,e,"none");return`${n}#${e}=${s}`}},e.trackByTrackingIdentifier=function(e,t){return _.get(t,"trackingIdentifier",t&amp;&amp;t.href)},e.compareByHref=i,e.compareByHrefOrString=function(e,t){return e instanceof s.a&amp;&amp;t instanceof s.a?i(e,t):!e&amp;&amp;!t||e===t}}(n||(n={}))},"4Obc":function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));i("ii2/");var n=i("4zHP"),s=i("4EDS"),a=i("fXoL"),r=i("vd15"),o=i("ofXK"),c=i("Tcty");function l(e,t){if(1&amp;e&amp;&amp;(a.nc(0,"div",3),a.ic(1,"activity-entry",4),a.mc()),2&amp;e){const e=t.$implicit,i=a.xc(2);a.Tb(1),a.Dc("workPackage",i.workPackage)("activity",e.activity)("activityNo",e.number(e.isReversed))("isInitial",e.isInitial())}}function d(e,t){if(1&amp;e&amp;&amp;(a.nc(0,"div",1),a.ad(1,l,2,4,"div",2),a.mc()),2&amp;e){const e=a.xc();a.Tb(1),a.Dc("ngForOf",e.latestActivityInfo)("ngForTrackBy",e.trackByHref)}}class u extends n.a{constructor(){super(...arguments),this.latestActivityInfo=[],this.trackByHref=s.a.trackByHref}ngOnInit(){this.workPackageId=this.workPackage.id,super.ngOnInit()}shouldShowToggler(){return!1}updateActivities(e){super.updateActivities(e),this.latestActivityInfo=this.latestActivities()}latestActivities(e=3){if(this.reverse){return this.unfilteredActivities.slice(0,e).map((e,t)=&gt;this.info(e,t))}{let t=this.unfilteredActivities.slice(-e),i=this.unfilteredActivities.length-t.length;return t.map((e,t)=&gt;this.info(e,i+t))}}}u.\u0275fac=function(e){return h(e||u)},u.\u0275cmp=a.bc({type:u,selectors:[["newest-activity-on-overview"]],inputs:{workPackage:"workPackage"},features:[a.Qb],decls:2,vars:1,consts:[[3,"workPackage"],[1,"work-package-details-activities-list"],["class","work-package-details-activities-activity",4,"ngFor","ngForOf","ngForTrackBy"],[1,"work-package-details-activities-activity"],[3,"workPackage","activity","activityNo","isInitial"]],template:function(e,t){1&amp;e&amp;&amp;(a.nc(0,"work-package-comment",0),a.ad(1,d,2,2,"ng-template"),a.mc()),2&amp;e&amp;&amp;a.Dc("workPackage",t.workPackage)},directives:[r.a,o.p,c.a],encapsulation:2});const h=a.pc(u)},"4fM7":function(e,t,i){"use strict";i.d(t,"a",(function(){return p}));var n=i("Nolp"),s=i("fXoL"),a=i("ofXK"),r=i("711n"),o=i("XZlt"),c=i("aveh"),l=i("2bW2"),d=i("f24R");const u=function(){return["status","type"]};function h(e,t){if(1&amp;e){const e=s.oc();s.nc(0,"div",1),s.nc(1,"edit-form",2),s.vc("onSaved",(function(t){return s.Sc(e),s.xc().onSaved(t)})),s.nc(2,"div",3),s.nc(3,"div",4),s.ic(4,"wp-type-status",5),s.nc(5,"div",6),s.nc(6,"a",7),s.vc("click",(function(){return s.Sc(e),s.xc().switchToFullscreen()})),s.ic(7,"span",8),s.mc(),s.mc(),s.mc(),s.ic(8,"wp-single-view",9),s.mc(),s.nc(9,"div",10),s.nc(10,"wp-edit-actions-bar",11),s.vc("onCancel",(function(){return s.Sc(e),s.xc().cancelAndBackToList()})),s.mc(),s.mc(),s.nc(11,"div",12),s.ic(12,"wp-resizer",13),s.mc(),s.mc(),s.mc()}if(2&amp;e){const e=s.xc();s.Tb(1),s.Dc("resource",e.newWorkPackage)("skippedFields",s.Hc(8,u))("inEditMode",!0),s.Tb(3),s.Dc("workPackage",e.newWorkPackage),s.Tb(4),s.Dc("workPackage",e.newWorkPackage)("showProject",e.copying),s.Tb(4),s.Dc("elementClass","work-packages-partitioned-page--content-right")("localStorageKey","openProject-splitViewFlexBasis")}}class p extends n.a{}p.\u0275fac=function(e){return m(e||p)},p.\u0275cmp=s.bc({type:p,selectors:[["wp-copy-split-view"]],features:[s.Qb],decls:1,vars:1,consts:[["class","work-packages--details work-packages--new",4,"ngIf"],[1,"work-packages--details","work-packages--new"],[3,"resource","skippedFields","inEditMode","onSaved"],[1,"work-packages--details-content","-create-mode"],[1,"work-packages--new-details-header"],[3,"workPackage"],[1,"wp--details--switch-fullscreen-wrapper"],[1,"work-packages-show-view-button","wp--details--switch-fullscreen",3,"click"],[1,"icon-context","icon-to-fullscreen"],[3,"workPackage","showProject"],[1,"work-packages--details-toolbar-container"],[3,"onCancel"],[1,"work-packages--details--resizer","hidden-for-mobile","hide-when-print"],[3,"elementClass","localStorageKey"]],template:function(e,t){1&amp;e&amp;&amp;s.ad(0,h,13,9,"div",0),2&amp;e&amp;&amp;s.Dc("ngIf",t.newWorkPackage)},directives:[a.q,r.a,o.a,c.a,l.a,d.a],encapsulation:2,changeDetection:0});const m=s.pc(p)},"4fzr":function(e,t,i){"use strict";i.d(t,"a",(function(){return h}));var n=i("wZYP"),s=(i("ii2/"),i("Jui0")),a=i("VgZ9"),r=i("IzEk"),o=i("ug4p"),c=i("AEvm"),l=i("fXoL"),d=i("HEQ6"),u=i("t+3x");class h extends c.a{constructor(e,t,i,n){super(),this.wpRelationsHierarchyService=e,this.wpCacheService=t,this.PathHelper=i,this.I18n=n,this.showEditForm=!1,this.text={parentHeadline:this.I18n.t("js.relations_hierarchy.parent_headline"),childrenHeadline:this.I18n.t("js.relations_hierarchy.children_headline")}}ngOnInit(){this.workPackagePath=this.PathHelper.workPackagePath(this.workPackage.id),this.canModifyHierarchy=!!this.workPackage.changeParent,this.canAddRelation=!!this.workPackage.addRelation,this.childrenQueryProps={filters:JSON.stringify([{parent:{operator:"=",values:[this.workPackage.id]}}]),"columns[]":["id","type","subject","status"],showHierarchies:!1},this.wpCacheService.loadWorkPackage(this.workPackage.id).values$().pipe(this.untilDestroyed()).subscribe(e=&gt;{this.workPackage=e;let t=[];this.workPackage.parent&amp;&amp;(t.push(this.workPackage.parent.id.toString()),this.wpCacheService.loadWorkPackage(this.workPackage.parent.id).values$().pipe(Object(r.a)(1)).subscribe(e=&gt;{this.workPackage.parent=e})),this.wpCacheService.requireAll(t)})}}h.\u0275fac=function(e){return new(e||h)(l.hc(a.a),l.hc(o.a),l.hc(s.a),l.hc(n.a))},h.\u0275cmp=l.bc({type:h,selectors:[["wp-relations-hierarchy"]],inputs:{workPackage:"workPackage",relationType:"relationType"},features:[l.Qb],decls:6,vars:4,consts:[[1,"wp-relations-hierarchy-section","wp-relations--children"],[1,"attributes-group--header"],[1,"attributes-group--header-container"],[1,"attributes-group--header-text",3,"textContent"],["wp-isolated-query-space",""],[3,"workPackage","addExistingChildEnabled","query"]],template:function(e,t){1&amp;e&amp;&amp;(l.nc(0,"div",0),l.nc(1,"div",1),l.nc(2,"div",2),l.ic(3,"h3",3),l.mc(),l.mc(),l.lc(4,4),l.ic(5,"wp-children-query",5),l.kc(),l.mc()),2&amp;e&amp;&amp;(l.Tb(3),l.Dc("textContent",t.text.childrenHeadline),l.Tb(2),l.Dc("workPackage",t.workPackage)("addExistingChildEnabled",!0)("query",t.childrenQueryProps))},directives:[d.a,u.a],encapsulation:2})},"4jc8":function(e,t,i){"use strict";i.d(t,"i",(function(){return s})),i.d(t,"h",(function(){return a})),i.d(t,"j",(function(){return r})),i.d(t,"m",(function(){return o})),i.d(t,"k",(function(){return c})),i.d(t,"l",(function(){return l})),i.d(t,"n",(function(){return u})),i.d(t,"e",(function(){return h})),i.d(t,"g",(function(){return p})),i.d(t,"a",(function(){return m})),i.d(t,"d",(function(){return g})),i.d(t,"c",(function(){return f})),i.d(t,"f",(function(){return b})),i.d(t,"b",(function(){return v}));var n=i("wd/R");const s="timeline-element",a="timeline-element--bg",r="wp-timeline--grid-element",o="selection-start",c="wp-timeline--header-element",l="wp-timeline-header";class d{constructor(){this.zoomLevel="days"}}const u=["days","weeks","months","quarters","years"];function h(e){switch(e){case"days":return 30;case"weeks":return 15;case"months":return 6;case"quarters":return 2;case"years":return.5}throw new Error("invalid zoom level: "+e)}const p=120;class m{constructor(){this.now=n({hour:0,minute:0,seconds:0}),this.dateDisplayStart=n({hour:0,minute:0,seconds:0}),this.dateDisplayEnd=this.dateDisplayStart.clone().add(1,"day"),this.settings=new d,this.activeSelectionMode=null,this.selectionModeStart=null}get pixelPerDay(){return h(this.settings.zoomLevel)}get maxWidthInPx(){return this.maxSteps*this.pixelPerDay}get maxSteps(){return this.dateDisplayEnd.diff(this.dateDisplayStart,"days")}get dayCountForMarginLeft(){return Math.ceil(p/this.pixelPerDay)}}function g(e,t){return t*e.pixelPerDay}function f(e,t){return g(e,t)+"px"}function b(e,t,i,s){const a=[],r=[],o=i.clone().startOf(t),c=s.clone().endOf(t);for(;o.isBefore(c);){const c=n.max(o,i).clone(),l=n.min(o.clone().endOf(t),s).clone();o.add(1,t);const d=e.visibleViewportAtCalculationTime;c.isSameOrAfter(d[0])&amp;&amp;c.isSameOrBefore(d[1])||l.isSameOrAfter(d[0])&amp;&amp;l.isSameOrBefore(d[1])?a.push([c,l]):r.push([c,l])}const l=r.splice(0,1)[0],d=r.pop();return{inViewportAndBoundaries:_.concat([l].filter(e=&gt;!_.isNil(e)),a,[d].filter(e=&gt;!_.isNil(e))),rest:r}}function v(e,t,i){let s=n(),a=n();return e.forEach(e=&gt;{const i=e.workPackageId;if(!i)return;const r=t.get(i).value;if(!r)return;const o=r.startDate?r.startDate:r.date;o&amp;&amp;n(o).isBefore(s)&amp;&amp;(s=n(o));const c=r.dueDate?r.dueDate:r.date;c&amp;&amp;n(c).isAfter(a)&amp;&amp;(a=n(c))}),a.diff(s,"days")+1}},"4lR/":function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i("+rOU"),s=i("iB+3"),a=i("0lDN"),r=i("lfQJ"),o=i("E5Dd"),c=i("7ond"),l=i("fXoL");class d{constructor(e,t,i,s,a){this.componentFactoryResolver=e,this.FocusHelper=t,this.appRef=i,this.$transitions=s,this.injector=a,this.active=null,this.isOpening=!1;const r=this.portalHostElement=document.createElement("div");r.classList.add("op-context-menu--overlay"),document.body.appendChild(r),this.bodyPortalHost=new n.d(r,this.componentFactoryResolver,this.appRef,this.injector),s.onStart({},()=&gt;this.close()),jQuery(window).on("keydown",e=&gt;(this.active&amp;&amp;e.which===o.a.ESCAPE&amp;&amp;this.close(),!0));const c=this;document.getElementById("wrapper").addEventListener("click",(function(e){c.active&amp;&amp;!c.portalHostElement.contains(e.target)&amp;&amp;c.close()}),!0)}show(e,t,i=r.a){this.close(),this.isOpening=!0;const s=new n.c(i,null,this.injectorFor(e.locals));this.bodyPortalHost.attach(s),this.portalHostElement.style.display="block",this.active=e,setTimeout(()=&gt;{this.reposition(t),this.active&amp;&amp;this.active.onOpen(this.activeMenu),this.isOpening=!1})}isActive(e){return this.active&amp;&amp;this.active===e}close(){this.isOpening||(this.bodyPortalHost.detach(),this.portalHostElement.style.display="none",this.active&amp;&amp;this.active.onClose(),this.active=null)}reposition(e){this.active&amp;&amp;this.activeMenu.position(this.active.positionArgs(e)).css("visibility","visible")}get activeMenu(){return jQuery(this.portalHostElement).find(".dropdown")}injectorFor(e){const t=new WeakMap;return e.service=this,t.set(a.a,e),new n.f(this.injector,t)}}d.\u0275fac=function(e){return new(e||d)(l.rc(l.l),l.rc(c.a),l.rc(l.f),l.rc(s.O),l.rc(l.A))},d.\u0275prov=l.dc({token:d,factory:d.\u0275fac,providedIn:"root"})},"4n9w":function(e,t,i){"use strict";i.d(t,"a",(function(){return f}));var n=i("ug4p"),s=i("XNiG"),a=i("kTsZ"),r=i("g1AQ"),o=i("fMMW"),c=i("SKFm"),l=i("pLZG"),d=i("E2tj"),u=i("5JuZ"),h=i("/C7M"),p=i("Kg8T"),m=i("AEvm"),g=i("fXoL");class f extends m.a{constructor(e,t,i,n,a,r,o,c,d){super(),this.injector=e,this.hooks=t,this.wpCacheService=i,this.halResourceService=n,this.querySpace=a,this.authorisationService=r,this.halEditing=o,this.workPackageDmService=c,this.halEvents=d,this.newWorkPackageCreatedSubject=new s.a,this.halEditing.comittedChanges.pipe(this.untilDestroyed(),Object(l.a)(e=&gt;"WorkPackage"===e.resource._type&amp;&amp;e.wasNew)).subscribe(e=&gt;{this.newWorkPackageCreated(e.resource)}),this.halEditing.changes$("/api/v3/work_packages/new").pipe(this.untilDestroyed(),Object(l.a)(e=&gt;!e)).subscribe(()=&gt;{this.reset()})}newWorkPackageCreated(e){this.halEvents.push(e,{eventType:"created"}),this.reset(),this.newWorkPackageCreatedSubject.next(e)}onNewWorkPackage(){return this.newWorkPackageCreatedSubject.asObservable()}createNewWorkPackage(e){return this.getEmptyForm(e).then(e=&gt;this.fromCreateForm(e))}createNewTypedWorkPackage(e,t){return this.workPackageDmService.typedCreateForm(t,e).then(e=&gt;this.fromCreateForm(e))}fromCreateForm(e){let t=this.halResourceService.createHalResourceOfType("WorkPackage",e.payload.$plain());t.initializeNewResource(e);const i=this.halEditing.edit(t,e);return this.hooks.call("workPackageNewInitialization",i),i}copyWorkPackage(e){let t=e.pristineResource.$source;return this.workPackageDmService.emptyCreateForm(t).then(e=&gt;this.fromCreateForm(e))}copyFrom(e){let t=this.halResourceService.createHalResourceOfType("WorkPackage",e.payload.$plain());return t.initializeNewResource(e),this.halEditing.edit(t,e)}getEmptyForm(e){return this.form||(this.form=this.workPackageDmService.emptyCreateForm({},e)),this.form}cancelCreation(){this.halEditing.stopEditing({href:"/api/v3/work_packages/new"}),this.reset()}changesetUpdates$(){return this.halEditing.state("/api/v3/work_packages/new").values$()}createOrContinueWorkPackage(e,t){let i=this.continueExistingEdit(t);return i||(i=this.createNewWithDefaults(e,t)),i.then(e=&gt;(this.authorisationService.initModelAuth("work_package",e.pristineResource),this.halEditing.updateValue("/api/v3/work_packages/new",e),this.wpCacheService.updateWorkPackage(e.pristineResource),e))}reset(){this.wpCacheService.clearSome("new"),this.form=void 0}continueExistingEdit(e){const t=this.halEditing.state("/api/v3/work_packages/new").value;if(void 0!==t){const i=t.projectedResource.type,n=!t.isEmpty(),s=!i&amp;&amp;!e,a=e&amp;&amp;i&amp;&amp;i.idFromLink===e.toString();if(n&amp;&amp;(s||a))return Promise.resolve(t)}return null}createNewWithDefaults(e,t){let i=null;return i=t?this.createNewTypedWorkPackage(e,t):this.createNewWorkPackage(e),i.then(e=&gt;{if(!e)throw"No new work package was created";let i=[];return t&amp;&amp;(i=["type"]),this.applyDefaults(e,e.projectedResource,i),e})}applyDefaults(e,t,i){let n=this.querySpace.query.value;if(n){new o.a(this.injector,e,n.filters,i).applyDefaultsFromFilters()}}}f.\u0275fac=function(e){return new(e||f)(g.rc(g.A),g.rc(r.a),g.rc(n.a),g.rc(a.a),g.rc(d.a),g.rc(p.a),g.rc(c.a),g.rc(u.a),g.rc(h.a))},f.\u0275prov=g.dc({token:f,factory:f.\u0275fac})},"4nS0":function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("mrSG"),s=i("iMRi"),a=i("r0MM");class r{constructor(e,t){this.injector=e,this.workPackageTable=t}isApplicable(e){return!0}}Object(n.c)([Object(a.a)(),Object(n.e)("design:type",s.a)],r.prototype,"states",void 0)},"4rda":function(e,t,i){"use strict";i.d(t,"b",(function(){return o})),i.d(t,"a",(function(){return c}));var n=i("mrSG"),s=i("M0J3"),a=i("wZYP"),r=i("r0MM");const o="custom-option";class c extends s.a{constructor(e,t){super(),this.name=e,this.context=t,this.mode=null,this.activeChange=null,this.texts={empty:this.I18n.t("js.label_no_value"),placeholder:this.I18n.t("js.placeholders.default")}}apply(e,t){this.resource=e,this.schema=t}get isFormattable(){return!1}get injector(){return this.context.injector}get value(){return this.schema?this.activeChange?this.activeChange.projectedResource[this.name]:this.attribute:null}get attribute(){return this.resource[this.name]}get type(){return this.constructor.type}get valueString(){return this.value}get placeholder(){return"-"}get label(){return this.schema.name||this.name}get title(){return this.isFormattable?null:this.valueString}render(e,t,i={}){e.textContent=t}renderEmpty(e){const t=document.createElement("div");t.setAttribute("title",this.texts.empty),t.textContent=this.texts.placeholder,t.classList.add(o,"-empty"),e.appendChild(t)}}Object(n.c)([Object(r.a)(),Object(n.e)("design:type",a.a)],c.prototype,"I18n",void 0)},"4zHP":function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("mMv8"),s=i("ug4p"),a=i("wZYP"),r=i("iB+3"),o=i("AEvm"),c=i("fXoL");class l extends o.a{constructor(e,t,i,n,s){super(),this.wpCacheService=e,this.I18n=t,this.cdRef=i,this.$transition=n,this.wpActivity=s,this.unfilteredActivities=[],this.visibleActivities=[],this.onlyComments=!1,this.text={commentsOnly:this.I18n.t("js.label_activity_show_only_comments"),showAll:this.I18n.t("js.label_activity_show_all")},this.reverse=s.isReversed,this.togglerText=this.text.commentsOnly}ngOnInit(){this.wpCacheService.observe(this.workPackageId).pipe(this.untilDestroyed()).subscribe(e=&gt;{this.workPackage=e,this.wpActivity.require(this.workPackage).then(e=&gt;{this.updateActivities(e),this.cdRef.detectChanges()})})}updateActivities(e){this.unfilteredActivities=e;const t=this.getVisibleActivities();this.visibleActivities=t.map((e,t)=&gt;this.info(e,t)),this.showToggler=this.shouldShowToggler()}shouldShowToggler(){const e=this.unfilteredActivities.length,t=this.getActivitiesWithComments().length;return e&gt;1&amp;&amp;t&gt;0&amp;&amp;t
  <this.unfilteredactivities.length}getvisibleactivities(){return this.onlycomments?this.getactivitieswithcomments():this.unfilteredactivities}getactivitieswithcomments(){return="" this.unfilteredactivities.filter(e="">
   !!_.get(e,"comment.html"))}toggleComments(){this.onlyComments=!this.onlyComments,this.updateActivities(this.unfilteredActivities),this.onlyComments?this.togglerText=this.text.showAll:this.togglerText=this.text.commentsOnly}info(e,t){return this.wpActivity.info(this.unfilteredActivities,e,t)}}l.\u0275fac=function(e){return new(e||l)(c.hc(s.a),c.hc(a.a),c.hc(c.i),c.hc(r.J),c.hc(n.a))},l.\u0275dir=c.cc({type:l,features:[c.Qb]})},"5+Sy":function(e,t,i){"use strict";function n(e){return`wp-row-${e}-table`}function s(){return"wp-table--relations-aditional-row"}function a(e){return jQuery("."+n(e))}function r(e){return jQuery(`.${e}-table`)}function o(e,t){let i=e.previousElementSibling;for(;i;){if(i.matches(t))return i;i=i.previousElementSibling}return null}function c(e){try{const t=a(e),i=t.scrollParent(),n=i.scrollTop(),s=n+i.height(),r=t[0].offsetTop,o=r+t.height();r
   <n?i[0].scrolltop=r:o>
    s&amp;&amp;(i[0].scrollTop=o-i.height())}catch(t){console.warn("Can't scroll row element into view: "+t)}}i.d(t,"e",(function(){return n})),i.d(t,"d",(function(){return s})),i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return r})),i.d(t,"a",(function(){return o})),i.d(t,"f",(function(){return c}))},"57Du":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("V4eP"),s=i("+rOU");function a(e,t,i,a){const r=new WeakMap;return r.set(n.b,t),r.set(n.c,i),r.set(n.d,a),new s.f(e,r)}},"59tY":function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("AEvm"),s=i("fXoL"),a=i("wZYP"),r=i("juWA");class o extends n.a{constructor(e,t){super(),this.I18n=e,this.timezoneService=t}ngOnInit(){_.remove(this.filter.values,e=&gt;!this.timezoneService.isValidISODateTime(e))}isoDateParser(e){if(!this.timezoneService.isValidISODate(e))return"";var t=this.timezoneService.parseISODatetime(e);return this.timezoneService.formattedISODateTime(t)}isoDateFormatter(e){if(!this.timezoneService.isValidISODateTime(e))return"";var t=this.timezoneService.parseISODatetime(e);return this.timezoneService.formattedISODate(t)}get isTimeZoneDifferent(){let e=this.lowerBoundary||this.upperBoundary;return!!e&amp;&amp;(0!==e.hours()||0!==e.minutes())}get timeZoneText(){return this.lowerBoundary&amp;&amp;this.upperBoundary?this.I18n.t("js.filter.time_zone_converted.two_values",{from:this.lowerBoundary.format("YYYY-MM-DD HH:mm"),to:this.upperBoundary.format("YYYY-MM-DD HH:mm")}):this.upperBoundary?this.I18n.t("js.filter.time_zone_converted.only_end",{to:this.upperBoundary.format("YYYY-MM-DD HH:mm")}):this.lowerBoundary?this.I18n.t("js.filter.time_zone_converted.only_start",{from:this.lowerBoundary.format("YYYY-MM-DD HH:mm")}):""}}o.\u0275fac=function(e){return new(e||o)(s.hc(a.a),s.hc(r.a))},o.\u0275dir=s.cc({type:o,features:[s.Qb]})},"5HGI":function(e,t,i){"use strict";i.d(t,"a",(function(){return R}));var n=i("mrSG"),s=i("wZYP"),a=i("E2tj"),r=i("qHU1"),o=i("iMRi"),c=i("ug4p"),l=i("8jMx"),d=i("4nS0"),u=i("xV+i"),h=i("0To3"),p=i("CBsm"),m=i("wyKs"),g=i("r0MM");class f extends h.a{constructor(e,t,i){super(e,t,i),this.injector=e,this.workPackageTable=t,this.rowBuilder=i,this.rendered={},this.additionalParents={},this.deferred={},this.parentsWithVisibleChildren={}}prepare(){super.prepare(),this.hierarchies=this.wpTableHierarchies.current,_.each(this.workPackageTable.originalRowIndex,e=&gt;{e.object.ancestors.forEach(e=&gt;{this.parentsWithVisibleChildren[e.id]=!0})}),this.rowBuilder.parentsWithVisibleChildren=this.parentsWithVisibleChildren}doRender(){this.workPackageTable.originalRows.forEach(e=&gt;{const t=this.workPackageTable.originalRowIndex[e],i=t.object;if(!this.deferInsertion(i)){if(i.ancestors.length)this.buildWithHierarchy(t);else{let[e,n]=this.rowBuilder.buildEmpty(i);t.element=e,this.tableBody.appendChild(e),this.markRendered(e,i,n)}this.renderAllDeferredChildren(i)}})}deferInsertion(e){const t=e.ancestors;if(0===t.length)return!1;let i=t.concat([e]);for(let n=i.length-2;n&gt;=0;--n){const e=i[n],t=this.workPackageTable.originalRowIndex[e.id];if(this.rendered[e.id])return!1;if(t){let t=this.deferred[e.id]||[],s=i.slice(n+1,i.length);return s=s.map(e=&gt;this.wpCacheService.state(e.id).value),t=t.concat(s),this.deferred[e.id]=_.uniqBy(t,e=&gt;e.id),!0}}return!1}renderAllDeferredChildren(e){const t=e.id;(this.deferred[t]||[]).forEach(e=&gt;{this.insertUnderParent(this.getOrBuildRow(e),e.parent),this.renderAllDeferredChildren(e)})}getOrBuildRow(e){let t=this.workPackageTable.originalRowIndex[e.id];return t||(t={object:e}),t}buildWithHierarchy(e){const t=e.object.ancestors,i=[];t.forEach((e,n)=&gt;{const s=this.states.workPackages.get(e.id).getValueOr(e);if(!this.rendered[s.id]){let[e,a]=this.rowBuilder.buildAncestorRow(s,i,n);if(0===n)this.tableBody.appendChild(e),this.markRendered(e,s,a,!0);else{const i=t[n-1];this.insertAtExistingHierarchy(s,e,i,a,!0)}this.additionalParents[s.id]=s}i.push(Object(p.c)(s.id)),t.slice(0,n).forEach(e=&gt;{i.push(Object(p.c)(e.id))})});const n=_.last(t);this.insertUnderParent(e,n)}insertUnderParent(e,t){const[i,n]=this.rowBuilder.buildEmpty(e.object);e.element=i,this.insertAtExistingHierarchy(e.object,i,t,n,!1)}markRendered(e,t,i=!1,n=!1){this.rendered[t.id]=!0,this.renderedOrder.push(this.buildRenderInfo(e,t,i,n))}insertAtExistingHierarchy(e,t,i,n,s){const a=`.__hierarchy-root-${i.id}`,r=`.__hierarchy-group-${i.id}`;this.spliceRow(t,`${a},${r}`,this.buildRenderInfo(t,e,n,s)),this.rendered[e.id]=!0}buildRenderInfo(e,t,i,n){let s={element:e,classIdentifier:"",additionalClasses:[],workPackage:t,renderType:"primary",hidden:i},[a,r]=this.rowBuilder.ancestorRowData(t);return n?(s.additionalClasses=[u.b].concat(a),s.classIdentifier=Object(p.a)(t.id)):(s.additionalClasses=a,s.classIdentifier=this.rowBuilder.classIdentifier(t)),s}}Object(n.c)([Object(g.a)(),Object(n.e)("design:type",a.a)],f.prototype,"querySpace",void 0),Object(n.c)([Object(g.a)(),Object(n.e)("design:type",o.a)],f.prototype,"states",void 0),Object(n.c)([Object(g.a)(),Object(n.e)("design:type",c.a)],f.prototype,"wpCacheService",void 0),Object(n.c)([Object(g.a)(),Object(n.e)("design:type",m.a)],f.prototype,"wpTableHierarchies",void 0);var b=i("JY8V");class v extends d.a{constructor(e,t){super(e,t),this.injector=e,this.workPackageTable=t}isApplicable(e){return this.wpTableHierarchies.isEnabled}buildRows(){const e=new u.a(this.injector,this.workPackageTable);return new f(this.injector,this.workPackageTable,e).render()}}Object(n.c)([Object(g.a)(),Object(n.e)("design:type",o.a)],v.prototype,"states",void 0),Object(n.c)([Object(g.a)(),Object(n.e)("design:type",b.a)],v.prototype,"wpTableColumns",void 0),Object(n.c)([Object(g.a)(),Object(n.e)("design:type",m.a)],v.prototype,"wpTableHierarchies",void 0);var w=i("6XbZ"),y=i("LHWx");class k extends d.a{constructor(e,t){super(e,t),this.injector=e}buildRows(){const e=new w.a(this.injector,this.workPackageTable);return new y.a(this.injector,this.workPackageTable,e).render()}}Object(n.c)([Object(g.a)(),Object(n.e)("design:type",s.a)],k.prototype,"I18n",void 0);var C=i("SKFm"),x=i("7ond"),j=i("Ie+Q"),S=i("pXZk"),T=i("e6KS"),P=i("V4eP");class I extends T.a{constructor(e,t,i,n){super(e),this.injector=e,this.table=t,this.workPackageId=i,this.classIdentifier=n,this.cellBuilder=new S.a(this.injector),this.resourceSubscription=this.wpCacheService.requireAndStream(this.workPackageId).subscribe(e=&gt;this.resource=e)}destroy(){this.resourceSubscription.unsubscribe(),super.destroy()}findContainer(e){return this.rowContainer.find(`.${S.c}.${e} .${S.b}`).first()}findCell(e){return this.rowContainer.find(`.${S.c}.${e}`).first()}activateField(e,t,i,n){return this.waitForContainer(i).then(s=&gt;{const a=this.findCell(i);a.addClass(P.e);let r=parseInt(a.css("width"));return r=r&gt;150?r-10:150,a.css("max-width",r+"px"),a.css("width",r+"px"),this.editingPortalService.create(s,this.injector,e,t,i,n)})}reset(e,t){const i=this.findContainer(e),n=this.findCell(e);i.length&amp;&amp;(this.findCell(e).css("width",""),this.findCell(e).css("max-width",""),this.cellBuilder.refresh(i[0],this.resource,e),n.removeClass(P.e),t&amp;&amp;this.FocusHelper.focusElement(i))}requireVisible(e){return this.wpTableColumns.addColumn(e),this.waitForContainer(e)}focusOnFirstError(){jQuery(this.table.tableAndTimelineContainer).find(".inline-edit--active-field.-error .inline-edit--field").first().trigger("focus")}waitForContainer(e){return new Promise((t,i)=&gt;{const n=setInterval(()=&gt;{const i=this.findContainer(e);i.length&gt;0&amp;&amp;(clearInterval(n),t(i[0]))},100)})}get rowContainer(){return jQuery(this.table.tableAndTimelineContainer).find(`.${this.classIdentifier}-table`)}}Object(n.c)([Object(g.a)(),Object(n.e)("design:type",b.a)],I.prototype,"wpTableColumns",void 0),Object(n.c)([Object(g.a)(),Object(n.e)("design:type",c.a)],I.prototype,"wpCacheService",void 0),Object(n.c)([Object(g.a)(),Object(n.e)("design:type",o.a)],I.prototype,"states",void 0),Object(n.c)([Object(g.a)(),Object(n.e)("design:type",x.a)],I.prototype,"FocusHelper",void 0),Object(n.c)([Object(g.a)(),Object(n.e)("design:type",j.a)],I.prototype,"editingPortalService",void 0);class O{constructor(e,t){this.table=e,this.injector=t,this.forms={}}reset(){_.each(this.forms,e=&gt;e.destroy()),this.forms={}}change(e){return this.halEditing.typedState(e).value}stopEditing(e){this.halEditing.stopEditing(e);const t=this.forms[e.id];t&amp;&amp;(t.destroy(),delete this.forms[e.id])}startEditing(e,t){const i=e.id,n=this.forms[i];return n||(this.forms[i]=new I(this.injector,this.table,i,t))}}Object(n.c)([Object(g.a)(),Object(n.e)("design:type",C.a)],O.prototype,"halEditing",void 0);var D=i("ouar");class R{constructor(e,t,i,n,s,a,r){this.injector=e,this.tableAndTimelineContainer=t,this.scrollContainer=i,this.tbody=n,this.timelineBody=s,this.timelineController=a,this.configuration=r,this.originalRows=[],this.originalRowIndex={},this.builders=[new v(this.injector,this),new l.a(this.injector,this),new k(this.injector,this)],this.lastRenderPass=null,this.editing=new O(this,this.injector)}get renderedRows(){return this.querySpace.tableRendered.getValueOr([])}findRenderedRow(e){const t=_.findIndex(this.renderedRows,t=&gt;t.classIdentifier===e);return[t,this.renderedRows[t]]}get rowBuilder(){return _.find(this.builders,e=&gt;e.isApplicable(this))}buildIndex(e){this.originalRowIndex={},this.originalRows=e.map((e,t)=&gt;{let i=e.id;return e=this.wpCacheService.current(i,e),this.originalRowIndex[i]={object:e,workPackageId:i,position:t},i})}initialSetup(e){this.buildIndex(e),this.redrawTableAndTimeline()}redrawTableAndTimeline(){const e=this.performRenderPass(!1);requestAnimationFrame(()=&gt;{this.tbody.innerHTML="",this.timelineBody.innerHTML="",this.tbody.appendChild(e.tableBody),this.timelineBody.appendChild(e.timeline.timelineBody),setTimeout(()=&gt;this.querySpace.tableRendered.putValue(e.result))})}redrawTable(){const e=this.performRenderPass();this.querySpace.tableRendered.putValue(e.result)}refreshRows(e){const t=this.lastRenderPass;t?_.each(t.renderedOrder,i=&gt;{i.workPackage&amp;&amp;i.workPackage.id===e.id&amp;&amp;(Object(r.a)(`Refreshing rendered row ${i.classIdentifier}`),i.workPackage=e,t.refresh(i,e,this.tbody))}):Object(r.a)("Trying to refresh a singular row without a previous render pass.")}get renderPlaceholderRow(){return this.configuration.dragAndDropEnabled}performRenderPass(e=!0){this.portalCleanupService.clear(),this.editing.reset();const t=this.lastRenderPass=this.rowBuilder.buildRows();return e&amp;&amp;requestAnimationFrame(()=&gt;{this.tbody.innerHTML="",this.tbody.appendChild(t.tableBody)}),t}}Object(n.c)([Object(g.a)(),Object(n.e)("design:type",a.a)],R.prototype,"querySpace",void 0),Object(n.c)([Object(g.a)(),Object(n.e)("design:type",c.a)],R.prototype,"wpCacheService",void 0),Object(n.c)([Object(g.a)(),Object(n.e)("design:type",o.a)],R.prototype,"states",void 0),Object(n.c)([Object(g.a)(),Object(n.e)("design:type",s.a)],R.prototype,"I18n",void 0),Object(n.c)([Object(g.a)(),Object(n.e)("design:type",D.a)],R.prototype,"portalCleanupService",void 0)},"5JuZ":function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i("kTsZ"),s=i("Jui0"),a=i("iMRi"),r=i("RhL0"),o=i("fXoL");class c{constructor(e,t,i){this.halResourceService=e,this.pathHelper=t,this.states=i}loadWorkPackageById(e,t=!1){const i=this.pathHelper.api.v3.work_packages.id(e).toString();return this.halResourceService.get(i).toPromise()}loadWorkPackagesCollectionsFor(e){return this.halResourceService.getAllPaginated(this.pathHelper.api.v3.work_packages.toString(),e.length,{filters:Object(r.b)("id","=",e).toJson()})}emptyCreateForm(e,t){return this.halResourceService.post(this.workPackagesFormPath(t),e).toPromise()}typedCreateForm(e,t){const i={_links:{type:{href:this.pathHelper.api.v3.types.id(e).toString()}}};return this.halResourceService.post(this.workPackagesFormPath(t),i).toPromise()}createWorkPackage(e){return this.halResourceService.post(this.pathHelper.api.v3.work_packages.path,e).toPromise()}workPackagesFormPath(e){return e?this.pathHelper.api.v3.projects.id(e).work_packages.form.toString():this.pathHelper.api.v3.work_packages.form.toString()}}c.\u0275fac=function(e){return new(e||c)(o.rc(n.a),o.rc(s.a),o.rc(a.a))},c.\u0275prov=o.dc({token:c,factory:c.\u0275fac})},"5Lfy":function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("IaZ+"),s=i("SqdZ"),a=i("wZYP"),r=i("fXoL");class o extends s.a{constructor(e,t,i,n){super(t,i,e),this.elementRef=e,this.locals=t,this.cdRef=i,this.I18n=n,this.closeOnOutsideClick=!1}ngOnInit(){super.ngOnInit(),this.$element.find(".dynamic-content-modal--wrapper").addClass(this.locals.modalClassName).append(this.locals.modalBody),jQuery(document.body).on("click.opdynamicmodal",".dynamic-content-modal--close-button",e=&gt;{this.closeMe(e)})}ngOnDestroy(){jQuery(document.body).off("click.opdynamicmodal"),super.ngOnDestroy()}}o.\u0275fac=function(e){return new(e||o)(r.hc(r.q),r.hc(n.a),r.hc(r.i),r.hc(a.a))},o.\u0275cmp=r.bc({type:o,selectors:[["ng-component"]],features:[r.Qb],decls:2,vars:0,consts:[[1,"op-modal--portal"],["data-indicator-name","modal","tabindex","0",1,"op-modal--modal-container","dynamic-content-modal--wrapper","loading-indicator--location"]],template:function(e,t){1&amp;e&amp;&amp;(r.nc(0,"div",0),r.ic(1,"div",1),r.mc())},encapsulation:2})},"5Mgc":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("Jui0"),s=i("fXoL");class a{constructor(e){this.PathHelper=e}create(e,t,i,n=null){const s="constrained"===e?window.OPConstrainedEditor:window.OPClassicEditor;t.classList.add(`ckeditor-type-${e}`);const a=t.querySelector(".document-editor__toolbar"),r=t.querySelector(".document-editor__editable");var o=i.options&amp;&amp;i.options.rtl?"ar":"en";return s.createCustomized(r,{openProject:this.createConfig(i),initialData:n,language:{content:o}}).then(e=&gt;(a.appendChild(e.ui.view.toolbar.element),jQuery(t).on("op:ckeditor:setData",(t,i)=&gt;e.setData(i)).on("op:ckeditor:clear",t=&gt;e.setData(" ")).on("op:ckeditor:getData",(t,i)=&gt;i(e.getData({trim:!1}))),e))}createConfig(e){return"none"===e.macros?e.macros=!1:"wp"===e.macros?e.macros=["OPMacroToc","OPMacroEmbeddedTable","OPMacroWpButton"]:e.macros=e.macros,{context:e,helpURL:this.PathHelper.textFormattingHelp(),pluginContext:window.OpenProject.pluginContext.value}}}a.\u0275fac=function(e){return new(e||a)(s.rc(n.a))},a.\u0275prov=s.dc({token:a,factory:a.\u0275fac})},"5btT":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("8ocD"),s=i("fXoL");class a extends n.a{}a.\u0275fac=function(e){return r(e||a)},a.\u0275prov=s.dc({token:a,factory:a.\u0275fac,providedIn:"root"});const r=s.pc(a)},"5gqY":function(e,t,i){"use strict";i.d(t,"b",(function(){return k})),i.d(t,"a",(function(){return C}));var n=i("iMRi"),s=i("iB+3"),a=i("0bag"),r=i("Y0Nk"),o=i("wZYP"),c=i("Jui0"),l=i("kTg4"),d=i("13ri"),u=i("sjKJ"),h=i("E5Dd"),p=i("Sulb"),m=i("K018"),g=i("AEvm"),f=i("fXoL"),b=i("ofXK");const v=["wpQueryMenuSearchInput"],w=["queryResultsContainer"];function y(e,t){1&amp;e&amp;&amp;(f.nc(0,"div",11),f.ic(1,"div",12),f.ic(2,"div",13),f.ic(3,"div",14),f.ic(4,"div",15),f.ic(5,"div",16),f.mc())}const k="wp-query-select";class C extends g.a{constructor(e,t,i,n,s,a,r,o,c,l,d,u,h,p){super(),this.ref=e,this.element=t,this.QueryDm=i,this.$state=n,this.$transitions=s,this.I18n=a,this.states=r,this.CurrentProject=o,this.loadingIndicator=c,this.pathHelper=l,this.wpStaticQueries=d,this.mainMenuService=u,this.toggleService=h,this.cdRef=p,this.loading=!1,this.noResults=!1,this.text={search:this.I18n.t("js.toolbar.search_query_label"),label:this.I18n.t("js.toolbar.search_query_label"),scope_default:this.I18n.t("js.label_default_queries"),scope_starred:this.I18n.t("js.label_starred_queries"),scope_global:this.I18n.t("js.label_global_queries"),scope_private:this.I18n.t("js.label_custom_queries"),no_results:this.I18n.t("js.work_packages.query.text_no_results")},this.hiddenCategories=[],this.reportsBodySelector=".controller-work_packages\\/reports",this.initialized=!1}ngOnInit(){this.queryResultsContainer=jQuery(this._queryResultsContainerElement.nativeElement),this.projectIdentifier=this.element.nativeElement.getAttribute("data-project-identifier"),this.mainMenuService.onActivate("work_packages","work_packages_query_select").subscribe(()=&gt;this.initializeAutocomplete()),this.addClickHandler(),this.cdRef.detach()}ngOnDestroy(){super.ngOnDestroy(),this.unregisterTransitionListener()}initializeAutocomplete(){this.initialized||(this.searchInput=jQuery(this._wpQueryMenuSearchInput.nativeElement),this.buttonArrowLeft=jQuery(".main-menu--arrow-left-to-project",jQuery("#main-menu-work-packages-wrapper").parent()),this.initialized=!0,this.buttonArrowLeft.focus(),this.setupAutoCompletion(this.searchInput),this.updateMenuOnChanges(),this.loadQueries())}transformQueries(e){const t=e.elements.map(e=&gt;({label:e.name,query:e,query_props:null})).concat(this.wpStaticQueries.all);return this.sortQueries(t)}sortQueries(e){let t={starred:[],default:[],public:[],private:[]},i=0;return e.forEach(e=&gt;(e.auto_id=i++,e.query?e.query.starred?(e.category="starred",t.starred.push(e)):!e.query.starred&amp;&amp;e.query.public?(e.category="public",t.public.push(e)):e.query.starred||e.query.public?void 0:(e.category="private",t.private.push(e)):(e.category="default",t.default.push(e)))),_.flatten([t.starred,t.default,t.public,t.private].map(e=&gt;this.sortByLabel(e)))}sortByLabel(e){return e.sort((e,t)=&gt;e.label.toLowerCase().localeCompare(t.label.toLowerCase()))}loadQueries(){return this.loadingPromise=this.QueryDm.listNonHidden(this.CurrentProject.identifier).then(e=&gt;{this.searchInput.querycomplete("option",{source:this.transformQueries(e)}),this.searchInput.querycomplete("search",this.searchInput.val()),_.each(this.hiddenCategories,e=&gt;{let t=jQuery(e).attr("category");this.expandCollapseCategory(t)}),this.ref.detectChanges()})}set loadingPromise(e){this.loading=!0,e.then(()=&gt;{this.loading=!1,this.cdRef.detectChanges()}).catch(()=&gt;{this.loading=!1,this.cdRef.detectChanges()})}setupAutoCompletion(e){this.defineJQueryQueryComplete(),e.querycomplete({delay:100,source:[],select:(e,t)=&gt;!1,response:(e,t)=&gt;{this.noResults=0===t.content.length},close:(e,t)=&gt;{const i=this.queryResultsContainer.find("ul.ui-autocomplete");i.is(":visible")||this.noResults||i.show()},focus:(e,t)=&gt;{let i=e;for(;i&amp;&amp;i.originalEvent)i=i.originalEvent;return i&amp;&amp;"keydown"===i.type&amp;&amp;this.queryResultsContainer.find(`#wp-query-menu-item-${t.item.auto_id} .wp-query-menu--item-link`).focus(),!1},appendTo:".wp-query-menu--results-container",classes:{"ui-autocomplete":"wp-query-menu--search-ul -inplace","ui-menu-divider":"wp-query-menu--category-icon"},autoFocus:!1,minLength:0})}defineJQueryQueryComplete(){let e=this;jQuery.widget("custom.querycomplete",jQuery.ui.autocomplete,{_create:function(){this._super(),this.widget().menu("option","items",".wp-query-menu--item"),this._search("")},_renderItem:function(t,i){const n=jQuery("
    <a>
     ").addClass("wp-query-menu--item-link").attr("href",e.buildQueryItemUrl(i)).text(i.label),s=jQuery("
     <li>
      ").addClass("ui-menu-item wp-query-menu--item").attr("id",`wp-query-menu-item-${i.auto_id}`).attr("data-category",i.category||"").data("ui-autocomplete-item",i).append(n).appendTo(t);return e.setInitialHighlighting(s,i),s},_renderMenu:function(t,i){let n;if(_.each(i,i=&gt;{if(i.category!==n){n=i.category;let s=e.labelFunction(n);t.append(`
      <a aria-hidden="true" class="wp-query-menu--category-icon wp-query-menu--category-toggle" data-category="${n}" tabindex="0">
      </a>
      `),jQuery("
      <li>
       ").addClass("ui-autocomplete--category wp-query-menu--category-toggle ellipsis").attr("title",s).attr("data-category",n).text(s).appendTo(t)}this._renderItemData(t,i)}),""===e.searchInput.val()){let t=e.queryResultsContainer.find(".wp-query-menu--item.selected");t.length&gt;0&amp;&amp;setTimeout(()=&gt;t[0].scrollIntoView({behavior:"auto",block:"center"}),20)}}})}setInitialHighlighting(e,t){const i=this.getQueryParams(t),n=this.$state.params.query_id,s=this.$state.params.query_props;let a=this.$state.includes("work-packages"),r=jQuery("body").hasClass("controller-work_packages/reports");const o=i.query_id&amp;&amp;(n||"").toString()===i.query_id.toString(),c=!t.query&amp;&amp;t.query_props&amp;&amp;t.query_props===s,l=a&amp;&amp;!n&amp;&amp;!s&amp;&amp;"all_open"===t.identifier,d=r&amp;&amp;"summary"===t.identifier;(o||c||l||d)&amp;&amp;e.addClass("selected")}labelFunction(e){switch(e){case"starred":return this.text.scope_starred;case"public":return this.text.scope_global;case"private":return this.text.scope_private;case"default":return this.text.scope_default;default:return""}}updateMenuOnChanges(){this.states.changes.queries.pipe(this.untilDestroyed()).subscribe(()=&gt;this.loadQueries())}expandCollapseCategory(e){jQuery(`[data-category="${e}"]`).not(".ui-autocomplete--category").toggleClass("-hidden"),jQuery(`.wp-query-menu--category-icon[data-category="${e}"]`).toggleClass("-collapsed")}loadQuery(e){const t=this.getQueryParams(e);this.$state.go("work-packages.partitioned.list",t,{reload:!0}),this.toggleService.closeWhenOnMobile()}getQueryParams(e){let t={query_id:e.query?_.toString(e.query.id):null,query_props:e.query?null:e.query_props};return this.projectIdentifier&amp;&amp;(t.projects="projects",t.projectPath=this.projectIdentifier),t}buildQueryItemUrl(e){if(e.static_link)return e.static_link;const t=this.getQueryParams(e);return this.$state.href("work-packages.partitioned.list",t)}highlightSelected(e){this.highlightBySelector(`#wp-query-menu-item-${e.auto_id}`)}highlightBySelector(e){this.queryResultsContainer.find(".ui-menu-item").removeClass("selected"),this.queryResultsContainer.find(e).addClass("selected")}addClickHandler(){this.queryResultsContainer.on("click keydown",".ui-menu-item a",e=&gt;{if("keydown"===e.type&amp;&amp;e.which!==h.a.ENTER)return!0;const t=jQuery(e.target),i=t.closest(".wp-query-menu--item").data("ui-autocomplete-item"),n="click"===e.type&amp;&amp;d.a.isClickedWithModifier(e),s=!!i.static_link;return n||s?(e.stopImmediatePropagation(),"keydown"===e.type&amp;&amp;(window.location.href=t.attr("href")),!0):(e.preventDefault(),this.loadQuery(i),this.highlightSelected(i),!1)}).on("click keydown",".wp-query-menu--category-toggle",e=&gt;{if("keydown"===e.type&amp;&amp;e.which!==h.a.ENTER)return!0;const t=jQuery(e.target).data("category");return t&amp;&amp;this.expandCollapseCategory(t),this.hiddenCategories=this.queryResultsContainer.find(".ui-autocomplete--category.hidden"),e.preventDefault(),!1})}}C.\u0275fac=function(e){return new(e||C)(f.hc(f.i),f.hc(f.q),f.hc(a.a),f.hc(s.G),f.hc(s.O),f.hc(o.a),f.hc(n.a),f.hc(u.a),f.hc(r.a),f.hc(c.a),f.hc(l.a),f.hc(m.a),f.hc(p.a),f.hc(f.i))},C.\u0275cmp=f.bc({type:C,selectors:[["wp-query-select"]],viewQuery:function(e,t){var i;(1&amp;e&amp;&amp;(f.Yc(v,!0),f.Yc(w,!0)),2&amp;e)&amp;&amp;(f.Pc(i=f.wc())&amp;&amp;(t._wpQueryMenuSearchInput=i.first),f.Pc(i=f.wc())&amp;&amp;(t._queryResultsContainerElement=i.first))},features:[f.Qb],decls:11,vars:5,consts:[["id","querySelectDropdown",1,"wp-query-menu--container"],[1,"wp-query-menu--search-container"],[1,"wp-query-menu--search-bar"],["for","query-title-filter",1,"hidden-for-sighted",3,"textContent"],["type","text","name","query-title-filter","id","query-title-filter",1,"wp-query-menu--search-input","ui-autocomplete--input","ellipsis"],["wpQueryMenuSearchInput",""],[1,"icon-search","wp-query-menu--search-icon"],[1,"wp-query-menu--results-container"],["queryResultsContainer",""],[1,"wp-query-menu--no-results-container",3,"hidden","textContent"],["class","loading-indicator -compact",4,"ngIf"],[1,"loading-indicator","-compact"],[1,"block-1"],[1,"block-2"],[1,"block-3"],[1,"block-4"],[1,"block-5"]],template:function(e,t){1&amp;e&amp;&amp;(f.nc(0,"div",0),f.nc(1,"div",1),f.nc(2,"div",2),f.ic(3,"label",3),f.ic(4,"input",4,5),f.ic(6,"i",6),f.mc(),f.nc(7,"div",7,8),f.ic(9,"p",9),f.ad(10,y,6,0,"div",10),f.mc(),f.mc(),f.mc()),2&amp;e&amp;&amp;(f.Tb(3),f.Dc("textContent",t.text.label),f.Tb(1),f.Ub("placeholder",t.text.search),f.Tb(5),f.Dc("hidden",!t.noResults||t.loading)("textContent",t.text.no_results),f.Tb(1),f.Dc("ngIf",t.loading))},directives:[b.q],encapsulation:2,changeDetection:0})},"5iud":function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"a",(function(){return r}));const n=".work-packages-tabletimeline--timeline-side";function s(e){if(0===e)return e;let t=15;return e&lt;0&amp;&amp;(t*=-1),t}function a(e,t,i){const n=e.target,a=e.originalEvent;let[r,o]=function(e){let t=e.deltaX,i=e.deltaY;return e.shiftKey&amp;&amp;(t=i,i=0),[t,i]}(a);0!==o&amp;&amp;(r=s(r),o=s(o),window.requestAnimationFrame((function(){t[0].scrollTop=t[0].scrollTop+o,i[0].scrollTop=i[0].scrollTop+o,n.scrollLeft=n.scrollLeft+r})))}function r(e){var t=jQuery(e).find(".work-packages-tabletimeline--table-side"),i=jQuery(e).find(n);return e=&gt;{var n=!1,s=!1;e?(t.on("wheel.scroll-sync",e=&gt;{a(e,t,i)}),t.on("scroll.scroll-sync",e=&gt;{n=!0,s||(i[0].scrollTop=e.target.scrollTop),n&amp;&amp;s&amp;&amp;(n=!1,s=!1)}),i.on("wheel.scroll-sync",e=&gt;{a(e,t,i)}),i.on("scroll.scroll-sync",e=&gt;{s=!0,n||(t[0].scrollTop=e.target.scrollTop),n&amp;&amp;s&amp;&amp;(n=!1,s=!1)})):t.off(".scroll-sync")}}},"5mBr":function(e,t,i){"use strict";i.d(t,"a",(function(){return k}));i("Mo6U");var n=i("kTsZ"),s=i("pLZG"),a=i("iMRi"),r=i("4EDS"),o=i("AEvm"),c=i("fXoL"),l=i("ofXK"),d=i("wZYP"),u=i("Jui0"),h=i("POAS"),p=i("th4C"),m=i("N5AO"),g=i("2hMx");const f=function(e){return{fileName:e}};function b(e,t){if(1&amp;e){const e=c.oc();c.nc(0,"a",7),c.vc("click",(function(t){return c.Sc(e),c.xc().confirmRemoveAttachment(t)})),c.ic(1,"op-icon",8),c.mc()}if(2&amp;e){const e=c.xc();c.Tb(1),c.Dc("icon-title",e.text.removeFile(c.Ic(1,f,e.attachment.fileName)))}}class v{constructor(e,t,i,n){this.halNotification=e,this.I18n=t,this.states=i,this.pathHelper=n,this.destroyImmediately=!0,this.removeAttachment=new c.s,this.text={dragHint:this.I18n.t("js.attachments.draggable_hint"),destroyConfirmation:this.I18n.t("js.text_attachment_destroy_confirmation"),removeFile:e=&gt;this.I18n.t("js.label_remove_file",e)}}setDragData(e){const t=this.downloadPath,i=this.draggableHTML(t);e.dataTransfer.setData("text/plain",t),e.dataTransfer.setData("text/html",i.outerHTML),e.dataTransfer.setData("text/uri-list",t),e.dataTransfer.setDragImage(i,0,0)}draggableHTML(e){let t;return this.isImage?(t=document.createElement("img"),t.src=e,t.textContent=this.fileName):(t=document.createElement("a"),t.href=e,t.textContent=this.fileName),t}get downloadPath(){return this.pathHelper.attachmentDownloadPath(this.attachment.id,this.fileName)}get isImage(){const e=this.fileName.split(".").pop()||"";return v.imageFileExtensions.indexOf(e.toLowerCase())&gt;-1}get fileName(){const e=this.attachment;return e.fileName||e.customName||e.name}confirmRemoveAttachment(e){return window.confirm(this.text.destroyConfirmation)?(this.removeAttachment.emit(),this.destroyImmediately&amp;&amp;this.resource.removeAttachment(this.attachment),!1):(e.stopImmediatePropagation(),e.preventDefault(),!1)}}function w(e,t){if(1&amp;e){const e=c.oc();c.nc(0,"ul",3),c.nc(1,"attachment-list-item",4),c.vc("removeAttachment",(function(){c.Sc(e);const i=t.$implicit;return c.xc(2).removeAttachment(i)})),c.mc(),c.mc()}if(2&amp;e){const e=t.$implicit,i=t.index,n=c.xc(2);c.Tb(1),c.Dc("attachment",e)("resource",n.resource)("index",i)("destroyImmediately",n.destroyImmediately)}}function y(e,t){if(1&amp;e&amp;&amp;(c.nc(0,"div",1),c.ad(1,w,2,4,"ul",2),c.mc()),2&amp;e){const e=c.xc();c.Tb(1),c.Dc("ngForOf",e.attachments)("ngForTrackBy",e.trackByHref)}}v.imageFileExtensions=["jpeg","jpg","gif","bmp","png"],v.\u0275fac=function(e){return new(e||v)(c.hc(h.a),c.hc(d.a),c.hc(a.a),c.hc(u.a))},v.\u0275cmp=c.bc({type:v,selectors:[["attachment-list-item"]],inputs:{resource:"resource",attachment:"attachment",index:"index",destroyImmediately:"destroyImmediately"},outputs:{removeAttachment:"removeAttachment"},decls:8,vars:9,consts:[["focus-within","","draggable","true","focusWithinSelector",".inplace-editing--trigger-icon",1,"form--selected-value--container","work-package--attachments--draggable-item",3,"title","dragstart"],[1,"form--selected-value"],["icon-classes","icon-context icon-attachment"],["target","_blank","rel","noopener",1,"work-package--attachments--filename"],[1,"work-package--attachments--info",3,"createdOn","author","showAuthorAsLink"],["href","","class","form--selected-value--remover work-package--atachments--delete-button",3,"click",4,"ngIf"],["type","hidden",3,"name","value"],["href","",1,"form--selected-value--remover","work-package--atachments--delete-button",3,"click"],["icon-classes","icon-delete",3,"icon-title"]],template:function(e,t){1&amp;e&amp;&amp;(c.nc(0,"li",0),c.vc("dragstart",(function(e){return t.setDragData(e)})),c.nc(1,"span",1),c.ic(2,"op-icon",2),c.nc(3,"a",3),c.cd(4),c.ic(5,"authoring",4),c.mc(),c.mc(),c.ad(6,b,2,3,"a",5),c.ic(7,"input",6),c.mc()),2&amp;e&amp;&amp;(c.Dc("title",t.text.dragHint),c.Tb(3),c.Ub("href",t.downloadPath||"#",c.Vc),c.Tb(1),c.ed(" ",t.attachment.fileName||t.attachment.customName||t.attachment.name," "),c.Tb(1),c.Dc("createdOn",t.attachment.createdAt)("author",t.attachment.author)("showAuthorAsLink",!1),c.Tb(1),c.Dc("ngIf",!!t.attachment.$links.delete),c.Tb(1),c.Fc("name","attachments[",t.index,"][id]"),c.Ec("value",t.attachment.id))},directives:[p.a,m.a,g.a,l.q],encapsulation:2});class k extends o.a{constructor(e,t,i,n){super(),this.elementRef=e,this.states=t,this.cdRef=i,this.halResourceService=n,this.destroyImmediately=!0,this.trackByHref=r.a.trackByHref,this.attachments=[],this.deletedAttachments=[]}ngOnInit(){this.$element=jQuery(this.elementRef.nativeElement),this.updateAttachments(),this.setupResourceUpdateListener(),this.destroyImmediately||this.setupAttachmentDeletionCallback()}setupResourceUpdateListener(){this.states.forResource(this.resource).values$().pipe(this.untilDestroyed(),Object(s.a)(e=&gt;!!e)).subscribe(e=&gt;{this.resource=e||this.resource,this.updateAttachments(),this.cdRef.detectChanges()})}ngOnDestroy(){super.ngOnDestroy(),this.destroyImmediately||this.$formElement.off("submit.attachment-component")}removeAttachment(e){this.deletedAttachments.push(e);let t=this.attachments.filter(t=&gt;t!==e);this.attachments.length=0,this.attachments.push(...t),this.cdRef.detectChanges()}get attachmentsUpdatable(){return this.resource.attachments&amp;&amp;this.resource.attachmentsBackend}setupAttachmentDeletionCallback(){this.$formElement=this.$element.closest("form"),this.$formElement.on("submit.attachment-component",()=&gt;{this.destroyRemovedAttachments()})}destroyRemovedAttachments(){this.deletedAttachments.forEach(e=&gt;{this.resource.removeAttachment(e)})}updateAttachments(){this.attachmentsUpdatable?this.resource.attachments.updateElements().then(()=&gt;{this.attachments=this.resource.attachments.elements,this.cdRef.detectChanges()}):this.attachments=this.resource.attachments.elements}}k.\u0275fac=function(e){return new(e||k)(c.hc(c.q),c.hc(a.a),c.hc(c.i),c.hc(n.a))},k.\u0275cmp=c.bc({type:k,selectors:[["attachment-list"]],inputs:{resource:"resource",destroyImmediately:"destroyImmediately"},features:[c.Qb],decls:1,vars:1,consts:[["class","work-package--attachments--files",4,"ngIf"],[1,"work-package--attachments--files"],["class","form--selected-value--list",4,"ngFor","ngForOf","ngForTrackBy"],[1,"form--selected-value--list"],[3,"attachment","resource","index","destroyImmediately","removeAttachment"]],template:function(e,t){1&amp;e&amp;&amp;c.ad(0,y,2,2,"div",0),2&amp;e&amp;&amp;c.Dc("ngIf",t.resource)},directives:[l.q,l.p,v],encapsulation:2})},"60np":function(e,t,i){"use strict";i.d(t,"a",(function(){return k}));var n=i("NawS"),s=(i("ii2/"),i("ug4p")),a=i("uSJ+"),r=i("wZYP"),o=i("/C7M"),c=i("qc15"),l=i("fXoL"),d=i("ofXK"),u=i("RN/J"),h=i("kor4"),p=i("N5AO"),m=i("3Pt+"),g=i("oUDv"),f=i("MIK2"),b=i("/Rze");function v(e,t){if(1&amp;e){const e=l.oc();l.nc(0,"div",4),l.nc(1,"div",5),l.nc(2,"div",6),l.nc(3,"a",7),l.vc("accessibleClick",(function(){return l.Sc(e),l.xc().toggleRelationsCreateForm()})),l.ic(4,"op-icon",8),l.ic(5,"span",9),l.mc(),l.mc(),l.mc(),l.mc()}if(2&amp;e){const e=l.xc();l.Tb(5),l.Dc("textContent",e.text.addNewRelation)}}function w(e,t){if(1&amp;e&amp;&amp;l.ic(0,"option",20),2&amp;e){const e=t.$implicit;l.Dc("textContent",e.label)("value",e.name)}}function y(e,t){if(1&amp;e){const e=l.oc();l.nc(0,"div",10),l.nc(1,"div",11),l.ic(2,"label",12),l.nc(3,"select",13),l.vc("ngModelChange",(function(t){return l.Sc(e),l.xc().selectedRelationType=t})),l.ad(4,w,1,2,"option",14),l.mc(),l.mc(),l.nc(5,"div",15),l.nc(6,"wp-relations-autocomplete",16),l.vc("onSelected",(function(t){return l.Sc(e),l.xc().onSelected(t)}))("onCancel",(function(){return l.Sc(e),l.xc().toggleRelationsCreateForm()})),l.mc(),l.mc(),l.nc(7,"div",17),l.nc(8,"accessible-by-keyboard",18),l.vc("execute",(function(){return l.Sc(e),l.xc().toggleRelationsCreateForm()})),l.ic(9,"op-icon",19),l.mc(),l.mc(),l.mc()}if(2&amp;e){const e=l.xc();l.Tb(2),l.Dc("textContent",e.text.relationType),l.Tb(1),l.Dc("ngModel",e.selectedRelationType),l.Tb(1),l.Dc("ngForOf",e.relationTypes),l.Tb(2),l.Dc("workPackage",e.workPackage)("hiddenOverflowContainer",".work-packages-tab-view--overflow")("selectedRelationType",e.selectedRelationType),l.Tb(3),l.Dc("icon-title",e.text.abort)}}class k{constructor(e,t,i,s,a){this.I18n=e,this.wpRelations=t,this.notificationService=i,this.halEvents=s,this.wpCacheService=a,this.showRelationsCreateForm=!1,this.selectedRelationType=n.a.DEFAULT(),this.relationTypes=n.a.LOCALIZED_RELATION_TYPES(!1),this.isDisabled=!1,this.text={abort:this.I18n.t("js.relation_buttons.abort"),relationType:this.I18n.t("js.relation_buttons.relation_type"),addNewRelation:this.I18n.t("js.relation_buttons.add_new_relation")}}createRelation(){this.selectedRelationType&amp;&amp;this.selectedWpId&amp;&amp;(this.isDisabled=!0,this.createCommonRelation().catch(()=&gt;this.isDisabled=!1).then(()=&gt;this.isDisabled=!1))}onSelected(e){e&amp;&amp;(this.selectedWpId=e.id,this.createCommonRelation())}createCommonRelation(){return this.wpRelations.addCommonRelation(this.workPackage.id,this.selectedRelationType,this.selectedWpId).then(e=&gt;{this.halEvents.push(this.workPackage,{eventType:"association",relatedWorkPackage:e.id,relationType:this.selectedRelationType}),this.notificationService.showSave(this.workPackage),this.toggleRelationsCreateForm()}).catch(e=&gt;{this.notificationService.handleRawError(e,this.workPackage),this.toggleRelationsCreateForm()})}toggleRelationsCreateForm(){this.showRelationsCreateForm=!this.showRelationsCreateForm,this.selectedWpId=""}}k.\u0275fac=function(e){return new(e||k)(l.hc(r.a),l.hc(a.a),l.hc(c.a),l.hc(o.a),l.hc(s.a))},k.\u0275cmp=l.bc({type:k,selectors:[["wp-relations-create"]],inputs:{workPackage:"workPackage"},decls:4,vars:2,consts:[[1,"wp-relations-create"],["class","wp-relations-create-button hide-when-print",4,"ngIf"],["data-indicator-name","relationAddDynamic",1,"loading-indicator--location"],["class","v-align wp-relations-create--form",4,"ngIf"],[1,"wp-relations-create-button","hide-when-print"],[1,"grid-block"],[1,"grid-content","collapse","wp-inline-create-button"],["autoFocus","","href","","id","relation--add-relation",1,"wp-inline-create--add-link","relation-create",3,"accessibleClick"],["icon-classes","icon icon-add"],[3,"textContent"],[1,"v-align","wp-relations-create--form"],[1,"grid-content","collapse","medium-3"],["for","relation-type--select",1,"hidden-for-sighted",3,"textContent"],["id","relation-type--select","role","listbox","focus","",1,"form--select","relationTypeSelect",3,"ngModel","ngModelChange"],[3,"textContent","value",4,"ngFor","ngForOf"],[1,"grid-content","medium-8"],[3,"workPackage","hiddenOverflowContainer","selectedRelationType","onSelected","onCancel"],[1,"grid-content","medium-1","collapse","wp-relations-controls-section","relation-row"],["linkClass","wp-create-relation--cancel","aria-hidden","false",3,"execute"],["icon-classes","icon-remove -padded",3,"icon-title"],[3,"textContent","value"]],template:function(e,t){1&amp;e&amp;&amp;(l.nc(0,"div",0),l.ad(1,v,6,1,"div",1),l.nc(2,"div",2),l.ad(3,y,10,7,"div",3),l.mc(),l.mc()),2&amp;e&amp;&amp;(l.Tb(1),l.Dc("ngIf",!t.showRelationsCreateForm),l.Tb(2),l.Dc("ngIf",t.showRelationsCreateForm))},directives:[d.q,u.a,h.a,p.a,m.y,g.a,m.m,m.p,d.p,f.a,b.a,m.r,m.B],encapsulation:2})},"67Ga":function(e,t,i){"use strict";i.d(t,"a",(function(){return g}));var n=i("wZYP"),s=(i("AA01"),i("Y41n")),a=i("juWA"),r=i("59tY"),o=i("Hg4z"),c=i("fXoL"),l=i("ecJW"),d=i("3Pt+"),u=i("oUDv"),h=i("ofXK"),p=i("N5AO");function m(e,t){if(1&amp;e&amp;&amp;(c.nc(0,"span",4),c.ic(1,"op-icon",5),c.mc()),2&amp;e){const e=c.xc();c.Ub("data-tooltip",e.timeZoneText)}}class g extends r.a{constructor(e,t){super(e,t),this.I18n=e,this.timezoneService=t,this.shouldFocus=!1,this.filterChanged=new s.a(Object(o.b)(this))}get value(){return this.filter.values[0]}get valueString(){return this.filter.values[0].toString()}set value(e){this.filter.values=[e],this.filterChanged.emit(this.filter)}get lowerBoundary(){return this.value&amp;&amp;this.timezoneService.isValidISODateTime(this.valueString)?this.timezoneService.parseDatetime(this.valueString):null}get upperBoundary(){return this.value&amp;&amp;this.timezoneService.isValidISODateTime(this.valueString)?this.timezoneService.parseDatetime(this.valueString).add(24,"hours"):null}}g.\u0275fac=function(e){return new(e||g)(c.hc(n.a),c.hc(a.a))},g.\u0275cmp=c.bc({type:g,selectors:[["filter-date-time-value"]],inputs:{shouldFocus:"shouldFocus",filter:"filter"},outputs:{filterChanged:"filterChanged"},features:[c.Qb],decls:4,vars:6,consts:[[1,"inline-label",3,"id"],[3,"onChange"],["required","","size","10","type","text",1,"advanced-filters--date-field",3,"ngModel","focus","id","name","ngModelChange"],["class","advanced-filters--tooltip-trigger -multiline",4,"ngIf"],[1,"advanced-filters--tooltip-trigger","-multiline"],["icon-classes","icon icon-warning"]],template:function(e,t){1&amp;e&amp;&amp;(c.nc(0,"div",0),c.nc(1,"op-date-picker",1),c.vc("onChange",(function(e){return t.value=t.isoDateParser(e)})),c.nc(2,"input",2),c.vc("ngModelChange",(function(e){return t.value=t.isoDateParser(e)})),c.mc(),c.mc(),c.ad(3,m,2,1,"span",3),c.mc()),2&amp;e&amp;&amp;(c.Fc("id","div-values-",t.filter.id,""),c.Tb(2),c.Fc("id","values-",t.filter.id,""),c.Fc("name","v[",t.filter.id,"]"),c.Dc("ngModel",t.isoDateFormatter(t.value))("focus",t.shouldFocus),c.Tb(1),c.Dc("ngIf",t.isTimeZoneDifferent))},directives:[l.a,d.c,d.x,d.m,d.p,u.a,h.q,p.a],encapsulation:2})},"6DMU":function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i("mrSG"),s=i("eyhC"),a=i("Y/CA"),r=i("WW/2"),o=i("iB+3"),c=i("K247"),l=i("r0MM");class d{constructor(e,t){this.injector=e}get EVENT(){return"click.cardView.card"}get SELECTOR(){return".wp-card"}eventScope(e){return jQuery(e.container.nativeElement)}handleEvent(e,t){let i=jQuery(t.target);if(i.is("a")||i.parent().is("a"))return!0;let n=i.closest("wp-single-card"),s=n.data("workPackageId");return!s||(this.handleWorkPackage(s,n,t),!1)}handleWorkPackage(e,t,i){this.setSelection(e,t,i),this.openFullViewOnMobile(e)}openFullViewOnMobile(e){this.deviceService.isMobile&amp;&amp;this.$state.go("work-packages.show",{workPackageId:e})}setSelection(e,t,i){let n=t.data("classIdentifier"),s=this.wpCardView.findRenderedCard(n);i.ctrlKey||i.metaKey||i.shiftKey||this.wpTableSelection.setSelection(e,s),i.shiftKey&amp;&amp;this.wpTableSelection.setMultiSelectionFrom(this.wpCardView.renderedCards,e,s),(i.ctrlKey||i.metaKey)&amp;&amp;this.wpTableSelection.toggleRow(e),this.wpTableFocus.updateFocus(e)}}Object(n.c)([Object(l.a)(),Object(n.e)("design:type",c.a)],d.prototype,"deviceService",void 0),Object(n.c)([Object(l.a)(),Object(n.e)("design:type",o.G)],d.prototype,"$state",void 0),Object(n.c)([Object(l.a)(),Object(n.e)("design:type",s.a)],d.prototype,"wpTableSelection",void 0),Object(n.c)([Object(l.a)(),Object(n.e)("design:type",a.a)],d.prototype,"wpTableFocus",void 0),Object(n.c)([Object(l.a)(),Object(n.e)("design:type",r.a)],d.prototype,"wpCardView",void 0)},"6XbZ":function(e,t,i){"use strict";i.d(t,"c",(function(){return v})),i.d(t,"b",(function(){return w})),i.d(t,"a",(function(){return y}));var n=i("mrSG"),s=i("wZYP"),a=i("5+Sy"),r=i("qHU1"),o=i("QOiP"),c=i("JY8V"),l=i("pXZk"),d=i("0Usb"),u=i("cd/7"),h=i("ooSb"),p=i("/cHX"),m=i("FlxY"),g=i("r0MM");class f{constructor(e){this.injector=e}build(e){let t=document.createElement("td");t.classList.add(l.c,p.e,m.a.id,"hide-when-print");let i=document.createElement("span");return i.classList.add(p.d),this.tableActionsService.render(e).forEach(e=&gt;{i.appendChild(e)}),t.appendChild(i),t}}Object(n.c)([Object(g.a)(),Object(n.e)("design:type",h.a)],f.prototype,"tableActionsService",void 0);var b=i("eyhC");const v="wp-table--row",w="wp--row";class y{constructor(e,t){this.injector=e,this.workPackageTable=t,this.cellBuilder=new l.a(this.injector),this.relationCellBuilder=new d.a(this.injector),this.contextLinkBuilder=new f(this.injector),this.augmentedColumns=this.buildAugmentedColumns()}get columns(){return this.wpTableColumns.getColumns()}buildAugmentedColumns(){let e=[...this.columns,m.a];return this.workPackageTable.configuration.dragAndDropEnabled&amp;&amp;e.unshift(m.b),e}buildCell(e,t){if(Object(o.a)(t))return this.relationCellBuilder.build(e,t);switch(t.id){case m.a.id:if(this.workPackageTable.configuration.actionsColumnEnabled)return this.contextLinkBuilder.build(e);if(this.workPackageTable.configuration.columnMenuEnabled){let e=document.createElement("td");return e.classList.add("hide-when-print"),e}return null;default:return this.cellBuilder.build(e,t)}}buildEmpty(e){let t=this.createEmptyRow(e);return this.buildEmptyRow(e,t)}createEmptyRow(e){const t=this.classIdentifier(e);let i=document.createElement("tr");return i.setAttribute("tabindex","0"),i.dataset.workPackageId=e.id,i.dataset.classIdentifier=t,i.classList.add(v,w,t,`${t}-table`,"issue"),i}get placeholderRow(){const e=document.createElement("tr"),t=document.createElement("td");return e.classList.add("wp--placeholder-row"),t.colSpan=this.augmentedColumns.length,e.appendChild(t),e}classIdentifier(e){return`wp-row-${e.id}`}refreshRow(e,t){const i=t.find(`.${l.c}`).detach(),n=[];return this.augmentedColumns.forEach(t=&gt;{const s=i.filter(`td.${t.id}`);if(t.id.startsWith("__internal")||this.isColumnBeingEdited(e,t))return void n.push(s[0]);const a=this.buildCell(e,t);a&amp;&amp;n.push(a)}),t.prepend(n),t}isColumnBeingEdited(e,t){const i=this.workPackageTable.editing.forms[e.id];return i&amp;&amp;i.activeFields[t.id]}buildEmptyRow(e,t){const i=this.workPackageTable.editing.change(e);let n={};if(i&amp;&amp;!i.isEmpty()){const t=Object(a.c)(this.classIdentifier(e));i.changedAttributes.forEach(e=&gt;{n[e]=t.find(`.${l.c}.${e}`)})}return this.augmentedColumns.forEach(i=&gt;{let s,a=n[i.id];a&amp;&amp;a.length?(Object(r.a)(`Rendering previous open column ${i.id} on ${e.id}`),jQuery(t).append(a)):(s=this.buildCell(e,i),s&amp;&amp;t.appendChild(s))}),this.wpTableSelection.isSelected(e.id)&amp;&amp;t.classList.add(u.b),[t,!1]}}Object(n.c)([Object(g.a)(),Object(n.e)("design:type",b.a)],y.prototype,"wpTableSelection",void 0),Object(n.c)([Object(g.a)(),Object(n.e)("design:type",c.a)],y.prototype,"wpTableColumns",void 0),Object(n.c)([Object(g.a)(),Object(n.e)("design:type",s.a)],y.prototype,"I18n",void 0)},"6eua":function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"a",(function(){return r})),i.d(t,"c",(function(){return o}));var n=i("fXoL"),s=i("+rOU");const a=new n.z("display-portal--user"),r=new n.z("display-portal--multi-line");function o(e,t,i){const n=new WeakMap;return n.set(a,t),n.set(r,i),new s.f(e,n)}},"6p3c":function(e,t,i){"use strict";i.d(t,"a",(function(){return L}));var n=i("Kg8T"),s=i("Y/CA"),a=i("pLZG"),r=i("Yg+W"),o=(i("5HGI"),i("4n9w")),c=i("mrSG"),l=i("wZYP"),d=i("iMRi"),u=i("6XbZ"),h=i("5+Sy"),p=i("eyhC"),m=i("JY8V"),g=i("pXZk"),f=i("FlxY"),b=i("r0MM");class v extends u.a{constructor(e,t){super(e,t),this.injector=e,this.text={cancelButton:this.I18n.t("js.button_cancel")}}buildCell(e,t){switch(t.id){case f.a.id:return this.buildCancelButton();default:return super.buildCell(e,t)}}buildNew(e,t){const[i,n]=this.buildEmpty(e);return[i,n]}createEmptyRow(e){const t=this.classIdentifier(e),i=document.createElement("tr");return i.id=Object(h.e)(e.id),i.dataset.workPackageId=e.id,i.dataset.classIdentifier=t,i.classList.add("wp-inline-create-row",u.b,u.c,"issue",t,`${t}-table`),i}buildCancelButton(){const e=document.createElement("td");return e.classList.add(g.c,"wp-table--cancel-create-td"),e.innerHTML=`\n
       <a\n \n="" aria-label="${this.text.cancelButton}" class="wp-table--cancel-create-link icon icon-cancel" href="#">
        \n
       </a\n>
      </li>
     </li>
    </a>
    \n   `,e}}Object(c.c)([Object(b.a)(),Object(c.e)("design:type",d.a)],v.prototype,"states",void 0),Object(c.c)([Object(b.a)(),Object(c.e)("design:type",p.a)],v.prototype,"wpTableSelection",void 0),Object(c.c)([Object(b.a)(),Object(c.e)("design:type",m.a)],v.prototype,"wpTableColumns",void 0),Object(c.c)([Object(b.a)(),Object(c.e)("design:type",l.a)],v.prototype,"I18n",void 0);var w=i("E2tj"),y=i("7ond"),k=i("FDFi"),C=i("AEvm"),x=i("Hg4z"),j=i("fXoL"),S=i("ofXK"),T=i("oUDv"),P=i("kor4"),I=i("N5AO"),_=i("CS/5");const O=function(e){return{"wp-inline-create--split-link":e}};function D(e,t){if(1&amp;e){const e=j.oc();j.nc(0,"a",6),j.vc("accessibleClick",(function(){return j.Sc(e),j.xc(3).handleAddRowClick()})),j.ic(1,"op-icon",7),j.ic(2,"span",8),j.mc()}if(2&amp;e){const e=j.xc(3);j.Dc("focus",e.focus)("ngClass",j.Ic(5,O,e.hasReferenceClass)),j.Ub("disabled",!e.isAllowed||void 0)("aria-label",e.text.create),j.Tb(2),j.Dc("textContent",e.text.create)}}function R(e,t){if(1&amp;e){const e=j.oc();j.lc(0),j.nc(1,"a",9),j.vc("accessibleClick",(function(){return j.Sc(e),j.xc(3).handleReferenceClick()})),j.ic(2,"op-icon",10),j.ic(3,"span",8),j.mc(),j.kc()}if(2&amp;e){const e=j.xc(3);j.Tb(1),j.Ub("disabled",!e.isAllowed||void 0)("aria-label",e.text.create),j.Tb(2),j.Dc("textContent",e.text.reference)}}function E(e,t){if(1&amp;e&amp;&amp;(j.nc(0,"tr",2),j.nc(1,"td",3),j.nc(2,"div",4),j.ad(3,D,3,7,"a",5),j.ad(4,R,4,3,"ng-container",0),j.mc(),j.mc(),j.mc()),2&amp;e){const e=j.xc(2);j.Tb(1),j.Ub("colspan",e.colspan),j.Tb(2),j.Dc("ngIf",e.canAdd),j.Tb(1),j.Dc("ngIf",e.canReference)}}function F(e,t){1&amp;e&amp;&amp;j.jc(0)}function M(e,t){if(1&amp;e&amp;&amp;(j.nc(0,"tr",2),j.nc(1,"td",11),j.ad(2,F,1,0,"ng-container",12),j.mc(),j.mc()),2&amp;e){const e=j.xc(2);j.Tb(1),j.Ub("colspan",e.colspan),j.Tb(1),j.Dc("ngComponentOutlet",e.referenceClass)("ngComponentOutletInjector",e.injector)}}function A(e,t){if(1&amp;e&amp;&amp;(j.lc(0),j.ad(1,E,5,3,"tr",1),j.ad(2,M,3,3,"tr",1),j.kc()),2&amp;e){const e=j.xc();j.Tb(1),j.Dc("ngIf","inactive"===e.mode),j.Tb(1),j.Dc("ngIf",e.hasReferenceClass&amp;&amp;"reference"===e.mode)}}class L extends C.a{constructor(e,t,i,n,s,a,r,o,c,l,d){super(),this.injector=e,this.elementRef=t,this.FocusHelper=i,this.I18n=n,this.querySpace=s,this.cdRef=a,this.wpCreate=r,this.wpInlineCreate=o,this.wpTableColumns=c,this.wpTableFocus=l,this.authorisationService=d,this.canAdd=!1,this.canReference=!1,this.mode="inactive",this.focus=!1,this.text=this.wpInlineCreate.buttonTexts}ngOnInit(){this.$element=jQuery(this.elementRef.nativeElement),this.authorisationService.observeUntil(Object(x.b)(this)).subscribe(()=&gt;{this.canReference=this.hasReferenceClass&amp;&amp;this.wpInlineCreate.canReference,this.canAdd=this.wpInlineCreate.canAdd,this.cdRef.detectChanges()})}get isActive(){return"inactive"!==this.mode}ngAfterViewInit(){jQuery(this.table.timelineBody).addClass("-inline-create-mirror"),this.registerCreationCallback(),this.refreshOnColumnChanges(),this.registerCancelHandler()}registerCancelHandler(){this.$element.on("click keydown",".wp-table--cancel-create-link",e=&gt;(Object(r.b)(e,()=&gt;{this.resetRow()}),e.stopImmediatePropagation(),!1))}refreshOnColumnChanges(){this.wpTableColumns.updates$().pipe(Object(a.a)(()=&gt;this.isActive),this.untilDestroyed()).subscribe(()=&gt;this.refreshRow())}registerCreationCallback(){this.wpCreate.onNewWorkPackage().pipe(this.untilDestroyed()).subscribe(e=&gt;{this.currentWorkPackage&amp;&amp;this.currentWorkPackage.__initialized_at===e.__initialized_at?(this.resetRow(),this.table.configuration.isEmbedded||this.wpTableFocus.updateFocus(e.id),this.wpInlineCreate.newInlineWorkPackageCreated.next(e.id)):(this.wpCreate.cancelCreation(),this.removeWorkPackageRow(),this.showRow()),this.cdRef.detectChanges()})}handleAddRowClick(){return this.addWorkPackageRow(),!1}handleReferenceClick(){return this.mode="reference",!1}get referenceClass(){return this.wpInlineCreate.referenceComponentClass}get hasReferenceClass(){return!!this.referenceClass}addWorkPackageRow(){this.wpCreate.createOrContinueWorkPackage(this.projectIdentifier).then(e=&gt;{const t=this.currentWorkPackage=e.projectedResource;this.editingSubscription=this.wpCreate.changesetUpdates$().pipe(Object(a.a)(()=&gt;!!this.currentWorkPackage)).subscribe(e=&gt;{this.isActive?(this.currentWorkPackage.overriddenSchema=e.schema,this.refreshRow()):this.insertRow(t)})})}insertRow(e){const t=this.workPackageEditForm=this.renderInlineCreateRow(e);setTimeout(()=&gt;{t.activateMissingFields(),this.hideRow()})}refreshRow(){const e=new v(this.injector,this.table),t=this.$element.find(".wp-inline-create-row");t.length&amp;&amp;this.currentWorkPackage&amp;&amp;e.refreshRow(this.currentWorkPackage,t)}renderInlineCreateRow(e){const t=new v(this.injector,this.table),i=this.table.editing.startEditing(e,t.classIdentifier(e)),[n]=t.buildNew(e,i);return this.$element.append(n),i}resetRow(){this.focus=!0,this.removeWorkPackageRow(),setTimeout(()=&gt;{this.showRow(),this.cdRef.detectChanges()},50)}removeWorkPackageRow(){this.wpCreate.cancelCreation(),this.currentWorkPackage=null,this.$element.find(".wp-row-new").remove(),this.editingSubscription&amp;&amp;this.editingSubscription.unsubscribe()}showRow(){this.mode="inactive",this.cdRef.detectChanges()}hideRow(){this.mode="create",this.cdRef.detectChanges()}get colspan(){return this.wpTableColumns.columnCount+1}}L.\u0275fac=function(e){return new(e||L)(j.hc(j.A),j.hc(j.q),j.hc(y.a),j.hc(l.a),j.hc(w.a),j.hc(j.i),j.hc(o.a),j.hc(k.a),j.hc(m.a),j.hc(s.a),j.hc(n.a))},L.\u0275cmp=j.bc({type:L,selectors:[["","wpInlineCreate",""]],hostBindings:function(e,t){1&amp;e&amp;&amp;j.vc("keydown.escape",(function(){return t.resetRow()}))},inputs:{table:["wp-inline-create--table","table"],projectIdentifier:["wp-inline-create--project-identifier","projectIdentifier"]},features:[j.Qb],attrs:["wpInlineCreate",""],decls:1,vars:1,consts:[[4,"ngIf"],["class","wp-inline-create-button-row hide-when-print",4,"ngIf"],[1,"wp-inline-create-button-row","hide-when-print"],[1,"wp-inline-create-button-td","-no-highlighting"],[1,"wp-inline-create-button"],["class","wp-inline-create--add-link","href","","role","link","aria-haspopup","true",3,"focus","ngClass","accessibleClick",4,"ngIf"],["href","","role","link","aria-haspopup","true",1,"wp-inline-create--add-link",3,"focus","ngClass","accessibleClick"],["icon-classes","icon icon-add"],[3,"textContent"],["href","","role","link","aria-haspopup","true",1,"wp-inline-create--reference-link","wp-inline-create--split-link",3,"accessibleClick"],["icon-classes","icon icon-link"],[1,"wp-inline-reference-row-td","-no-highlighting"],[4,"ngComponentOutlet","ngComponentOutletInjector"]],template:function(e,t){1&amp;e&amp;&amp;j.ad(0,A,3,2,"ng-container",0),2&amp;e&amp;&amp;j.Dc("ngIf",t.canAdd||t.canReference)},directives:[S.q,T.a,S.n,P.a,I.a,S.o,_.a],encapsulation:2})},"6x6j":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("Mo6U"),s=i("fXoL");class a{extract(e,t){let i={_links:{}};var s=[];for(var a in t)t.hasOwnProperty(a)&amp;&amp;t[a].writable&amp;&amp;(e.$links[a]?Array.isArray(e[a])?i._links[a]=_.map(e[a],e=&gt;({href:e.$href})):i._links[a]={href:e[a]&amp;&amp;e[a].$href}:s.push(a));return _.each(s,t=&gt;{(e.hasOwnProperty(t)||e[t])&amp;&amp;(Array.isArray(e[t])?i[t]=_.map(e[t],e=&gt;e instanceof n.a?this.extract(e,e.currentSchema||e.schema):e):i[t]=e[t])}),i}}a.\u0275fac=function(e){return new(e||a)},a.\u0275prov=s.dc({token:a,factory:a.\u0275fac})},"6yP5":function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i("iMRi"),s=i("FnNU"),a=i("CqXF"),r=i("E2tj"),o=i("zqrF"),c=i("Jui0"),l=i("fXoL");class d extends o.a{constructor(e,t,i){super(t),this.states=e,this.querySpace=t,this.pathHelper=i}valueFromQuery(e){return[...e.sortBy]}onReadyWithAvailable(){return Object(s.b)(this.pristineState,this.states.queries.sortBy).values$().pipe(Object(a.a)(null))}hasChanged(e){const t=e=&gt;e.map(e=&gt;e.href);return!_.isEqual(t(e.sortBy),t(this.current))}applyToQuery(e){const t=this.isManuallySorted(e.sortBy);return e.sortBy=[...this.current],!(t&amp;&amp;this.isManualSortingMode)}isSortable(e){return!!_.find(this.available,t=&gt;t.column.$href===e.$href)}addSortCriteria(e,t){let i=this.findAvailableDirection(e,t);i&amp;&amp;this.add(i)}setAsSingleSortCriteria(e,t){let i=this.findAvailableDirection(e,t);i&amp;&amp;this.update([i])}findAvailableDirection(e,t){return _.find(this.available,i=&gt;i.column.$href===e.$href&amp;&amp;i.direction.$href===t)}add(e){let t=_.uniqBy([e,...this.current],e=&gt;e.column.$href).slice(0,3);this.update(t)}get isManualSortingMode(){return this.isManuallySorted(this.current)}switchToManualSorting(e){let t=this.manualSortObject;if(t&amp;&amp;!this.isManualSortingMode){if(e&amp;&amp;e.persisted)return e.sortBy=[t],!0;this.update([t])}return!1}get current(){return this.lastUpdatedState.getValueOr([])}get availableState(){return this.states.queries.sortBy}get available(){return this.availableState.getValueOr([])}isManuallySorted(e){return!!(e&amp;&amp;e.length&gt;0)&amp;&amp;e[0].column.href.endsWith("/manualSorting")}get manualSortObject(){return _.find(this.available,e=&gt;e.column.$href.endsWith("/manualSorting"))}}d.\u0275fac=function(e){return new(e||d)(l.rc(n.a),l.rc(r.a),l.rc(c.a))},d.\u0275prov=l.dc({token:d,factory:d.\u0275fac})},"70hh":function(e,t,i){"use strict";i.d(t,"a",(function(){return j}));var n=i("wZYP"),s=i("Y41n"),a=i("4EDS"),r=i("fbLK"),o=i("ZOsW"),c=i("F5Dh"),l=i("l08T"),d=i("AEvm"),u=i("Hg4z"),h=i("fXoL"),p=i("ofXK"),m=i("Q2ix"),g=i("N5AO"),f=i("Ndcw"),b=i("xFOf");function v(e,t){if(1&amp;e){const e=h.oc();h.nc(0,"a",20),h.vc("click",(function(){return h.Sc(e),h.xc(2).closeFilter()})),h.mc()}if(2&amp;e){const e=h.xc(2);h.Ub("title",e.text.close_form)}}function w(e,t){if(1&amp;e){const e=h.oc();h.nc(0,"li",22),h.vc("deactivateFilter",(function(t){return h.Sc(e),h.xc(3).deactivateFilter(t)}))("filterChanged",(function(){h.Sc(e);const t=h.xc(3);return t.filtersChanged.emit(t.filters)})),h.mc()}if(2&amp;e){const e=h.xc(),t=e.$implicit,i=e.index,n=h.xc(2);h.Fc("id","filter_",t.id,""),h.Dc("shouldFocus",i==n.focusElementIndex)("filter",t)("hidden",n.isHiddenFilter(t))}}function y(e,t){if(1&amp;e&amp;&amp;(h.lc(0),h.ad(1,w,1,4,"li",21),h.kc()),2&amp;e){const e=t.$implicit,i=h.xc(2);h.Tb(1),h.Dc("ngIf",i.isFilterAvailable(e.id))}}function k(e,t){1&amp;e&amp;&amp;h.ic(0,"li",9)}function C(e,t){if(1&amp;e&amp;&amp;h.ic(0,"enterprise-banner",23),2&amp;e){const e=h.xc(2);h.Dc("linkMessage",e.text.upsale_link)("textMessage",e.text.upsale_for_more)}}function x(e,t){if(1&amp;e){const e=h.oc();h.nc(0,"fieldset",1),h.ic(1,"legend",2),h.ad(2,v,1,1,"a",3),h.nc(3,"ul",4),h.nc(4,"li",5),h.ic(5,"label",6),h.nc(6,"div",7),h.nc(7,"wp-filter-by-text-input",8),h.vc("deactivateFilter",(function(t){return h.Sc(e),h.xc().deactivateFilter(t)})),h.mc(),h.mc(),h.mc(),h.ic(8,"li",9),h.ad(9,y,2,1,"ng-container",10),h.ad(10,k,1,0,"li",11),h.nc(11,"li",12),h.nc(12,"label",13),h.ic(13,"op-icon",14),h.cd(14),h.mc(),h.nc(15,"label",15),h.cd(16),h.mc(),h.nc(17,"div",16),h.nc(18,"ng-select",17,18),h.vc("open",(function(){return h.Sc(e),h.xc().onOpen()}))("change",(function(t){return h.Sc(e),h.xc().onFilterAdded(t)})),h.mc(),h.mc(),h.mc(),h.mc(),h.ad(20,C,1,2,"enterprise-banner",19),h.mc()}if(2&amp;e){const e=h.xc();h.Tb(1),h.Dc("textContent",e.text.selected_filter_list),h.Tb(1),h.Dc("ngIf",e.showCloseFilter),h.Tb(3),h.Dc("textContent",e.text.filter_by_text),h.Ub("title",e.text.filter_by_text),h.Tb(4),h.Dc("ngForOf",e.filters)("ngForTrackBy",e.trackByName),h.Tb(1),h.Dc("ngIf",e.isSecondSpacerVisible),h.Tb(4),h.ed(" ",e.text.label_filter_add,": "),h.Tb(2),h.gd(" ",e.text.label_filter_add," ",e.text.open_filter," ",e.text.close_filter," "),h.Tb(2),h.Dc("items",e.remainingFilters)("clearSearchOnAdd",!0)("multiple",!1)("clearable",!0)("clearOnBackspace",!0)("closeOnSelect",!0)("virtualScroll",!0)("placeholder",e.text.please_select),h.Tb(2),h.Dc("ngIf",e.eeShowBanners)}}class j extends d.a{constructor(e,t,i,n){super(),this.wpTableFilters=e,this.wpFiltersService=t,this.I18n=i,this.bannerService=n,this.showCloseFilter=!1,this.filtersChanged=new s.a(Object(u.b)(this)),this.remainingFilters=[],this.eeShowBanners=!1,this.focusElementIndex=0,this.trackByName=a.a.trackByName,this.text={open_filter:this.I18n.t("js.filter.description.text_open_filter"),label_filter_add:this.I18n.t("js.work_packages.label_filter_add"),close_filter:this.I18n.t("js.filter.description.text_close_filter"),upsale_for_more:this.I18n.t("js.filter.upsale_for_more"),upsale_link:this.I18n.t("js.filter.upsale_link"),close_form:this.I18n.t("js.close_form_title"),selected_filter_list:this.I18n.t("js.label_selected_filter_list"),button_delete:this.I18n.t("js.button_delete"),please_select:this.I18n.t("js.placeholders.selection"),filter_by_text:this.I18n.t("js.work_packages.label_filter_by_text")}}ngOnInit(){this.eeShowBanners=this.bannerService.eeShowBanners}ngOnChanges(){this.updateRemainingFilters()}onFilterAdded(e){if(e){let t=this.wpTableFilters.instantiate(e);this.filters.push(t);const i=this.currentFilterLength();this.updateFilterFocus(i),this.updateRemainingFilters(),this.filtersChanged.emit(this.filters),this.ngSelectComponent.clearItem(e)}}closeFilter(){this.wpFiltersService.toggleVisibility()}isHiddenFilter(e){return _.includes(this.wpTableFilters.hidden,e.id)}deactivateFilter(e){let t=this.filters.indexOf(e);_.remove(this.filters,t=&gt;t.id===e.id),this.filtersChanged.emit(this.filters),this.updateFilterFocus(t),this.updateRemainingFilters()}get isSecondSpacerVisible(){const e=!!_.find(this.filters,e=&gt;"search"===e.id),t=!!_.find(this.filters,e=&gt;"search"!==e.id&amp;&amp;this.isFilterAvailable(e.id));return e&amp;&amp;t}updateRemainingFilters(){this.remainingFilters=_.sortBy(this.wpTableFilters.remainingVisibleFilters(this.filters),"name")}updateFilterFocus(e){var t=this.currentFilterLength();if(0===t)this.focusElementIndex=-1;else{const i=e
    <t?e:t-1,n=this.currentfilterat(i);this.focuselementindex=this.filters.indexof(n)}}currentfilterlength(){return this.filters.length}currentfilterat(e){return="" this.filters[e]}isfilteravailable(e){return="" this.wptablefilters.availablefilters.some(t="">
     t.id===e)}onOpen(){setTimeout(()=&gt;{const e=this.ngSelectComponent;e&amp;&amp;e.dropdownPanel&amp;&amp;e.dropdownPanel._updatePosition()},25)}}j.\u0275fac=function(e){return new(e||j)(h.hc(c.a),h.hc(l.a),h.hc(n.a),h.hc(r.a))},j.\u0275cmp=h.bc({type:j,selectors:[["query-filters"]],viewQuery:function(e,t){var i;(1&amp;e&amp;&amp;h.hd(o.a,!0),2&amp;e)&amp;&amp;(h.Pc(i=h.wc())&amp;&amp;(t.ngSelectComponent=i.first))},inputs:{filters:"filters",showCloseFilter:"showCloseFilter"},outputs:{filtersChanged:"filtersChanged"},features:[h.Qb,h.Rb],decls:1,vars:1,consts:[["id","filters","class","advanced-filters--container",4,"ngIf"],["id","filters",1,"advanced-filters--container"],[3,"textContent"],["class","advanced-filters--close icon-context icon-close",3,"click",4,"ngIf"],[1,"advanced-filters--filters"],["id","filter_search",1,"advanced-filters--filter","--without-operator"],["for","filter-by-text-input",1,"advanced-filters--filter-name",3,"textContent"],[1,"advanced-filters--filter-value"],[3,"deactivateFilter"],[1,"advanced-filters--spacer"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","advanced-filters--spacer",4,"ngIf"],[1,"advanced-filters--add-filter"],["for","add_filter_select","aria-hidden","true",1,"advanced-filters--add-filter-label"],["icon-classes","icon-add icon4"],["for","add_filter_select",1,"hidden-for-sighted"],[1,"advanced-filters--add-filter-value"],["id","add_filter_select","bindLabel","name","appendTo","body",3,"items","clearSearchOnAdd","multiple","clearable","clearOnBackspace","closeOnSelect","virtualScroll","placeholder","open","change"],["ngSelectComponent",""],["class","advanced-filters--add-filter-info","opReferrer","wp-filter#filters",3,"linkMessage","textMessage",4,"ngIf"],[1,"advanced-filters--close","icon-context","icon-close",3,"click"],["query-filter","","class","advanced-filters--filter",3,"id","shouldFocus","filter","hidden","deactivateFilter","filterChanged",4,"ngIf"],["query-filter","",1,"advanced-filters--filter",3,"id","shouldFocus","filter","hidden","deactivateFilter","filterChanged"],["opReferrer","wp-filter#filters",1,"advanced-filters--add-filter-info",3,"linkMessage","textMessage"]],template:function(e,t){1&amp;e&amp;&amp;h.ad(0,x,21,20,"fieldset",0),2&amp;e&amp;&amp;h.Dc("ngIf",t.filters)},directives:[p.q,m.a,p.p,g.a,o.a,f.a,b.a],encapsulation:2,changeDetection:0})},"711n":function(e,t,i){"use strict";i.d(t,"a",(function(){return g}));var n=i("mrSG"),s=i("fXoL"),a=i("iB+3"),r=i("8zkO"),o=i("FnNU"),c=i("pLZG"),l=i("IzEk"),d=i("lJxs"),u=i("wZYP"),h=i("e6KS"),p=(i("Mo6U"),i("Ie+Q")),m=i("A0F/");class g extends h.a{constructor(e,t,i,n,a,r,c,l){super(e),this.injector=e,this.elementRef=t,this.$transitions=i,this.ConfigurationService=n,this.editingPortalService=a,this.$state=r,this.I18n=c,this.editFormRouting=l,this.initializeEditMode=!1,this.skippedFields=[],this.onSavedEmitter=new s.s,this.fields={},this.registeredFields=Object(o.f)();const d=c.t("js.work_packages.confirm_edit_cancel"),u=n.warnOnLeavingUnsaved();this.unregisterListener=i.onBefore({},e=&gt;{if(this.editing){if(!this.editFormRouting||this.editFormRouting.blockedTransition(e)){if(u&amp;&amp;!window.confirm(d))return!1;this.stop()}return!0}})}ngOnDestroy(){this.destroy()}ngOnInit(){this.editMode=this.initializeEditMode,this.initializeEditMode&amp;&amp;this.start()}destroy(){this.unregisterListener(),super.destroy()}activateField(e,t,i,s){return Object(n.b)(this,void 0,void 0,(function*(){return this.waitForField(i).then(n=&gt;{n.setActive(!0);const a=n.editContainer.nativeElement;return this.editingPortalService.create(a,this.injector,e,t,i,s)})}))}reset(e,t=!1){return Object(n.b)(this,void 0,void 0,(function*(){const i=yield this.waitForField(e);i.reset(),i.deactivate(t)}))}onSaved(e,t){super.onSaved(e,t),this.stopEditingAndLeave(t,e)}requireVisible(e){return new Promise((t,i)=&gt;{const n=setInterval(()=&gt;{void 0!==this.fields[e]&amp;&amp;(clearInterval(n),t())},50)})}get editing(){return this.editMode||this.hasActiveFields()}register(e){this.fields[e.fieldName]=e,this.registeredFields.putValue(_.keys(this.fields)),(this.editMode&amp;&amp;!this.skipField(e)||this.activeFields[e.fieldName])&amp;&amp;e.activateOnForm(!0)}waitForField(e){return this.registeredFields.values$().pipe(Object(c.a)(t=&gt;t.indexOf(e)&gt;=0),Object(l.a)(1),Object(d.a)(()=&gt;this.fields[e])).toPromise()}start(){_.each(this.fields,e=&gt;this.activate(e.fieldName))}stop(){this.editMode=!1,this.closeEditFields(),this.halEditing.stopEditing(this.resource),this.destroy()}save(){const e=this.resource.isNew;return this.submit().then(t=&gt;{this.stopEditingAndLeave(t,e)})}stopEditingAndLeave(e,t){this.stop(),this.onSavedEmitter.emit({savedResource:e,isInitial:t})}focusOnFirstError(){jQuery(this.elementRef.nativeElement).find(`.${h.c}.-error .${h.b}`).first().trigger("focus")}skipField(e){const t=e.fieldName;if(!(-1!==this.skippedFields.indexOf(t)))return!1;const i=this.resource[t],n=this.change.changes[t];return i&amp;&amp;!n}}g.\u0275fac=function(e){return new(e||g)(s.hc(s.A),s.hc(s.q),s.hc(a.O),s.hc(r.a),s.hc(p.a),s.hc(a.G),s.hc(u.a),s.hc(m.a,8))},g.\u0275cmp=s.bc({type:g,selectors:[["edit-form"],["","edit-form",""]],inputs:{resource:"resource",initializeEditMode:["inEditMode","initializeEditMode"],skippedFields:"skippedFields"},outputs:{onSavedEmitter:"onSaved"},features:[s.Qb],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&amp;e&amp;&amp;(s.Cc(),s.Bc(0))},encapsulation:2})},"72I8":function(e,t,i){"use strict";i.d(t,"a",(function(){return h}));var n=i("wZYP"),s=(i("AA01"),i("Y41n")),a=i("juWA"),r=i("AEvm"),o=i("Hg4z"),c=i("fXoL"),l=i("ecJW"),d=i("3Pt+"),u=i("oUDv");class h extends r.a{constructor(e,t){super(),this.timezoneService=e,this.I18n=t,this.shouldFocus=!1,this.filterChanged=new s.a(Object(o.b)(this))}get value(){return this.filter.values[0]}set value(e){this.filter.values=[e],this.filterChanged.emit(this.filter)}parser(e){return moment(e,"YYYY-MM-DD",!0).isValid()?e:null}formatter(e){if(moment(e,"YYYY-MM-DD",!0).isValid()){var t=this.timezoneService.parseDate(e);return this.timezoneService.formattedISODate(t)}return null}}h.\u0275fac=function(e){return new(e||h)(c.hc(a.a),c.hc(n.a))},h.\u0275cmp=c.bc({type:h,selectors:[["filter-date-value"]],inputs:{shouldFocus:"shouldFocus",filter:"filter"},outputs:{filterChanged:"filterChanged"},features:[c.Qb],decls:3,vars:5,consts:[[3,"id"],[3,"onChange"],["required","","size","10","type","text",1,"advanced-filters--date-field",3,"ngModel","focus","id","name","ngModelChange"]],template:function(e,t){1&amp;e&amp;&amp;(c.nc(0,"div",0),c.nc(1,"op-date-picker",1),c.vc("onChange",(function(e){return t.value=t.parser(e)})),c.nc(2,"input",2),c.vc("ngModelChange",(function(e){return t.value=t.parser(e)})),c.mc(),c.mc(),c.mc()),2&amp;e&amp;&amp;(c.Fc("id","div-values-",t.filter.id,""),c.Tb(2),c.Fc("id","values-",t.filter.id,""),c.Fc("name","v[",t.filter.id,"]"),c.Dc("ngModel",t.formatter(t.value))("focus",t.shouldFocus))},directives:[l.a,d.c,d.x,d.m,d.p,u.a],encapsulation:2})},"72oW":function(e,t,i){"use strict";i.d(t,"a",(function(){return V}));var n=i("mrSG"),s=i("fXoL"),a=i("PtkW"),r=i("Zq3F"),o=i("ooSb"),c=i("0bag"),l=i("sngl"),d=i("IaZ+"),u=i("sjKJ"),h=i("+oAL"),p=i("U1xf"),m=i("Y0Nk"),g=i("pL6k"),f=i("wZYP"),b=i("E2tj"),v=i("Dp3K"),w=i("r0MM");class y extends v.a{constructor(){super(...arguments),this.uniqueEmbeddedTableName=`embedded-table-${Date.now()}`,this.initialLoadingIndicator=!0,this.renderTable=!1,this.showTablePagination=!1,this.error=null,this.initialized=!1}ngOnInit(){this.configuration=new p.a(this.providedConfiguration),this.configuration.isEmbedded=!0,this.initialized=!0,super.ngOnInit()}ngAfterViewInit(){this.loadQuery(!0,!1)}ngOnChanges(e){this.initialized&amp;&amp;(e.queryId||e.queryProps)&amp;&amp;this.loadQuery(this.initialLoadingIndicator,!1)}get projectIdentifier(){return this.configuration.projectContext?this.currentProject.identifier||void 0:this.configuration.projectIdentifier||void 0}buildQueryProps(){const e=this.querySpace.query.value;return this.wpStatesInitialization.applyToQuery(e),this.urlParamsHelper.buildV3GetQueryFromQueryResource(e)}setLoaded(){this.renderTable=this.configuration.tableVisible,this.cdRef.detectChanges()}refresh(e=!0,t=!1){const i=this.querySpace.query.value,n=this.wpTablePagination.paginationObject;t&amp;&amp;(n.offset=1);const s=this.QueryDm.loadResults(i,n).then(e=&gt;this.wpStatesInitialization.updateQuerySpace(e,e.results));return e&amp;&amp;(this.loadingIndicator=s),s}get isInitialized(){return!!this.configuration}set loadingIndicator(e){this.configuration.tableVisible&amp;&amp;(this.loadingIndicatorService.indicator(this.uniqueEmbeddedTableName).promise=e)}get queryProjectScope(){return this.configuration.projectContext?this.projectIdentifier:void 0}initializeStates(e){this.wpStatesInitialization.clearStates(),this.wpStatesInitialization.initializeFromQuery(e,e.results),this.wpStatesInitialization.updateQuerySpace(e,e.results)}}y.\u0275fac=function(e){return k(e||y)},y.\u0275dir=s.cc({type:y,inputs:{providedConfiguration:["configuration","providedConfiguration"],uniqueEmbeddedTableName:"uniqueEmbeddedTableName",initialLoadingIndicator:"initialLoadingIndicator"},features:[s.Qb,s.Rb]}),Object(n.c)([Object(w.a)(),Object(n.e)("design:type",c.a)],y.prototype,"QueryDm",void 0),Object(n.c)([Object(w.a)(),Object(n.e)("design:type",b.a)],y.prototype,"querySpace",void 0),Object(n.c)([Object(w.a)(),Object(n.e)("design:type",f.a)],y.prototype,"I18n",void 0),Object(n.c)([Object(w.a)(),Object(n.e)("design:type",g.a)],y.prototype,"urlParamsHelper",void 0),Object(n.c)([Object(w.a)(),Object(n.e)("design:type",m.a)],y.prototype,"loadingIndicatorService",void 0),Object(n.c)([Object(w.a)(),Object(n.e)("design:type",h.a)],y.prototype,"wpStatesInitialization",void 0),Object(n.c)([Object(w.a)(),Object(n.e)("design:type",u.a)],y.prototype,"currentProject",void 0),Object(n.c)([Object(w.a)(),Object(n.e)("design:type",s.i)],y.prototype,"cdRef",void 0);const k=s.pc(y);var C=i("OGNV"),x=i("lJxs"),j=i("/uUt"),S=i("zp1y"),T=i("IzEk"),P=i("ofXK"),I=i("lmDM"),O=i("eaMR"),D=i("9hh2"),R=i("eJFM");function E(e,t){if(1&amp;e&amp;&amp;s.ic(0,"filter-container",10),2&amp;e){const e=s.xc(3);s.Dc("showFilterButton",e.configuration.showFilterButton)("filterButtonText",e.configuration.filterButtonText)}}function F(e,t){if(1&amp;e&amp;&amp;s.ic(0,"wp-table",11),2&amp;e){const e=s.xc(3);s.Dc("projectIdentifier",e.projectIdentifier)("configuration",e.configuration)}}function M(e,t){if(1&amp;e&amp;&amp;s.ic(0,"wp-grid",12),2&amp;e){const e=s.xc(3);s.Dc("configuration",e.configuration)}}function A(e,t){if(1&amp;e&amp;&amp;(s.lc(0),s.ad(1,E,1,2,"filter-container",4),s.ad(2,F,1,2,"wp-table",5),s.nc(3,"div",6),s.ad(4,M,1,1,"wp-grid",7),s.mc(),s.nc(5,"div",8),s.ic(6,"wp-table-pagination",9),s.mc(),s.kc()),2&amp;e){const e=s.xc(2);s.Tb(1),s.Dc("ngIf",e.configuration.withFilters),s.Tb(1),s.Dc("ngIf",!e.configuration.isCardView),s.Tb(2),s.Dc("ngIf",e.configuration.isCardView),s.Tb(2),s.Dc("hideForSinglePageResults",!0)}}function L(e,t){if(1&amp;e&amp;&amp;(s.nc(0,"div",13),s.ic(1,"span",14),s.mc()),2&amp;e){const e=s.xc(2);s.Tb(1),s.Dc("textContent",e.error.message||e.error)}}const q=function(e,t,i){return{"-hierarchy-disabled":e,"-compact-tables":t,"-external-height":i}};function $(e,t){if(1&amp;e&amp;&amp;(s.nc(0,"div",1),s.ad(1,A,7,4,"ng-container",2),s.ad(2,L,2,1,"div",3),s.mc()),2&amp;e){const e=s.xc();s.Dc("ngClass",s.Kc(4,q,!e.configuration.hierarchyToggleEnabled,e.configuration.compactTableStyle,e.externalHeight)),s.Ub("data-indicator-name",e.uniqueEmbeddedTableName),s.Tb(1),s.Dc("ngIf",e.renderTable),s.Tb(1),s.Dc("ngIf",e.error)}}class V extends y{constructor(){super(...arguments),this.queryProps={},this.tableActions=[],this.externalHeight=!1,this.onError=new s.s,this.onQueryLoaded=new s.s}ngOnInit(){super.ngOnInit(),this.loadedQuery=this.querySpace.query.value}ngAfterViewInit(){super.ngAfterViewInit(),this.tableActions&amp;&amp;this.tableActionsService.setActions(...this.tableActions),this.wpTablePagination.updates$().pipe(Object(x.a)(e=&gt;[e.page,e.perPage]),Object(j.a)(),this.untilDestroyed(),Object(S.a)(this.querySpace.query.values$())).subscribe(([e,t])=&gt;{this.loadingIndicator=this.QueryDm.loadResults(t,this.wpTablePagination.paginationObject).then(e=&gt;this.initializeStates(e))})}openConfigurationModal(e){this.querySpace.query.valuesPromise().then(()=&gt;{this.opModalService.show(l.a,this.injector).onDataUpdated.subscribe(e)})}initializeStates(e){this.configuration.withFilters&amp;&amp;this.loadForm(e),super.initializeStates(e),this.querySpace.initialized.values$().pipe(Object(T.a)(1)).subscribe(()=&gt;{this.showTablePagination=e.results.total&gt;e.results.count,this.setLoaded(),this.wpTableTimeline.isVisible&amp;&amp;(this.configuration=Object.assign(Object.assign({},this.configuration),{compactTableStyle:!1}))})}loadForm(e){return this.formPromise?this.formPromise:this.formPromise=this.QueryFormDm.load(e).then(t=&gt;(this.wpStatesInitialization.updateStatesFromForm(e,t),t)).catch(()=&gt;this.formPromise=void 0)}loadQuery(e=!0,t=!1){if(this.formPromise=void 0,this.loadedQuery){const e=this.loadedQuery;return this.loadedQuery=void 0,this.initializeStates(e),Promise.resolve(this.loadedQuery)}this.configuration.tableVisible||(this.queryProps.pageSize=1),t&amp;&amp;(this.queryProps.page=1),this.error=null;const i=this.QueryDm.find(this.queryProps,this.queryId,this.queryProjectScope).then(e=&gt;(this.initializeStates(e),this.onQueryLoaded.emit(e),e)).catch(e=&gt;{this.error=this.I18n.t("js.error.embedded_table_loading",{message:_.get(e,"message",e)}),this.onError.emit(e)});return e&amp;&amp;(this.loadingIndicator=i),i}}V.\u0275fac=function(e){return N(e||V)},V.\u0275cmp=s.bc({type:V,selectors:[["wp-embedded-table"]],inputs:{queryId:"queryId",queryProps:"queryProps",tableActions:"tableActions",externalHeight:"externalHeight"},outputs:{onError:"onError",onQueryLoaded:"onQueryLoaded"},features:[s.Qb],decls:1,vars:1,consts:[["class","work-packages-embedded-view--container loading-indicator--location",3,"ngClass",4,"ngIf"],[1,"work-packages-embedded-view--container","loading-indicator--location",3,"ngClass"],[4,"ngIf"],["class","notification-box -error",4,"ngIf"],[3,"showFilterButton","filterButtonText",4,"ngIf"],["class","work-packages-split-view--tabletimeline-content",3,"projectIdentifier","configuration",4,"ngIf"],[1,"work-packages-embedded-view--grid-view"],[3,"configuration",4,"ngIf"],[1,"work-packages-split-view--tabletimeline-footer","hide-when-print"],[3,"hideForSinglePageResults"],[3,"showFilterButton","filterButtonText"],[1,"work-packages-split-view--tabletimeline-content",3,"projectIdentifier","configuration"],[3,"configuration"],[1,"notification-box","-error"],[3,"textContent"]],template:function(e,t){1&amp;e&amp;&amp;s.ad(0,$,3,8,"div",0),2&amp;e&amp;&amp;s.Dc("ngIf",t.configuration)},directives:[P.q,P.n,I.a,O.a,D.a,R.a],encapsulation:2}),Object(n.c)([Object(w.a)(),Object(n.e)("design:type",c.a)],V.prototype,"QueryDm",void 0),Object(n.c)([Object(w.a)(),Object(n.e)("design:type",d.b)],V.prototype,"opModalService",void 0),Object(n.c)([Object(w.a)(),Object(n.e)("design:type",o.a)],V.prototype,"tableActionsService",void 0),Object(n.c)([Object(w.a)(),Object(n.e)("design:type",a.a)],V.prototype,"wpTableTimeline",void 0),Object(n.c)([Object(w.a)(),Object(n.e)("design:type",r.a)],V.prototype,"wpTablePagination",void 0),Object(n.c)([Object(w.a)(),Object(n.e)("design:type",C.a)],V.prototype,"QueryFormDm",void 0);const N=s.pc(V)},"7MH/":function(e,t,i){"use strict";i.d(t,"a",(function(){return p}));var n=i("fXoL"),s=(i("kgyZ"),i("V4eP")),a=i("57Du"),r=i("5btT"),o=(i("GntA"),i("ofXK")),c=i("3Pt+"),l=i("CS/5");function d(e,t){1&amp;e&amp;&amp;n.jc(0)}const u=function(e){return{"-error":e}};function h(e,t){if(1&amp;e){const e=n.oc();n.nc(0,"div",1),n.nc(1,"form",2),n.vc("submit",(function(){return n.Sc(e),n.xc().handler.handleUserSubmit()})),n.nc(2,"label",3),n.cd(3),n.mc(),n.ad(4,d,1,0,"ng-container",4),n.mc(),n.mc()}if(2&amp;e){const e=n.xc();n.Wb("inline-edit--active-field inplace-edit ",e.handler.fieldName,""),n.Dc("ngClass",n.Ic(9,u,e.handler.isErrorenous)),n.Tb(2),n.Dc("for",e.handler.htmlId),n.Tb(1),n.fd(" ",e.handler.fieldLabel," ",e.handler.errorMessageOnLabel," "),n.Tb(1),n.Dc("ngComponentOutlet",e.componentClass)("ngComponentOutletInjector",e.fieldInjector)}}class p{constructor(e,t,i){this.injector=e,this.editField=t,this.elementRef=i,this.onEditFieldReady=new n.s}ngOnInit(){this.editFieldHandler&amp;&amp;this.schemaInput?(this.handler=this.editFieldHandler,this.schema=this.schemaInput,this.change=this.changeInput):(this.handler=this.injector.get(s.c),this.schema=this.injector.get(s.d),this.change=this.injector.get(s.b)),this.componentClass=this.editField.getSpecificClassFor(this.change.pristineResource._type,this.handler.fieldName,this.schema.type),this.fieldInjector=Object(a.a)(this.injector,this.change,this.handler,this.schema)}ngOnDestroy(){this.onEditFieldReady.complete()}ngAfterViewInit(){setTimeout(()=&gt;{this.onEditFieldReady.emit()})}}p.\u0275fac=function(e){return new(e||p)(n.hc(n.A),n.hc(r.a),n.hc(n.q))},p.\u0275cmp=n.bc({type:p,selectors:[["edit-form-portal"]],inputs:{schemaInput:"schemaInput",changeInput:"changeInput",editFieldHandler:"editFieldHandler"},outputs:{onEditFieldReady:"onEditFieldReady"},decls:1,vars:1,consts:[[3,"class","ngClass",4,"ngIf"],[3,"ngClass"],["role","form","tabindex","-1",3,"submit"],[1,"hidden-for-sighted",3,"for"],[4,"ngComponentOutlet","ngComponentOutletInjector"]],template:function(e,t){1&amp;e&amp;&amp;n.ad(0,h,5,11,"div",0),2&amp;e&amp;&amp;n.Dc("ngIf",t.handler)},directives:[o.q,o.n,c.C,c.n,c.o,o.o,l.a],encapsulation:2})},"7ond":function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");class s{constructor(){this.minimumOffsetForNewSwitchInMs=100,this.lastFocusSwitch=-this.minimumOffsetForNewSwitchInMs,this.lastPriority=-1}throttleAndCheckIfAllowedFocusChangeBasedOnTimeout(){var e=Date.now()-this.lastFocusSwitch&gt;=this.minimumOffsetForNewSwitchInMs;return this.lastFocusSwitch=Date.now(),e}checkIfAllowedFocusChange(e){var t=this.throttleAndCheckIfAllowedFocusChangeBasedOnTimeout();if(t)this.lastPriority=-1;else if(e&gt;this.lastPriority)return this.lastPriority=e,!0;return t}getFocusableElement(e){var t=e.find("input.ui-select-focusser");if(t.length&gt;0)return t[0];var i=e;return e.is(s.FOCUSABLE_SELECTORS)||(i=e.find(s.FOCUSABLE_SELECTORS)),i[0]}focus(e){var t=jQuery(this.getFocusableElement(e)),i=jQuery(t),n=i.is("[disabled]");n&amp;&amp;!i.attr("ng-disabled")&amp;&amp;i.prop("disabled",!1),t.focus(),n&amp;&amp;!i.attr("ng-disabled")&amp;&amp;i.prop("disabled",!0)}focusElement(e,t){this.checkIfAllowedFocusChange(t)&amp;&amp;setTimeout(()=&gt;{this.focus(e)},10)}}s.FOCUSABLE_SELECTORS="a, button, :input, [tabindex], select",s.\u0275fac=function(e){return new(e||s)},s.\u0275prov=n.dc({token:s,factory:s.\u0275fac,providedIn:"root"})},"7xci":function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i("mrSG"),s=i("wyKs"),a=i("E2tj"),r=i("VgZ9"),o=i("iMRi"),c=i("ug4p"),l=i("Va5K"),d=i("fXoL");class u{constructor(e,t,i,n,s,a){this.wpViewHierarchies=e,this.wpDisplayRepresentation=t,this.states=i,this.wpRelationHierarchy=n,this.wpCacheService=s,this.querySpace=a}get applicable(){return this.wpViewHierarchies.isEnabled&amp;&amp;this.wpDisplayRepresentation.isList}canIndent(e){if(!e.changeParent||!this.applicable)return!1;const t=this.renderedWorkPackageIds,i=t.indexOf(e.id);if(0===i)return!1;const n=e.ancestorIds,s=n.length;if(0===s)return!0;const a=n[s-1];return t[i-1]!==a}canOutdent(e){return!(!e.changeParent||!this.applicable)&amp;&amp;!!e.parent}indent(e){return Object(n.b)(this,void 0,void 0,(function*(){if(!this.canIndent(e))return Promise.reject();const t=this.renderedWorkPackageIds,i=t.indexOf(e.id),n=t[i-1];let s=n;const a=yield this.wpCacheService.require(n),r=_.difference(a.ancestorIds,e.ancestorIds);return r&amp;&amp;r.length&gt;0&amp;&amp;(s=r[0]),this.wpRelationHierarchy.changeParent(e,s)}))}outdent(e){if(!this.canOutdent(e))return Promise.reject();let t=null;const i=e.ancestorIds,n=i.length;return n&gt;1&amp;&amp;(t=i[n-2]),this.wpRelationHierarchy.changeParent(e,t)}get renderedWorkPackageIds(){return this.querySpace.renderedWorkPackageIds.getValueOr([])}}u.\u0275fac=function(e){return new(e||u)(d.rc(s.a),d.rc(l.a),d.rc(o.a),d.rc(r.a),d.rc(c.a),d.rc(a.a))},u.\u0275prov=d.dc({token:u,factory:u.\u0275fac})},"8+xT":function(e,t,i){"use strict";i.d(t,"a",(function(){return h}));i("ii2/");var n=i("ug4p"),s=i("wZYP"),a=i("VFHb"),r=i("AEvm"),o=i("fXoL"),c=i("ofXK"),l=i("N5AO");function d(e,t){if(1&amp;e&amp;&amp;o.ic(0,"span",4),2&amp;e){const e=o.xc(2);o.Dc("textContent",e.buttonText)}}function u(e,t){if(1&amp;e){const e=o.oc();o.nc(0,"button",1),o.vc("click",(function(){return o.Sc(e),o.xc().toggleWatch()})),o.ic(1,"op-icon",2),o.ad(2,d,1,1,"span",3),o.mc()}if(2&amp;e){const e=o.xc();o.Dc("disabled",e.disabled)("ngClass",e.buttonClass)("id",e.buttonId),o.Ub("title",e.buttonTitle),o.Tb(1),o.Fc("icon-classes","button--icon ",e.watchIconClass,""),o.Tb(1),o.Dc("ngIf",e.showText)}}class h extends r.a{constructor(e,t,i){super(),this.I18n=e,this.wpWatchersService=t,this.wpCacheService=i,this.showText=!1,this.disabled=!1}ngOnInit(){this.wpCacheService.loadWorkPackage(this.workPackage.id).values$().pipe(this.untilDestroyed()).subscribe(e=&gt;{this.workPackage=e,this.setWatchStatus()})}get isWatched(){return this.workPackage.hasOwnProperty("unwatch")}get displayWatchButton(){return this.isWatched||this.workPackage.hasOwnProperty("watch")}toggleWatch(){const e=this.nextStateLink();e(e.$link.payload).then(()=&gt;{this.wpWatchersService.clear(this.workPackage.id),this.wpCacheService.loadWorkPackage(this.workPackage.id,!0)})}nextStateLink(){const e=this.isWatched?"unwatch":"watch";return this.workPackage[e]}setWatchStatus(){this.isWatched?(this.buttonTitle=this.I18n.t("js.label_unwatch_work_package"),this.buttonText=this.I18n.t("js.label_unwatch"),this.buttonClass="-active",this.buttonId="unwatch-button",this.watchIconClass="icon-watched"):(this.buttonTitle=this.I18n.t("js.label_watch_work_package"),this.buttonText=this.I18n.t("js.label_watch"),this.buttonClass="",this.buttonId="watch-button",this.watchIconClass="icon-unwatched")}}h.\u0275fac=function(e){return new(e||h)(o.hc(s.a),o.hc(a.a),o.hc(n.a))},h.\u0275cmp=o.bc({type:h,selectors:[["wp-watcher-button"]],inputs:{workPackage:"workPackage",showText:"showText",disabled:"disabled"},features:[o.Qb],decls:1,vars:1,consts:[["class","button toolbar-icon",3,"disabled","ngClass","id","click",4,"ngIf"],[1,"button","toolbar-icon",3,"disabled","ngClass","id","click"],[3,"icon-classes"],["class","button--text",3,"textContent",4,"ngIf"],[1,"button--text",3,"textContent"]],template:function(e,t){1&amp;e&amp;&amp;o.ad(0,u,3,6,"button",0),2&amp;e&amp;&amp;o.Dc("ngIf",t.displayWatchButton)},directives:[c.q,c.n,l.a],encapsulation:2})},"80WE":function(e,t,i){"use strict";i.d(t,"a",(function(){return x}));var n,s=i("ug4p"),a=i("POAS"),r=i("iMRi"),o=i("Ncnr"),c=i("SKFm");!function(e){e.hasSelectionWithin=function(e){try{const t=window.getSelection(),i=t.toString().length&gt;0,n=e.contains(t.anchorNode);return i&amp;&amp;n}catch(t){return console.error("Failed to test whether in selection ",t),!1}}}(n||(n={}));var l=i("qHU1"),d=i("8zkO"),u=i("4lR/"),h=i("d/TE"),p=i("wZYP"),m=i("GjwL"),g=i("711n"),f=(i("Mo6U"),i("AEvm")),b=i("fXoL"),v=i("ofXK"),w=i("kor4");const y=["displayContainer"],k=["editContainer"],C=function(e,t,i,n){return[e,t,i,n]};class x extends f.a{constructor(e,t,i,n,s,a,r,c,l,d,u,h){super(),this.states=e,this.injector=t,this.elementRef=i,this.halNotification=n,this.ConfigurationService=s,this.opContextMenu=a,this.halEditing=r,this.wpCacheService=c,this.editForm=l,this.NotificationsService=d,this.cdRef=u,this.I18n=h,this.displayFieldOptions={},this.isDropTarget=!1,this.editFieldContainerClass=o.c,this.active=!1,this.destroyed=!1}setActive(e=!0){this.active=e,this.componentDestroyed||this.cdRef.detectChanges()}ngOnInit(){this.fieldRenderer=new o.a(this.injector,"single-view",this.displayFieldOptions),this.$element=jQuery(this.elementRef.nativeElement),this.editForm.register(this),this.halEditing.temporaryEditResource(this.resource).values$().pipe(this.untilDestroyed()).subscribe(e=&gt;{this.resource=e,this.render()})}startDragOverActivation(e){return!(this.isDropTarget&amp;&amp;this.isEditable&amp;&amp;!this.active)||(this.handleUserActivate(null),e.preventDefault(),!1)}render(){const e=this.fieldRenderer.render(this.resource,this.fieldName,null,this.displayPlaceholder);this.displayContainer.nativeElement.innerHTML="",this.displayContainer.nativeElement.appendChild(e)}deactivate(e=!1){this.editContainer.nativeElement.innerHTML="",this.editContainer.nativeElement.hidden=!0,this.setActive(!1),e&amp;&amp;setTimeout(()=&gt;this.$element.find(`.${o.b}`).focus(),20)}get isEditable(){const e=this.resource.schema[this.fieldName];return this.resource.isAttributeEditable(this.fieldName)&amp;&amp;e&amp;&amp;e.writable}activateIfEditable(e){if(n.hasSelectionWithin(e.target))return Object(l.a)(`Not activating ${this.fieldName} because of active selection within`),!0;return jQuery(e.target).closest("a,macro",this.displayContainer.nativeElement).length&gt;0||(this.isEditable&amp;&amp;this.handleUserActivate(e),this.opContextMenu.close(),e.preventDefault(),e.stopImmediatePropagation(),!1)}activateOnForm(e=!1){return this.setActive(!0),this.editForm.activate(this.fieldName,e).catch(()=&gt;this.deactivate(!0))}handleUserActivate(e){let t=0;return e&amp;&amp;(t=m.a.getPosition(e)),this.activateOnForm().then(e=&gt;{e&amp;&amp;(e.$onUserActivate.next(),e.focus(t))}),!1}reset(){this.render(),this.deactivate()}}x.\u0275fac=function(e){return new(e||x)(b.hc(r.a),b.hc(b.A),b.hc(b.q),b.hc(a.a),b.hc(d.a),b.hc(u.a),b.hc(c.a),b.hc(s.a),b.hc(g.a),b.hc(h.a),b.hc(b.i),b.hc(p.a))},x.\u0275cmp=b.bc({type:x,selectors:[["editable-attribute-field"]],viewQuery:function(e,t){var i;(1&amp;e&amp;&amp;(b.Yc(y,!0),b.Yc(k,!0)),2&amp;e)&amp;&amp;(b.Pc(i=b.wc())&amp;&amp;(t.displayContainer=i.first),b.Pc(i=b.wc())&amp;&amp;(t.editContainer=i.first))},inputs:{fieldName:"fieldName",resource:"resource",wrapperClasses:"wrapperClasses",displayFieldOptions:"displayFieldOptions",displayPlaceholder:"displayPlaceholder",isDropTarget:"isDropTarget"},features:[b.Qb],decls:5,vars:9,consts:[[3,"ngClass","dragover"],[3,"hidden"],["editContainer",""],["tabindex","-1",3,"accessibleClickStopEvent","hidden","accessibleClick"],["displayContainer",""]],template:function(e,t){1&amp;e&amp;&amp;(b.nc(0,"div",0),b.vc("dragover",(function(e){return t.startDragOverActivation(e)})),b.ic(1,"div",1,2),b.nc(3,"div",3,4),b.vc("accessibleClick",(function(e){return t.activateIfEditable(e)})),b.mc(),b.mc()),2&amp;e&amp;&amp;(b.Dc("ngClass",b.Lc(4,C,t.editFieldContainerClass,t.fieldName,t.active?"-active":"",t.wrapperClasses||"-small")),b.Tb(1),b.Dc("hidden",!t.active),b.Tb(2),b.Dc("accessibleClickStopEvent",!1)("hidden",t.active))},directives:[v.n,w.a],encapsulation:2,changeDetection:0})},"87fy":function(e,t,i){"use strict";i.d(t,"a",(function(){return m}));var n=i("mrSG"),s=i("Uyc6"),a=i("iMRi"),r=i("4n9w"),o=i("sjKJ"),c=i("FDFi"),l=i("tmNb"),d=i("99YG"),u=i("ug4p"),h=i("qc15"),p=i("fXoL");class m{constructor(e,t,i,n,s,a,r,o,c){this.states=e,this.injector=t,this.reorderService=i,this.wpCreate=n,this.notificationService=s,this.wpCacheService=a,this.currentProject=r,this.dragService=o,this.wpInlineCreate=c}init(e){this.cardView=e}destroy(){null!==this.dragService&amp;&amp;this.dragService.remove(this.cardView.container.nativeElement)}registerDragAndDrop(){null!==this.dragService&amp;&amp;this.dragService.register({dragContainer:this.cardView.container.nativeElement,scrollContainers:[this.cardView.container.nativeElement],moves:e=&gt;{const t=e.dataset.workPackageId,i=this.states.workPackages.get(t).value;return!!i&amp;&amp;this.cardView.canDragOutOf(i)&amp;&amp;!e.dataset.isNew},accepts:()=&gt;this.cardView.dragInto,onMoved:e=&gt;Object(n.b)(this,void 0,void 0,(function*(){const t=e.dataset.workPackageId,i=d.a.findIndex(e),n=yield this.reorderService.move(this.currentOrder,t,i);this.updateOrder(n),this.cardView.onMoved.emit()})),onRemoved:e=&gt;{const t=e.dataset.workPackageId,i=this.reorderService.remove(this.currentOrder,t);this.updateOrder(i)},onAdded:e=&gt;Object(n.b)(this,void 0,void 0,(function*(){const t=e.dataset.workPackageId,i=d.a.findIndex(e),n=yield this.wpCacheService.require(t),s=yield this.addWorkPackageToQuery(n,i);return e.parentElement&amp;&amp;e.parentElement.removeChild(e),s}))})}get workPackages(){return this._workPackages}set workPackages(e){if(this.activeInlineCreateWp){let t=this._workPackages.find(e=&gt;e.isNew);if(t){let e=this._workPackages.indexOf(t);this._workPackages[e]=this.activeInlineCreateWp}else this._workPackages=[this.activeInlineCreateWp,...e]}else this._workPackages=[...e]}get currentOrder(){return this.workPackages.filter(e=&gt;e&amp;&amp;!e.isNew).map(e=&gt;e.id)}updateOrder(e){e=_.uniq(e),Promise.all(e.map(e=&gt;this.wpCacheService.require(e))).then(e=&gt;{this.workPackages=e,this.cardView.cdRef.detectChanges()})}addNewCard(){this.wpCreate.createOrContinueWorkPackage(this.currentProject.identifier).then(e=&gt;{this.activeInlineCreateWp=e.projectedResource,this.workPackages=this.workPackages,this.cardView.cdRef.detectChanges()})}addWorkPackageToQuery(e,t=-1){return Object(n.b)(this,void 0,void 0,(function*(){try{yield this.cardView.workPackageAddedHandler(e);const i=yield this.reorderService.add(this.currentOrder,e.id,t);return this.updateOrder(i),!0}catch(i){this.notificationService.handleRawError(i,e)}return!1}))}removeReferenceWorkPackageForm(){this.activeInlineCreateWp&amp;&amp;this.removeCard(this.activeInlineCreateWp)}removeCard(e){const t=this.workPackages.indexOf(e);if(this.workPackages.splice(t,1),this.activeInlineCreateWp=void 0,!e.isNew){const t=this.reorderService.remove(this.currentOrder,e.id);this.updateOrder(t)}}onCardSaved(e){return Object(n.b)(this,void 0,void 0,(function*(){const t=this.workPackages.findIndex(e=&gt;"new"===e.id);if(-1!==t){this.activeInlineCreateWp=void 0;const i=yield this.reorderService.add(this.currentOrder,e.id,t);this.updateOrder(i),this.wpInlineCreate.newInlineWorkPackageCreated.next(e.id)}}))}}m.\u0275fac=function(e){return new(e||m)(p.rc(a.a),p.rc(p.A),p.rc(s.a),p.rc(r.a),p.rc(h.a),p.rc(u.a),p.rc(o.a),p.rc(l.a,8),p.rc(c.a))},m.\u0275prov=p.dc({token:m,factory:m.\u0275fac})},"8OyR":function(e,t,i){"use strict";var n;i.d(t,"a",(function(){return n})),function(e){e.setBodyCursor=function(e,t=""){document.body.style.setProperty("cursor",e,t)}}(n||(n={}))},"8VVp":function(e,t,i){"use strict";i.d(t,"a",(function(){return ve}));var n=i("fXoL"),s=i("tk/3"),a=i("ii2/"),r=i("NawS"),o=i("Mo6U");class c extends o.a{get state(){return this.states.schemas.get(this.href)}get availableAttributes(){return _.keys(this.$source).filter(e=&gt;0!==e.indexOf("_"))}}class l extends o.a{get state(){return this.states.types.get(this.href)}}class d extends o.a{forValue(e){return this.dependencies[e]}}var u=i("XZsv"),h=i("y2Tr"),p=i("hxxE");class m extends p.a{}var g=i("B4Ei");class f extends o.a{getErrors(){const e=_.values(this.validationErrors),t=e.length;if(0===t)return null;let i;return 1===t?i=new u.a(this.injector,e[0],!0,this.halInitializer,"Error"):(i=new u.a(this.injector,{},!0,this.halInitializer,"Error"),i.errorIdentifier=u.b,i.errors=e),i.isValidationError=!0,i}}var b=i("AA01");class v extends c{get _type(){return"QueryFilterInstanceSchema"}get availableOperators(){return this.operator.allowedValues}get allowedFilterValue(){return this.filter.allowedValues instanceof p.a?this.filter.allowedValues.elements[0]:this.filter.allowedValues[0]}$initialize(e){super.$initialize(e),e._dependencies&amp;&amp;(this.dependency=new d(this.injector,e._dependencies[0],!0,this.halInitializer,"SchemaDependency"))}getFilter(){let e=this.operator.allowedValues[0],t=this.filter.allowedValues[0],i={name:t.name,_links:{filter:t.$source._links.self,schema:this.$source._links.self,operator:e.$source._links.self}};this.definesAllowedValues()?i._links.values=[]:i.values=[];let n=new b.a(this.injector,i,!0,this.halInitializer,"QueryFilterInstance");return n.schema=this,n}isValueRequired(){return!!this.values}isResourceValue(){return!(!this.values||!this.values.allowedValues)}resultingSchema(e){let t=this.$source,i=this.dependency.forValue(e.href.toString()),n={};return _.merge(n,t,i),new v(this.injector,n,!0,this.halInitializer,"QueryFilterInstanceSchema")}definesAllowedValues(){return _.some(this._dependencies[0].dependencies,e=&gt;e.values&amp;&amp;e.values._links&amp;&amp;e.values._links.allowedValues)}}var w=i("d4d5");class y extends o.a{}class k extends o.a{get id(){return this.$source.id||this.idFromLink}get idFromLink(){if(this.$href){const e=o.a.idFromLink(this.$href);return decodeURIComponent(e)}return""}set id(e){this.$source.id=e}}class C extends o.a{}var x=i("RWlv"),j=i("LrpJ");class S extends o.a{constructor(){super(...arguments),this.attachmentsBackend=!1}}const T=Object(j.a)(S);class P extends o.a{constructor(){super(...arguments),this.attachmentsBackend=!1}}const I=Object(j.a)(P);class O extends o.a{constructor(){super(...arguments),this.attachmentsBackend=!1}}const D=Object(j.a)(O);class R extends o.a{get state(){return this.states.statuses.get(this.href)}}var E=i("/8SZ"),F=i("PHo6"),M=i("uhGA"),A=i("qvol");class L extends o.a{}var q=i("Nnhs");class $ extends o.a{}class V extends o.a{}var N=i("mrSG"),H=i("dMmB"),z=i("r0MM");class B extends o.a{get state(){return this.states.projects.get(this.id)}getEditorTypeFor(e){return-1!==["statusExplanation","description"].indexOf(e)?"full":"constrained"}get schema(){const e=this.schemaCacheService.state(this);if(!e.hasValue())throw`Accessing schema of ${this.id} without it being loaded.`;return e.value}$linkableKeys(){return _.without(super.$linkableKeys(),"schema")}}Object(N.c)([Object(z.a)(),Object(N.e)("design:type",H.a)],B.prototype,"schemaCacheService",void 0);class Q extends o.a{}const W={WorkPackage:{cls:a.a,attrTypes:{parent:"WorkPackage",ancestors:"WorkPackage",children:"WorkPackage",relations:"Relation",schema:"Schema",status:"Status",type:"Type"}},Activity:{cls:o.a,attrTypes:{user:"User"}},"Activity::Comment":{cls:o.a,attrTypes:{user:"User"}},"Activity::Revision":{cls:o.a,attrTypes:{user:"User"}},Relation:{cls:r.a,attrTypes:{from:"WorkPackage",to:"WorkPackage"}},Schema:{cls:c},Type:{cls:l},Status:{cls:R},SchemaDependency:{cls:d},Error:{cls:u.a},User:{cls:h.a},Group:{cls:Q},Collection:{cls:p.a},WorkPackageCollection:{cls:m},AttachmentCollection:{cls:E.a},Query:{cls:g.a,attrTypes:{filters:"QueryFilterInstance"}},Form:{cls:f,attrTypes:{payload:"FormPayload"}},FormPayload:{cls:o.a,attrTypes:{attachments:"AttachmentsCollection"}},QueryFilterInstance:{cls:b.a,attrTypes:{schema:"QueryFilterInstanceSchema",filter:"QueryFilter",operator:"QueryOperator"}},QueryFilterInstanceSchema:{cls:v},QueryFilter:{cls:w.a},Root:{cls:y},QueryOperator:{cls:k},HelpText:{cls:C},CustomAction:{cls:x.a},WikiPage:{cls:T},MeetingContent:{cls:I},Post:{cls:D},Project:{cls:B},Role:{cls:V},Grid:{cls:M.a},GridWidget:{cls:F.a},TimeEntry:{cls:A.a},Membership:{cls:$},News:{cls:L},Version:{cls:q.a}};var U=i("kTsZ"),X=i("XaHm"),Y=i("Ul5t"),G=i("6x6j"),K=i("0bag"),Z=i("OGNV"),J=i("1MaS"),ee=i("9cVk"),te=i("iMRi"),ie=i("Jui0");class ne{constructor(e,t,i){this.halResourceService=e,this.states=t,this.pathHelper=i}loadAll(e){const t=this.pathHelper.api.v3.withOptionalProject(e).types.toString();return this.halResourceService.get(t).toPromise().then(e=&gt;(_.each(e.elements,e=&gt;this.states.types.get(e.href).putValue(e)),e.elements))}load(){return this.halResourceService.get(this.pathHelper.api.v3.root.toString()).toPromise()}}ne.\u0275fac=function(e){return new(e||ne)(n.rc(U.a),n.rc(te.a),n.rc(ie.a))},ne.\u0275prov=n.dc({token:ne,factory:ne.\u0275fac});var se=i("HGdY"),ae=i("TTfU"),re=i("Ywds"),oe=i("n9mQ"),ce=i("j/Ak"),le=i("ofXK"),de=i("DDsP"),ue=i("DP6S"),he=i("VQC/"),pe=i("Gyz5"),me=i("PSqx"),ge=i("POAS"),fe=i("wZYP");class be extends n.r{constructor(e){super(),this.I18n=e,this.text={internal_error:this.I18n.t("js.error.internal")}}handleError(e){let t=this.text.internal_error;e instanceof u.a?(console.error("Returned error resource %O",e),t+=` ${e.errorMessages.join("\n")}`):e instanceof o.a?(console.error("Returned hal resource %O",e),t+=`Resource returned ${e.name}`):e instanceof Error?window.ErrorReporter.captureException(e):"string"==typeof e&amp;&amp;(window.ErrorReporter.captureMessage(e),t=e),super.handleError(t)}}be.\u0275fac=function(e){return new(e||be)(n.rc(fe.a))},be.\u0275prov=n.dc({token:be,factory:be.\u0275fac});class ve{}ve.\u0275mod=n.fc({type:ve}),ve.\u0275inj=n.ec({factory:function(e){return new(e||ve)},providers:[{provide:n.r,useClass:be},{provide:s.a,useClass:se.a,multi:!0},{provide:n.c,useFactory:function(e){return()=&gt;{_.each(W,(t,i)=&gt;e.registerResource(i,t))}},deps:[U.a],multi:!0},X.a,oe.a,Y.a,me.a,de.a,G.a,re.a,K.a,pe.a,Z.a,J.a,ee.a,ce.a,ne,ae.a,ue.a,he.a,ge.a],imports:[[le.b,s.c]]})},"8YXA":function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i("iB+3"),s=i("4lR/"),a=i("13ri"),r=i("PUHT"),o=i("RGDJ"),c=i("buwf"),l=i("4n9w"),d=i("fXoL");class u extends r.a{constructor(e,t,i,n,s){super(e,t),this.elementRef=e,this.opContextMenu=t,this.browserDetector=i,this.wpCreate=n,this.$state=s}ngAfterViewInit(){super.ngAfterViewInit(),this.active&amp;&amp;(this.browserDetector.isMobile&amp;&amp;(this.stateName="work-packages.new"),this.loadingPromise=this.wpCreate.getEmptyForm(this.projectIdentifier).then(e=&gt;this.buildItems(e.schema.type.allowedValues)))}open(e){this.loadingPromise.then(()=&gt;{this.opContextMenu.show(this,e)})}get locals(){return{items:this.items,contextMenuId:"types-context-menu"}}buildItems(e){this.items=e.map(e=&gt;({disabled:!1,linkText:e.name,href:this.$state.href(this.stateName,{type:e.id}),ariaLabel:e.name,class:o.a.inlineClass("type",e.id),onClick:t=&gt;!a.a.isClickedWithModifier(t)&amp;&amp;(this.$state.go(this.stateName,{type:e.id}),!0)}))}}u.\u0275fac=function(e){return new(e||u)(d.hc(d.q),d.hc(s.a),d.hc(c.a),d.hc(l.a),d.hc(n.G))},u.\u0275dir=d.cc({type:u,selectors:[["","opTypesCreateDropdown",""]],inputs:{projectIdentifier:"projectIdentifier",stateName:"stateName",active:["dropdownActive","active"]},features:[d.Qb]})},"8aTQ":function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("SqdZ"),s=i("IaZ+"),a=i("wZYP"),r=i("fXoL"),o=i("ofXK");function c(e,t){if(1&amp;e){const e=r.oc();r.nc(0,"a",10),r.nc(1,"i",11),r.vc("click",(function(t){return r.Sc(e),r.xc().closeMe(t)})),r.mc(),r.mc()}if(2&amp;e){const e=r.xc();r.Tb(1),r.Ub("title",e.text.close_popup)}}class l extends n.a{constructor(e,t,i,n){super(t,i,e),this.elementRef=e,this.locals=t,this.cdRef=i,this.I18n=n,this.confirmed=!1,this.text={title:this.I18n.t("js.modals.form_submit.title"),text:this.I18n.t("js.modals.form_submit.text"),button_continue:this.I18n.t("js.button_continue"),button_cancel:this.I18n.t("js.button_cancel"),close_popup:this.I18n.t("js.close_popup_title")},this.options=t.options||{},this.closeOnEscape=_.defaultTo(this.options.closeByEscape,!0),this.closeOnOutsideClick=_.defaultTo(this.options.closeByDocument,!0),this.showClose=_.defaultTo(this.options.showClose,!0),this.text=_.defaults(this.options.text,this.text)}confirmAndClose(e){this.confirmed=!0,this.closeMe(e)}}l.\u0275fac=function(e){return new(e||l)(r.hc(r.q),r.hc(s.a),r.hc(r.i),r.hc(a.a))},l.\u0275cmp=r.bc({type:l,selectors:[["ng-component"]],features:[r.Qb],decls:10,vars:7,consts:[[1,"op-modal--portal","confirm-form-submit--modal","ngdialog-theme-openproject"],["data-indicator-name","modal","tabindex","0",1,"op-modal--modal-container","confirm-dialog--modal","loading-indicator--location"],[1,"op-modal--modal-header"],["class","op-modal--modal-close-button",4,"ngIf"],[1,"icon-context","icon-attention",3,"textContent"],[1,"ngdialog-body","op-modal--modal-body"],[3,"textContent"],[1,"op-modal--modal-footer"],[1,"confirm-form-submit--continue","button","-highlight",3,"textContent","click"],[1,"confirm-form-submit--cancel","button",3,"textContent","click"],[1,"op-modal--modal-close-button"],[1,"icon-close",3,"click"]],template:function(e,t){1&amp;e&amp;&amp;(r.nc(0,"div",0),r.nc(1,"div",1),r.nc(2,"div",2),r.ad(3,c,2,1,"a",3),r.ic(4,"h3",4),r.mc(),r.nc(5,"div",5),r.ic(6,"p",6),r.mc(),r.nc(7,"div",7),r.nc(8,"button",8),r.vc("click",(function(e){return t.confirmAndClose(e)})),r.mc(),r.nc(9,"button",9),r.vc("click",(function(e){return t.closeMe(e)})),r.mc(),r.mc(),r.mc(),r.mc()),2&amp;e&amp;&amp;(r.Tb(3),r.Dc("ngIf",t.showClose),r.Tb(1),r.Dc("textContent",t.text.title),r.Tb(2),r.Dc("textContent",t.text.text),r.Tb(2),r.Dc("textContent",t.text.button_continue),r.Ub("title",t.text.button_continue),r.Tb(1),r.Dc("textContent",t.text.button_cancel),r.Ub("title",t.text.button_cancel))},directives:[o.q],styles:[".op-modal--modal-close-button[_ngcontent-%COMP%]{right:1.75rem;top:1.6rem}.op-modal--modal-container[_ngcontent-%COMP%]{padding-bottom:0}"]})},"8ggW":function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("3Pt+"),s=i("ofXK"),a=i("fXoL");class r{}r.\u0275mod=a.fc({type:r}),r.\u0275inj=a.ec({factory:function(e){return new(e||r)},imports:[[n.i,s.b]]})},"8h6p":function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("fXoL"),s=i("ofXK");function a(e,t){if(1&amp;e&amp;&amp;n.ic(0,"span",3),2&amp;e){const e=n.xc();n.Dc("textContent",e.description)}}class r{constructor(){this.setHostClass=!0}}r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=n.bc({type:r,selectors:[["no-results"]],hostVars:2,hostBindings:function(e,t){2&amp;e&amp;&amp;n.Yb("generic-table--no-results-container",t.setHostClass)},inputs:{title:"title",description:"description"},decls:4,vars:2,consts:[["aria-hidden","true",1,"icon-info1"],[1,"generic-table--no-results-title"],[3,"textContent",4,"ngIf"],[3,"textContent"]],template:function(e,t){1&amp;e&amp;&amp;(n.ic(0,"i",0),n.nc(1,"span",1),n.cd(2),n.ad(3,a,1,1,"span",2),n.mc()),2&amp;e&amp;&amp;(n.Tb(2),n.ed(" ",t.title," "),n.Tb(1),n.Dc("ngIf",t.description))},directives:[s.q],encapsulation:2})},"8jMx":function(e,t,i){"use strict";i.d(t,"a",(function(){return b}));var n=i("mrSG"),s=i("wZYP"),a=i("iMRi"),r=i("6XbZ"),o=i("4nS0"),c=i("T9ri"),l=i("nbRO"),d=i("r0MM");function u(e){return`group-${e.identifier}`}class h{constructor(e){this.injector=e,this.text={collapse:this.I18n.t("js.label_collapse"),expand:this.I18n.t("js.label_expand")}}buildGroupRow(e,t){let i,n,s=document.createElement("tr");return e.collapsed?(n=this.text.expand,i="icon-plus"):(n=this.text.collapse,i="icon-minus2"),s.classList.add(l.b,u(e)),s.id=`wp-table-rowgroup-${e.index}`,s.dataset.groupIndex=e.index.toString(),s.dataset.groupIdentifier=e.identifier,s.innerHTML=`\n
     <td class="-no-highlighting" colspan="${t}">
      \n
      <div class="expander icon-context ${i}">
       \n
       <span class="hidden-for-sighted">
        ${_.escape(n)}
       </span>
       \n
      </div>
      \n
      <div class="group--value">
       \n          ${_.escape(Object(c.c)(e))}\n
       <span class="count">
        \n            (${e.count})\n
       </span>
       \n
      </div>
      \n
     </td>
     \n    `,s}}Object(n.c)([Object(d.a)(),Object(n.e)("design:type",s.a)],h.prototype,"I18n",void 0);var p=i("LHWx");class m extends p.a{constructor(e,t,i,n,s){super(e,t,new r.a(e,t)),this.injector=e,this.workPackageTable=t,this.groups=i,this.headerBuilder=n,this.colspan=s}doRender(){let e=null;this.workPackageTable.originalRows.forEach(t=&gt;{let i=this.workPackageTable.originalRowIndex[t],n=this.matchingGroup(i.object);if(n&amp;&amp;e!==n){const t=u(n);let i=this.headerBuilder.buildGroupRow(n,this.colspan);this.appendNonWorkPackageRow(i,t),e=n}i.group=e,this.buildSingleRow(i)})}matchingGroup(e){return _.find(this.groups,t=&gt;{let i=e[Object(c.a)(t)];if(void 0===i&amp;&amp;(i=null),_.isArray(i))return this.matchesMultiValue(i,t);if(i&amp;&amp;i.$href)return!!_.find(t._links.valueLink,e=&gt;i.$href===e.href);let n=""===t.value?null:t.value;return n&amp;&amp;(n=n.replace("%","")),n==i})}matchesMultiValue(e,t){if(e.length!==t.href.length)return!1;let i=e=&gt;_.map(e,e=&gt;e.href).sort().join(", ");return _.isEqualWith(e,t.href,(e,t)=&gt;i(e)===i(t))}buildSingleRow(e){const t=e.group,i=t.collapsed;let n=[],[s,a]=this.rowBuilder.buildEmpty(e.object);n.push(Object(c.d)(t.index)),i&amp;&amp;n.push(l.a),e.element=s,s.classList.add(...n),this.appendRow(e.object,s,n,i)}}var g=i("E2tj"),f=i("JY8V");class b extends o.a{constructor(e,t){super(e,t),this.injector=e}isApplicable(e){return!_.isEmpty(this.groups)}get groups(){return this.querySpace.groups.value||[]}get collapsedGroups(){return this.querySpace.collapsedGroups.value||{}}get colspan(){return this.wpTableColumns.columnCount+2}buildRows(){const e=new h(this.injector);return new m(this.injector,this.workPackageTable,this.getGroupData(),e,this.colspan).render()}refreshExpansionState(){const e=this.getGroupData(),t=this.wpTableColumns.columnCount+1,i=this.querySpace.tableRendered.value,n=new h(this.injector);jQuery(this.workPackageTable.tableAndTimelineContainer).find(`.${l.b}`).each((s,a)=&gt;{let o=jQuery(a).data("groupIndex"),d=e[o],u=n.buildGroupRow(d,t);a.parentNode&amp;&amp;a.parentNode.replaceChild(u,a);const h=jQuery(this.workPackageTable.tableAndTimelineContainer).find(`.${Object(c.d)(o)}`);h.toggleClass(l.a,!!d.collapsed),h.filter(`.${r.c}`).each((e,t)=&gt;{const n=jQuery(t).index();i[n].hidden=!!d.collapsed})}),this.querySpace.tableRendered.putValue(i,"Updated hidden state of rows after group change.")}getGroupData(){return this.groups.map((e,t)=&gt;(e.index=t,e._links&amp;&amp;e._links.valueLink&amp;&amp;(e.href=e._links.valueLink),e.identifier=Object(c.b)(e),e.collapsed=this.collapsedGroups[e.identifier],e))}}Object(n.c)([Object(d.a)(),Object(n.e)("design:type",g.a)],b.prototype,"querySpace",void 0),Object(n.c)([Object(d.a)(),Object(n.e)("design:type",a.a)],b.prototype,"states",void 0),Object(n.c)([Object(d.a)(),Object(n.e)("design:type",f.a)],b.prototype,"wpTableColumns",void 0),Object(n.c)([Object(d.a)(),Object(n.e)("design:type",s.a)],b.prototype,"I18n",void 0)},"8ocD":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));class n{constructor(){this.fields={},this.classes={}}fieldType(e){return this.fields[e]}getClassFor(e,t="unknown"){let i=this.fieldType(e)||this.fieldType(t)||this.defaultFieldType;return this.classes[i]}getSpecificClassFor(e,t,i="unknown"){let n=this.fieldType(`${e}-${t}`)||this.fieldType(`${e}-${i}`);return n?this.classes[n]:this.getClassFor(t,i)}addFieldType(e,t,i){return e.fieldType=t,this.register(e,i),this}addSpecificFieldType(e,t,i,n){return t.fieldType=`${e}-${i}`,n=n.map(t=&gt;`${e}-${t}`),this.register(t,n),this}extendFieldType(e,t){let i=this.classes[e]||this.getClassFor(e);return this.addFieldType(i,e,t)}register(e,t=[]){const i=e.fieldType;t.forEach(e=&gt;this.fields[e]=i),this.classes[i]=e}}},"8zkO":function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("wZYP"),s=i("XaHm"),a=i("wd/R"),r=i("fXoL");class o{constructor(e,t){this.I18n=e,this.configurationDm=t,this.initialized=this.loadConfiguration().then(()=&gt;!0).catch(()=&gt;!1)}commentsSortedInDescendingOrder(){return this.userPreference("commentSortDescending")}warnOnLeavingUnsaved(){return this.userPreference("warnOnLeavingUnsaved")}autoHidePopups(){return this.userPreference("autoHidePopups")}isTimezoneSet(){return!!this.timezone()}timezone(){return this.userPreference("timeZone")}get maximumAttachmentFileSize(){return this.systemPreference("maximumAttachmentFileSize")}get perPageOptions(){return this.systemPreference("perPageOptions")}dateFormatPresent(){return!!this.systemPreference("dateFormat")}dateFormat(){return this.systemPreference("dateFormat")}timeFormatPresent(){return!!this.systemPreference("timeFormat")}timeFormat(){return this.systemPreference("timeFormat")}startOfWeekPresent(){return!!this.systemPreference("startOfWeek")}startOfWeek(){return this.startOfWeekPresent()?this.systemPreference("startOfWeek"):a.localeData(I18n.locale).firstDayOfWeek()}loadConfiguration(){return this.configurationDm.load().toPromise().then(e=&gt;{this.configuration=e})}userPreference(e){return _.get(this.configuration,["userPreferences",e])}systemPreference(e){return _.get(this.configuration,e)}}o.\u0275fac=function(e){return new(e||o)(r.rc(n.a),r.rc(s.a))},o.\u0275prov=r.dc({token:o,factory:o.\u0275fac,providedIn:"root"})},"9+6k":function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("AEvm");class s extends n.a{constructor(e){super(),this.opContextMenu=e,this.items=[]}onClose(){this.afterFocusOn.focus()}onOpen(e){e.find(".menu-item").first().focus()}positionArgs(e){return{my:"left top",at:"right bottom",of:e,collision:"flipfit"}}get locals(){return{items:this.items}}open(e){this.opContextMenu.show(this,e)}get afterFocusOn(){return this.$element}}},"99YG":function(e,t,i){"use strict";var n;i.d(t,"a",(function(){return n})),function(e){e.findIndex=function(e){return e.parentElement?Array.from(e.parentElement.children).indexOf(e):-1},e.reinsert=function(e,t,i){t="string"==typeof t?parseInt(t,10):t;const n=Array.from(i.children);(t&lt;0||t&gt;=n.length||0===n.length)&amp;&amp;i.appendChild(e);const s=n[t];s?i.insertBefore(e,s):i.appendChild(e)}}(n||(n={}))},"9cVk":function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("kTsZ"),s=i("Jui0"),a=i("fXoL");class r{constructor(e,t){this.halResourceService=e,this.pathHelper=t}load(){return this.halResourceService.get(this.pathHelper.api.v3.root.toString()).toPromise()}}r.\u0275fac=function(e){return new(e||r)(a.rc(n.a),a.rc(s.a))},r.\u0275prov=a.dc({token:r,factory:r.\u0275fac})},"9hh2":function(e,t,i){"use strict";i.d(t,"a",(function(){return Ue}));var n=i("wZYP"),s=i("mrSG"),a=i("qHU1"),r=i("iMRi"),o=i("Ncnr"),c=i("SKFm"),l=i("6XbZ"),d=i("Yg+W"),u=i("GjwL"),h=i("r0MM");class p extends d.a{constructor(e,t){super(),this.injector=e}get EVENT(){return"click.table.cell, keydown.table.cell"}get SELECTOR(){return`.${o.b}.${o.d}`}eventScope(e){return jQuery(e.tableAndTimelineContainer)}processEvent(e,t){Object(a.a)("Starting editing on cell: ",t.target),t.preventDefault();let i=jQuery(t.target).closest(`.${o.b}`),n=i.data("fieldName");if(!n)return Object(a.a)("Click handled by cell not a field? ",t.target),!0;const s=i.closest(`.${l.c}`),r=s.data("workPackageId"),c=this.states.workPackages.get(r).value,d=s.data("classIdentifier"),h=e.editing.startEditing(c,d),p=u.a.getPosition(t);return h.activate(n).then(e=&gt;{e.$onUserActivate.next(),e.focus(p)}).catch(()=&gt;i.addClass(o.e)),!1}}Object(s.c)([Object(h.a)(),Object(s.e)("design:type",r.a)],p.prototype,"states",void 0),Object(s.c)([Object(h.a)(),Object(s.e)("design:type",c.a)],p.prototype,"halEditing",void 0);var m=i("0Usb"),g=i("FB4C");class f extends d.a{constructor(e,t){super(),this.injector=e}get EVENT(){return"click.table.relationsCell, keydown.table.relationsCell"}get SELECTOR(){return`.${m.b}`}eventScope(e){return jQuery(e.tableAndTimelineContainer)}processEvent(e,t){Object(a.a)("Handled click on relation cell %o",t.target),t.preventDefault();const i=jQuery(t.target).closest(`.${m.c}`).data("columnId"),n=jQuery(t.target).closest(`.${l.c}`).data("workPackageId");return this.wpTableRelationColumns.getExpandFor(n)===i?this.wpTableRelationColumns.collapse(n):this.wpTableRelationColumns.setExpandFor(n,i),!1}}Object(s.c)([Object(h.a)(),Object(s.e)("design:type",g.a)],f.prototype,"wpTableRelationColumns",void 0);var b=i("cd/7"),v=i("4lR/"),w=i("qtzK"),y=i("7xci");class k extends w.a{constructor(e,t,i,n={},s){super(e,t,i,n,!0),this.injector=e,this.workPackageId=t,this.$element=i,this.additionalPositionArgs=n,this.table=s}triggerContextMenuAction(e){switch(e.key){case"relation-precedes":this.table.timelineController.startAddRelationPredecessor(this.workPackage);break;case"relation-follows":this.table.timelineController.startAddRelationFollower(this.workPackage);break;case"hierarchy-indent":this.wpViewIndentation.indent(this.workPackage);break;case"hierarchy-outdent":this.wpViewIndentation.outdent(this.workPackage);break;default:super.triggerContextMenuAction(e)}}}Object(s.c)([Object(h.a)(),Object(s.e)("design:type",y.a)],k.prototype,"wpViewIndentation",void 0);class C{constructor(e,t){this.injector=e,this.table=t}get rowSelector(){return`.${l.c}`}eventScope(e){return jQuery(e.tableAndTimelineContainer)}openContextMenu(e,t,i){const n=new k(this.injector,t,jQuery(e.target),i,this.table);this.opContextMenu.show(n,e)}}Object(s.c)([Object(h.a)(),Object(s.e)("design:type",v.a)],C.prototype,"opContextMenu",void 0);var x=i("/cHX");class j extends C{constructor(e,t){super(e,t),this.injector=e}get EVENT(){return"click.table.contextmenu"}get SELECTOR(){return`.${x.c}`}handleEvent(e,t){let i=jQuery(t.target);if(i.closest(`.${b.c}`).length)return Object(a.a)("Allowing original context menu on state link"),!0;t.preventDefault(),t.stopPropagation();const n=i.closest(this.rowSelector).data("workPackageId");return n&amp;&amp;super.openContextMenu(t,n),!1}}var S=i("E5Dd");class T extends C{constructor(e,t){super(e,t),this.injector=e}get EVENT(){return"keydown.table.contextmenu"}get SELECTOR(){return this.rowSelector}handleEvent(e,t){if(!e.configuration.contextMenuEnabled)return!1;let i=jQuery(t.target);if(t.keyCode!==S.a.F10||!t.shiftKey||!t.altKey)return!0;t.preventDefault(),t.stopPropagation();const n=i.closest(this.SELECTOR).data("workPackageId");let s={my:"left top",at:"left bottom",of:i};return super.openContextMenu(t,n,s),!1}}var P=i("9nXh"),I=i("eyhC");class O extends C{constructor(e,t){super(e,t),this.injector=e}get EVENT(){return"contextmenu.table.rightclick"}get SELECTOR(){return`.${l.c},.${P.b}`}eventScope(e){return jQuery(e.tableAndTimelineContainer)}handleEvent(e,t){if(!e.configuration.contextMenuEnabled)return!1;let i=jQuery(t.target);if(i.closest(`.${b.c}`).length)return Object(a.a)("Allowing original context menu on state link"),!0;t.preventDefault(),t.stopPropagation();const n=i.closest(this.SELECTOR).data("workPackageId");if(n){let[e]=this.table.findRenderedRow(n);this.wpTableSelection.isSelected(n)||this.wpTableSelection.setSelection(n,e),super.openContextMenu(t,n)}return!1}}Object(s.c)([Object(h.a)(),Object(s.e)("design:type",I.a)],O.prototype,"wpTableSelection",void 0);var D=i("iB+3"),R=i("Y/CA"),E=i("PkGb"),F=i("e6KS");class M{constructor(e,t){this.injector=e}get EVENT(){return"click.table.row"}get SELECTOR(){return`.${l.c}`}eventScope(e){return jQuery(e.tbody)}handleEvent(e,t){let i=jQuery(t.target);if(i.is("a")||i.parent().is("a"))return!0;if(i.hasClass(`${o.b}`)||i.hasClass(`${F.b}`))return Object(a.a)("Skipping click on inner cell"),!0;let n=i.closest(this.SELECTOR),s=n.data("workPackageId"),r=n.data("classIdentifier");if(!s)return!0;let[c,l]=e.findRenderedRow(r);return t.ctrlKey||t.metaKey||t.shiftKey||this.wpTableSelection.setSelection(s,c),t.shiftKey&amp;&amp;this.wpTableSelection.setMultiSelectionFrom(e.renderedRows,s,c),(t.ctrlKey||t.metaKey)&amp;&amp;this.wpTableSelection.toggleRow(s),this.wpTableFocus.updateFocus(s),!1}}Object(s.c)([Object(h.a)(),Object(s.e)("design:type",D.G)],M.prototype,"$state",void 0),Object(s.c)([Object(h.a)(),Object(s.e)("design:type",r.a)],M.prototype,"states",void 0),Object(s.c)([Object(h.a)(),Object(s.e)("design:type",E.a)],M.prototype,"keepTab",void 0),Object(s.c)([Object(h.a)(),Object(s.e)("design:type",I.a)],M.prototype,"wpTableSelection",void 0),Object(s.c)([Object(h.a)(),Object(s.e)("design:type",R.a)],M.prototype,"wpTableFocus",void 0);var A=i("pXZk"),L=i("13ri");class q{constructor(e,t){this.injector=e}get EVENT(){return"dblclick.table.row"}get SELECTOR(){return`.${A.c}`}eventScope(e){return jQuery(e.tbody)}handleEvent(e,t){let i=jQuery(t.target);if(L.a.isClickedWithModifier(t))return!0;if(i.hasClass(`${o.b}`)||i.hasClass(`${F.b}`))return Object(a.a)("Skipping click on inner cell"),!0;let n=i.closest(this.SELECTOR).closest(`.${l.c}`).data("workPackageId");return!(!i.is("a")&amp;&amp;!i.parent().is("a"))||(this.wpTableFocus.updateFocus(n),this.$state.go("work-packages.show",{workPackageId:n}),!1)}}Object(s.c)([Object(h.a)(),Object(s.e)("design:type",D.G)],q.prototype,"$state",void 0),Object(s.c)([Object(h.a)(),Object(s.e)("design:type",r.a)],q.prototype,"states",void 0),Object(s.c)([Object(h.a)(),Object(s.e)("design:type",I.a)],q.prototype,"wpTableSelection",void 0),Object(s.c)([Object(h.a)(),Object(s.e)("design:type",R.a)],q.prototype,"wpTableFocus",void 0);var $=i("8jMx"),V=i("E2tj"),N=i("nbRO");class H{constructor(e,t){this.injector=e,this.builder=new $.a(e,t)}get EVENT(){return"click.table.groupheader"}get SELECTOR(){return`.${N.b} .expander`}eventScope(e){return jQuery(e.tbody)}handleEvent(e,t){t.preventDefault(),t.stopPropagation();let i=jQuery(t.target).parents(`.${N.b}`).data("groupIdentifier"),n=this.collapsedState.value||{};n[i]=!n[i],this.collapsedState.putValue(n);var s=performance.now();this.builder.refreshExpansionState();var r=performance.now();Object(a.a)("Group redraw took "+(r-s)+" milliseconds.")}get collapsedState(){return this.querySpace.collapsedGroups}}Object(s.c)([Object(h.a)(),Object(s.e)("design:type",V.a)],H.prototype,"querySpace",void 0);var z=i("wyKs");class B extends d.a{constructor(e,t){super(),this.injector=e}get EVENT(){return"click.table.hierarchy"}get SELECTOR(){return".wp-table--hierarchy-indicator"}eventScope(e){return jQuery(e.tbody)}processEvent(e,t){let i=jQuery(t.target).closest(`.${l.c}`).data("workPackageId");return this.wpTableHierarchies.toggle(i),t.stopImmediatePropagation(),t.preventDefault(),!1}}Object(s.c)([Object(h.a)(),Object(s.e)("design:type",r.a)],B.prototype,"states",void 0),Object(s.c)([Object(h.a)(),Object(s.e)("design:type",z.a)],B.prototype,"wpTableHierarchies",void 0);class Q{constructor(e,t){this.injector=e}get EVENT(){return"click.table.wpLink"}get SELECTOR(){return`.${b.c}`}eventScope(e){return jQuery(e.tableAndTimelineContainer)}handleEvent(e,t){if(t.shiftKey||t.ctrlKey||t.metaKey||t.altKey)return!0;const i=jQuery(t.target),n=i.closest(this.SELECTOR),s=n.data("wpState"),a=n.data("workPackageId");i.closest("a").blur();let r=i.closest(`.${l.c}`).data("classIdentifier"),[o,c]=e.findRenderedRow(r);return this.wpTableSelection.setSelection(a,o),this.$state.go(this.keepTab[s],{workPackageId:a,focus:!0}),t.preventDefault(),t.stopPropagation(),!1}}Object(s.c)([Object(h.a)(),Object(s.e)("design:type",D.G)],Q.prototype,"$state",void 0),Object(s.c)([Object(h.a)(),Object(s.e)("design:type",E.a)],Q.prototype,"keepTab",void 0),Object(s.c)([Object(h.a)(),Object(s.e)("design:type",r.a)],Q.prototype,"states",void 0),Object(s.c)([Object(h.a)(),Object(s.e)("design:type",I.a)],Q.prototype,"wpTableSelection",void 0),Object(s.c)([Object(h.a)(),Object(s.e)("design:type",R.a)],Q.prototype,"wpTableFocus",void 0);var W=i("1G5W"),U=i("JY8V");class X{constructor(e,t){this.injector=e,this.table=t,this.wpTableColumns.updates$().pipe(Object(W.a)(this.querySpace.stopAllSubscriptions)).subscribe(()=&gt;{if(t.originalRows.length&gt;0){var e=performance.now();t.redrawTable();var i=performance.now();Object(a.a)("column redraw took "+(i-e)+" milliseconds.")}})}}Object(s.c)([Object(h.a)(),Object(s.e)("design:type",V.a)],X.prototype,"querySpace",void 0),Object(s.c)([Object(h.a)(),Object(s.e)("design:type",U.a)],X.prototype,"wpTableColumns",void 0);var Y=i("5+Sy"),G=i("lJxs"),K=i("/uUt"),Z=i("pLZG"),J=i("CBsm"),ee=i("xV+i");class te{constructor(e,t){this.injector=e,this.wpTableHierarchies.updates$().pipe(Object(W.a)(this.querySpace.stopAllSubscriptions),Object(G.a)(e=&gt;e.isVisible),Object(K.a)()).subscribe(()=&gt;{this.wpTableHierarchies.isEnabled||t.redrawTableAndTimeline()});let i=this.wpTableHierarchies.isEnabled;this.wpTableHierarchies.updates$().pipe(Object(W.a)(this.querySpace.stopAllSubscriptions),Object(Z.a)(()=&gt;this.querySpace.tableRendered.hasValue())).subscribe(e=&gt;{e.isVisible===i&amp;&amp;this.renderHierarchyState(e),i=e.isVisible})}renderHierarchyState(e){const t=this.querySpace.tableRendered.value;jQuery('[class^="__hierarchy-group-"]').removeClass((e,t)=&gt;(t.match(/__collapsed-group-\d+/g)||[]).join(" "));const i={};_.each(e.collapsed,(e,n)=&gt;{jQuery(`.${Object(J.d)(n)} .wp-table--hierarchy-indicator`).toggleClass(ee.c,e);const s=jQuery(`.${Object(J.c)(n)}`);s.toggleClass(Object(J.b)(n),e),s.filter(`.${l.c}`).each((n,s)=&gt;{const a=jQuery(s).index();i[a]||(t[a].hidden=e,i[a]=e)})}),e.last&amp;&amp;Object(Y.f)(e.last),this.querySpace.tableRendered.putValue(t,"Updated hidden state of rows after hierarchy change.")}}Object(s.c)([Object(h.a)(),Object(s.e)("design:type",z.a)],te.prototype,"wpTableHierarchies",void 0),Object(s.c)([Object(h.a)(),Object(s.e)("design:type",V.a)],te.prototype,"querySpace",void 0);class ie{constructor(e,t){this.injector=e,this.wpTableRelationColumns.updates$().pipe(Object(W.a)(this.querySpace.stopAllSubscriptions)).subscribe(()=&gt;{t.redrawTableAndTimeline()})}}Object(s.c)([Object(h.a)(),Object(s.e)("design:type",g.a)],ie.prototype,"wpTableRelationColumns",void 0),Object(s.c)([Object(h.a)(),Object(s.e)("design:type",V.a)],ie.prototype,"querySpace",void 0);var ne=i("Uyc6"),se=i("6yP5");class ae{constructor(e,t){this.injector=e,this.table=t,this.querySpace.initialized.values$().pipe(Object(W.a)(this.querySpace.stopAllSubscriptions)).subscribe(()=&gt;{let e;e=this.wpTableSortBy.isManualSortingMode?this.wpTableOrder.orderedWorkPackages():this.querySpace.results.value.elements,t.initialSetup(e)}),this.states.workPackages.observeChange().pipe(Object(W.a)(this.querySpace.stopAllSubscriptions.asObservable()),Object(Z.a)(()=&gt;{let e=this.querySpace.tableRendered.getValueOr([]);return e&amp;&amp;e.length&gt;0})).subscribe(([e,t])=&gt;{void 0!==t&amp;&amp;this.table.refreshRows(t)})}}Object(s.c)([Object(h.a)(),Object(s.e)("design:type",V.a)],ae.prototype,"querySpace",void 0),Object(s.c)([Object(h.a)(),Object(s.e)("design:type",se.a)],ae.prototype,"wpTableSortBy",void 0),Object(s.c)([Object(h.a)(),Object(s.e)("design:type",ne.a)],ae.prototype,"wpTableOrder",void 0),Object(s.c)([Object(h.a)(),Object(s.e)("design:type",r.a)],ae.prototype,"states",void 0);var re=i("7ond");class oe{constructor(e,t){this.injector=e,this.table=t,this.querySpace.tableRendered.values$().pipe(Object(W.a)(this.querySpace.stopAllSubscriptions)).subscribe(()=&gt;{this.wpTableFocus.ifShouldFocus(e=&gt;{const t=Object(Y.b)(e);t.length&amp;&amp;(Object(Y.f)(e),this.FocusHelper.focusElement(t,!0))})}),this.wpTableSelection.selection$().pipe(Object(W.a)(this.querySpace.stopAllSubscriptions)).subscribe(e=&gt;{this.renderSelectionState(e)}),this.wpTableSelection.registerSelectAllListener(()=&gt;t.renderedRows),this.wpTableSelection.registerDeselectAllListener()}renderSelectionState(e){const t=jQuery(this.table.tableAndTimelineContainer);t.find(`.${l.c}.${b.b}`).removeClass(b.b),_.each(e.selected,(e,i)=&gt;{t.find(`.${l.c}[data-work-package-id="${i}"]`).toggleClass(b.b,e)})}}Object(s.c)([Object(h.a)(),Object(s.e)("design:type",I.a)],oe.prototype,"wpTableSelection",void 0),Object(s.c)([Object(h.a)(),Object(s.e)("design:type",R.a)],oe.prototype,"wpTableFocus",void 0),Object(s.c)([Object(h.a)(),Object(s.e)("design:type",V.a)],oe.prototype,"querySpace",void 0),Object(s.c)([Object(h.a)(),Object(s.e)("design:type",re.a)],oe.prototype,"FocusHelper",void 0);var ce=i("PtkW");class le{constructor(e,t){this.injector=e,this.table=t,this.wpTableTimeline.live$().pipe(Object(W.a)(this.querySpace.stopAllSubscriptions)).subscribe(e=&gt;{this.renderVisibility(e.visible)})}renderVisibility(e){const t=jQuery(this.table.tableAndTimelineContainer).parent();t.find(".work-packages-tabletimeline--timeline-side").toggle(e),t.find(".work-packages-tabletimeline--table-side").toggleClass("-timeline-visible",e)}}Object(s.c)([Object(h.a)(),Object(s.e)("design:type",V.a)],le.prototype,"querySpace",void 0),Object(s.c)([Object(h.a)(),Object(s.e)("design:type",ce.a)],le.prototype,"wpTableTimeline",void 0);var de=i("2Qcm");class ue{constructor(e,t){this.injector=e,this.wpTableHighlighting.updates$().pipe(Object(W.a)(this.querySpace.stopAllSubscriptions),Object(K.a)()).subscribe(()=&gt;t.redrawTable())}}Object(s.c)([Object(h.a)(),Object(s.e)("design:type",de.a)],ue.prototype,"wpTableHighlighting",void 0),Object(s.c)([Object(h.a)(),Object(s.e)("design:type",V.a)],ue.prototype,"querySpace",void 0);var he=i("IzEk"),pe=i("FDFi"),me=i("POAS"),ge=i("pSHE"),fe=i("tmNb"),be=i("99YG"),ve=i("buwf"),we=i("ug4p"),ye=i("DhiE");class ke{constructor(e,t){this.injector=e,this.table=t,null!==this.dragService&amp;&amp;(this.inlineCreateService.newInlineWorkPackageCreated.pipe(Object(W.a)(this.querySpace.stopAllSubscriptions)).subscribe(e=&gt;Object(s.b)(this,void 0,void 0,(function*(){const t=yield this.wpTableOrder.add(this.currentOrder,e);this.updateRenderedOrder(t)}))),this.querySpace.stopAllSubscriptions.pipe(Object(he.a)(1)).subscribe(()=&gt;{this.dragService.remove(this.table.tbody)}),this.dragService.register({dragContainer:this.table.tbody,scrollContainers:[this.table.scrollContainer],accepts:()=&gt;!0,moves:(e,t,i)=&gt;{if(!i.classList.contains("wp-table--drag-and-drop-handle"))return!1;const n=e.dataset.workPackageId,s=this.states.workPackages.get(n).value;return!!s&amp;&amp;this.actionService.canPickup(s)},onMoved:(e,t,i)=&gt;Object(s.b)(this,void 0,void 0,(function*(){const t=e.dataset.workPackageId,n=this.findRowIndex(e);try{const i=yield this.wpCacheService.require(t),s=yield this.wpTableOrder.move(this.currentOrder,t,n);yield this.actionService.handleDrop(i,e),this.updateRenderedOrder(s),this.actionService.onNewOrder(s);let a=this.querySpace.query.value;a&amp;&amp;this.wpTableSortBy.switchToManualSorting(a)&amp;&amp;(yield this.wpListService.save(a))}catch(s){this.halNotification.handleRawError(s),be.a.reinsert(e,e.dataset.sourceIndex||-1,i)}})),onRemoved:e=&gt;{const t=e.dataset.workPackageId,i=this.wpTableOrder.remove(this.currentOrder,t);this.updateRenderedOrder(i)},onAdded:e=&gt;Object(s.b)(this,void 0,void 0,(function*(){const t=e.dataset.workPackageId,i=yield this.wpCacheService.require(t),n=this.findRowIndex(e);return this.actionService.handleDrop(i,e).then(()=&gt;Object(s.b)(this,void 0,void 0,(function*(){const e=yield this.wpTableOrder.add(this.currentOrder,t,n);return this.updateRenderedOrder(e),this.actionService.onNewOrder(e),!0}))).catch(()=&gt;!1)})),onCloned:(e,t)=&gt;Object(s.b)(this,void 0,void 0,(function*(){const i=t.dataset.workPackageId,n=yield this.wpCacheService.require(i),s=e.children.length,a=document.createElement("td");a.textContent=n.subjectWithId(),a.colSpan=s,a.classList.add("wp-table--cell-td","subject"),e.style.maxWidth="500px",e.innerHTML=a.outerHTML})),onShadowInserted:e=&gt;{this.browserDetector.isEdge||this.actionService.changeShadowElement(e)},onCancel:e=&gt;{this.browserDetector.isEdge||this.actionService.changeShadowElement(e,!0)}}))}updateRenderedOrder(e){return Object(s.b)(this,void 0,void 0,(function*(){e=_.uniq(e);const t=yield Promise.all(e.map(e=&gt;this.wpCacheService.require(e)));this.table.initialSetup(t)}))}get actionService(){return this.dragActionRegistry.get(this.injector)}get currentOrder(){return this.currentRenderedOrder.map(e=&gt;e.workPackageId)}get currentRenderedOrder(){return this.querySpace.renderedWorkPackages.getValueOr([])}findRowIndex(e){return Array.from(this.table.tbody.getElementsByClassName(l.c)).indexOf(e)||0}}Object(s.c)([Object(h.a)(),Object(s.e)("design:type",r.a)],ke.prototype,"states",void 0),Object(s.c)([Object(h.a)(),Object(s.e)("design:type",V.a)],ke.prototype,"querySpace",void 0),Object(s.c)([Object(h.a)(),Object(s.e)("design:type",pe.a)],ke.prototype,"inlineCreateService",void 0),Object(s.c)([Object(h.a)(),Object(s.e)("design:type",me.a)],ke.prototype,"halNotification",void 0),Object(s.c)([Object(h.a)(),Object(s.e)("design:type",se.a)],ke.prototype,"wpTableSortBy",void 0),Object(s.c)([Object(h.a)(),Object(s.e)("design:type",ne.a)],ke.prototype,"wpTableOrder",void 0),Object(s.c)([Object(h.a)(),Object(s.e)("design:type",ve.a)],ke.prototype,"browserDetector",void 0),Object(s.c)([Object(h.a)(),Object(s.e)("design:type",we.a)],ke.prototype,"wpCacheService",void 0),Object(s.c)([Object(h.a)(),Object(s.e)("design:type",ye.a)],ke.prototype,"wpListService",void 0),Object(s.c)([Object(h.a)(),Object(s.e)("design:type",ge.a)],ke.prototype,"dragActionRegistry",void 0),Object(s.c)([Object(h.a)(fe.a,null),Object(s.e)("design:type",Object)],ke.prototype,"dragService",void 0);var Ce=i("WUI6");class xe extends Ce.a{constructor(){super(...arguments),this.eventHandlers=[e=&gt;new B(this.injector,e),e=&gt;new p(this.injector,e),e=&gt;new Q(this.injector,e),e=&gt;new M(this.injector,e),e=&gt;new q(this.injector,e),e=&gt;new H(this.injector,e),e=&gt;new O(this.injector,e),e=&gt;new j(this.injector,e),e=&gt;new T(this.injector,e),e=&gt;new f(this.injector,e)],this.stateTransformers=[oe,ae,X,le,te,ie,ue,ke]}attachTo(e){this.stateTransformers.map(t=&gt;new t(this.injector,e)),super.attachTo(e)}}var je=i("itXk"),Se=i("U1xf"),Te=i("4EDS"),Pe=i("AeZM"),Ie=i("5iud");class _e{constructor(e){this.tableAndTimeline=e,this.lastHoveredElement=null,this.eventListener=e=&gt;{const t=e.target;t&amp;&amp;t!==this.lastHoveredElement&amp;&amp;this.handleHover(t),this.lastHoveredElement=t}}activate(){window.addEventListener("mousemove",this.eventListener,{passive:!0})}deactivate(){window.removeEventListener("mousemove",this.eventListener),this.removeAllHoverClasses()}locateHoveredTableRow(e){const t=e.closest("tr");return 0===t.length?null:t[0]}locateHoveredTimelineRow(e){const t=e.closest("div.wp-timeline-cell");return 0===t.length?null:t[0]}handleHover(e){const t=jQuery(e),i=this.locateHoveredTableRow(t),n=this.locateHoveredTimelineRow(t);null!==i||null!==n?this.removeOldAndAddNewHoverClass(i,n):this.removeAllHoverClasses()}extractWorkPackageId(e){return parseInt(e.getAttribute("data-work-package-id"))}removeOldAndAddNewHoverClass(e,t){const i=null!==e?e:t,n=this.extractWorkPackageId(i),s=this.tableAndTimeline.find("tr.wp-row-"+n).first(),a=this.tableAndTimeline.find("div.wp-row-"+n).first();requestAnimationFrame(()=&gt;{this.removeAllHoverClasses(),a.addClass("row-hovered"),s.addClass("row-hovered")})}removeAllHoverClasses(){this.tableAndTimeline.find(".row-hovered").removeClass("row-hovered")}}var Oe=i("5HGI"),De=i("AEvm"),Re=i("fXoL");function Ee(e,t){1&amp;e&amp;&amp;Re.ic(0,"col")}function Fe(e,t){1&amp;e&amp;&amp;Re.ic(0,"col",19)}function Me(e,t){1&amp;e&amp;&amp;Re.ic(0,"col",19)}function Ae(e,t){1&amp;e&amp;&amp;Re.ic(0,"col")}function Le(e,t){1&amp;e&amp;&amp;Re.ic(0,"op-icon",23)}function qe(e,t){if(1&amp;e&amp;&amp;(Re.nc(0,"th",20),Re.nc(1,"div",21),Re.ad(2,Le,1,0,"op-icon",22),Re.mc(),Re.mc()),2&amp;e){const e=Re.xc(2);Re.Tb(2),Re.Dc("ngIf",e.manualSortEnabled)}}function $e(e,t){if(1&amp;e&amp;&amp;(Re.nc(0,"th",24),Re.ic(1,"sortHeader",25),Re.mc()),2&amp;e){const e=t.$implicit,i=Re.xc(2);Re.Tb(1),Re.Dc("headerColumn",e)("locale",e.custom_field&amp;&amp;e.custom_field.name_locale||i.locale)("table",i.workPackageTable)("opColumnsContextMenu-column",e)("opColumnsContextMenu-table",i.workPackageTable)}}function Ve(e,t){1&amp;e&amp;&amp;(Re.nc(0,"div",28),Re.ic(1,"wp-table-config-menu"),Re.mc())}function Ne(e,t){if(1&amp;e&amp;&amp;(Re.nc(0,"th",26),Re.ad(1,Ve,2,0,"div",27),Re.mc()),2&amp;e){const e=Re.xc(2);Re.Tb(1),Re.Dc("ngIf",e.configuration.columnMenuEnabled)}}function He(e,t){if(1&amp;e&amp;&amp;(Re.nc(0,"tbody",29),Re.nc(1,"tr",30),Re.nc(2,"td"),Re.nc(3,"span"),Re.ic(4,"op-icon",31),Re.nc(5,"span"),Re.nc(6,"strong"),Re.cd(7),Re.mc(),Re.cd(8),Re.mc(),Re.mc(),Re.mc(),Re.mc(),Re.mc()),2&amp;e){const e=Re.xc(2);Re.Tb(2),Re.Ub("colspan",e.columns.length+2),Re.Tb(5),Re.dd(e.text.noResults.title),Re.Tb(1),Re.ed(" ",e.text.noResults.description," ")}}function ze(e,t){if(1&amp;e&amp;&amp;Re.ic(0,"tbody",32),2&amp;e){const e=Re.xc(2);Re.Dc("wp-inline-create--table",e.workPackageTable)("wp-inline-create--project-identifier",e.projectIdentifier)}}function Be(e,t){1&amp;e&amp;&amp;(Re.nc(0,"div",33),Re.ic(1,"wp-resizer",34),Re.mc()),2&amp;e&amp;&amp;(Re.Tb(1),Re.Dc("elementClass","work-packages-tabletimeline--timeline-side")("resizeEvent","wp-resize.timeline")("localStorageKey","openProject-timelineFlexBasis"))}const Qe=function(){return[]};function We(e,t){if(1&amp;e&amp;&amp;(Re.nc(0,"div",1),Re.nc(1,"div",2),Re.nc(2,"table",3),Re.nc(3,"colgroup"),Re.ad(4,Ee,1,0,"col",4),Re.ad(5,Fe,1,0,"col",5),Re.ad(6,Me,1,0,"col",6),Re.ad(7,Ae,1,0,"col",4),Re.mc(),Re.nc(8,"caption",7),Re.nc(9,"span"),Re.cd(10),Re.mc(),Re.ic(11,"span",8),Re.nc(12,"span"),Re.cd(13),Re.mc(),Re.mc(),Re.nc(14,"thead",9),Re.nc(15,"tr"),Re.ad(16,qe,3,1,"th",10),Re.ad(17,$e,2,5,"th",11),Re.ad(18,Ne,2,1,"th",12),Re.mc(),Re.mc(),Re.ad(19,He,9,3,"tbody",13),Re.ic(20,"tbody",14),Re.ad(21,ze,1,2,"tbody",15),Re.nc(22,"tfoot"),Re.ic(23,"tr",16),Re.mc(),Re.mc(),Re.mc(),Re.ad(24,Be,2,3,"div",17),Re.nc(25,"div",18),Re.ic(26,"wp-timeline-container"),Re.mc(),Re.mc()),2&amp;e){const e=Re.xc();Re.Tb(4),Re.Dc("ngIf",e.configuration.dragAndDropEnabled),Re.Tb(1),Re.Dc("ngForOf",Re.Hc(13,Qe).constructor(e.columns.length)),Re.Tb(1),Re.Dc("ngIf",e.configuration.columnMenuEnabled),Re.Tb(1),Re.Dc("ngIf",!e.configuration.columnMenuEnabled),Re.Tb(3),Re.dd(e.text.tableSummary),Re.Tb(3),Re.dd(e.text.tableSummaryHints),Re.Tb(3),Re.Dc("ngIf",e.configuration.dragAndDropEnabled),Re.Tb(1),Re.Dc("ngForOf",e.columns)("ngForTrackBy",e.trackByHref),Re.Tb(1),Re.Dc("ngIf",e.configuration.columnMenuEnabled||e.configuration.actionsColumnEnabled),Re.Tb(1),Re.Dc("ngIf",!e.isEmbedded&amp;&amp;e.query&amp;&amp;0===e.results.count),Re.Tb(2),Re.Dc("ngIf",e.tableElement&amp;&amp;e.configuration.inlineCreateEnabled),Re.Tb(3),Re.Dc("ngIf",!e.configuration.isEmbedded)}}class Ue extends De.a{constructor(e,t,i,n,s,a,r,o,c,l,d){super(),this.elementRef=e,this.injector=t,this.states=i,this.querySpace=n,this.I18n=s,this.cdRef=a,this.zone=r,this.wpTableGroupBy=o,this.wpTableTimeline=c,this.wpTableColumns=l,this.wpTableSortBy=d,this.trackByHref=Te.a.trackByHref,this.limitedResults=!1}ngOnInit(){this.configuration=new Se.a(this.configurationObject),this.$element=jQuery(this.elementRef.nativeElement),this.querySpace.stopAllSubscriptions.next(),this.locale=I18n.locale,this.text={cancel:I18n.t("js.button_cancel"),noResults:{title:I18n.t("js.work_packages.no_results.title"),description:I18n.t("js.work_packages.no_results.description")},limitedResults:(e,t)=&gt;I18n.t("js.work_packages.limited_results",{count:e,total:t}),tableSummary:I18n.t("js.work_packages.table.summary"),tableSummaryHints:[I18n.t("js.work_packages.table.text_inline_edit"),I18n.t("js.work_packages.table.text_select_hint"),I18n.t("js.work_packages.table.text_sort_hint")].join(" ")},Object(je.a)([this.querySpace.results.values$(),this.wpTableGroupBy.live$(),this.wpTableColumns.live$(),this.wpTableTimeline.live$(),this.wpTableSortBy.live$()]).pipe(this.untilDestroyed()).subscribe(([e,t,i,n,s])=&gt;{this.query=this.querySpace.query.value,this.results=e,this.groupBy=t,this.columns=i,this.numTableColumns=this.columns.length+2,this.scrollSyncUpdate&amp;&amp;this.timelineVisible!==n.visible&amp;&amp;this.scrollSyncUpdate(n.visible),this.timelineVisible=n.visible,this.manualSortEnabled=this.wpTableSortBy.isManualSortingMode,this.limitedResults=this.manualSortEnabled&amp;&amp;e.total&gt;e.count,this.cdRef.detectChanges()}),this.cdRef.detectChanges()}ngOnDestroy(){super.ngOnDestroy(),this.wpTableHoverSync.deactivate()}registerTimeline(e,t){const i=this.$element.find(".work-package--results-tbody"),n=this.$element.find(".work-package-table--container")[0];this.workPackageTable=new Oe.a(this.injector,this.$element[0],n,i[0],t,e,this.configuration),this.tbody=i,e.workPackageTable=this.workPackageTable,new xe(this.injector).attachTo(this.workPackageTable);const s=this.getTableAndTimelineElement();this.tableElement=s[0],this.timeline=s[1],this.wpTableHoverSync=new _e(this.$element),this.wpTableHoverSync.activate(),this.scrollSyncUpdate=Object(Ie.a)(this.$element),this.scrollSyncUpdate(this.timelineVisible),this.cdRef.detectChanges()}get isEmbedded(){return this.configuration.isEmbedded}getTableAndTimelineElement(){const e=this.$element.find(".work-packages-tabletimeline--table-side"),t=this.$element.find(".work-packages-tabletimeline--timeline-side");if(0===t.length||0===e.length)throw new Error("invalid state");return[e[0],t[0]]}}Ue.\u0275fac=function(e){return new(e||Ue)(Re.hc(Re.q),Re.hc(Re.A),Re.hc(r.a),Re.hc(V.a),Re.hc(n.a),Re.hc(Re.i),Re.hc(Re.K),Re.hc(Pe.a),Re.hc(ce.a),Re.hc(U.a),Re.hc(se.a))},Ue.\u0275cmp=Re.bc({type:Ue,selectors:[["wp-table"]],inputs:{projectIdentifier:"projectIdentifier",configurationObject:["configuration","configurationObject"]},features:[Re.Qb],decls:1,vars:1,consts:[["class","work-packages-split-view--tabletimeline-content",4,"ngIf"],[1,"work-packages-split-view--tabletimeline-content"],[1,"work-packages-tabletimeline--table-side","work-package-table--container","__hidden_overflow_container"],[1,"keyboard-accessible-list","generic-table","work-package-table"],[4,"ngIf"],["highlight-col","",4,"ngFor","ngForOf"],["highlight-col","",4,"ngIf"],[1,"hidden-for-sighted"],["id","wp-table-sort-summary"],[1,"-sticky"],["class","wp-table--manual-sort-th -short hide-when-print",4,"ngIf"],["class","wp-table--table-header",4,"ngFor","ngForOf","ngForTrackBy"],["class","wp-table--configuration-modal--trigger wp-table--context-menu-th -short hide-when-print",4,"ngIf"],["class","work-package--empty-tbody",4,"ngIf"],[1,"results-tbody","work-package--results-tbody"],["wpInlineCreate","",3,"wp-inline-create--table","wp-inline-create--project-identifier",4,"ngIf"],["wpTableSumsRow",""],["class","work-packages--tabletimeline--timeline--resizer hidden-for-mobile hide-when-print",4,"ngIf"],[1,"work-packages-tabletimeline--timeline-side"],["highlight-col",""],[1,"wp-table--manual-sort-th","-short","hide-when-print"],[1,"generic-table--empty-header"],["icon-classes","icon-sort-by",4,"ngIf"],["icon-classes","icon-sort-by"],[1,"wp-table--table-header"],["opColumnsContextMenu","",3,"headerColumn","locale","table","opColumnsContextMenu-column","opColumnsContextMenu-table"],[1,"wp-table--configuration-modal--trigger","wp-table--context-menu-th","-short","hide-when-print"],["class","generic-table--sort-header-outer",4,"ngIf"],[1,"generic-table--sort-header-outer"],[1,"work-package--empty-tbody"],["id","empty-row-notification"],["icon-classes","icon-info1 icon-context"],["wpInlineCreate","",3,"wp-inline-create--table","wp-inline-create--project-identifier"],[1,"work-packages--tabletimeline--timeline--resizer","hidden-for-mobile","hide-when-print"],[3,"elementClass","resizeEvent","localStorageKey"]],template:function(e,t){1&amp;e&amp;&amp;Re.ad(0,We,27,14,"div",0),2&amp;e&amp;&amp;Re.Dc("ngIf",t.query)},styles:[".wp-table--drag-and-drop-handle:hover{cursor:move}"],encapsulation:2,changeDetection:0})},"9nXh":function(e,t,i){"use strict";i.d(t,"b",(function(){return l})),i.d(t,"a",(function(){return d}));var n=i("mrSG"),s=i("iMRi"),a=i("ug4p"),r=i("6XbZ"),o=i("PtkW"),c=i("r0MM");const l="wp-timeline-cell";class d{constructor(e,t){this.injector=e,this.workPackageTable=t}build(e){const t=document.createElement("div");return t.classList.add(l,r.b),e&amp;&amp;(t.dataset.workPackageId=e),t}insert(e,t,i=[]){const n=this.build(e);n.classList.add(...i),t.appendChild(n)}}Object(n.c)([Object(c.a)(),Object(n.e)("design:type",s.a)],d.prototype,"states",void 0),Object(n.c)([Object(c.a)(),Object(n.e)("design:type",o.a)],d.prototype,"wpTableTimeline",void 0),Object(n.c)([Object(c.a)(),Object(n.e)("design:type",a.a)],d.prototype,"wpCacheService",void 0)},"9oW/":function(e,t,i){"use strict";i.d(t,"a",(function(){return h}));var n=i("mrSG"),s=i("8zkO"),a=i("VNOR"),r=i("r0MM"),o=i("fXoL"),c=i("k8lp"),l=i("ofXK"),d=i("32V0");function u(e,t){if(1&amp;e){const e=o.oc();o.nc(0,"edit-field-controls",4),o.vc("onSave",(function(){return o.Sc(e),o.xc().handleUserSubmit()}))("onCancel",(function(){return o.Sc(e),o.xc().handler.handleUserCancel()})),o.mc()}if(2&amp;e){const e=o.xc();o.Dc("fieldController",e.field)("saveTitle",e.text.save)("cancelTitle",e.text.cancel)}}class h extends a.a{constructor(){super(...arguments),this.isBusy=!1}get name(){return"comment"}get required(){return!0}ngOnInit(){super.ngOnInit(),this.rawValue=this.rawValue||""}}h.\u0275fac=function(e){return p(e||h)},h.\u0275cmp=o.bc({type:h,selectors:[["ng-component"]],features:[o.Qb],decls:4,vars:4,consts:[[1,"textarea-wrapper"],[1,"op-ckeditor--wrapper","op-ckeditor-element"],[3,"context","content","ckEditorType","onContentChange","onInitializationFailed","onInitialized"],[3,"fieldController","saveTitle","cancelTitle","onSave","onCancel",4,"ngIf"],[3,"fieldController","saveTitle","cancelTitle","onSave","onCancel"]],template:function(e,t){1&amp;e&amp;&amp;(o.nc(0,"div",0),o.nc(1,"div",1),o.nc(2,"op-ckeditor",2),o.vc("onContentChange",(function(e){return t.onContentChange(e)}))("onInitializationFailed",(function(){return t.initializationError=!0}))("onInitialized",(function(e){return t.onCkeditorSetup(e)})),o.mc(),o.mc(),o.ad(3,u,1,3,"edit-field-controls",3),o.mc()),2&amp;e&amp;&amp;(o.Tb(2),o.Dc("context",t.ckEditorContext)("content",t.rawValue)("ckEditorType",t.editorType),o.Tb(1),o.Dc("ngIf",!(t.handler.inEditMode||t.initializationError)))},directives:[c.a,l.q,d.a],encapsulation:2}),Object(n.c)([Object(r.a)(),Object(n.e)("design:type",s.a)],h.prototype,"ConfigurationService",void 0);const p=o.pc(h)},"9pt+":function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i("ug4p"),s=i("AEvm"),a=i("fXoL"),r=i("ofXK");function o(e,t){if(1&amp;e&amp;&amp;a.ic(0,"span",1),2&amp;e){const e=a.xc();a.Dc("textContent",e.count)}}class c extends s.a{constructor(e){super(),this.wpCacheService=e,this.count=0}ngOnInit(){this.wpCacheService.loadWorkPackage(this.wpId.toString()).values$().pipe(this.untilDestroyed()).subscribe(e=&gt;{this.count=_.size(e.watchers.elements)})}}c.\u0275fac=function(e){return new(e||c)(a.hc(n.a))},c.\u0275cmp=a.bc({type:c,selectors:[["wp-watchers-count"]],inputs:{wpId:"wpId"},features:[a.Qb],decls:1,vars:1,consts:[["class","wp-tabs-count",3,"textContent",4,"ngIf"],[1,"wp-tabs-count",3,"textContent"]],template:function(e,t){1&amp;e&amp;&amp;a.ad(0,o,1,1,"span",0),2&amp;e&amp;&amp;a.Dc("ngIf",t.count&gt;0)},directives:[r.q],encapsulation:2})},"A0F/":function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");class s{blockedTransition(e){return!0}}s.\u0275fac=function(e){return new(e||s)},s.\u0275prov=n.dc({token:s,factory:s.\u0275fac})},AA01:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("Mo6U");class s extends n.a{constructor(){super(...arguments),this.memoizedCurrentSchemas={}}$copy(){let e=super.$copy();return e.schema=this.schema,e}get id(){return this.filter.id}get name(){return this.filter.name}get currentSchema(){if(!this.schema||!this.operator)return null;let e=this.operator.href.toString();return void 0===this.memoizedCurrentSchemas[e]&amp;&amp;(this.memoizedCurrentSchemas[e]=this.schema.resultingSchema(this.operator)),this.memoizedCurrentSchemas[e]}isCompletelyDefined(){return this.values.length||this.currentSchema&amp;&amp;!this.currentSchema.isValueRequired()}findOperator(e){return _.find(this.schema.availableOperators,t=&gt;t.id===e)}}},AAic:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");class s{constructor(){this.mapping={}}add(e,t){this.mapping[e]=t}available(){return _.map(this.mapping,(e,t)=&gt;({attribute:t,text:e.localizedName}))}get(e){if(this.mapping[e])return this.mapping[e];throw`No action service exists for ${e}`}}s.\u0275fac=function(e){return new(e||s)},s.\u0275prov=n.dc({token:s,factory:s.\u0275fac,providedIn:"root"})},ABwi:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i("iB+3"),s=i("Jui0"),a=i("pL6k"),r=i("d/TE"),o=i("wZYP"),c=i("/C7M"),l=i("fXoL"),d=i("tk/3");class u{constructor(e,t,i,n,s,a,r){this.http=e,this.$state=t,this.PathHelper=i,this.UrlParamsHelper=n,this.NotificationsService=s,this.I18n=a,this.halEvents=r,this.text={successful_delete:this.I18n.t("js.work_packages.message_successful_bulk_delete")}}performBulkDelete(e,t){const i={"ids[]":e},n=this.http.delete(this.PathHelper.workPackagesBulkDeletePath(),{params:i,withCredentials:!0}).toPromise();return t&amp;&amp;n.then(()=&gt;{this.NotificationsService.addSuccess(this.text.successful_delete),e.forEach(e=&gt;this.halEvents.push({_type:"WorkPackage",id:e},{eventType:"deleted"})),this.$state.includes("**.list.details.**")&amp;&amp;e.indexOf(this.$state.params.workPackageId)&gt;-1&amp;&amp;this.$state.go("work-packages.partitioned.list",this.$state.params)}).catch(()=&gt;{const e=this.UrlParamsHelper.buildQueryString(i);window.location.href=this.PathHelper.workPackagesBulkDeletePath()+"?"+e}),n}}u.\u0275fac=function(e){return new(e||u)(l.rc(d.b),l.rc(n.G),l.rc(s.a),l.rc(a.a),l.rc(r.a),l.rc(o.a),l.rc(c.a))},u.\u0275prov=l.dc({token:u,factory:u.\u0275fac})},AEvm:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("Hg4z"),s=i("fXoL");class a extends n.a{constructor(){super(...arguments),this.componentDestroyed=!1}ngOnDestroy(){this.componentDestroyed=!0,super.ngOnDestroy()}untilDestroyed(){return Object(n.c)(this)}}a.\u0275fac=function(e){return r(e||a)},a.\u0275dir=s.cc({type:a,features:[s.Qb]});const r=s.pc(a)},AcWF:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i("8zkO"),s=i("wZYP"),a=i("F5Dh"),r=i("fXoL"),o=i("3Pt+"),c=i("ofXK");function l(e,t){if(1&amp;e&amp;&amp;r.ic(0,"option",4),2&amp;e){const e=t.$implicit,i=r.xc();r.Dc("textContent",i.text[e.id])("ngValue",e)}}class d{constructor(e,t,i,n){this.injector=e,this.I18n=t,this.wpTableFilters=i,this.ConfigurationService=n,this.relationFilterIds=["parent","precedes","follows","relates","duplicates","duplicated","blocks","blocked","partof","includes","requires","required"],this.availableRelationFilters=[],this.selectedRelationFilter=void 0,this.text={filter_work_packages_by_relation_type:this.I18n.t("js.work_packages.table_configuration.relation_filters.filter_work_packages_by_relation_type"),please_select:this.I18n.t("js.placeholders.selection"),parent:this.I18n.t("js.relation_labels.children"),precedes:this.I18n.t("js.relation_labels.follows"),follows:this.I18n.t("js.relation_labels.precedes"),relates:this.I18n.t("js.relation_labels.relates"),duplicates:this.I18n.t("js.relation_labels.duplicated"),duplicated:this.I18n.t("js.relation_labels.duplicates"),blocks:this.I18n.t("js.relation_labels.blocked"),blocked:this.I18n.t("js.relation_labels.blocks"),requires:this.I18n.t("js.relation_labels.required"),required:this.I18n.t("js.relation_labels.requires"),partof:this.I18n.t("js.relation_labels.includes"),includes:this.I18n.t("js.relation_labels.partof")}}ngOnInit(){let e=this;this.wpTableFilters.onReady().then(()=&gt;{e.availableRelationFilters=e.relationFiltersOf(e.wpTableFilters.availableFilters),e.setSelectedRelationFilter()})}setSelectedRelationFilter(){let e=this.relationFiltersOf(this.wpTableFilters.current);e.length&gt;0?this.selectedRelationFilter=_.find(this.availableRelationFilters,{id:e[0].id}):this.selectedRelationFilter=this.availableRelationFilters[0],this.onRelationFilterSelected()}onRelationFilterSelected(){this.selectedRelationFilter&amp;&amp;(this.removeRelationFiltersFromCurrentState(),this.addFilterToCurrentState(this.selectedRelationFilter))}removeRelationFiltersFromCurrentState(){let e=this.relationFiltersOf(this.wpTableFilters.current);this.wpTableFilters.remove(...e)}relationFiltersOf(e){return _.filter(e,e=&gt;_.includes(this.relationFilterIds,e.id))}addFilterToCurrentState(e){let t=this.wpTableFilters.instantiate(e),i=this.getOperatorForId(t,"=");t.operator=i,t.values=[{href:"/api/v3/work_packages/{id}"}],this.wpTableFilters.add(t)}getOperatorForId(e,t){return _.find(e.schema.availableOperators,{id:t})}compareRelationFilters(e,t){return e&amp;&amp;t?e.id===t.id:e===t}}d.\u0275fac=function(e){return new(e||d)(r.hc(r.A),r.hc(s.a),r.hc(a.a),r.hc(n.a))},d.\u0275cmp=r.bc({type:d,selectors:[["wp-table-configuration-relation-selector"]],decls:6,vars:4,consts:[[1,"relation-filter-selector"],[3,"textContent"],["id","",1,"form--select","form--inline-select",3,"ngModel","compareWith","ngModelChange"],[3,"textContent","ngValue",4,"ngFor","ngForOf"],[3,"textContent","ngValue"]],template:function(e,t){1&amp;e&amp;&amp;(r.nc(0,"div",0),r.nc(1,"h5"),r.ic(2,"span",1),r.cd(3," "),r.nc(4,"select",2),r.vc("ngModelChange",(function(e){return t.selectedRelationFilter=e}))("ngModelChange",(function(){return t.onRelationFilterSelected()})),r.ad(5,l,1,2,"option",3),r.mc(),r.mc(),r.mc()),2&amp;e&amp;&amp;(r.Tb(2),r.Dc("textContent",t.text.filter_work_packages_by_relation_type),r.Tb(2),r.Dc("ngModel",t.selectedRelationFilter)("compareWith",t.compareRelationFilters),r.Tb(1),r.Dc("ngForOf",t.availableRelationFilters))},directives:[o.y,o.m,o.p,c.p,o.r,o.B],encapsulation:2})},AdL0:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i("mrSG"),s=i("wZYP"),a=i("PUHT"),r=i("4lR/"),o=i("IaZ+"),c=i("fXoL"),l=i("N5AO");class d extends a.a{constructor(e,t,i,n,s,a){super(e,t),this.elementRef=e,this.opContextMenu=t,this.opModalService=i,this.injector=n,this.cdRef=s,this.I18n=a}open(e){return Object(n.b)(this,void 0,void 0,(function*(){this.items=yield this.buildItems(),this.opContextMenu.show(this,e)}))}positionArgs(e){let t=super.positionArgs(e);return _.assign(t,{my:"right top",at:"right bottom"}),t}buildItems(){return Object(n.b)(this,void 0,void 0,(function*(){let e=[];if(this.menuItems){const t=yield this.menuItems();return e.concat(t)}return e}))}}d.\u0275fac=function(e){return new(e||d)(c.hc(c.q),c.hc(r.a),c.hc(o.b),c.hc(c.A),c.hc(c.i),c.hc(s.a))},d.\u0275cmp=c.bc({type:d,selectors:[["icon-triggered-context-menu"]],inputs:{menuItems:["menu-items","menuItems"]},features:[c.Qb],decls:2,vars:0,consts:[["href","#"],["icon-classes","icon-show-more-horizontal"]],template:function(e,t){1&amp;e&amp;&amp;(c.nc(0,"a",0),c.ic(1,"op-icon",1),c.mc())},directives:[l.a],styles:["a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:hover{color:var(--light-gray);text-decoration:none}"]})},AeZM:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("zqrF"),s=i("iMRi"),a=i("E2tj"),r=i("fXoL");class o extends n.a{constructor(e,t){super(t),this.states=e,this.querySpace=t}valueFromQuery(e){return e.groupBy||null}hasChanged(e){const t=e=&gt;e?e.href:null;return!_.isEqual(t(e.groupBy),t(this.current))}applyToQuery(e){const t=this.current;return e.groupBy=null===t?void 0:t,!0}isGroupable(e){return!!_.find(this.available,t=&gt;t.id===e.id)}disable(){this.update(null)}setBy(e){let t=_.find(this.available,t=&gt;t.id===e.id);t&amp;&amp;this.update(t)}get current(){return this.lastUpdatedState.getValueOr(null)}get availableState(){return this.states.queries.groupBy}get isEnabled(){return!!this.current}get available(){return this.availableState.getValueOr([])}isCurrentlyGroupedBy(e){let t=this.current;return!(!t||t.id!==e.id)}}o.\u0275fac=function(e){return new(e||o)(r.rc(s.a),r.rc(a.a))},o.\u0275prov=r.dc({token:o,factory:o.\u0275fac})},AytR:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));const n={production:!0}},B4Ei:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("AA01"),s=i("Mo6U");class a extends s.a{$initialize(e){super.$initialize(e),this.filters=this.filters.map(e=&gt;new n.a(this.injector,e,!0,this.halInitializer,"QueryFilterInstance"))}}},BV52:function(e,t,i){"use strict";i.d(t,"a",(function(){return p}));i("ii2/");var n=i("fXoL"),s=i("wZYP"),a=i("ofXK"),r=i("/Rze"),o=i("N5AO"),c=i("s/U8");const l=["wpRelationGroupByToggler"];function d(e,t){if(1&amp;e){const e=n.oc();n.nc(0,"div",6),n.nc(1,"div",7,8),n.nc(3,"accessible-by-keyboard",9),n.vc("execute",(function(){return n.Sc(e),n.xc().toggleButton()})),n.ic(4,"op-icon",10),n.ic(5,"span",11),n.mc(),n.mc(),n.mc()}if(2&amp;e){const e=n.xc();n.Tb(5),n.Dc("textContent",e.togglerText)}}function u(e,t){if(1&amp;e&amp;&amp;n.ic(0,"wp-relation-row",14),2&amp;e){const e=t.$implicit,i=n.xc(2);n.Dc("workPackage",i.workPackage)("groupByWorkPackageType",i.groupByWorkPackageType)("relatedWorkPackage",e)}}function h(e,t){if(1&amp;e&amp;&amp;(n.nc(0,"div",12),n.ad(1,u,1,3,"wp-relation-row",13),n.mc()),2&amp;e){const e=n.xc();n.Tb(1),n.Dc("ngForOf",e.relatedWorkPackages)}}class p{constructor(e){this.I18n=e,this.onToggleGroupBy=new n.s,this.text={groupByType:this.I18n.t("js.relation_buttons.group_by_wp_type"),groupByRelation:this.I18n.t("js.relation_buttons.group_by_relation_type")}}get togglerText(){return this.groupByWorkPackageType?this.text.groupByRelation:this.text.groupByType}toggleButton(){this.onToggleGroupBy.emit(),setTimeout(()=&gt;{this.toggleElement.nativeElement.focus()},20)}}p.\u0275fac=function(e){return new(e||p)(n.hc(s.a))},p.\u0275cmp=n.bc({type:p,selectors:[["wp-relations-group"]],viewQuery:function(e,t){var i;(1&amp;e&amp;&amp;n.hd(l,!0),2&amp;e)&amp;&amp;(n.Pc(i=n.wc())&amp;&amp;(t.toggleElement=i.first))},inputs:{relatedWorkPackages:"relatedWorkPackages",workPackage:"workPackage",header:"header",firstGroup:"firstGroup",groupByWorkPackageType:"groupByWorkPackageType"},outputs:{onToggleGroupBy:"onToggleGroupBy"},decls:6,vars:3,consts:[[1,"attributes-group"],[1,"attributes-group--header"],[1,"attributes-group--header-container"],[1,"attributes-group--header-text","relation-group--header",3,"textContent"],["class","attributes-group--header-toggle",4,"ngIf"],["class","content",4,"ngIf"],[1,"attributes-group--header-toggle"],["id","wp-relation-group-by-toggle",1,"panel-toggler","ng-scope","ng-isolate-scope","hide-when-print"],["wpRelationGroupByToggler",""],["linkClass","button -transparent",3,"execute"],["icon-classes","icon-small icon-group-by icon4"],[3,"textContent"],[1,"content"],[3,"workPackage","groupByWorkPackageType","relatedWorkPackage",4,"ngFor","ngForOf"],[3,"workPackage","groupByWorkPackageType","relatedWorkPackage"]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"div",0),n.nc(1,"div",1),n.nc(2,"div",2),n.ic(3,"h3",3),n.mc(),n.ad(4,d,6,1,"div",4),n.mc(),n.ad(5,h,2,1,"div",5),n.mc()),2&amp;e&amp;&amp;(n.Tb(3),n.Dc("textContent",t.header),n.Tb(1),n.Dc("ngIf",t.firstGroup),n.Tb(1),n.Dc("ngIf",t.relatedWorkPackages))},directives:[a.q,r.a,o.a,a.p,c.a],encapsulation:2})},BjK6:function(e,t,i){"use strict";i.d(t,"a",(function(){return m}));var n=i("PkGb"),s=i("iMRi"),a=i("Y/CA"),r=i("iB+3"),o=i("xLNn"),c=i("wZYP"),l=i("fXoL"),d=i("ofXK"),u=i("kor4"),h=i("N5AO");const p=function(e){return{"-active":e}};class m extends o.a{constructor(e,t,i,n,s,a,r){super(t),this.$state=e,this.I18n=t,this.transitions=i,this.cdRef=n,this.states=s,this.wpTableFocus=a,this.keepTab=r,this.accessKey=8,this.activeState="work-packages.partitioned.list.details",this.listState="work-packages.partitioned.list",this.buttonId="work-packages-details-view-button",this.buttonClass="toolbar-icon",this.iconClass="icon-info2",this.activateLabel=t.t("js.button_open_details"),this.deactivateLabel=t.t("js.button_close_details"),this.transitionListener=this.transitions.onSuccess({},()=&gt;{this.isActive=this.$state.includes(this.activeState),this.cdRef.detectChanges()})}ngOnDestroy(){super.ngOnDestroy(),this.transitionListener()}get label(){return this.isActive?this.deactivateLabel:this.activateLabel}isToggle(){return!0}performAction(e){this.isActive?this.openListView():this.openDetailsView()}openListView(){var e={projectPath:this.projectIdentifier};_.extend(e,this.$state.params),this.$state.go(this.listState,e)}openDetailsView(){var e={workPackageId:this.wpTableFocus.focusedWorkPackage,projectPath:this.projectIdentifier};_.extend(e,this.$state.params),this.$state.go(this.keepTab.currentDetailsState,e)}}m.\u0275fac=function(e){return new(e||m)(l.hc(r.G),l.hc(c.a),l.hc(r.O),l.hc(l.i),l.hc(s.a),l.hc(a.a),l.hc(n.a))},m.\u0275cmp=l.bc({type:m,selectors:[["wp-details-view-button"]],features:[l.Qb],decls:2,vars:11,consts:[["type","button",3,"ngClass","disabled","accessibleClick"],[3,"icon-classes"]],template:function(e,t){1&amp;e&amp;&amp;(l.nc(0,"button",0),l.vc("accessibleClick",(function(e){return t.performAction(e)})),l.ic(1,"op-icon",1),l.mc()),2&amp;e&amp;&amp;(l.Wb("button ",t.buttonClass,""),l.Dc("ngClass",l.Ic(9,p,t.isActive))("disabled",t.disabled||!t.isToggle()&amp;&amp;t.isActive),l.Ub("id",t.buttonId)("title",t.label)("accesskey",t.accessKey),l.Tb(1),l.Fc("icon-classes","",t.iconClass," button--icon"))},directives:[d.n,u.a,h.a],encapsulation:2,changeDetection:0})},BtrP:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));class n{constructor(e,t=null,i="",n="get",s=!1,a,r="application/json",o){this.requestMethod=e,this.href=t,this.title=i,this.method=n,this.templated=s,this.payload=a,this.type=r,this.identifier=o}static fromObject(e,t){return new n((t,i,n,s)=&gt;e.request(t,i,n,s).toPromise(),t.href,t.title,t.method,t.templated,t.payload,t.type,t.identifier)}$fetch(...e){const[t,i]=e;return this.requestMethod(this.method,this.href,t,i)}$prepare(e){if(!this.templated)throw"The link "+this.href+" is not templated.";let t=_.clone(this.href)||"";return _.each(e,(e,i)=&gt;{let n=new RegExp("{"+i+"}");t=t.replace(n,e)}),new n(this.requestMethod,t,this.title,this.method,!1,this.payload,this.type,this.identifier).$callable()}$callable(){const e=(...e)=&gt;this.$fetch(...e);return _.extend(e,{$link:this,href:this.href,title:this.title,method:this.method,templated:this.templated,payload:this.payload,type:this.type,identifier:this.identifier}),e}}},Bz7v:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));class n{constructor(e){this.grid=e}get id(){return this.grid.id}get name(){return this.grid.name}get editable(){return!!this.grid.updateImmediately}get isFree(){return!this.isAction}get isAction(){return"action"===this.grid.options.type}get actionAttribute(){if(!this.isFree)return this.grid.options.attribute}set highlightingMode(e){this.grid.options.highlightingMode=e}get highlightingMode(){return this.grid.options.highlightingMode||"none"}set name(e){this.grid.name=e}addQuery(e){e.isNewWidget=!0,this.grid.widgets.push(e)}removeQuery(e){this.grid.widgets=this.grid.widgets.filter(t=&gt;t.options.queryId!==e.options.queryId)}get queries(){return this.grid.widgets}get createdAt(){return this.grid.createdAt}get filters(){return this.grid.options.filters||[]}set filters(e){this.grid.options.filters=e}sortWidgets(){this.grid.widgets=this.grid.widgets.sort((e,t)=&gt;e.startColumn-t.startColumn)}showStatusButton(){return"status"!==this.actionAttribute}}},C21z:function(e,t,i){"use strict";var n;i.d(t,"a",(function(){return n})),function(e){function t(e,t){return e===t||e.contains(t)}e.whenOutside=function(e,i){setTimeout(()=&gt;{t(e,document.activeElement)||i()},20)},e.insideOrSelf=t}(n||(n={}))},CBsm:function(e,t,i){"use strict";function n(e){return`__collapsed-group-${e}`}function s(e){return`__hierarchy-group-${e}`}function a(e){return`__hierarchy-root-${e}`}function r(e){return`wp-ancestor-row-${e}`}i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return s})),i.d(t,"d",(function(){return a})),i.d(t,"a",(function(){return r}))},CK39:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("oJ+N"),s=i("Ioun"),a=i("fXoL");class r extends n.a{externalQueryConfigurationComponent(){return s.a}}r.\u0275fac=function(e){return o(e||r)},r.\u0275prov=a.dc({token:r,factory:r.\u0275fac});const o=a.pc(r)},CV67:function(e,t,i){"use strict";i.d(t,"c",(function(){return v})),i.d(t,"b",(function(){return w})),i.d(t,"a",(function(){return y}));var n=i("mrSG"),s=i("fXoL"),a=i("wZYP"),r=i("C21z"),o=i("r0MM"),c=i("ofXK"),l=i("3Pt+"),d=i("oUDv"),u=i("kor4");const h=["editableTitleInput"];function p(e,t){if(1&amp;e){const e=s.oc();s.nc(0,"a",6),s.vc("accessibleClick",(function(t){return s.Sc(e),s.xc(2).save(t,!0)})),s.ic(1,"span",7),s.mc()}if(2&amp;e){const e=s.xc(2);s.Ub("aria-label",e.text.query_has_changed_click_to_save)("title",e.text.query_has_changed_click_to_save)}}const m=function(e,t){return{"-error":e,"-changed":t}};function g(e,t){if(1&amp;e){const e=s.oc();s.nc(0,"div",2),s.vc("focusout",(function(t){return s.Sc(e),s.xc().saveWhenFocusOutside(t)})),s.ad(1,p,2,2,"a",3),s.nc(2,"input",4,5),s.vc("focus",(function(t){return s.Sc(e),s.xc().onFocus(t)}))("blur",(function(){return s.Sc(e),s.xc().onBlur()}))("keydown.escape",(function(t){return s.Sc(e),s.xc().reset(t)}))("keydown.enter",(function(t){return s.Sc(e),s.xc().save(t)}))("ngModelChange",(function(t){return s.Sc(e),s.xc().selectedTitle=t})),s.mc(),s.mc()}if(2&amp;e){const e=s.xc();s.Tb(1),s.Dc("ngIf",e.showSave),s.Tb(1),s.Dc("focus",e.initialFocus||void 0)("ngModel",e.selectedTitle)("disabled",e.inFlight)("ngClass",s.Jc(8,m,e.isEmpty,e.showSave)),s.Ub("name",e.selectableTitleIdentifier)("placeholder",e.text.input_placeholder)("title",e.text.input_title)}}const f=function(e,t){return{"-disabled":e,"-small":t}};function b(e,t){if(1&amp;e&amp;&amp;(s.nc(0,"h2",8),s.cd(1),s.yc(2,"slice"),s.mc()),2&amp;e){const e=s.xc();s.Dc("ngClass",s.Jc(7,f,e.disabled,e.smallHeader)),s.Ub("title",e.selectedTitle),s.Tb(1),s.ed(" ",s.Ac(2,3,e.selectedTitle,0,50),"\n")}}const v="op:selectableTitle:trigger",w="editable-toolbar-title";class y{constructor(e){this.injector=e,this.editable=!0,this.inFlight=!1,this.showSaveCondition=!1,this.initialFocus=!1,this.smallHeader=!1,this.onSave=new s.s,this.onEmptySubmit=new s.s,this.selectableTitleIdentifier=w,this.text={click_to_edit:this.I18n.t("js.work_packages.query.click_to_edit_query_name"),press_enter_to_save:this.I18n.t("js.label_press_enter_to_save"),query_has_changed_click_to_save:this.I18n.t("js.label_view_has_changed"),input_title:"",input_placeholder:this.I18n.t("js.work_packages.query.rename_query_placeholder"),search_query_title:this.I18n.t("js.toolbar.search_query_title"),confirm_edit_cancel:this.I18n.t("js.work_packages.query.confirm_edit_cancel"),duplicate_query_title:this.I18n.t("js.work_packages.query.errors.duplicate_query_title")}}ngOnInit(){this.text.input_title=`${this.text.click_to_edit} ${this.text.press_enter_to_save}`,jQuery(this.elementRef.nativeElement).on(v,(e,t="")=&gt;{this.inputField&amp;&amp;(this.selectedTitle=t,setTimeout(()=&gt;{this.inputField.nativeElement.focus()},20),e.stopPropagation())})}ngOnChanges(e){if(e.inputTitle&amp;&amp;(this.selectedTitle=e.inputTitle.currentValue),e.initialFocus&amp;&amp;e.initialFocus.firstChange&amp;&amp;this.inputField){const e=this.inputField.nativeElement;this.selectInputOnInitalFocus(e)}}onFocus(e){this.toggleToolbarButtonVisibility(!0),this.selectInputOnInitalFocus(e.target)}onBlur(){this.toggleToolbarButtonVisibility(!1)}selectInputOnInitalFocus(e){this.initialFocus&amp;&amp;(e.select(),this.initialFocus=!1)}saveWhenFocusOutside(e){r.a.whenOutside(this.elementRef.nativeElement,()=&gt;this.save(e))}reset(){this.resetInputField(),this.selectedTitle=this.inputTitle}get showSave(){return this.editable&amp;&amp;this.showSaveCondition}save(e,t=!1){e.preventDefault(),this.resetInputField(),this.selectedTitle=this.selectedTitle.trim(),this.isEmpty?this.onEmptyError():(t||this.inputTitle!==this.selectedTitle)&amp;&amp;(this.inputField&amp;&amp;this.inputField.nativeElement.blur(),this.inFlight||(this.inFlight=!0,this.emitSave(this.selectedTitle),setTimeout(()=&gt;this.inFlight=!1,100)))}get isEmpty(){return""===this.selectedTitle}emitSave(e){this.onSave.emit(e)}onEmptyError(){this.onEmptySubmit.emit(),this.focusInputOnError()}focusInputOnError(){if(this.inputField){const e=this.inputField.nativeElement;e.classList.add("-error"),e.focus()}}resetInputField(){if(this.inputField){this.inputField.nativeElement.classList.remove("-error")}}toggleToolbarButtonVisibility(e){jQuery(".toolbar-items").toggleClass("hidden-for-mobile",e)}}y.\u0275fac=function(e){return new(e||y)(s.hc(s.A))},y.\u0275cmp=s.bc({type:y,selectors:[["editable-toolbar-title"]],viewQuery:function(e,t){var i;(1&amp;e&amp;&amp;s.hd(h,!0),2&amp;e)&amp;&amp;(s.Pc(i=s.wc())&amp;&amp;(t.inputField=i.first))},hostAttrs:[1,"title-container"],inputs:{inputTitle:["title","inputTitle"],editable:"editable",inFlight:"inFlight",showSaveCondition:"showSaveCondition",initialFocus:"initialFocus",smallHeader:"smallHeader"},outputs:{onSave:"onSave",onEmptySubmit:"onEmptySubmit"},features:[s.Rb],decls:2,vars:2,consts:[["class","editable-toolbar-title--container",3,"focusout",4,"ngIf"],["class","editable-toolbar-title--fixed",3,"ngClass",4,"ngIf"],[1,"editable-toolbar-title--container",3,"focusout"],["role","link","class","editable-toolbar-title--save",3,"accessibleClick",4,"ngIf"],["type","text","aria-required","true",1,"editable-toolbar-title--input","-border-on-hover-only","toolbar--editable-toolbar","ellipsis",3,"focus","ngModel","disabled","ngClass","blur","keydown.escape","keydown.enter","ngModelChange"],["editableTitleInput",""],["role","link",1,"editable-toolbar-title--save",3,"accessibleClick"],["aria-hidden","true",1,"icon","icon-save"],[1,"editable-toolbar-title--fixed",3,"ngClass"]],template:function(e,t){1&amp;e&amp;&amp;(s.ad(0,g,4,11,"div",0),s.ad(1,b,3,10,"h2",1)),2&amp;e&amp;&amp;(s.Dc("ngIf",t.editable),s.Tb(1),s.Dc("ngIf",!t.editable))},directives:[c.q,l.c,d.a,l.m,l.p,c.n,u.a],pipes:[c.A],styles:[".editable-toolbar-title--container[_ngcontent-%COMP%]{display:flex;align-items:center}.editable-toolbar-title--fixed[_ngcontent-%COMP%]{padding:0;cursor:default}.editable-toolbar-title--save[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{color:#5f5f5f}.editable-toolbar-title--save[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]:before{color:#2c2c2c}.editable-toolbar-title--input[_ngcontent-%COMP%]{padding-left:5px;color:#5f5f5f}.editable-toolbar-title--input.-changed[_ngcontent-%COMP%]{font-style:italic}"]}),Object(n.c)([Object(o.a)(),Object(n.e)("design:type",s.q)],y.prototype,"elementRef",void 0),Object(n.c)([Object(o.a)(),Object(n.e)("design:type",a.a)],y.prototype,"I18n",void 0)},CVKj:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("fXoL"),s=i("HEQ6"),a=i("72oW");class r{constructor(e){this.elementRef=e,this.initialLoadingIndicator=!0}ngOnInit(){const e=this.elementRef.nativeElement;e.getAttribute("query-props")&amp;&amp;this.getInputsFromData(e)}getInputsFromData(e){this.queryProps=JSON.parse(e.getAttribute("query-props")),this.configuration=JSON.parse(e.getAttribute("configuration"))}}r.\u0275fac=function(e){return new(e||r)(n.hc(n.q))},r.\u0275cmp=n.bc({type:r,selectors:[["wp-embedded-table-entry"]],inputs:{queryProps:"queryProps",configuration:"configuration",initialLoadingIndicator:"initialLoadingIndicator"},decls:2,vars:3,consts:[["wp-isolated-query-space",""],[3,"queryProps","initialLoadingIndicator","configuration"]],template:function(e,t){1&amp;e&amp;&amp;(n.lc(0,0),n.ic(1,"wp-embedded-table",1),n.kc()),2&amp;e&amp;&amp;(n.Tb(1),n.Dc("queryProps",t.queryProps)("initialLoadingIndicator",t.initialLoadingIndicator)("configuration",t.configuration))},directives:[s.a,a.a],encapsulation:2})},"CX+C":function(e,t,i){"use strict";i.d(t,"b",(function(){return p})),i.d(t,"a",(function(){return m}));var n=i("nfBx"),s=i("Ul5t"),a=i("wZYP"),r=i("IaZ+"),o=i("YIAj"),c=i("fXoL"),l=i("ofXK"),d=i("/Rze"),u=i("N5AO");function h(e,t){if(1&amp;e){const e=c.oc();c.nc(0,"accessible-by-keyboard",1),c.vc("execute",(function(){return c.Sc(e),c.xc().handleClick()})),c.ic(1,"op-icon",2),c.cd(2),c.mc()}if(2&amp;e){const e=c.xc();c.Fc("linkClass","icon help-text--entry help-text--for-",e.attribute,""),c.Dc("linkAriaLabel",e.text.open_dialog),c.Tb(2),c.ed(" ",e.additionalLabel,"\n")}}const p="attribute-help-text";class m{constructor(e,t,i,n,s,a,r){this.elementRef=e,this.helpTextDm=t,this.attributeHelpTexts=i,this.opModalService=n,this.cdRef=s,this.injector=a,this.I18n=r,this.exists=!1,this.text={open_dialog:this.I18n.t("js.help_texts.show_modal"),edit:this.I18n.t("js.button_edit"),close:this.I18n.t("js.button_close")}}ngOnInit(){const e=this.elementRef.nativeElement;e.dataset.helpTextId&amp;&amp;(this.helpTextId=e.dataset.helpTextId,this.attribute=e.dataset.attribute,this.attributeScope=e.dataset.attributeScope,this.additionalLabel=e.dataset.additionalLabel),this.helpTextId?this.exists=!0:this.load().then(e=&gt;(this.exists=!!e,this.cdRef.detectChanges(),e))}handleClick(){this.load().then(e=&gt;{this.opModalService.show(o.a,this.injector,{helpText:e})})}load(){return this.helpTextId?this.helpTextDm.load(this.helpTextId):this.attributeHelpTexts.require(this.attribute,this.attributeScope)}}m.\u0275fac=function(e){return new(e||m)(c.hc(c.q),c.hc(s.a),c.hc(n.a),c.hc(r.b),c.hc(c.i),c.hc(c.A),c.hc(a.a))},m.\u0275cmp=c.bc({type:m,selectors:[["attribute-help-text"]],inputs:{attribute:"attribute",additionalLabel:"additionalLabel",attributeScope:"attributeScope",helpTextId:"helpTextId"},decls:1,vars:1,consts:[[3,"linkAriaLabel","linkClass","execute",4,"ngIf"],[3,"linkAriaLabel","linkClass","execute"],["icon-classes","icon icon-help1"]],template:function(e,t){1&amp;e&amp;&amp;c.ad(0,h,3,3,"accessible-by-keyboard",0),2&amp;e&amp;&amp;c.Dc("ngIf",t.exists)},directives:[l.q,d.a,u.a],encapsulation:2,changeDetection:0})},CZZR:function(e,t,i){"use strict";i.d(t,"a",(function(){return m}));var n=i("mrSG"),s=i("Cfvw"),a=i("kTsZ"),r=i("Jui0"),o=i("n9mQ"),c=i("sjKJ"),l=i("vkgz"),d=i("lJxs"),u=i("Bz7v"),h=i("Kg8T"),p=i("fXoL");class m{constructor(e,t,i,n,s){this.GridDm=e,this.PathHelper=t,this.authorisationService=i,this.CurrentProject=n,this.halResourceService=s}allInScope(e=this.CurrentProject.identifier){const t=this.boardPath(e);return Object(s.a)(this.GridDm.list({filters:[["scope","=",[t]]]})).pipe(Object(l.a)(e=&gt;this.authorisationService.initModelAuth("boards",e.$links)),Object(d.a)(e=&gt;e.elements.map(e=&gt;new u.a(e))))}one(e){return Object(s.a)(this.GridDm.one(e)).pipe(Object(d.a)(e=&gt;new u.a(e)))}save(e){return this.fetchSchema(e).then(t=&gt;this.GridDm.update(e.grid,t)).then(t=&gt;(e.grid=t,e))}fetchSchema(e){return this.GridDm.updateForm(e.grid).then(e=&gt;e.schema)}boardPath(e=this.CurrentProject.identifier){return this.PathHelper.projectBoardsPath(e)}create(e,t,i){return Object(n.b)(this,void 0,void 0,(function*(){return this.createGrid(e,t,i).then(e=&gt;new u.a(e))}))}delete(e){return e.grid.delete?e.grid.delete():Promise.reject("Deletion not possible")}createGrid(e,t,i){const n=this.boardPath();let s=_.set({name:t},"_links.scope.href",n);return s.options={type:e},i&amp;&amp;(s.options.attribute=i),this.GridDm.createForm(s).then(e=&gt;{let t=this.halResourceService.createHalResource(e.payload.$source);return this.GridDm.create(t,e.schema)})}}m.\u0275fac=function(e){return new(e||m)(p.rc(o.a),p.rc(r.a),p.rc(h.a),p.rc(c.a),p.rc(a.a))},m.\u0275prov=p.dc({token:m,factory:m.\u0275fac,providedIn:"root"})},CejQ:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i("fXoL"),s=(i("PHo6"),i("wZYP")),a=i("GntA");class r extends a.a{}var o=i("AEvm");class c extends o.a{constructor(e,t){super(),this.i18n=e,this.injector=t,this.resourceChanged=new n.s}get widgetName(){var e,t;let i=null===(e=this.resource)||void 0===e?void 0:e.options.name,n=null===(t=this.resource)||void 0===t?void 0:t.identifier;return this.isEditable?i:this.i18n.t(`js.grid.widgets.${n}.title`,{defaultValue:i})}renameWidget(e){let t=this.setChangesetOptions({name:e});this.resourceChanged.emit(t)}get isEditable(){return!0}setChangesetOptions(e){let t=new r(this.resource);return t.setValue("options",Object.assign({},this.resource.options,e)),t}}c.\u0275fac=function(e){return new(e||c)(n.hc(s.a),n.hc(n.A))},c.\u0275dir=n.cc({type:c,hostVars:8,hostBindings:function(e,t){2&amp;e&amp;&amp;n.Zc("grid-column-start",t.gridColumnStart)("grid-column-end",t.gridColumnEnd)("grid-row-start",t.gridRowStart)("grid-row-end",t.gridRowEnd)},inputs:{resource:"resource"},outputs:{resourceChanged:"resourceChanged"},features:[n.Qb]})},DDsP:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("ciXH"),s=i("fXoL");class a extends n.a{listUrl(){return this.pathHelper.api.v3.news.toString()}oneUrl(e){return this.pathHelper.api.v3.news.id(e).toString()}}a.\u0275fac=function(e){return r(e||a)},a.\u0275prov=s.dc({token:a,factory:a.\u0275fac});const r=s.pc(a)},DHgU:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");class s{get(...e){return _.get(window.gon,e,null)}get gon(){return window.gon}}s.\u0275fac=function(e){return new(e||s)},s.\u0275prov=n.dc({token:s,factory:s.\u0275fac,providedIn:"root"})},DLfB:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i("pQre"),s=i("wZYP"),a=i("fXoL"),r=i("/Rze"),o=i("N5AO");class c{constructor(e,t){this.backRoutingService=e,this.I18n=t,this.text={goBack:this.I18n.t("js.button_back")}}goBack(){this.customBackMethod?this.customBackMethod():this.backRoutingService.goBack()}classes(){let e="button ";return e+=this.linkClass?this.linkClass:"",e}}c.\u0275fac=function(e){return new(e||c)(a.hc(n.a),a.hc(s.a))},c.\u0275cmp=a.bc({type:c,selectors:[["back-button"]],inputs:{linkClass:"linkClass",customBackMethod:"customBackMethod"},decls:3,vars:3,consts:[[1,"wp-show--back-button","hide-when-print"],[3,"linkClass","linkAriaLabel","linkTitle","execute"],["icon-classes","button--icon icon-back-up"]],template:function(e,t){1&amp;e&amp;&amp;(a.nc(0,"div",0),a.nc(1,"accessible-by-keyboard",1),a.vc("execute",(function(){return t.goBack()})),a.ic(2,"op-icon",2),a.mc(),a.mc()),2&amp;e&amp;&amp;(a.Tb(1),a.Dc("linkClass",t.classes())("linkAriaLabel",t.text.goBack)("linkTitle",t.text.goBack))},directives:[r.a,o.a],encapsulation:2,changeDetection:0})},DP6S:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("kTsZ"),s=i("Jui0"),a=i("fXoL");class r{constructor(e,t){this.halResourceService=e,this.pathHelper=t}one(e){return this.halResourceService.get(this.pathHelper.api.v3.statuses.id(e).toString()).toPromise()}list(){return this.halResourceService.get(this.pathHelper.api.v3.statuses.toString()).toPromise()}}r.\u0275fac=function(e){return new(e||r)(a.rc(n.a),a.rc(s.a))},r.\u0275prov=a.dc({token:r,factory:r.\u0275fac})},DhiE:function(e,t,i){"use strict";i.d(t,"a",(function(){return P}));var n=i("mrSG"),s=i("iMRi"),a=i("l4W+"),r=i("+oAL"),o=i("Kg8T"),c=i("iB+3"),l=i("E2tj"),d=i("OGNV"),u=i("0bag"),h=i("pL6k"),p=i("d/TE"),m=i("wZYP"),g=i("Cfvw"),f=i("LRne"),b=i("FnNU"),v=i("eIep"),w=i("5+tZ"),y=i("w1tV"),k=i("JIr8"),C=i("IzEk"),x=i("Zq3F"),j=i("8zkO"),S=i("kt6C"),T=i("fXoL");class P{constructor(e,t,i,n,s,a,r,o,c,l,d,u,h,p){this.NotificationsService=e,this.I18n=t,this.UrlParamsHelper=i,this.authorisationService=n,this.$state=s,this.QueryDm=a,this.QueryFormDm=r,this.states=o,this.querySpace=c,this.pagination=l,this.configuration=d,this.wpTablePagination=u,this.wpStatesInitialization=h,this.wpListInvalidQueryService=p,this.queryRequests=Object(b.f)(),this.queryLoading=this.queryRequests.values$().pipe(Object(v.a)(e=&gt;Object(g.a)(this.ensurePerPageKnown().then(()=&gt;e))),Object(v.a)(e=&gt;this.streamQueryRequest(e.queryParams,e.projectIdentifier)),Object(w.a)(e=&gt;(this.conditionallyLoadForm(e),this.wpStatesInitialization.initialize(e,e.results),Object(f.a)(e))),Object(y.a)())}streamQueryRequest(e,t){const i=this.getCurrentQueryProps(e),n=this.UrlParamsHelper.buildV3GetQueryFromJsonParams(i);return this.QueryDm.stream(n,e.query_id,t).pipe(Object(k.a)(n=&gt;{const s=this.UrlParamsHelper.buildV3GetQueryFromJsonParams(i);return Object(g.a)(this.handleQueryLoadingError(n,s,e.query_id,t))}))}fromQueryParams(e,t){return this.queryRequests.clear(),this.queryRequests.putValue({queryParams:e,projectIdentifier:t}),this.queryLoading.pipe(Object(C.a)(1))}getCurrentQueryProps(e){return e.query_props?decodeURIComponent(e.query_props):null}loadDefaultQuery(e){return this.fromQueryParams({},e).toPromise()}reloadQuery(e,t){const i=Object.assign(Object.assign({},this.wpTablePagination.current),{page:1}),n=this.UrlParamsHelper.encodeQueryJsonParams(e,i);return this.queryRequests.clear(),this.queryRequests.putValue({queryParams:{query_id:e.id||void 0,query_props:n},projectIdentifier:t}),this.queryLoading.pipe(Object(C.a)(1))}loadResultsList(e,t){return this.QueryDm.loadResults(e,t).then(t=&gt;(this.wpStatesInitialization.updateQuerySpace(t,t.results),this.wpStatesInitialization.updateChecksum(t,t.results),e.results))}reloadCurrentResultsList(){let e=this.getPaginationInfo(),t=this.currentQuery;return this.loadResultsList(t,e)}loadCurrentQueryFromParams(e){return this.fromQueryParams(this.$state.params,e).toPromise()}loadForm(e){return this.QueryFormDm.load(e).then(t=&gt;(this.wpStatesInitialization.updateStatesFromForm(e,t),t))}create(e,t){let i=this.querySpace.queryForm.value;e.name=t;let n=this.QueryDm.create(e,i);return n.then(e=&gt;(this.NotificationsService.addSuccess(this.I18n.t("js.notice_successful_create")),this.reloadQuery(e).subscribe(()=&gt;{this.states.changes.queries.next(e.id)}),e)),n}delete(){let e=this.currentQuery,t=this.QueryDm.delete(e);return t.then(()=&gt;{let t;this.NotificationsService.addSuccess(this.I18n.t("js.notice_successful_delete")),e.project&amp;&amp;(t=e.project.$href.split("/").pop()),this.loadDefaultQuery(t),this.states.changes.queries.next(e.id)}),t}save(e){e=e||this.currentQuery;let t=this.querySpace.queryForm.value,i=this.QueryDm.update(e,t).toPromise();return i.then(()=&gt;{this.NotificationsService.addSuccess(this.I18n.t("js.notice_successful_update")),this.$state.go(".",{query_id:e.id,query_props:null},{reload:!0}),this.states.changes.queries.next(e.id)}).catch(e=&gt;{this.NotificationsService.addError(e.message)}),i}toggleStarred(e){let t=this.QueryDm.toggleStarred(e);return t.then(e=&gt;{this.querySpace.query.putValue(e),this.NotificationsService.addSuccess(this.I18n.t("js.notice_successful_update")),this.states.changes.queries.next(e.id)}),t}getPaginationInfo(){return this.wpTablePagination.paginationObject}conditionallyLoadForm(e){let t=this.querySpace.queryForm.value;t&amp;&amp;e.$links.update.$href===t.$href||setTimeout(()=&gt;this.loadForm(e),0)}updateStatesFromQueryOnPromise(e){return e.then(e=&gt;(this.wpStatesInitialization.initialize(e,e.results),e)),e}get currentQuery(){return this.querySpace.query.value}handleQueryLoadingError(e,t,i,n){return this.NotificationsService.addError(this.I18n.t("js.work_packages.faulty_query.description"),e.message),new Promise((e,s)=&gt;{this.QueryFormDm.loadWithParams(t,i,n).then(a=&gt;{this.QueryDm.findDefault({pageSize:0},n).then(n=&gt;{this.wpListInvalidQueryService.restoreQuery(n,a),n.results.pageSize=t.pageSize,n.results.total=0,i&amp;&amp;(n.id=i),this.wpStatesInitialization.initialize(n,n.results),this.wpStatesInitialization.updateStatesFromForm(n,a),e(n)}).catch(s)}).catch(s)})}ensurePerPageKnown(){return Object(n.b)(this,void 0,void 0,(function*(){return!!this.pagination.isPerPageKnown||this.configuration.initialized}))}}P.\u0275fac=function(e){return new(e||P)(T.rc(p.a),T.rc(m.a),T.rc(h.a),T.rc(o.a),T.rc(c.G),T.rc(u.a),T.rc(d.a),T.rc(s.a),T.rc(l.a),T.rc(S.a),T.rc(j.a),T.rc(x.a),T.rc(r.a),T.rc(a.a))},P.\u0275prov=T.dc({token:P,factory:P.\u0275fac})},DiYd:function(e,t,i){"use strict";i.d(t,"a",(function(){return p}));i("AA01");var n=i("wZYP"),s=i("Y41n"),a=i("juWA"),r=i("wd/R"),o=i("AEvm"),c=i("Hg4z"),l=i("fXoL"),d=i("ecJW"),u=i("3Pt+"),h=i("oUDv");class p extends o.a{constructor(e,t){super(),this.timezoneService=e,this.I18n=t,this.shouldFocus=!1,this.filterChanged=new s.a(Object(c.b)(this)),this.text={spacer:this.I18n.t("js.filter.value_spacer")}}get begin(){return this.filter.values[0]}set begin(e){this.filter.values[0]=e||"",this.filterChanged.emit(this.filter)}get end(){return this.filter.values[1]}set end(e){this.filter.values[1]=e||"",this.filterChanged.emit(this.filter)}parser(e){return r(e,"YYYY-MM-DD",!0).isValid()?e:null}formatter(e){if(r(e,"YYYY-MM-DD",!0).isValid()){var t=this.timezoneService.parseDate(e);return this.timezoneService.formattedISODate(t)}return null}}p.\u0275fac=function(e){return new(e||p)(l.hc(a.a),l.hc(n.a))},p.\u0275cmp=l.bc({type:p,selectors:[["filter-dates-value"]],inputs:{shouldFocus:"shouldFocus",filter:"filter"},outputs:{filterChanged:"filterChanged"},features:[l.Qb],decls:6,vars:9,consts:[[1,"inline-label",3,"id"],[3,"onChange"],["required","","size","10","type","text",1,"advanced-filters--date-field",3,"ngModel","focus","id","name","ngModelChange"],[1,"advanced-filters--affix",3,"textContent"],["required","","size","10","type","text",1,"advanced-filters--date-field",3,"ngModel","id","name","ngModelChange"]],template:function(e,t){1&amp;e&amp;&amp;(l.nc(0,"div",0),l.nc(1,"op-date-picker",1),l.vc("onChange",(function(e){return t.begin=t.parser(e)})),l.nc(2,"input",2),l.vc("ngModelChange",(function(e){return t.begin=t.parser(e)})),l.mc(),l.mc(),l.ic(3,"span",3),l.nc(4,"op-date-picker",1),l.vc("onChange",(function(e){return t.end=t.parser(e)})),l.nc(5,"input",4),l.vc("ngModelChange",(function(e){return t.end=t.parser(e)})),l.mc(),l.mc(),l.mc()),2&amp;e&amp;&amp;(l.Fc("id","div-values-",t.filter.id,""),l.Tb(2),l.Fc("id","values-",t.filter.id,"-begin"),l.Fc("name","v[",t.filter.id,"]-begin"),l.Dc("ngModel",t.formatter(t.begin))("focus",t.shouldFocus),l.Tb(1),l.Dc("textContent",t.text.spacer),l.Tb(2),l.Fc("id","values-",t.filter.id,"-end"),l.Fc("name","v[",t.filter.id,"]-end"),l.Dc("ngModel",t.formatter(t.end)))},directives:[d.a,u.c,u.x,u.m,u.p,h.a],encapsulation:2})},Dp3K:function(e,t,i){"use strict";i.d(t,"a",(function(){return M}));var n=i("mrSG"),s=i("fXoL"),a=i("iB+3"),r=i("Kg8T"),o=i("E2tj"),c=i("zp1y"),l=i("pLZG"),d=i("IzEk"),u=i("Y0Nk"),h=i("wZYP"),p=i("kTg4"),m=i("2Qcm"),g=i("iMRi"),f=i("JY8V"),b=i("6yP5"),v=i("AeZM"),w=i("F5Dh"),y=i("EnRq"),k=i("PtkW"),C=i("wyKs"),x=i("Zq3F"),j=i("DhiE"),S=i("W6hW"),T=i("0bag"),P=i("+oAL"),I=i("Uyc6"),_=i("Va5K"),O=i("/C7M"),D=i("K247"),R=i("r0MM"),E=i("sjKJ"),F=i("AEvm");class M extends F.a{constructor(e){super(),this.injector=e,this.queryLoaded=!1,this.destroyed=!1}ngOnInit(){this.setupQueryObservers(),this.setupRefreshObserver(),this.setupQueryLoadedListener()}setupQueryObservers(){this.wpTablePagination.updates$().pipe(this.untilDestroyed(),Object(c.a)(this.querySpace.query.values$())).subscribe(([e,t])=&gt;{this.wpListChecksumService.isQueryOutdated(t,e)&amp;&amp;(this.wpListChecksumService.update(t,e),this.refresh(!0,!1))}),this.setupChangeObserver(this.wpTableFilters,!0),this.setupChangeObserver(this.wpTableGroupBy),this.setupChangeObserver(this.wpTableSortBy),this.setupChangeObserver(this.wpTableSum),this.setupChangeObserver(this.wpTableTimeline),this.setupChangeObserver(this.wpTableHierarchies),this.setupChangeObserver(this.wpTableColumns),this.setupChangeObserver(this.wpTableHighlighting),this.setupChangeObserver(this.wpTableOrder),this.setupChangeObserver(this.wpDisplayRepresentation)}setupChangeObserver(e,t=!1){const i=this.querySpace.query;e.updates$().pipe(this.untilDestroyed(),Object(l.a)(()=&gt;i.hasValue()&amp;&amp;e.hasChanged(i.value))).subscribe(()=&gt;{const n=i.value,s=e.applyToQuery(n);this.querySpace.query.putValue(n),this.wpListChecksumService.updateIfDifferent(n,this.wpTablePagination.current).then(()=&gt;{s&amp;&amp;this.refresh(!0,t)})})}get projectIdentifier(){return this.currentProject.identifier||void 0}setupRefreshObserver(){this.halEvents.aggregated$("WorkPackage").pipe(this.untilDestroyed(),Object(l.a)(e=&gt;this.filterRefreshEvents(e))).subscribe(e=&gt;{this.refresh(!1,!1)})}filterRefreshEvents(e){let t=new Set(this.querySpace.renderedWorkPackageIds.getValueOr([]));for(let i=0;i
     <e.length;i++){const n='e[i];if(t.has(n.id)||"created"===n.eventType)return!0}return!1}setupQueryLoadedListener(){this.querySpace.initialized.values$().pipe(Object(d.a)(1),Object(l.a)(()='>
      !this.componentDestroyed)).subscribe(()=&gt;{this.queryLoaded=!0,this.cdRef.detectChanges()})}}M.\u0275fac=function(e){return new(e||M)(s.hc(s.A))},M.\u0275dir=s.cc({type:M,features:[s.Qb]}),Object(n.c)([Object(R.a)(),Object(n.e)("design:type",a.G)],M.prototype,"$state",void 0),Object(n.c)([Object(R.a)(),Object(n.e)("design:type",g.a)],M.prototype,"states",void 0),Object(n.c)([Object(R.a)(),Object(n.e)("design:type",o.a)],M.prototype,"querySpace",void 0),Object(n.c)([Object(R.a)(),Object(n.e)("design:type",r.a)],M.prototype,"authorisationService",void 0),Object(n.c)([Object(R.a)(),Object(n.e)("design:type",f.a)],M.prototype,"wpTableColumns",void 0),Object(n.c)([Object(R.a)(),Object(n.e)("design:type",m.a)],M.prototype,"wpTableHighlighting",void 0),Object(n.c)([Object(R.a)(),Object(n.e)("design:type",b.a)],M.prototype,"wpTableSortBy",void 0),Object(n.c)([Object(R.a)(),Object(n.e)("design:type",v.a)],M.prototype,"wpTableGroupBy",void 0),Object(n.c)([Object(R.a)(),Object(n.e)("design:type",w.a)],M.prototype,"wpTableFilters",void 0),Object(n.c)([Object(R.a)(),Object(n.e)("design:type",y.a)],M.prototype,"wpTableSum",void 0),Object(n.c)([Object(R.a)(),Object(n.e)("design:type",k.a)],M.prototype,"wpTableTimeline",void 0),Object(n.c)([Object(R.a)(),Object(n.e)("design:type",C.a)],M.prototype,"wpTableHierarchies",void 0),Object(n.c)([Object(R.a)(),Object(n.e)("design:type",x.a)],M.prototype,"wpTablePagination",void 0),Object(n.c)([Object(R.a)(),Object(n.e)("design:type",I.a)],M.prototype,"wpTableOrder",void 0),Object(n.c)([Object(R.a)(),Object(n.e)("design:type",j.a)],M.prototype,"wpListService",void 0),Object(n.c)([Object(R.a)(),Object(n.e)("design:type",S.a)],M.prototype,"wpListChecksumService",void 0),Object(n.c)([Object(R.a)(),Object(n.e)("design:type",u.a)],M.prototype,"loadingIndicatorService",void 0),Object(n.c)([Object(R.a)(),Object(n.e)("design:type",a.O)],M.prototype,"$transitions",void 0),Object(n.c)([Object(R.a)(),Object(n.e)("design:type",h.a)],M.prototype,"I18n",void 0),Object(n.c)([Object(R.a)(),Object(n.e)("design:type",p.a)],M.prototype,"wpStaticQueries",void 0),Object(n.c)([Object(R.a)(),Object(n.e)("design:type",T.a)],M.prototype,"QueryDm",void 0),Object(n.c)([Object(R.a)(),Object(n.e)("design:type",P.a)],M.prototype,"wpStatesInitialization",void 0),Object(n.c)([Object(R.a)(),Object(n.e)("design:type",s.i)],M.prototype,"cdRef",void 0),Object(n.c)([Object(R.a)(),Object(n.e)("design:type",_.a)],M.prototype,"wpDisplayRepresentation",void 0),Object(n.c)([Object(R.a)(),Object(n.e)("design:type",O.a)],M.prototype,"halEvents",void 0),Object(n.c)([Object(R.a)(),Object(n.e)("design:type",D.a)],M.prototype,"deviceService",void 0),Object(n.c)([Object(R.a)(),Object(n.e)("design:type",E.a)],M.prototype,"currentProject",void 0)},DvFC:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("8aTQ"),s=i("IaZ+"),a=i("fXoL");class r{constructor(e,t){this.opModalService=e,this.injector=t}confirm(e){return new Promise((t,i)=&gt;{this.opModalService.show(n.a,this.injector,{options:e}).closingEvent.subscribe(e=&gt;{e.confirmed?t():i()})})}}r.\u0275fac=function(e){return new(e||r)(a.rc(s.b),a.rc(a.A))},r.\u0275prov=a.dc({token:r,factory:r.\u0275fac})},"E+lO":function(e,t,i){"use strict";i.r(t),i.d(t,"DynamicBootstrapper",(function(){return n}));class n{static register(...e){this.optionalBoostrapComponents.push(...e)}static bootstrapOptionalDocument(e,t,i=this.optionalBoostrapComponents){this.performBootstrap(e,t,!1,i)}static bootstrapOptionalEmbeddable(e,t,i=this.optionalBoostrapComponents){this.performBootstrap(e,t,!0,i)}static getEmbeddable(){return this.optionalBoostrapComponents.filter(e=&gt;e.embeddable)}static performBootstrap(e,t,i,n){n.forEach(n=&gt;{if(i&amp;&amp;!n.embeddable)return;const s=t.querySelectorAll(n.selector);for(let t=0;t
      <s.length;t++)e.bootstrap(n.cls,s[t])})}}n.optionalboostrapcomponents=[]},e05v:function(e,t,i){"use c{constructor(e){this.injector="e,this.wpListChecksumService=this.injector.get(n.a),this.wpListService=this.injector.get(s.a),this.$transitions=this.injector.get(a.O),this.observe$=new" c}));var="" n='i("W6hW"),s=i("DhiE"),a=i("iB+3"),r=i("XNiG"),o=i("fXoL");class' r.a,this.listenforqueryparamschanged()}listenforqueryparamschanged(){return="" strict";i.d(t,"a",(function(){return="" this.querychangelistener="this.$transitions.onSuccess({},e=">
       {let t=e.options();const i=e.params("to");let n=this.wpListService.getCurrentQueryProps(i),s=i.query_id?i.query_id.toString():null;return!!(t.reload||t.custom&amp;&amp;!1===t.custom.notify)||this.wpListChecksumService.executeIfOutdated(s,n,()=&gt;{this.observe$.next(n)})})}removeQueryChangeListener(){this.queryChangeListener()}}c.\u0275fac=function(e){return new(e||c)(o.rc(o.A))},c.\u0275prov=o.dc({token:c,factory:c.\u0275fac})},E2tj:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("FnNU"),s=i("XNiG"),a=i("lJxs"),r=i("fXoL");class o extends n.a{constructor(){super(),this.name="IsolatedQuerySpace",this.query=Object(n.f)(),this.queryForm=Object(n.f)(),this.results=Object(n.f)(),this.groups=Object(n.f)(),this.columns=Object(n.f)(),this.collapsedGroups=Object(n.f)(),this.tableRendered=Object(n.f)(),this.timelineRendered=new s.a,this.renderedWorkPackages=Object(n.c)(this.tableRendered,e=&gt;e.pipe(Object(a.a)(e=&gt;e.filter(e=&gt;!!e.workPackageId)))),this.renderedWorkPackageIds=Object(n.c)(this.renderedWorkPackages,e=&gt;e.pipe(Object(a.a)(e=&gt;e.map(e=&gt;e.workPackageId.toString())))),this.focusedWorkPackage=Object(n.f)(),this.stopAllSubscriptions=new s.a,this.additionalRequiredWorkPackages=Object(n.f)(),this.initialized=Object(n.f)()}}o.\u0275fac=function(e){return new(e||o)},o.\u0275prov=r.dc({token:o,factory:o.\u0275fac})},E5Dd:function(e,t,i){"use strict";var n;i.d(t,"a",(function(){return n})),function(e){e[e.BACKSPACE=8]="BACKSPACE",e[e.TAB=9]="TAB",e[e.ENTER=13]="ENTER",e[e.SHIFT=16]="SHIFT",e[e.CTRL=17]="CTRL",e[e.ALT=18]="ALT",e[e.PAUSE=19]="PAUSE",e[e.CAPS_LOCK=20]="CAPS_LOCK",e[e.ESCAPE=27]="ESCAPE",e[e.SPACE=32]="SPACE",e[e.PAGE_UP=33]="PAGE_UP",e[e.PAGE_DOWN=34]="PAGE_DOWN",e[e.END=35]="END",e[e.HOME=36]="HOME",e[e.LEFT_ARROW=37]="LEFT_ARROW",e[e.UP_ARROW=38]="UP_ARROW",e[e.RIGHT_ARROW=39]="RIGHT_ARROW",e[e.DOWN_ARROW=40]="DOWN_ARROW",e[e.INSERT=45]="INSERT",e[e.DELETE=46]="DELETE",e[e.KEY_0=48]="KEY_0",e[e.KEY_1=49]="KEY_1",e[e.KEY_2=50]="KEY_2",e[e.KEY_3=51]="KEY_3",e[e.KEY_4=52]="KEY_4",e[e.KEY_5=53]="KEY_5",e[e.KEY_6=54]="KEY_6",e[e.KEY_7=55]="KEY_7",e[e.KEY_8=56]="KEY_8",e[e.KEY_9=57]="KEY_9",e[e.KEY_A=65]="KEY_A",e[e.KEY_B=66]="KEY_B",e[e.KEY_C=67]="KEY_C",e[e.KEY_D=68]="KEY_D",e[e.KEY_E=69]="KEY_E",e[e.KEY_F=70]="KEY_F",e[e.KEY_G=71]="KEY_G",e[e.KEY_H=72]="KEY_H",e[e.KEY_I=73]="KEY_I",e[e.KEY_J=74]="KEY_J",e[e.KEY_K=75]="KEY_K",e[e.KEY_L=76]="KEY_L",e[e.KEY_M=77]="KEY_M",e[e.KEY_N=78]="KEY_N",e[e.KEY_O=79]="KEY_O",e[e.KEY_P=80]="KEY_P",e[e.KEY_Q=81]="KEY_Q",e[e.KEY_R=82]="KEY_R",e[e.KEY_S=83]="KEY_S",e[e.KEY_T=84]="KEY_T",e[e.KEY_U=85]="KEY_U",e[e.KEY_V=86]="KEY_V",e[e.KEY_W=87]="KEY_W",e[e.KEY_X=88]="KEY_X",e[e.KEY_Y=89]="KEY_Y",e[e.KEY_Z=90]="KEY_Z",e[e.LEFT_META=91]="LEFT_META",e[e.RIGHT_META=92]="RIGHT_META",e[e.SELECT=93]="SELECT",e[e.NUMPAD_0=96]="NUMPAD_0",e[e.NUMPAD_1=97]="NUMPAD_1",e[e.NUMPAD_2=98]="NUMPAD_2",e[e.NUMPAD_3=99]="NUMPAD_3",e[e.NUMPAD_4=100]="NUMPAD_4",e[e.NUMPAD_5=101]="NUMPAD_5",e[e.NUMPAD_6=102]="NUMPAD_6",e[e.NUMPAD_7=103]="NUMPAD_7",e[e.NUMPAD_8=104]="NUMPAD_8",e[e.NUMPAD_9=105]="NUMPAD_9",e[e.MULTIPLY=106]="MULTIPLY",e[e.ADD=107]="ADD",e[e.SUBTRACT=109]="SUBTRACT",e[e.DECIMAL=110]="DECIMAL",e[e.DIVIDE=111]="DIVIDE",e[e.F1=112]="F1",e[e.F2=113]="F2",e[e.F3=114]="F3",e[e.F4=115]="F4",e[e.F5=116]="F5",e[e.F6=117]="F6",e[e.F7=118]="F7",e[e.F8=119]="F8",e[e.F9=120]="F9",e[e.F10=121]="F10",e[e.F11=122]="F11",e[e.F12=123]="F12",e[e.NUM_LOCK=144]="NUM_LOCK",e[e.SCROLL_LOCK=145]="SCROLL_LOCK",e[e.SEMICOLON=186]="SEMICOLON",e[e.EQUALS=187]="EQUALS",e[e.COMMA=188]="COMMA",e[e.DASH=189]="DASH",e[e.PERIOD=190]="PERIOD",e[e.FORWARD_SLASH=191]="FORWARD_SLASH",e[e.GRAVE_ACCENT=192]="GRAVE_ACCENT",e[e.OPEN_BRACKET=219]="OPEN_BRACKET",e[e.BACK_SLASH=220]="BACK_SLASH",e[e.CLOSE_BRACKET=221]="CLOSE_BRACKET",e[e.SINGLE_QUOTE=222]="SINGLE_QUOTE"}(n||(n={}))},EnRq:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("zqrF"),s=i("E2tj"),a=i("fXoL");class r extends n.a{constructor(e){super(e)}valueFromQuery(e){return!!e.sums}initialize(e){this.pristineState.putValue(!!e.sums)}hasChanged(e){return e.sums!==this.isEnabled}applyToQuery(e){return e.sums=this.isEnabled,!0}toggle(){this.updatesState.putValue(!this.current)}setEnabled(e){this.updatesState.putValue(e)}get isEnabled(){return this.current}get current(){return this.lastUpdatedState.getValueOr(!1)}}r.\u0275fac=function(e){return new(e||r)(a.rc(s.a))},r.\u0275prov=a.dc({token:r,factory:r.\u0275fac})},Eofd:function(e,t,i){"use strict";i.d(t,"a",(function(){return v}));var n=i("fXoL"),s=(i("ii2/"),i("VgZ9")),a=i("wZYP"),r=i("qc15"),o=i("ofXK"),c=i("0loS"),l=i("/Rze"),d=i("MIK2");const u=function(e){return{workPackageId:e}};function h(e,t){if(1&amp;e&amp;&amp;(n.nc(0,"a",5),n.ic(1,"span",6),n.mc()),2&amp;e){const e=n.xc(2);n.Dc("uiParams",n.Ic(3,u,e.parent.id)),n.Ub("title",e.parent.name),n.Tb(1),n.Dc("textContent",e.parent.name)}}function p(e,t){if(1&amp;e&amp;&amp;n.ic(0,"span",6),2&amp;e){const e=n.xc(3);n.Dc("textContent",e.text.set_parent)}}function m(e,t){if(1&amp;e){const e=n.oc();n.nc(0,"accessible-by-keyboard",7),n.vc("execute",(function(){return n.Sc(e),n.xc(2).open()})),n.ad(1,p,1,1,"span",8),n.mc()}if(2&amp;e){const e=n.xc(2);n.Fc("linkClass","wp-relation--parent-change -no-decoration hide-when-print icon-small ",e.parent?"icon-edit icon5":"icon-add icon4",""),n.Dc("linkTitle",e.parent?e.text.edit_parent:e.text.set_parent),n.Tb(1),n.Dc("ngIf",!e.parent)}}function g(e,t){if(1&amp;e){const e=n.oc();n.nc(0,"accessible-by-keyboard",9),n.vc("execute",(function(){return n.Sc(e),n.xc(2).updateParent(null)})),n.mc()}if(2&amp;e){const e=n.xc(2);n.Dc("linkTitle",e.text.remove_parent)}}function f(e,t){if(1&amp;e&amp;&amp;(n.lc(0),n.ad(1,h,2,5,"a",2),n.ad(2,m,2,3,"accessible-by-keyboard",3),n.ad(3,g,1,1,"accessible-by-keyboard",4),n.kc()),2&amp;e){const e=n.xc();n.Tb(1),n.Dc("ngIf",e.parent),n.Tb(1),n.Dc("ngIf",e.canModifyParent()),n.Tb(1),n.Dc("ngIf",e.canModifyParent()&amp;&amp;e.parent)}}function b(e,t){if(1&amp;e){const e=n.oc();n.nc(0,"wp-relations-autocomplete",10),n.vc("onCancel",(function(){return n.Sc(e),n.xc().close()}))("onSelected",(function(t){return n.Sc(e),n.xc().updateParent(t)})),n.mc()}if(2&amp;e){const e=n.xc();n.Dc("inputPlaceholder",e.text.set_or_remove_parent)("workPackage",e.workPackage)}}class v{constructor(e,t,i){this.I18n=e,this.wpRelationsHierarchy=t,this.notificationService=i,this.onSwitch=new n.s,this.isSaving=!1,this.text={edit_parent:this.I18n.t("js.relation_buttons.change_parent"),set_or_remove_parent:this.I18n.t("js.relations_autocomplete.parent_placeholder"),remove_parent:this.I18n.t("js.relation_buttons.remove_parent"),set_parent:this.I18n.t("js.relation_buttons.set_parent")}}canModifyParent(){return!!this.workPackage.changeParent}get parent(){return this.workPackage&amp;&amp;this.workPackage.parent}get active(){return this.editing}close(){this.toggle(!1)}open(){this.toggle(!0)}updateParent(e){this.close();let t=e?e.id:null;_.get(this.parent,"id",null)!==t&amp;&amp;(this.isSaving=!0,this.wpRelationsHierarchy.changeParent(this.workPackage,t).catch(e=&gt;{this.notificationService.handleRawError(e,this.workPackage)}).then(()=&gt;this.isSaving=!1))}toggle(e){this.editing!==e&amp;&amp;(this.editing=e,this.onSwitch.emit(this.editing))}}v.\u0275fac=function(e){return new(e||v)(n.hc(a.a),n.hc(s.a),n.hc(r.a))},v.\u0275cmp=n.bc({type:v,selectors:[["wp-breadcrumb-parent"]],inputs:{workPackage:"workPackage"},outputs:{onSwitch:"onSwitch"},decls:2,vars:2,consts:[[4,"ngIf"],["filterCandidatesFor","parent",3,"inputPlaceholder","workPackage","onCancel","onSelected",4,"ngIf"],["uiSref","work-packages.show.activity","class","wp-breadcrumb-parent breadcrumb-project-title nocut",3,"uiParams",4,"ngIf"],[3,"linkTitle","linkClass","execute",4,"ngIf"],["linkClass","wp-relation--parent-remove hide-when-print -no-decoration icon-small icon-remove icon4",3,"linkTitle","execute",4,"ngIf"],["uiSref","work-packages.show.activity",1,"wp-breadcrumb-parent","breadcrumb-project-title","nocut",3,"uiParams"],[3,"textContent"],[3,"linkTitle","linkClass","execute"],[3,"textContent",4,"ngIf"],["linkClass","wp-relation--parent-remove hide-when-print -no-decoration icon-small icon-remove icon4",3,"linkTitle","execute"],["filterCandidatesFor","parent",3,"inputPlaceholder","workPackage","onCancel","onSelected"]],template:function(e,t){1&amp;e&amp;&amp;(n.ad(0,f,4,3,"ng-container",0),n.ad(1,b,1,2,"wp-relations-autocomplete",1)),2&amp;e&amp;&amp;(n.Dc("ngIf",!t.active),n.Tb(1),n.Dc("ngIf",t.active))},directives:[o.q,c.AnchorUISref,c.UISref,l.a,d.a],encapsulation:2})},EzE4:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("wZYP"),s=i("fXoL"),a=i("FDKb"),r=i("N5AO");class o{constructor(e){this.I18n=e,this.text={button_settings:this.I18n.t("js.button_settings")}}}o.\u0275fac=function(e){return new(e||o)(s.hc(n.a))},o.\u0275cmp=s.bc({type:o,selectors:[["ng-component"]],decls:2,vars:1,consts:[["id","work-packages-settings-button","opSettingsContextMenu","","opSettingsContextMenu-query","query",1,"button","last","work-packages-settings-button","toolbar-icon",3,"title"],["icon-classes","button--icon icon-show-more"]],template:function(e,t){1&amp;e&amp;&amp;(s.nc(0,"button",0),s.ic(1,"op-icon",1),s.mc()),2&amp;e&amp;&amp;s.Ec("title",t.text.button_settings)},directives:[a.a,r.a],encapsulation:2,changeDetection:0})},F3Jm:function(e,t,i){"use strict";i.d(t,"a",(function(){return j}));var n=i("JY8V"),s=i("SqdZ"),a=i("E2tj"),r=i("wZYP"),o=i("IaZ+"),c=i("yQm5"),l=i("Y0Nk"),d=i("eIep"),u=i("GJmQ"),h=i("lJxs"),p=i("l5mm"),m=i("d/TE"),g=i("fXoL"),f=i("tk/3"),b=i("ofXK"),v=i("N5AO");const w=["downloadLink"];function y(e,t){if(1&amp;e){const e=g.oc();g.nc(0,"li"),g.nc(1,"a",12),g.vc("click",(function(i){g.Sc(e);const n=t.$implicit;return g.xc(2).triggerByLink(n.url,i)})),g.ic(2,"op-icon",13),g.ic(3,"span",14),g.mc(),g.mc()}if(2&amp;e){const e=t.$implicit;g.Tb(1),g.Fc("id","export-",e.identifier,""),g.Ub("href",e.url,g.Vc),g.Tb(1),g.Fc("icon-classes","icon-export-",e.identifier," icon-big"),g.Tb(1),g.Dc("textContent",e.label)}}const k=function(e){return{"-hidden":e}};function C(e,t){if(1&amp;e&amp;&amp;(g.nc(0,"ul",10),g.ad(1,y,4,4,"li",11),g.mc()),2&amp;e){const e=g.xc();g.Dc("ngClass",g.Ic(2,k,e.isLoading)),g.Tb(1),g.Dc("ngForOf",e.exportOptions)}}function x(e,t){if(1&amp;e&amp;&amp;(g.nc(0,"div"),g.ic(1,"div",15),g.ic(2,"div",5),g.mc()),2&amp;e){const e=g.xc();g.Tb(2),g.Dc("textContent",e.text.exportPreparing)}}class j extends s.a{constructor(e,t,i,n,s,a,r,o,c){super(e,s,i),this.locals=e,this.I18n=t,this.elementRef=i,this.querySpace=n,this.cdRef=s,this.httpClient=a,this.wpTableColumns=r,this.loadingIndicator=o,this.notifications=c,this.closeOnEscape=!0,this.closeOnOutsideClick=!0,this.text={title:this.I18n.t("js.label_export"),closePopup:this.I18n.t("js.close_popup_title"),exportPreparing:this.I18n.t("js.label_export_preparing")},this.isLoading=!1}ngOnInit(){super.ngOnInit(),this.locals.link?this.downloadSwitched(this.locals.link):this.querySpace.results.valuesPromise().then(e=&gt;this.exportOptions=this.buildExportOptions(e))}ngOnDestroy(){super.ngOnDestroy(),this.safeUnsubscribe()}buildExportOptions(e){return e.representations.map(e=&gt;{const t=e.$link;return{identifier:t.identifier,label:t.title,url:this.addColumnsToHref(e.href)}})}triggerByLink(e,t){t.preventDefault(),this.downloadSwitched(e)}downloadSwitched(e){this.performRequest(e).subscribe(e=&gt;{200===e.status&amp;&amp;this.download(e.url),202===e.status&amp;&amp;this.linkHeaderUrl(e)&amp;&amp;this.pollUntilDownload(this.linkHeaderUrl(e))},e=&gt;this.handleError(e.message))}pollUntilDownload(e){this.isLoading=!0,this.subscription=Object(p.a)(1e3).pipe(Object(d.a)(()=&gt;this.performRequest(e)),Object(u.a)(e=&gt;200===e.status,!0),Object(h.a)(e=&gt;JSON.parse(e.body)),Object(u.a)(e=&gt;"Processing"===e.status,!0),Object(l.b)(this.loadingIndicator.getter("modal"))).subscribe(e=&gt;{"Completed"===e.status?this.download(e.link):"Error"===e.status&amp;&amp;this.handleError(e.message)},e=&gt;this.handleError(e.message),()=&gt;this.isLoading=!1)}performRequest(e){return this.httpClient.get(e,{observe:"response",responseType:"text"})}handleError(e){this.isLoading=!1,this.notifications.addError(e||this.I18n.t("js.error.internal"))}addColumnsToHref(e){let t=this.wpTableColumns.getColumns().map((function(e){return e.id})),i=c(e);return i.removeSearch("columns[]"),i.addSearch("columns[]",t),i.toString()}get afterFocusOn(){return jQuery("#work-packages-settings-button")}download(e){this.downloadHref=e,setTimeout(()=&gt;{this.downloadLink.nativeElement.click(),this.service.close()})}linkHeaderUrl(e){let t=e.headers.get("link");if(!t)return null;let i=t.match(/&lt;([^&gt;]+)&gt;/);return i?i[1]:null}safeUnsubscribe(){this.subscription&amp;&amp;this.subscription.unsubscribe()}}j.\u0275fac=function(e){return new(e||j)(g.hc(o.a),g.hc(r.a),g.hc(g.q),g.hc(a.a),g.hc(g.i),g.hc(f.b),g.hc(n.a),g.hc(l.a),g.hc(m.a))},j.\u0275cmp=g.bc({type:j,selectors:[["ng-component"]],viewQuery:function(e,t){var i;(1&amp;e&amp;&amp;g.hd(w,!0),2&amp;e)&amp;&amp;(g.Pc(i=g.wc())&amp;&amp;(t.downloadLink=i.first))},features:[g.Qb],decls:10,vars:6,consts:[[1,"op-modal--portal"],["tabindex","0",1,"op-modal--modal-container","wp-table--configuration-modal"],[1,"op-modal--modal-header"],[1,"op-modal--modal-close-button"],[1,"icon-close",3,"click"],[3,"textContent"],["class","export-options",3,"ngClass",4,"ngIf"],[4,"ngIf"],["id","download-link","download","",1,"button",3,"title"],["downloadLink",""],[1,"export-options",3,"ngClass"],[4,"ngFor","ngForOf"],[3,"id","click"],[3,"icon-classes"],[1,"export-label",3,"textContent"],["data-indicator-name","modal",1,"loading-indicator--location"]],template:function(e,t){1&amp;e&amp;&amp;(g.nc(0,"div",0),g.nc(1,"div",1),g.nc(2,"div",2),g.nc(3,"a",3),g.nc(4,"i",4),g.vc("click",(function(e){return t.closeMe(e)})),g.mc(),g.mc(),g.mc(),g.ic(5,"h3",5),g.ad(6,C,2,4,"ul",6),g.ad(7,x,3,1,"div",7),g.ic(8,"a",8,9),g.mc(),g.mc()),2&amp;e&amp;&amp;(g.Tb(4),g.Ub("title",t.text.closePopup),g.Tb(1),g.Dc("textContent",t.text.title),g.Tb(1),g.Dc("ngIf",t.exportOptions),g.Tb(1),g.Dc("ngIf",t.isLoading),g.Tb(1),g.Dc("title","Export"),g.Ub("href",t.downloadHref,g.Vc))},directives:[b.q,b.n,b.p,v.a],styles:["#download-link[_ngcontent-%COMP%]{display:none}.loading-indicator--location[_ngcontent-%COMP%]{height:220px}.export-options.-hidden[_ngcontent-%COMP%]{display:none}"]})},F5Dh:function(e,t,i){"use strict";i.d(t,"a",(function(){return p}));var n=i("zqrF"),s=i("AA01"),a=i("E2tj"),r=i("FnNU"),o=i("PZVJ"),c=i("d4d5"),l=i("iMRi"),d=i("IzEk"),u=i("CqXF"),h=i("fXoL");class p extends n.a{constructor(e,t){super(t),this.states=e,this.querySpace=t,this.hidden=["id","parent","datesInterval","precedes","follows","relates","duplicates","duplicated","blocks","blocked","partof","includes","requires","required","search","subjectOrId"],this.incomplete=Object(r.f)(!1)}initializeFilters(e,t){let i=Object(o.a)(e.filters);this.loadCurrentFiltersSchemas(i).then(()=&gt;{this.availableState.putValue(t.filtersSchemas.elements),this.pristineState.putValue(i)})}get isEmpty(){const e=this.lastUpdatedState.value;return!e||0===e.length}get availableState(){return this.states.queries.filters}get incomplete$(){return this.incomplete.values$()}add(e){this.updatesState.putValue([...this.rawFilters,e])}replace(e,t){let i=this.instantiate(e),n=[...this.rawFilters];t(i);const s=this.findIndex(e);-1===s?n.push(i):n.splice(s,1,i),this.update(n)}modify(e,t){const i=this.findIndex(e);if(-1===i)return!1;let n=[...this.rawFilters];return t(n[i]),this.update(n),!0}instantiate(e){let t=e instanceof c.a?e.id:e;return _.find(this.availableSchemas,e=&gt;e.filter.allowedValues[0].id===t).getFilter()}remove(...e){let t=e=&gt;e instanceof s.a?e.id:e,i=new Set(e.map(t));this.update(this.rawFilters.filter(e=&gt;!i.has(t(e))))}remainingVisibleFilters(e=this.current){return this.remainingFilters(e).filter(e=&gt;-1===this.hidden.indexOf(e.id))}get availableFilters(){return this.availableSchemas.map(e=&gt;e.allowedFilterValue)}get availableSchemas(){return this.availableState.getValueOr([])}isComplete(e){return _.every(e,e=&gt;e.isCompletelyDefined())}hasChanged(e){const t=e=&gt;e.map(e=&gt;e.$source);return!_.isEqual(t(e.filters),t(this.rawFilters))}valueFromQuery(e){}update(e){super.update(e),this.incomplete.putValue(!1)}find(e){const t=this.findIndex(e);if(-1!==t)return this.rawFilters[t]}findIndex(e){return _.findIndex(this.current,t=&gt;t.id===e)}applyToQuery(e){return e.filters=this.cloneFilters(),!0}get current(){return[...this.rawFilters]}cloneFilters(){return Object(o.a)(this.rawFilters)}get rawFilters(){return this.lastUpdatedState.value||[]}get currentlyVisibleFilters(){const e=new Set(this.hidden);return e.delete("search"),_.reject(this.currentFilterResources,t=&gt;e.has(t.id))}replaceIfComplete(e){this.isComplete(e)?this.update(e):this.incomplete.putValue(!0)}onReady(){return Object(r.b)(this.pristineState,this.availableState).values$().pipe(Object(d.a)(1),Object(u.a)(null)).toPromise()}remainingFilters(e=this.rawFilters){return _.differenceBy(this.availableFilters,e,e=&gt;e.id)}get currentFilterResources(){return this.rawFilters.map(e=&gt;e.filter)}loadCurrentFiltersSchemas(e){return Promise.all(e.map(e=&gt;{const t=`/api/v3/queries/filter_instance_schemas/${e.id}`;return e.schema?e.schema.$load():this.states.schemas.get(t).valuesPromise().then(t=&gt;e.schema=t)}))}}p.\u0275fac=function(e){return new(e||p)(h.rc(l.a),h.rc(a.a))},p.\u0275prov=h.dc({token:p,factory:p.\u0275fac})},FB4C:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i("JY8V"),s=i("zqrF"),a=i("kTsZ"),r=i("E2tj"),o=i("ug4p"),c=i("uSJ+"),l=i("QOiP"),d=i("fXoL");class u extends s.b{constructor(e,t,i,n,s){super(e),this.querySpace=e,this.wpTableColumns=t,this.halResourceService=i,this.wpCacheService=n,this.wpRelations=s}valueFromQuery(e){return this.current}relationsToExtendFor(e,t,i){if(!this.wpTableColumns.hasRelationColumns()||!this.lastUpdatedState.hasValue())return;if(_.isNil(t))return;const n=this.getExpandFor(e.id);if(void 0===n)return;const s=this.wpTableColumns.findById(n),a=this.relationColumnType(s);null!==a&amp;&amp;_.each(this.relationsForColumn(e,t,s),e=&gt;i(e,s,a))}relationsForColumn(e,t,i){if(_.isNil(t))return[];const n=this.relationColumnType(i);if("toType"===n){const n=i.type.href;return _.filter(t,t=&gt;{const i=t.denormalized(e),s=this.wpCacheService.state(i.targetId).value;return _.get(s,"type.href")===n})}if("ofType"===n){const n=i.relationType;return _.filter(t,t=&gt;t.denormalized(e).relationType===n)}return[]}relationColumnType(e){switch(e._type){case l.b.RELATION_TO_TYPE:return"toType";case l.b.RELATION_OF_TYPE:return"ofType";default:return null}}getExpandFor(e){return this.current[e]}setExpandFor(e,t){const i=Object.assign({},this.current);i[e]=t,this.update(i)}collapse(e){const t=Object.assign({},this.current);delete t[e],this.update(t)}get current(){return this.lastUpdatedState.getValueOr({})}}u.\u0275fac=function(e){return new(e||u)(d.rc(r.a),d.rc(n.a),d.rc(a.a),d.rc(o.a),d.rc(c.a))},u.\u0275prov=d.dc({token:u,factory:u.\u0275fac})},FDFi:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("mrSG"),s=i("XNiG"),a=i("wZYP"),r=i("Kg8T"),o=i("r0MM"),c=i("fXoL");class l{constructor(e){this.injector=e,this.referenceComponentClass=null,this.referenceTarget=null,this.buttonTexts={reference:"",create:this.I18n.t("js.label_create_work_package")},this.newInlineWorkPackageCreated=new s.a,this.newInlineWorkPackageReferenced=new s.a}get canAdd(){return this.canCreateWorkPackages||this.authorisationService.can("work_package","addChild")}get canReference(){return!1}get canCreateWorkPackages(){return this.authorisationService.can("work_packages","createWorkPackage")&amp;&amp;this.authorisationService.can("work_packages","editWorkPackage")}ngOnDestroy(){this.newInlineWorkPackageCreated.complete(),this.newInlineWorkPackageReferenced.complete()}}l.\u0275fac=function(e){return new(e||l)(c.rc(c.A))},l.\u0275prov=c.dc({token:l,factory:l.\u0275fac}),Object(n.c)([Object(o.a)(),Object(n.e)("design:type",a.a)],l.prototype,"I18n",void 0),Object(n.c)([Object(o.a)(),Object(n.e)("design:type",r.a)],l.prototype,"authorisationService",void 0)},FDKb:function(e,t,i){"use strict";i.d(t,"a",(function(){return b}));var n=i("wZYP"),s=i("Kg8T"),a=i("PUHT"),r=i("4lR/"),o=i("iMRi"),c=i("DhiE"),l=(i("B4Ei"),i("IaZ+")),d=i("F3Jm"),u=i("VPzE"),h=i("u/Nd"),p=i("sngl"),m=i("E2tj"),g=i("CV67"),f=i("fXoL");class b extends a.a{constructor(e,t,i,n,s,a,r,o,c){super(e,t),this.elementRef=e,this.opContextMenu=t,this.opModalService=i,this.wpListService=n,this.authorisationService=s,this.states=a,this.injector=r,this.querySpace=o,this.I18n=c,this.focusAfterClose=!0}ngAfterViewInit(){super.ngAfterViewInit(),this.querySpace.query.values$().pipe(this.untilDestroyed()).subscribe(e=&gt;{this.query=e}),this.loadingPromise=this.querySpace.queryForm.valuesPromise(),this.querySpace.queryForm.values$().pipe(this.untilDestroyed()).subscribe(e=&gt;{this.form=e})}open(e){this.loadingPromise.then(()=&gt;{this.buildItems(),this.opContextMenu.show(this,e)})}get locals(){return{contextMenuId:"settingsDropdown",items:this.items}}positionArgs(e){let t=super.positionArgs(e);return _.assign(t,{my:"right top",at:"right bottom"}),t}onClose(){this.focusAfterClose&amp;&amp;this.afterFocusOn.focus()}allowQueryAction(e,t){return this.allowAction(e,"query",t)}allowWorkPackageAction(e,t){return this.allowAction(e,"work_packages",t)}allowFormAction(e,t){return!!this.form.$links[t]||(e.stopPropagation(),!1)}allowAction(e,t,i){return!!this.authorisationService.can(t,i)||(e.stopPropagation(),!1)}buildItems(){this.items=[{disabled:!1,linkText:this.I18n.t("js.toolbar.settings.configure_view"),icon:"icon-settings",onClick:e=&gt;(this.opContextMenu.close(),this.opModalService.show(p.a,this.injector),!0)},{linkText:this.I18n.t("js.work_packages.query.insert_columns"),icon:"icon-columns",class:"hidden-for-mobile",onClick:()=&gt;(this.opModalService.show(p.a,this.injector,{initialTab:"columns"}),!0)},{linkText:this.I18n.t("js.toolbar.settings.sort_by"),icon:"icon-sort-by",onClick:()=&gt;(this.opModalService.show(p.a,this.injector,{initialTab:"sort-by"}),!0)},{linkText:this.I18n.t("js.toolbar.settings.group_by"),icon:"icon-group-by",class:"hidden-for-mobile",onClick:()=&gt;(this.opModalService.show(p.a,this.injector,{initialTab:"display-settings"}),!0)},{disabled:!this.query.id||this.authorisationService.cannot("query","updateImmediately"),linkText:this.I18n.t("js.toolbar.settings.page_settings"),icon:"icon-edit",onClick:e=&gt;(this.allowQueryAction(e,"update")&amp;&amp;(this.focusAfterClose=!1,jQuery(`${g.b}`).trigger(g.c)),!0)},{disabled:this.authorisationService.cannot("query","updateImmediately"),linkText:this.I18n.t("js.toolbar.settings.save"),icon:"icon-save",onClick:e=&gt;{const t=this.query;return!t.persisted&amp;&amp;this.allowQueryAction(e,"updateImmediately")?this.opModalService.show(u.a,this.injector):t.id&amp;&amp;this.allowQueryAction(e,"updateImmediately")&amp;&amp;this.wpListService.save(t),!0}},{disabled:this.form?!this.form.$links.create_new:this.authorisationService.cannot("query","updateImmediately"),linkText:this.I18n.t("js.toolbar.settings.save_as"),icon:"icon-save",onClick:e=&gt;(this.allowFormAction(e,"create_new")&amp;&amp;this.opModalService.show(u.a,this.injector),!0)},{disabled:this.authorisationService.cannot("query","delete"),linkText:this.I18n.t("js.toolbar.settings.delete"),icon:"icon-delete",onClick:e=&gt;(this.allowQueryAction(e,"delete")&amp;&amp;window.confirm(this.I18n.t("js.text_query_destroy_confirmation"))&amp;&amp;this.wpListService.delete(),!0)},{disabled:this.authorisationService.cannot("work_packages","representations"),linkText:this.I18n.t("js.toolbar.settings.export"),icon:"icon-export",onClick:e=&gt;(this.allowWorkPackageAction(e,"representations")&amp;&amp;this.opModalService.show(d.a,this.injector),!0)},{disabled:this.authorisationService.cannot("query","unstar")&amp;&amp;this.authorisationService.cannot("query","star"),linkText:this.I18n.t("js.toolbar.settings.visibility_settings"),icon:"icon-watched",onClick:e=&gt;((this.allowQueryAction(e,"unstar")||this.allowQueryAction(e,"star"))&amp;&amp;this.opModalService.show(h.a,this.injector),!0)},{divider:!0,hidden:!(this.query.results.customFields&amp;&amp;this.form.configureForm)},{hidden:!this.query.results.customFields,href:this.query.results.customFields&amp;&amp;this.query.results.customFields.href,linkText:this.query.results.customFields&amp;&amp;this.query.results.customFields.name,icon:"icon-custom-fields",onClick:()=&gt;!1}]}}b.\u0275fac=function(e){return new(e||b)(f.hc(f.q),f.hc(r.a),f.hc(l.b),f.hc(c.a),f.hc(s.a),f.hc(o.a),f.hc(f.A),f.hc(m.a),f.hc(n.a))},b.\u0275dir=f.cc({type:b,selectors:[["","opSettingsContextMenu",""]],inputs:{query:["opSettingsContextMenu-query","query"]},features:[f.Qb]})},FlxY:function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"a",(function(){return s}));const n={id:"__internal-sorthandle"},s={id:"__internal-contextMenu"}},GDA9:function(e,t,i){i("/ur0"),i("7k/7"),i("z2n6"),i("/Su4"),i("RMHK"),i("brli"),i("0loS"),i("fPeS"),i("Jchv"),i("Vn+K"),i("2nA0"),i("9/yf"),i("NvoQ"),i("+NVk"),i("wEvd"),i("HmDX"),i("cZ/E"),i("2nA0"),i("O2Hw"),i("Oaa7"),i("tGlX"),i("TiIQ"),i("yFkT"),i("/+cc"),i("+WSP"),i("mKGy"),i("cnmK"),i("cK71"),i("5GLZ")},GLdX:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("E+lO"),s=i("fXoL");class a{constructor(e,t,i){this.componentFactoryResolver=e,this.appRef=t,this.injector=i}render(e,t){e.innerHTML=t;let i=[];return n.DynamicBootstrapper.getEmbeddable().forEach(t=&gt;{const n=e.querySelectorAll(t.selector);for(let e=0,s=n.length;e
       <s;e++){const s="this.componentFactoryResolver.resolveComponentFactory(t.cls).create(this.injector,[],n[e]);i.push(s),this.appRef.attachView(s.hostView),s.changeDetectorRef.detectChanges()}}),()=">
        {i.forEach(e=&gt;{this.appRef.detachView(e.hostView),e.destroy()}),i.length=0,e.innerHTML=""}}}a.\u0275fac=function(e){return new(e||a)(s.rc(s.l),s.rc(s.f),s.rc(s.A))},a.\u0275prov=s.dc({token:a,factory:a.\u0275fac})},GZlY:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("u4T9"),s=i("oT5z"),a=i("8VVp"),r=i("fXoL");class o{}o.\u0275mod=r.fc({type:o}),o.\u0275inj=r.ec({factory:function(e){return new(e||o)},imports:[[n.a,a.a,s.a]]})},GjwL:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n,s=i("qHU1");!function(e){e.setPosition=function(e,t){try{e.setSelectionRange(t,t)}catch(i){Object(s.a)("Failed to set click position for edit field.",i)}},e.getPosition=function(e){const t=e.originalEvent;try{if(document.caretRangeFromPoint)return document.caretRangeFromPoint(e.clientX,e.clientY).startOffset;if(t.rangeParent){let e=document.createRange();return e.setStart(t.rangeParent,t.rangeOffset),e.startOffset}return 0}catch(i){return Object(s.a)("Failed to get click position for edit field.",i),0}}}(n||(n={}))},GntA:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));class n{constructor(){this.changes={}}contains(e){return this.changes.hasOwnProperty(e)}get changed(){return _.keys(this.changes)}get all(){return this.changes}reset(...e){e.forEach(e=&gt;delete this.changes[e])}clear(){this.changes={}}set(e,t){this.changes[e]=t}get(e){return this.changes[e]}}var s=i("FnNU"),a=i("qHU1"),r=i("IzEk");class o{constructor(e,t,i=null){this.pristineResource=e,this.state=t,this.changeset=new n,this.form$=Object(s.f)(),this.inFlight=!1,this.projectedResource=new Proxy(this.pristineResource,{get:(e,t)=&gt;this.proxyGet(t),set:(e,t,i)=&gt;(this.setValue(t,i),!0)}),i&amp;&amp;this.form$.putValue(i)}push(){this.state&amp;&amp;this.state.putValue(this)}buildRequestPayload(){return this.getForm().then(()=&gt;this.buildPayloadFromChanges())}getSchemaName(e){return this.projectedResource.getSchemaName?this.projectedResource.getSchemaName(e):e}getForm(){return this.form$.isPristine()&amp;&amp;!this.form$.hasActivePromiseRequest()?this.updateForm():this.form$.values$().pipe(Object(r.a)(1)).toPromise()}updateForm(){let e=this.buildPayloadFromChanges();const t=this.pristineResource.$links.update(e).then(e=&gt;(this.form$.putValue(e),this.setNewDefaults(e),this.push(),e));return this.form$.putFromPromiseIfPristine(()=&gt;t),t}isEmpty(){return 0===this.changeset.changed.length}get id(){return this.pristineResource.id}get href(){return this.pristineResource.href}get changes(){return Object.assign({},this.changeset.all)}get changedAttributes(){return this.changeset.changed}isWritable(e){const t=this.schema[e];return t&amp;&amp;t.writable}humanName(e){return _.get(this.schema,`${e}.name`,e)}contains(e){return this.changeset.contains(e)}proxyGet(e){return"schema"===e?this.schema:this.value(e)}value(e){return this.changeset.contains(e)?this.changeset.get(e):this.pristineResource[e]}valueExists(e){return this.changeset.contains(e)||this.pristineResource.hasOwnProperty(e)}setValue(e,t){this.changeset.set(e,t)}clear(){this.state&amp;&amp;this.state.clear(),this.changeset.clear(),this.form$.clear()}reset(e){this.changeset.reset(e)}isOverridden(e){return this.changes.hasOwnProperty(e)}get schema(){return this.form$.getValueOr(this.pristineResource).schema}get minimalPayload(){return{lockVersion:this.pristineResource.lockVersion,_links:{}}}applyChanges(e){let t=this.pristineResource.$source;return this.form$.value&amp;&amp;(t=this.form$.value.payload.$source),_.each(this.changeset.all,(i,n)=&gt;{const s=this.schema[n];"object"==typeof s&amp;&amp;s.writable?t._links[n]?e._links[n]=this.getLinkedValue(i,s):e[n]=i:Object(a.a)(`Trying to write ${n} but is not writable in schema`)}),e}buildPayloadFromChanges(){let e;return this.pristineResource.isNew?(e=this.form$.value?this.form$.value.payload.$source:this.pristineResource.$source,this.pristineResource.attachments&amp;&amp;(e._links.attachments=this.pristineResource.attachments.elements.map(e=&gt;({href:e.href})))):e=this.minimalPayload,this.applyChanges(e)}getLinkedValue(e,t){if(_.isNil(e))return{href:null};let i=(t.type||"").startsWith("[]"),n=!1;if((e.forEach||e.elements)&amp;&amp;(n=!0),n&amp;&amp;i){let t=[];if(e){(e.forEach&amp;&amp;e||e.elements).forEach(e=&gt;{e.href&amp;&amp;t.push({href:e.href})})}return t}return{href:_.get(e,"href",null)}}setNewDefaults(e){_.each(e.payload,(e,t)=&gt;{const i=this.schema[t];"object"==typeof i&amp;&amp;i.writable&amp;&amp;this.setNewDefaultFor(t,e)})}setNewDefaultFor(e,t){this.valueExists(e)||(Object(a.a)("Taking over default value from form for "+e),this.setValue(e,t))}}},Gyz5:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("Jui0"),s=i("fXoL"),a=i("tk/3");class r{constructor(e,t){this.http=e,this.pathHelper=t}get(e){return this.http.get(this.orderPath(e)).toPromise().then(e=&gt;e||{})}update(e,t){return this.http.patch(this.orderPath(e),{delta:t},{withCredentials:!0}).toPromise().then(e=&gt;e.t)}delete(e,...t){let i={};return t.forEach(e=&gt;i[e]=-1),this.update(e,i)}orderPath(e){return this.pathHelper.api.v3.queries.id(e).order.toString()}}r.\u0275fac=function(e){return new(e||r)(s.rc(a.b),s.rc(n.a))},r.\u0275prov=s.dc({token:r,factory:r.\u0275fac})},H3ou:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("+rOU");class s{constructor(e,t,i,n,s){this.availableTabs=e,this.outletElement=t,this.componentFactoryResolver=i,this.appRef=n,this.injector=s,this.activeTabs={},this.currentTab=null}get activeComponents(){return _.values(this.activeTabs).map(e=&gt;e.componentRef.instance)}switchTo(e){const t=_.find(this.availableTabs,t=&gt;t.name===e);if(!t)throw`Trying to switch to unknown tab ${e}.`;if(null!=t.disableBecause)return!1;this.detach();const i=this.activateInstance(t);return this.outletElement.innerHTML="",this.outletElement.appendChild(this._getComponentRootNode(i.componentRef)),this.outletElement.dataset.tabName=t.title,this.currentTab=i,!1}detach(){const e=this.currentTab;null!==e&amp;&amp;(e.portal.setAttachedHost(null),this.currentTab=null)}dispose(){_.each(this.activeTabs,e=&gt;e.dispose()),null!=this.outletElement.parentNode&amp;&amp;this.outletElement.parentNode.removeChild(this.outletElement)}activateInstance(e){return this.activeTabs[e.name]||(this.activeTabs[e.name]=this.createComponent(e)),this.activeTabs[e.name]||null}createComponent(e){const t=this.componentFactoryResolver.resolveComponentFactory(e.componentClass).create(this.injector),i=new n.c(e.componentClass,null,this.injector);return this.appRef.attachView(t.hostView),{name:e.name,portal:i,componentRef:t,dispose:()=&gt;{this.appRef.detachView(t.hostView),t.destroy()}}}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}},HEQ6:function(e,t,i){"use strict";i.d(t,"a",(function(){return N}));var n=i("E2tj"),s=i("ooSb"),a=i("FB4C"),r=i("Zq3F"),o=i("AeZM"),c=i("wyKs"),l=i("6yP5"),d=i("JY8V"),u=i("F5Dh"),h=i("PtkW"),p=i("eyhC"),m=i("EnRq"),g=i("ONn1"),f=i("2Qcm"),b=i("4n9w"),v=i("+oAL"),w=i("Y/CA"),y=i("SKFm"),k=i("DhiE"),C=i("ABwi"),x=i("VgZ9"),j=i("l08T"),S=i("Q6HB"),T=i("FDFi"),P=i("f9kS"),I=i("Yblc"),_=i("W6hW"),O=i("qHU1"),D=i("ouar"),R=i("pSHE"),E=i("Uyc6"),F=i("x5It"),M=i("WW/2"),A=i("Va5K"),L=i("7xci"),q=i("POAS"),$=i("qc15"),V=i("fXoL");class N{constructor(e,t,i){this.elementRef=e,this.querySpace=t,this.injector=i,Object(O.a)("Opening isolated query space %O in %O",i,e.nativeElement)}}N.\u0275fac=function(e){return new(e||N)(V.hc(V.q),V.hc(n.a),V.hc(V.A))},N.\u0275dir=V.cc({type:N,selectors:[["","wp-isolated-query-space",""]],features:[V.Sb([{provide:q.a,useExisting:$.a},n.a,s.a,_.a,k.a,a.a,r.a,o.a,c.a,l.a,d.a,u.a,h.a,p.a,m.a,g.a,w.a,f.a,A.a,E.a,L.a,F.a,C.a,x.a,j.a,S.a,T.a,P.a,I.a,M.a,y.a,b.a,v.a,D.a,R.a])]})},HGdY:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");class s{intercept(e,t){const i=jQuery("meta[name=csrf-token]").attr("content");if(!1!==e.withCredentials){let n=e.headers.set("X-Authentication-Scheme","Session").set("X-Requested-With","XMLHttpRequest");i&amp;&amp;(n=n.set("X-CSRF-TOKEN",i));const s=e.clone({withCredentials:!0,headers:n});return t.handle(s)}return t.handle(e)}}s.\u0275fac=function(e){return new(e||s)},s.\u0275prov=n.dc({token:s,factory:s.\u0275fac})},HN1l:function(e,t,i){"use strict";i.d(t,"a",(function(){return s})),i.d(t,"b",(function(){return a}));var n=i("fXoL");class s{constructor(e){this.elementRef=e}ngOnInit(){this.$element=jQuery(this.elementRef.nativeElement),this.thead=this.$element.parent("colgroup").siblings("thead"),this.thead.on("mouseenter","th",e=&gt;{this.$element.index()===jQuery(e.currentTarget).index()&amp;&amp;this.$element.addClass("hover")}),this.thead.on("mouseleave","th",e=&gt;{this.$element.index()===jQuery(e.currentTarget).index()&amp;&amp;this.$element.removeClass("hover")})}ngOnDestroy(){this.thead.off("mouseenter mouseleave")}}s.\u0275fac=function(e){return new(e||s)(n.hc(n.q))},s.\u0275cmp=n.bc({type:s,selectors:[["col","highlight-col",""]],attrs:["highlight-col",""],decls:0,vars:0,template:function(e,t){},encapsulation:2});const a={selector:"col[highlight-col]",cls:s}},IYP9:function(e,t,i){"use strict";i.d(t,"b",(function(){return v})),i.d(t,"a",(function(){return w}));var n=i("fXoL"),s=i("kTsZ"),a=i("Jui0"),r=i("RhL0"),o=i("wZYP"),c=i("lJxs"),l=i("iuWW"),d=i("POAS"),u=i("ZOsW"),h=i("3Pt+"),p=i("oUDv"),m=i("ofXK"),g=i("u8Ab");function f(e,t){if(1&amp;e&amp;&amp;n.ic(0,"user-avatar",3),2&amp;e){const e=n.xc().item;n.Dc("user",e)}}function b(e,t){if(1&amp;e&amp;&amp;(n.ad(0,f,1,1,"user-avatar",2),n.cd(1)),2&amp;e){const e=t.item;n.Dc("ngIf",e&amp;&amp;e.id),n.Tb(1),n.ed(" ",e.name," ")}}const v="user-autocompleter";class w{constructor(e,t,i,s,a,o){this.elementRef=e,this.halResourceService=t,this.I18n=i,this.halNotification=s,this.pathHelper=a,this.injector=o,this.userTracker=e=&gt;e.href||e.id,this.onChange=new n.s,this.clearAfterSelection=!1,this.url=this.pathHelper.api.v3.users.path,this.allowEmpty=!1,this.appendTo="",this.multiple=!1,this.initialSelection=null,this.requests=new l.a(e=&gt;this.getAvailableUsers(this.url,e),Object(l.b)(this.halNotification)),this.inputFilters=new r.a}ngOnInit(){const e=this.elementRef.nativeElement.dataset.updateInput,t=this.elementRef.nativeElement.dataset.allowEmpty,i=this.elementRef.nativeElement.dataset.appendTo,n=this.elementRef.nativeElement.dataset.multiple,s=this.elementRef.nativeElement.dataset.url;e&amp;&amp;(this.updateInputField=document.getElementsByName(e)[0],this.setInitialSelection());let a=this.elementRef.nativeElement.dataset.additionalFilter;a&amp;&amp;JSON.parse(a).forEach(e=&gt;{this.inputFilters.add(e.selector,e.operator,e.values)}),"true"===t&amp;&amp;(this.allowEmpty=!0),i&amp;&amp;(this.appendTo=i),"true"===n&amp;&amp;(this.multiple=!0),s&amp;&amp;(this.url=s)}onFocus(){this.requests.lastRequestedValue||this.requests.input$.next("")}onModelChange(e){e&amp;&amp;(this.onChange.emit(e),this.requests.input$.next(""),this.clearAfterSelection&amp;&amp;this.ngSelectComponent.clearItem(e),this.updateInputField&amp;&amp;(this.multiple?this.updateInputField.value=e.map(e=&gt;e.id):this.updateInputField.value=e.id))}getAvailableUsers(e,t){let i=this.inputFilters.clone();return t&amp;&amp;t.length&amp;&amp;i.add("name","~",[t]),this.halResourceService.get(e,{filters:i.toJson()}).pipe(Object(c.a)(e=&gt;{let t=e.elements.map(e=&gt;({name:e.name,id:e.id,href:e.href,avatar:e.avatar}));return this.allowEmpty&amp;&amp;t.unshift({name:this.I18n.t("js.timelines.filter.noneSelection"),href:null,id:null}),t}))}setInitialSelection(){if(this.updateInputField){const e=parseInt(this.updateInputField.value);this.initialSelection=isNaN(e)?null:e}}}w.\u0275fac=function(e){return new(e||w)(n.hc(n.q),n.hc(s.a),n.hc(o.a),n.hc(d.a),n.hc(a.a),n.hc(n.A))},w.\u0275cmp=n.bc({type:w,selectors:[["user-autocompleter"]],viewQuery:function(e,t){var i;(1&amp;e&amp;&amp;n.Yc(u.a,!0),2&amp;e)&amp;&amp;(n.Pc(i=n.wc())&amp;&amp;(t.ngSelectComponent=i.first))},inputs:{clearAfterSelection:"clearAfterSelection",url:"url",allowEmpty:"allowEmpty",appendTo:"appendTo",multiple:"multiple",initialSelection:"initialSelection"},outputs:{onChange:"onChange"},decls:4,vars:12,consts:[["bindLabel","name","bindValue","id",3,"items","ngModel","virtualScroll","trackByFn","typeahead","loading","appendTo","multiple","focus","change"],["ng-option-tmp",""],["data-class-list","avatar-mini",3,"user",4,"ngIf"],["data-class-list","avatar-mini",3,"user"]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"ng-select",0),n.vc("focus",(function(){return t.onFocus()}))("change",(function(e){return t.onModelChange(e)})),n.yc(1,"async"),n.yc(2,"async"),n.ad(3,b,2,2,"ng-template",1),n.mc()),2&amp;e&amp;&amp;n.Dc("items",n.zc(1,8,t.requests.output$))("ngModel",t.initialSelection)("virtualScroll",!0)("trackByFn",t.userTracker)("typeahead",t.requests.input$)("loading",n.zc(2,10,t.requests.loading$))("appendTo",t.appendTo)("multiple",t.multiple)},directives:[u.a,h.m,h.p,p.a,u.c,m.q,g.a],pipes:[m.a],encapsulation:2})},"IaZ+":function(e,t,i){"use strict";i.d(t,"a",(function(){return c})),i.d(t,"b",(function(){return l}));var n=i("fXoL"),s=i("+rOU"),a=i("iB+3"),r=i("E5Dd"),o=i("7ond");const c=new n.z("OP_MODAL_LOCALS");class l{constructor(e,t,i,n,a){this.componentFactoryResolver=e,this.FocusHelper=t,this.appRef=i,this.$transitions=n,this.injector=a,this.active=null,this.opening=!1;const o=this.portalHostElement=document.createElement("div");o.classList.add("op-modals--overlay"),document.body.appendChild(o),jQuery(window).on("keydown",e=&gt;(this.active&amp;&amp;this.active.closeOnEscape&amp;&amp;e.which===r.a.ESCAPE&amp;&amp;this.active.closeOnEscapeFunction(e),!0)),jQuery(window).on("click",e=&gt;{this.active&amp;&amp;!this.opening&amp;&amp;this.active.closeOnOutsideClick&amp;&amp;!this.portalHostElement.contains(e.target)&amp;&amp;this.close()}),this.bodyPortalHost=new s.d(o,this.componentFactoryResolver,this.appRef,this.injector)}show(e,t,i={}){this.close(),this.opening=!0,"global"===t&amp;&amp;(t=this.injector);const n=new s.c(e,null,this.injectorFor(t,i)),a=this.bodyPortalHost.attach(n).instance;return this.active=a,this.portalHostElement.style.display="block",setTimeout(()=&gt;{this.active&amp;&amp;this.active.onOpen(this.activeModal),this.opening=!1},20),this.active}isActive(e){return this.active&amp;&amp;this.active===e}close(){this.active&amp;&amp;this.active.onClose()&amp;&amp;(this.active.closingEvent.emit(this.active),this.bodyPortalHost.detach(),this.portalHostElement.style.display="none",this.active=null)}get activeModal(){return jQuery(this.portalHostElement).find(".op-modal--portal")}injectorFor(e,t){const i=new WeakMap;return t.service=this,i.set(c,t),new s.f(e,i)}}l.\u0275fac=function(e){return new(e||l)(n.rc(n.l),n.rc(o.a),n.rc(n.f),n.rc(a.O),n.rc(n.A))},l.\u0275prov=n.dc({token:l,factory:l.\u0275fac,providedIn:"root"})},"Ie+Q":function(e,t,i){"use strict";i.d(t,"a",(function(){return y}));var n=i("+rOU"),s=i("7MH/"),a=i("57Du"),r=i("IzEk"),o=i("Jui0"),c=i("mrSG"),l=i("E5Dd"),d=i("wZYP"),u=i("8zkO"),h=i("7ond"),p=i("kgyZ"),m=i("GjwL"),g=i("qHU1"),f=i("XNiG"),b=i("r0MM");class v extends p.a{constructor(e,t,i,n,s,a,r){super(),this.injector=e,this.form=t,this.fieldName=i,this.schema=n,this.element=s,this.pathHelper=a,this.withErrors=r,this.$onUserActivate=new f.a,void 0!==r&amp;&amp;this.setErrors(r)}stopPropagation(e){return e.stopPropagation(),!1}get inEditMode(){return this.form.editMode}get inFlight(){return this.form.change.inFlight}get active(){return!0}focus(e){const t=this.element.querySelector(".inline-edit--field");t?(t.focus(),e&amp;&amp;"INPUT"===t.tagName&amp;&amp;m.a.setPosition(t,e)):Object(g.a)(`Tried to focus on ${this.fieldName}, but element does not (yet) exist.`)}onFocusOut(){this.resource.subject&amp;&amp;this.withErrors&amp;&amp;0===this.withErrors.length&amp;&amp;this.handleUserSubmit()}setErrors(e){this.errors=e,this.element.classList.toggle("-error",this.isErrorenous)}handleUserSubmit(){return this.inFlight||this.form.editMode?Promise.resolve():this.onSubmit().then(()=&gt;this.form.submit())}handleUserKeydown(e,t=!1){return this.inEditMode&amp;&amp;!t?e.which!==l.a.ENTER||(this.form.submit(),!1):e.which!==l.a.ESCAPE||(this.handleUserCancel(),!1)}handleUserCancel(){this.reset()}reset(){this.form.change.reset(this.fieldName),this.deactivate(!0)}deactivate(e=!1){delete this.form.activeFields[this.fieldName],this.onDestroy.next(),this.onDestroy.complete(),this.form.reset(this.fieldName,e)}get isErrorenous(){return this.errors.length&gt;0}isChanged(){return this.form.change.contains(this.fieldName)}get resource(){return this.form.resource}get project(){return this.form.change.projectedResource.project}get htmlId(){return`wp-${this.resource.id}-inline-edit--field-${this.fieldName}`}get fieldLabel(){return this.schema.name||this.fieldName}get errorMessageOnLabel(){return this.isErrorenous?this.I18n.t("js.inplace.errors.messages_on_field",{messages:this.errors.join(" ")}):""}previewContext(e){return e.previewPath()}}Object(c.c)([Object(b.a)(),Object(c.e)("design:type",h.a)],v.prototype,"FocusHelper",void 0),Object(c.c)([Object(b.a)(),Object(c.e)("design:type",u.a)],v.prototype,"ConfigurationService",void 0),Object(c.c)([Object(b.a)(),Object(c.e)("design:type",d.a)],v.prototype,"I18n",void 0);var w=i("fXoL");class y{constructor(e,t,i){this.appRef=e,this.componentFactoryResolver=t,this.pathHelper=i}create(e,t,i,o,c,l){const d=this.createDomOutlet(e,t),u=new v(t,i,c,o,e,this.pathHelper,l);u.onDestroy.pipe(Object(r.a)(1)).subscribe(()=&gt;d.detach());const h=Object(a.a)(t,i.change,u,o),p=new n.c(s.a,null,h);return e.innerHTML="",d.attachComponentPortal(p).instance.onEditFieldReady.pipe(Object(r.a)(1)).toPromise().then(()=&gt;u)}createDomOutlet(e,t){return new n.d(e,this.componentFactoryResolver,this.appRef,t)}}y.\u0275fac=function(e){return new(e||y)(w.rc(w.f),w.rc(w.l),w.rc(o.a))},y.\u0275prov=w.dc({token:y,factory:y.\u0275fac,providedIn:"root"})},Ioun:function(e,t,i){"use strict";i.d(t,"a",(function(){return p}));var n=i("tN7n"),s=i("0zio"),a=i("AcWF"),r=i("sngl"),o=i("WgCp"),c=i("fXoL"),l=i("HEQ6"),d=i("72oW");const u=function(){return{}},h=function(){return{tableVisible:!1}};class p extends o.a{}p.\u0275fac=function(e){return m(e||p)},p.\u0275cmp=c.bc({type:p,selectors:[["ng-component"]],features:[c.Sb([[{provide:n.a,useClass:s.a}],{provide:r.b,useValue:a.a}]),c.Qb],decls:3,vars:4,consts:[["wp-isolated-query-space",""],[3,"queryProps","configuration"],["embeddedTableForConfiguration",""]],template:function(e,t){1&amp;e&amp;&amp;(c.lc(0,0),c.ic(1,"wp-embedded-table",1,2),c.kc()),2&amp;e&amp;&amp;(c.Tb(1),c.Dc("queryProps",t.locals.currentQuery||c.Hc(2,u))("configuration",c.Hc(3,h)))},directives:[l.a,d.a],encapsulation:2});const m=c.pc(p)},J30J:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("8ocD"),s=i("fXoL");class a extends n.a{getField(e,t,i,n){let s=new(this.getSpecificClassFor(e._type,t,i.type))(t,n);return s.apply(e,i),s}}a.\u0275fac=function(e){return r(e||a)},a.\u0275prov=s.dc({token:a,factory:a.\u0275fac,providedIn:"root"});const r=s.pc(a)},JLFs:function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"a",(function(){return s}));class n{constructor(e,t,i){this.basePath=e,this.segment=t,this.resource=i,this.path=`${this.basePath}/${t}`}id(e){return new(this.resource||s)(this.path,e)}optionalId(e){return _.isNil(e)?this:this.id(e)}toString(){return this.path}toPath(){return this.path}filtered(e){return this.toString()+"/?"+e.toParams()}}class s{constructor(e,t){this.basePath=e,this.id=t,this.path=`${this.basePath}/${t}`}toString(){return this.path}toPath(){return this.path}}},JY8V:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("zqrF"),s=i("E2tj"),a=i("iMRi"),r=i("PZVJ"),o=i("QOiP"),c=i("fXoL");class l extends n.a{constructor(e,t){super(t),this.states=e,this.querySpace=t}valueFromQuery(e){return[...e.columns]}hasChanged(e){return!this.isCurrentlyEqualTo(e.columns)}isCurrentlyEqualTo(e){const t=e=&gt;e.map(e=&gt;e.href);return _.isEqual(t(e),t(this.getColumns()))}applyToQuery(e){const t=this.getColumns(),i=e.columns.map(e=&gt;e.id),n=t.map(e=&gt;e.id);return e.columns=Object(r.a)(t),!(0===_.difference(n,i).length)&amp;&amp;this.hasRelationColumns()}hasRelationColumns(){const e=[o.b.RELATION_OF_TYPE,o.b.RELATION_TO_TYPE];return!!_.find(this.getColumns(),t=&gt;e.indexOf(t._type)&gt;=0)}getColumns(){return[...this.current]}index(e){return _.findIndex(this.getColumns(),t=&gt;t.id===e)}findById(e){return _.find(this.getColumns(),t=&gt;t.id===e)}previous(e){let t=this.index(e.id);return t&lt;=0?null:this.getColumns()[t-1]}next(e){let t=this.index(e.id);return-1===t||this.isLast(name)?null:this.getColumns()[t+1]}isFirst(e){return 0===this.index(e.id)}isLast(e){return this.index(e.id)===this.columnCount-1}setColumns(e){this.isCurrentlyEqualTo(e)||this.update(e)}setColumnsById(e){const t=e.map(e=&gt;_.find(this.all,t=&gt;t.id===e));this.setColumns(_.compact(t))}moveColumn(e,t){let i=this.getColumns();t&gt;=i.length&amp;&amp;(t=i.length-1),t&lt;0&amp;&amp;(t=0);let n=i[e];i.splice(e,1),i.splice(t,0,n),this.setColumns(i)}shift(e,t){let i=this.index(e.id);-1!==i&amp;&amp;this.moveColumn(i,i+t)}addColumn(e,t){let i=this.getColumns();if(void 0===t&amp;&amp;(t=i.length),-1===this.index(e)){let n=_.find(this.all,t=&gt;t.id===e);if(!n)throw"Column with provided name is not found";i.splice(t,0,n),this.setColumns(i)}}removeColumn(e){let t=this.index(e.id);if(-1!==t){let e=this.getColumns();e.splice(t,1),this.setColumns(e)}}get current(){return this.lastUpdatedState.getValueOr([])}get availableState(){return this.states.queries.columns}get columnCount(){return this.getColumns().length}get all(){return this.availableState.getValueOr([])}get allPropertyColumns(){return this.all.filter(e=&gt;e._type===o.b.PROPERTY)}get unused(){return _.differenceBy(this.all,this.getColumns(),"$href")}}l.\u0275fac=function(e){return new(e||l)(c.rc(a.a),c.rc(s.a))},l.\u0275prov=c.dc({token:l,factory:l.\u0275fac})},Jui0:function(e,t,i){"use strict";i.d(t,"a",(function(){return S}));var n=i("JLFs");class s extends n.a{constructor(e,t){super(e,t),this.workPackageId=t,this.relations=this.path+"/relations",this.revisions=this.path+"/revisions",this.activities=this.path+"/activities",this.available_watchers=this.path+"/available_watchers",this.available_projects=this.path+"/available_projects"}}class a extends n.b{constructor(e){super(e,"work_packages"),this.form=new n.a(this.path,"form")}id(e){return new s(this.path,e)}}class r extends n.a{constructor(e,t){super(e,t),this.userId=t,this.avatar=this.path+"/avatar"}}class o extends n.b{constructor(e){super(e,"users"),this.me=this.path+"/me"}id(e){return new r(this.path,e)}}class c extends n.a{constructor(e,t){super(e,t),this.form=new n.a(this.path,"form"),this.order=new n.a(this.path,"order")}}class l extends n.b{constructor(e){super(e,"queries"),this.form=new n.a(this.path,"form"),this.default=new n.a(this.path,"default")}id(e){return new c(this.path,e)}}class d extends n.b{constructor(e){super(e,"types")}}class u extends n.b{constructor(e){super(e,"versions"),this.form=new n.a(this.path,"form"),this.availableProjects=new n.a(this.path,"available_projects")}}class h extends n.a{constructor(e,t){super(e,t),this.projectId=t,this.available_assignees=this.path+"/available_assignees",this.queries=new l(this.path),this.types=new d(this.path),this.work_packages=new a(this.path),this.versions=new u(this.path)}}class p extends n.b{constructor(e){super(e,"projects"),this.schema=this.path+"/schema"}id(e){return new h(this.path,e)}}var m=i("RhL0");class g extends n.a{constructor(e,t){super(e,t),this.form=new n.a(this.path,"form")}}class f extends n.b{constructor(e){super(e,"grids")}id(e){return new g(this.path,e)}form(){return new n.a(this.path,"form")}}class b extends n.a{constructor(e,t){super(e,t)}}class v extends n.b{constructor(e){super(e,"news")}id(e){return new b(this.path,e)}}class w extends n.a{constructor(e,t){super(e,t),this.form=new n.a(this.path,"form")}}class y extends n.b{constructor(e){super(e,"time_entries"),this.form=new n.a(this.path,"form")}id(e){return new w(this.path,e)}}class k extends n.b{constructor(e){super(e,"memberships"),this.available_projects=this.path+"/available_projects"}}class C extends n.b{constructor(e){super(e,"groups")}toString(){throw"Backend does not yet offer this end point"}}class x{constructor(e){this.appBasePath=e,this.apiV3Base=this.appBasePath+"/api/v3",this.attachments=new n.a(this.apiV3Base,"attachments"),this.configuration=new n.a(this.apiV3Base,"configuration"),this.root=new n.a(this.apiV3Base,""),this.statuses=new n.b(this.apiV3Base,"statuses"),this.relations=new n.b(this.apiV3Base,"relations"),this.priorities=new n.b(this.apiV3Base,"priorities"),this.time_entries=new y(this.apiV3Base),this.memberships=new k(this.apiV3Base),this.news=new v(this.apiV3Base),this.types=new d(this.apiV3Base),this.versions=new u(this.apiV3Base),this.work_packages=new a(this.apiV3Base),this.queries=new l(this.apiV3Base),this.projects=new p(this.apiV3Base),this.users=new o(this.apiV3Base),this.help_texts=new n.b(this.apiV3Base,"help_texts"),this.grids=new f(this.apiV3Base),this.groups=new C(this.apiV3Base)}withOptionalProject(e){return _.isNil(e)?this:this.projects.id(e)}resource(e){return e.startsWith("/")||(e="/"+e),this.apiV3Base+e}previewMarkup(e){let t=this.apiV3Base+"/render/markdown";return e?t+`?context=${e}`:t}principals(e,t){let i=new m.a;return i.add("status","!",["3"]),i.add("member","=",[e.toString()]),i.add("type","=",["User","Group"]),i.add("id","!",["me"]),t&amp;&amp;t.length&gt;0&amp;&amp;i.add("name","~",[t]),this.apiV3Base+"/principals?"+i.toParams({sortBy:'[["name","asc"]]',offset:"1",pageSize:"10"})}wpBySubjectOrId(e,t=!1){let i=new m.a;return t?i.add("id","=",[e]):i.add("subjectOrId","**",[e]),this.apiV3Base+"/work_packages?"+i.toParams({sortBy:'[["updatedAt","desc"]]',offset:"1",pageSize:"10"})}}var j=i("fXoL");class S{constructor(){this.appBasePath=window.appBasePath?window.appBasePath:"",this.api={v3:new x(this.appBasePath)}}get staticBase(){return this.appBasePath}attachmentDownloadPath(e,t){let i=this.staticBase+"/attachments/"+e;return t?i+"/"+t:i}ifcModelsPath(e){return this.staticBase+`/projects/${e}/ifc_models`}bimDetailsPath(e,t,i=null){let n=this.projectPath(e)+`/bcf/split/details/${t}`;return null!==i&amp;&amp;(n+=`?viewpoint=${i}`),n}highlightingCssPath(){return this.staticBase+"/highlighting/styles"}forumPath(e,t){return this.projectForumPath(e)+"/"+t}keyboardShortcutsHelpPath(){return this.staticBase+"/help/keyboard_shortcuts"}messagePath(e){return this.staticBase+"/topics/"+e}myPagePath(){return this.staticBase+"/my/page"}newsPath(e){return this.staticBase+"/news/"+e}loginPath(){return this.staticBase+"/login"}projectsPath(){return this.staticBase+"/projects"}projectPath(e){return this.projectsPath()+"/"+e}projectActivityPath(e){return this.projectPath(e)+"/activity"}projectForumPath(e){return this.projectPath(e)+"/forums"}projectCalendarPath(e){return this.projectPath(e)+"/work_packages/calendar"}projectMembershipsPath(e){return this.projectPath(e)+"/members"}projectNewsPath(e){return this.projectPath(e)+"/news"}projectTimelinesPath(e){return this.projectPath(e)+"/timelines"}projectTimeEntriesPath(e){return this.projectPath(e)+"/time_entries"}projectWikiPath(e){return this.projectPath(e)+"/wiki"}projectWorkPackagePath(e,t){return this.projectWorkPackagesPath(e)+"/"+t}projectWorkPackagesPath(e){return this.projectPath(e)+"/work_packages"}projectWorkPackageNewPath(e){return this.projectWorkPackagesPath(e)+"/new"}projectBoardsPath(e){return e?this.projectPath(e)+"/boards":this.staticBase+"/boards"}projectDashboardsPath(e){return this.projectPath(e)+"/dashboards"}timeEntriesPath(e){return e?this.workPackagePath(e)+"/time_entries":this.staticBase+"/time_entries"}timeEntryPath(e){return this.staticBase+"/time_entries/"+e}timeEntryEditPath(e){return this.timeEntryPath(e)+"/edit"}usersPath(){return this.staticBase+"/users"}userPath(e){return this.usersPath()+"/"+e}versionsPath(){return this.staticBase+"/versions"}versionEditPath(e){return this.staticBase+"/versions/"+e+"/edit"}versionShowPath(e){return this.staticBase+"/versions/"+e}workPackagesPath(){return this.staticBase+"/work_packages"}workPackagePath(e){return this.staticBase+"/work_packages/"+e}workPackageCopyPath(e){return this.workPackagePath(e)+"/copy"}workPackageDetailsCopyPath(e,t){return this.projectWorkPackagesPath(e)+"/details/"+t+"/copy"}workPackagesBulkDeletePath(){return this.workPackagesPath()+"/bulk"}projectLevelListPath(){return this.projectsPath()+"/level_list.json"}textFormattingHelp(){return this.staticBase+"/help/text_formatting"}}S.\u0275fac=function(e){return new(e||S)},S.\u0275prov=j.dc({token:S,factory:S.\u0275fac,providedIn:"root"})},K018:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("2Vo4"),s=i("pLZG"),a=i("IzEk"),r=i("fXoL");class o{constructor(){this.navigationEvents$=new n.a("")}onActivate(...e){return this.navigationEvents$.pipe(Object(s.a)(t=&gt;-1!==e.indexOf(t)),Object(a.a)(1))}recreateToggler(){let e=this;jQuery("#main-menu .toggler").remove();var t=jQuery('
        <a class="toggler" href="#">
         <i aria-hidden="true" class="icon6 icon-toggler icon-arrow-right3">
         </i>
         <span class="hidden-for-sighted">
         </span>
        </a>
        ').on("click",(function(){let t=jQuery(this);if(t.hasClass("toggler")){jQuery("#sidebar").toggleClass("-hidden",!0),jQuery(".menu_root li").removeClass("open"),jQuery(".menu_root").removeClass("open").addClass("closed");let i=t.closest("li");i.addClass("open").find("li &gt; a:first, .tree-menu--title:first").first().focus(),console.log("Activating "+i.data("name")),e.navigationEvents$.next(i.data("name"))}return!1}));return t.attr("title",I18n.t("js.project_menu_details")),t}wrapMainItem(){var e=jQuery("#main-menu li &gt; a").not("ul ul a");e.wrap(t=&gt;{var i=e[t].id,n=jQuery('
        <div class="main-item-wrapper">
        </div>
        ');return i&amp;&amp;n.attr("id",i+"-wrapper"),n})}register(){this.wrapMainItem();const e=jQuery(".main-item-wrapper a.selected");e.length&gt;0&amp;&amp;e[0].scrollIntoView();const t=this.recreateToggler();let i=jQuery("#main-menu .menu_root &gt; li.open").data("name"),n=jQuery("#main-menu .menu_root.open &gt; li").data("name");function s(e){e.preventDefault();var t=jQuery(this);jQuery(t).parents("li").first().removeClass("open"),jQuery(".menu_root").removeClass("closed").addClass("open"),t.parents("li").first().find(".toggler").first().focus(),jQuery("#sidebar").toggleClass("-hidden",!1)}(i||n)&amp;&amp;this.navigationEvents$.next(i||n),jQuery("#main-menu li:has(ul) .main-item-wrapper &gt; a").not("ul ul a").unbind("click").wrapInner('
        <span class="ellipsis">
        </span>
        ').after(t),jQuery("#main-menu ul.main-menu--children").each((function(e,t){var i=jQuery(t).parents("li").find(".main-item-wrapper .menu-item--title").contents()[0].textContent,n=jQuery(t).parents("li").find(".main-item-wrapper &gt; a").attr("href"),a=jQuery('
        <div class="main-menu--children-menu-header">
        </div>
        '),r=jQuery('
        <a class="main-menu--arrow-left-to-project" href="#">
         <i aria-hidden="true" class="icon-arrow-left1">
         </i>
        </a>
        '),o=jQuery('
        <a class="main-menu--parent-node ellipsis" href="'+n+'">
         '+i+"
        </a>
        ");r.attr("title",I18n.t("js.label_up")),r.on("click",s),a.append(r),a.append(o),jQuery(t).before(a)})),jQuery(".menu_root").hasClass("closed")&amp;&amp;jQuery("#sidebar").toggleClass("-hidden",!0)}}o.\u0275fac=function(e){return new(e||o)},o.\u0275prov=r.dc({token:o,factory:o.\u0275fac,providedIn:"root"})},K247:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");class s{constructor(){this.mobileWidthTreshold=680}get isMobile(){return window.innerWidth
        <this.mobilewidthtreshold}}s.\u0275fac=function(e){return ");var="" e='c.xc();c.Dc("ngClass",e.containerClass),c.Ub("title",e.buttonTitle),c.Tb(1),c.Dc("ngClass",e.statusHighlightClass)("disabled",e.isDisabled)("wpStatusDropdown-workPackage",e.workPackage),c.Ub("aria-label",e.text.explanation),c.Tb(1),c.Dc("ngIf",e.workPackage.isReadonly),c.Tb(1),c.Dc("textContent",e.status.name)}}class' extends="" h(e,t){1&e&&(c.nc(0,"span",6),c.ic(1,"op-icon",7),c.mc())}function="" m="" m}));i("ii2="" n='i("SKFm"),s=i("wZYP"),a=i("RGDJ"),r=i("ug4p"),o=i("AEvm"),c=i("fXoL"),l=i("ofXK"),d=i("t7qP"),u=i("N5AO");function' new(e||s)},s.\u0275prov='n.dc({token:s,factory:s.\u0275fac,providedIn:"root"})},K8b8:function(e,t,i){"use' o.a{constructor(e,t,i,n){super(),this.i18n='e,this.cdRef=t,this.wpCacheService=i,this.halEditing=n,this.text={explanation:this.I18n.t("js.label_edit_status"),workPackageReadOnly:this.I18n.t("js.work_packages.message_work_package_read_only"),workPackageStatusBlocked:this.I18n.t("js.work_packages.message_work_package_status_blocked")}}ngOnInit(){this.halEditing.temporaryEditResource(this.workPackage).values$().pipe(this.untilDestroyed()).subscribe(e=' p(e,t){if(1&e&&(c.nc(0,"div",1),c.nc(1,"button",2),c.ad(2,h,2,0,"span",3),c.ic(3,"span",4),c.ic(4,"op-icon",5),c.mc(),c.mc()),2&e){const="" strict";i.d(t,"a",(function(){return="">
         {this.workPackage=e,this.cdRef.detectChanges(),this.workPackage.status&amp;&amp;this.workPackage.status.$load()})}get buttonTitle(){return this.workPackage.isReadonly?this.text.workPackageReadOnly:this.workPackage.isEditable&amp;&amp;this.isDisabled?this.text.workPackageStatusBlocked:""}get statusHighlightClass(){let e=this.status;if(e)return a.a.backgroundClass("status",e.id)}get status(){if(this.halEditing)return this.changeset.projectedResource.status}get allowed(){return this.workPackage.isAttributeEditable("status")}get isDisabled(){let e=this.changeset.isWritable("status");return!this.allowed||!e||this.changeset.inFlight}get changeset(){return this.halEditing.changeFor(this.workPackage)}}m.\u0275fac=function(e){return new(e||m)(c.hc(s.a),c.hc(c.i),c.hc(r.a),c.hc(n.a))},m.\u0275cmp=c.bc({type:m,selectors:[["wp-status-button"]],inputs:{workPackage:"workPackage",containerClass:"containerClass"},features:[c.Qb],decls:1,vars:1,consts:[["class","wp-status-button",3,"ngClass",4,"ngIf"],[1,"wp-status-button",3,"ngClass"],["wpStatusDropdown","",1,"button",3,"ngClass","disabled","wpStatusDropdown-workPackage"],["class","button--text",4,"ngIf"],["aria-hidden","true",1,"button--text",3,"textContent"],["icon-classes","button--icon icon-small icon-pulldown"],[1,"button--text"],["icon-classes","button--icon icon-locked"]],template:function(e,t){1&amp;e&amp;&amp;c.ad(0,p,5,8,"div",0),2&amp;e&amp;&amp;c.Dc("ngIf",t.status)},directives:[l.q,l.n,d.a,u.a],styles:[".cdk-drag-preview[_ngcontent-%COMP%]{box-shadow:0 0 10px 5px rgba(0,0,0,.1);z-index:10000!important}.wp-status-button[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;-o-text-overflow:ellipsis;-ms-text-overflow:ellipsis;padding:5px;margin-bottom:0;background-color:var(--status-selector-bg-color);border:none;color:#fff;max-width:100%}.wp-status-button[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]   .button--text[_ngcontent-%COMP%]{margin:0 5px}.wp-status-button.-small[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{font-size:12px;padding:4px;margin-right:0}"]})},Kg8T:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("FnNU"),s=i("1G5W"),a=i("fXoL");class r{constructor(){this.links=Object(n.f)({})}initModelAuth(e,t){this.links.doModify(i=&gt;{let n=Object.assign({},i);return n[e]=t,n})}observeUntil(e){return this.links.values$().pipe(Object(s.a)(e))}can(e,t){const i=this.links.getValueOr({});return i[e]&amp;&amp;t in i[e]}cannot(e,t){return!this.can(e,t)}}r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=a.dc({token:r,factory:r.\u0275fac,providedIn:"root"})},LHWx:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("0To3");class s extends n.a{constructor(e,t,i){super(e,t,i),this.injector=e,this.workPackageTable=t,this.rowBuilder=i}doRender(){this.workPackageTable.originalRows.forEach(e=&gt;{let t=this.workPackageTable.originalRowIndex[e],[i]=this.rowBuilder.buildEmpty(t.object);t.element=i,this.appendRow(t.object,i),this.tableBody.appendChild(i)})}}},LrpJ:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i("/8SZ"),s=i("ZsX/"),a=i("POAS"),r=i("Jui0"),o=i("d/TE");function c(e){return class extends e{get canAddAttachments(){return!!this.$links.addAttachment||this.isNew}get hasAttachments(){return _.get(this.attachments,"elements.length",0)&gt;0}lookupDownloadLocationByName(e){if(!this.attachments||!this.attachments.elements)return null;const t=_.find(this.attachments.elements,t=&gt;t.name===e);return _.get(t,"staticDownloadLocation.href",null)}removeAttachment(e){return _.pull(this.attachments.elements,e),e.$isHal?e.delete().then(()=&gt;{this.attachmentsBackend?this.updateAttachments():this.attachments.count=Math.max(this.attachments.count-1,0)}).catch(t=&gt;{this.halNotification.handleRawError(t,this),this.attachments.elements.push(e)}):Promise.resolve()}updateAttachments(){return this.attachments.updateElements().then(()=&gt;(this.updateState(),this.attachments))}uploadAttachments(e){const{uploads:t,finished:i}=this.performUpload(e),n=I18n.t("js.label_upload_notification"),s=this.NotificationsService.addAttachmentUpload(n,t);return i.then(e=&gt;(setTimeout(()=&gt;this.NotificationsService.remove(s),700),this.attachments.count+=e.length,e.forEach(e=&gt;{this.attachments.elements.push(e.response)}),this.updateState(),e)).catch(e=&gt;{let t;return console.error("Error while uploading: %O",e),t=e.error instanceof ErrorEvent?this.I18n.t("js.error_attachment_upload",{error:e}):"Error"===_.get(e,"error._type")?e.error.message:e.error,this.halNotification.handleRawError(t),t||I18n.t("js.error.internal")})}performUpload(e){let t="";return t=!this.isNew&amp;&amp;this.id&amp;&amp;this.attachmentsBackend?this.addAttachment.$link.href:this.pathHelper.api.v3.attachments.path,this.opFileUpload.uploadAndMapResponse(t,e)}updateState(){this.state&amp;&amp;this.state.putValue(this)}$initialize(e){this.NotificationsService||(this.NotificationsService=this.injector.get(o.a)),this.halNotification||(this.halNotification=this.injector.get(a.a)),this.opFileUpload||(this.opFileUpload=this.injector.get(s.a)),this.pathHelper||(this.pathHelper=this.injector.get(r.a)),super.$initialize(e);let t=this.attachments||{$source:{},elements:[]};this.attachments=new n.a(this.injector,t,!1,this.halInitializer,"HalResource")}}}},M0J3:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("AEvm");class s extends n.a{get displayName(){return this.schema.name||this.name}get value(){return this.resource[this.name]}get type(){return this.constructor.type}get required(){return!!this.schema.required}get writable(){return this.schema.writable&amp;&amp;this.resource.isAttributeEditable(this.name)}get hasDefault(){return this.schema.hasDefault}get options(){return this.schema.options}isEmpty(){return!this.value}get unknownAttribute(){return this.isEmpty&amp;&amp;!this.schema}}},MIK2:function(e,t,i){"use strict";i.d(t,"a",(function(){return j}));var n=i("fXoL"),s=i("wZYP"),a=(i("ii2/"),i("XNiG")),r=i("LRne"),o=i("Cfvw"),c=i("Kj3r"),l=i("/uUt"),d=i("vkgz"),u=i("eIep"),h=i("lJxs"),p=i("JIr8"),m=i("ZOsW"),g=i("E2tj"),f=i("Jui0"),b=i("sjKJ"),v=(i("RhL0"),i("kTsZ")),w=i("dMmB"),y=i("qc15"),k=i("ofXK");function C(e,t){if(1&amp;e&amp;&amp;n.cd(0),2&amp;e){const e=t.item;n.gd(" ",e.type.name," #",e.id," ",e.subject," ")}}function x(e,t){if(1&amp;e&amp;&amp;n.cd(0),2&amp;e){const e=t.item;n.gd(" ",e.type.name," #",e.id," ",e.subject," ")}}class j{constructor(e,t,i,s,r,o,h,p){this.querySpace=e,this.pathHelper=t,this.notificationService=i,this.CurrentProject=s,this.halResourceService=r,this.schemaCacheService=o,this.cdRef=h,this.I18n=p,this.text={placeholder:this.I18n.t("js.relations_autocomplete.placeholder")},this.inputPlaceholder=this.text.placeholder,this.additionalFilters=[],this.hiddenOverflowContainer="body",this.onCancel=new n.s,this.onSelected=new n.s,this.onEmptySelected=new n.s,this.isLoading=!1,this.searchInput$=new a.a,this.appendToContainer="body",this.results$=this.searchInput$.pipe(Object(c.a)(250),Object(l.a)(),Object(d.a)(()=&gt;this.isLoading=!0),Object(u.a)(e=&gt;this.autocompleteWorkPackages(e)))}reset(){this.cancel()}ngAfterContentInit(){this.ngSelectComponent&amp;&amp;setTimeout(()=&gt;{this.ngSelectComponent.focus()},25)}cancel(){this.onCancel.emit()}onWorkPackageSelected(e){e&amp;&amp;this.schemaCacheService.ensureLoaded(e).then(()=&gt;{this.onSelected.emit(e),this.ngSelectComponent.close()})}autocompleteWorkPackages(e){return null===e||0===e.length?(this.isLoading=!1,Object(r.a)([])):(e=e.replace(/^#/,""),Object(o.a)(this.workPackage.availableRelationCandidates.$link.$fetch({query:e,filters:JSON.stringify(this.additionalFilters),type:this.filterCandidatesFor||this.selectedRelationType})).pipe(Object(h.a)(e=&gt;e.elements),Object(p.a)(e=&gt;(this.notificationService.handleRawError(e),Object(r.a)([]))),Object(d.a)(()=&gt;this.isLoading=!1)))}onOpen(){setTimeout(()=&gt;{const e=this.ngSelectComponent;e&amp;&amp;e.dropdownPanel&amp;&amp;e.dropdownPanel._updatePosition(),jQuery(this.hiddenOverflowContainer).one("scroll",()=&gt;{this.ngSelectComponent.close()})},25)}}j.\u0275fac=function(e){return new(e||j)(n.hc(g.a),n.hc(f.a),n.hc(y.a),n.hc(b.a),n.hc(v.a),n.hc(w.a),n.hc(n.i),n.hc(s.a))},j.\u0275cmp=n.bc({type:j,selectors:[["wp-relations-autocomplete"]],viewQuery:function(e,t){var i;(1&amp;e&amp;&amp;n.Yc(m.a,!0),2&amp;e)&amp;&amp;(n.Pc(i=n.wc())&amp;&amp;(t.ngSelectComponent=i.first))},hostBindings:function(e,t){1&amp;e&amp;&amp;n.vc("keydown.escape",(function(){return t.reset()}))},inputs:{inputPlaceholder:"inputPlaceholder",workPackage:"workPackage",selectedRelationType:"selectedRelationType",filterCandidatesFor:"filterCandidatesFor",additionalFilters:"additionalFilters",hiddenOverflowContainer:"hiddenOverflowContainer"},outputs:{onCancel:"onCancel",onSelected:"onSelected",onEmptySelected:"onEmptySelected"},decls:5,vars:9,consts:[[1,"wp-relations--autocomplete"],["ngClass","wp-inline-create--reference-autocompleter",3,"items","appendTo","multiple","loading","placeholder","typeahead","closeOnSelect","open","change"],["ng-label-tmp",""],["ng-option-tmp",""]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"div",0),n.nc(1,"ng-select",1),n.vc("open",(function(){return t.onOpen()}))("change",(function(e){return t.onWorkPackageSelected(e)})),n.yc(2,"async"),n.ad(3,C,1,3,"ng-template",2),n.ad(4,x,1,3,"ng-template",3),n.mc(),n.mc()),2&amp;e&amp;&amp;(n.Tb(1),n.Dc("items",n.zc(2,7,t.results$))("appendTo",t.appendToContainer)("multiple",!1)("loading",t.isLoading)("placeholder",t.inputPlaceholder)("typeahead",t.searchInput$)("closeOnSelect",!0))},directives:[m.a,k.n,m.e,m.c],pipes:[k.a],styles:["ng-select.wp-inline-create--reference-autocompleter{border:none}ng-select.wp-inline-create--reference-autocompleter .ng-clear-wrapper{display:none}"],encapsulation:2})},Mo6U:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("mrSG"),s=i("iMRi"),a=i("wZYP"),r=i("r0MM");class o{constructor(e,t,i,n,s){this.injector=e,this.$source=t,this.$loaded=i,this.halInitializer=n,this.$links={},this.$embedded={},this.$halType=s,this.$initialize(t)}static getEmptyResource(e={href:null}){return{_links:{self:e}}}static idFromLink(e){return e.split("/").pop()}get idFromLink(){return this.$href?o.idFromLink(this.$href):""}$initialize(e){this.$source=e.$source||e,this.halInitializer(this)}toString(){return this.$href?`[HalResource href=${this.$href}]`:`[HalResource id=${this.id}]`}get id(){if(this.$source.id)return this.$source.id.toString();const e=this.idFromLink;return e.match(/^\d+$/)?e:null}set id(e){this.$source.id=e}get isNew(){return"new"===this.id}get persisted(){return!(!this.id||"new"===this.id)}isAttributeEditable(e){const t=this.schema[e];return this.$links.update&amp;&amp;t&amp;&amp;t.writable}retainFrom(e){this.__initialized_at=e.__initialized_at}$copy(e={}){return new(0,this.constructor)(this.injector,_.merge(this.$plain(),e),this.$loaded,this.halInitializer,this.$halType)}$plain(){return _.cloneDeep(this.$source)}get $isHal(){return!0}get $link(){return this.$links.self.$link}get name(){return this._name||this.$link.title||""}set name(e){this._name=e}get href(){return this.$link.href}get $href(){return this.$link.href}get state(){return null}push(e){this.state&amp;&amp;this.state.putValue(e)}previewPath(){if(this.isNew&amp;&amp;this.project)return this.project.href}getEditorTypeFor(e){return"constrained"}$load(e=!1){if(!this.state)return this.$loadResource(e);const t=this.state;return e&amp;&amp;t.clear(),t.putFromPromiseIfPristine(()=&gt;this.$loadResource(e)),t.valuesPromise().then(e=&gt;(this.$initialize(e),this.$loaded=!0,this))}$loadResource(e=!1){if(!e){if(this.$loaded)return Promise.resolve(this);if(!this.$loaded&amp;&amp;this.$self)return this.$self}return this.$loaded=!1,this.$self=this.$links.self({}).then(e=&gt;(this.$loaded=!0,this.$initialize(e.$source),this)),this.$self}$update(){return this.$load(!0)}$embeddableKeys(){const e=Object.keys(this.$source);return _.without(e,"_links","_embedded","id")}$linkableKeys(){const e=Object.keys(this.$links);return _.without(e,"self")}}Object(n.c)([Object(r.a)(),Object(n.e)("design:type",s.a)],o.prototype,"states",void 0),Object(n.c)([Object(r.a)(),Object(n.e)("design:type",a.a)],o.prototype,"I18n",void 0)},N5AO:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("fXoL"),s=i("ofXK");function a(e,t){if(1&amp;e&amp;&amp;n.ic(0,"span",2),2&amp;e){const e=n.xc();n.Dc("textContent",e.iconTitle)}}class r{constructor(){this.iconTitle=""}}r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=n.bc({type:r,selectors:[["op-icon"]],hostAttrs:[1,"op-icon--wrapper"],inputs:{iconClasses:["icon-classes","iconClasses"],iconTitle:["icon-title","iconTitle"]},decls:2,vars:3,consts:[["aria-hidden","true",3,"ngClass","title"],["class","hidden-for-sighted",3,"textContent",4,"ngIf"],[1,"hidden-for-sighted",3,"textContent"]],template:function(e,t){1&amp;e&amp;&amp;(n.ic(0,"i",0),n.ad(1,a,1,1,"span",1)),2&amp;e&amp;&amp;(n.Dc("ngClass",t.iconClasses)("title",t.iconTitle),n.Tb(1),n.Dc("ngIf",t.iconTitle))},directives:[s.n,s.q],encapsulation:2})},NNMa:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i("iMRi"),s=i("UD+K"),a=i("Ywds"),r=i("dMmB"),o=i("fXoL");class c extends s.a{constructor(e,t,i){super(),this.states=e,this.schemaCacheService=t,this.projectDmService=i}loadAll(e){return Promise.all(e.map(e=&gt;this.load(e))).then(e=&gt;{})}updateValue(e,t){this.schemaCacheService.ensureLoaded(t).then(()=&gt;{super.updateValue(e,t)})}load(e){return this.projectDmService.one(parseInt(e)).then(e=&gt;this.schemaCacheService.ensureLoaded(e).then(()=&gt;e))}get multiState(){return this.states.projects}}c.\u0275fac=function(e){return new(e||c)(o.rc(n.a),o.rc(r.a),o.rc(a.a))},c.\u0275prov=o.dc({token:c,factory:c.\u0275fac,providedIn:"root"})},NawS:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("Mo6U"),s=i("ii2/");class a extends n.a{static RELATION_TYPES(e=!0){const t=["relates","duplicates","duplicated","blocks","blocked","precedes","follows","includes","partof","requires","required"];return e&amp;&amp;t.push("parent","children"),t}static LOCALIZED_RELATION_TYPES(e=!0){return a.RELATION_TYPES(e).map(e=&gt;({name:e,label:I18n.t("js.relation_labels."+e)}))}static DEFAULT(){return"relates"}normalizedType(e){return this.denormalized(e).relationType}denormalized(e){const t=this.to.href===e.$href?"from":"to";return{target:this[t],targetId:this[t].id,relationType:"from"===t?this.reverseType:this.type,reverseRelationType:"from"===t?this.type:this.reverseType}}isInvolved(e){return _.values(this.ids).indexOf(e.toString())&gt;=0}get ids(){return{from:s.a.idFromLink(this.from.href),to:s.a.idFromLink(this.to.href)}}updateDescription(e){return this.$links.updateImmediately({description:e})}updateType(e){return this.$links.updateImmediately({type:e})}}},Ncnr:function(e,t,i){"use strict";i.d(t,"d",(function(){return g})),i.d(t,"e",(function(){return f})),i.d(t,"b",(function(){return b})),i.d(t,"c",(function(){return v})),i.d(t,"a",(function(){return w}));var n=i("mrSG"),s=i("wZYP"),a=i("J30J"),r=i("Q2x2"),o=i("4rda");class c extends r.a{render(e,t){const i=this.value;e.setAttribute("title",t),e.textContent=t,e.innerHTML="",0===i.length?this.renderEmpty(e):this.renderValues(i,e)}renderValues(e,t){e.forEach(e=&gt;{const i=document.createElement("div");i.classList.add(o.b,"-multiple-lines"),i.setAttribute("title",e),i.textContent=e,t.appendChild(i)})}}var l=i("Nvnm");class d extends l.a{render(e,t){const i=this.percentLabel;e.setAttribute("title",i),e.innerHTML="",e.textContent=i}}var u=i("ouar"),h=i("2dSq"),p=i("r0MM");class m extends r.a{render(e,t){const i=this.attribute;e.setAttribute("title",t),e.textContent=t,e.innerHTML="",0===i.length?this.renderEmpty(e):this.renderValues(i,e)}renderValues(e,t){this.outlet=this.userDisplayPortal.create(t,e,!0),this.portalCleanup.add(()=&gt;this.outlet.dispose())}}Object(n.c)([Object(p.a)(),Object(n.e)("design:type",h.a)],m.prototype,"userDisplayPortal",void 0),Object(n.c)([Object(p.a)(),Object(n.e)("design:type",u.a)],m.prototype,"portalCleanup",void 0);const g="-editable",f="-read-only",b="inline-edit--display-field",v="inline-edit--container";class w{constructor(e,t,i={}){this.injector=e,this.container=t,this.options=i,this.fieldCache={}}render(e,t,i,n){const[s,a]=this.renderFieldValue(e,t,i,n);return null===s||this.setSpanAttributes(a,s,t,e),a}renderFieldValue(e,t,i,n){const s=document.createElement("span"),a=this.getSchemaName(e,i,t),r=e.schema[a];if(!r)return[null,s];const o=this.getField(e,r,a,i);o.render(s,this.getText(o,r,n),r.options);const c=o.title;return c&amp;&amp;s.setAttribute("title",c),s.setAttribute("aria-label",this.getAriaLabel(o,e)),[o,s]}getField(e,t,i,n){let s=this.fieldCache[i];return s||(s=this.fieldCache[i]=this.getFieldForCurrentContext(e,i,t)),s.apply(e,t),s.activeChange=n,s}getFieldForCurrentContext(e,t,i){const n={container:this.container,injector:this.injector,options:this.options},s=["[]CustomOption"].indexOf(i.type)&gt;=0;if("single-view"===this.container&amp;&amp;s)return new c(t,n);const a=["[]User"].indexOf(i.type)&gt;=0;return"single-view"===this.container&amp;&amp;a?new m(t,n):"timeline"===this.container&amp;&amp;"percentageDone"===t?new d(t,n):this.displayFieldService.getField(e,t,i,n)}getText(e,t,i){return e.isEmpty()?i||this.getDefaultPlaceholder(t):e.valueString}setSpanAttributes(e,t,i,n){e.classList.add(b,i),e.dataset.fieldName=i,e.setAttribute("tabindex","id"===i?"-1":"0"),t.required&amp;&amp;e.classList.add("-required"),t.isEmpty()&amp;&amp;e.classList.add("-placeholder"),t.writable?(e.classList.add(g),e.setAttribute("role","button")):e.classList.add(f)}getAriaLabel(e,t){let i,n=this.getLabelContent(e);if(e.isFormattable&amp;&amp;!e.isEmpty())try{i=_.escape(jQuery(`
         <div>
          ${n}
         </div>
         `).text())}catch(s){console.error("Failed to parse formattable labelContent"),i="Label for "+e.displayName}else i=n;return e.writable&amp;&amp;t.isAttributeEditable(e.name)?this.I18n.t("js.inplace.button_edit",{attribute:`${e.displayName} ${i}`}):`${e.displayName} ${i}`}getLabelContent(e){return e.isEmpty()?this.I18n.t("js.inplace.null_value_label"):e.valueString}getSchemaName(e,t,i){return t?t.getSchemaName(i):e.getSchemaName?e.getSchemaName(i):i}getDefaultPlaceholder(e){return"Formattable"===e.type?this.I18n.t("js.work_packages.placeholders.formattable",{name:e.name}):"-"}}Object(n.c)([Object(p.a)(),Object(n.e)("design:type",a.a)],w.prototype,"displayFieldService",void 0),Object(n.c)([Object(p.a)(),Object(n.e)("design:type",s.a)],w.prototype,"I18n",void 0)},Ndcw:function(e,t,i){"use strict";i.d(t,"a",(function(){return E}));var n=i("fXoL"),s=i("wZYP"),a=i("l08T"),r=i("4EDS"),o=(i("AA01"),i("fbLK")),c=i("F5Dh"),l=i("3Pt+"),d=i("ofXK"),u=i("/Rze"),h=i("N5AO"),p=i("ahm3"),m=i("72I8"),g=i("DiYd"),f=i("67Ga"),b=i("SgrZ"),v=i("q/QC"),w=i("TAxG"),y=i("OhNT");function k(e,t){if(1&amp;e&amp;&amp;n.ic(0,"option",10),2&amp;e){const e=t.$implicit;n.Dc("textContent",e.name)("ngValue",e)}}function C(e,t){if(1&amp;e){const e=n.oc();n.nc(0,"filter-integer-value",14),n.vc("filterChanged",(function(t){return n.Sc(e),n.xc(2).onFilterUpdated(t)})),n.mc()}if(2&amp;e){const e=n.xc(2);n.Dc("shouldFocus",e.shouldFocus)("filter",e.filter)}}function x(e,t){if(1&amp;e){const e=n.oc();n.nc(0,"filter-date-value",14),n.vc("filterChanged",(function(t){return n.Sc(e),n.xc(2).onFilterUpdated(t)})),n.mc()}if(2&amp;e){const e=n.xc(2);n.Dc("shouldFocus",e.shouldFocus)("filter",e.filter)}}function j(e,t){if(1&amp;e){const e=n.oc();n.nc(0,"filter-dates-value",14),n.vc("filterChanged",(function(t){return n.Sc(e),n.xc(2).onFilterUpdated(t)})),n.mc()}if(2&amp;e){const e=n.xc(2);n.Dc("shouldFocus",e.shouldFocus)("filter",e.filter)}}function S(e,t){if(1&amp;e){const e=n.oc();n.nc(0,"filter-date-time-value",14),n.vc("filterChanged",(function(t){return n.Sc(e),n.xc(2).onFilterUpdated(t)})),n.mc()}if(2&amp;e){const e=n.xc(2);n.Dc("shouldFocus",e.shouldFocus)("filter",e.filter)}}function T(e,t){if(1&amp;e){const e=n.oc();n.nc(0,"filter-date-times-value",14),n.vc("filterChanged",(function(t){return n.Sc(e),n.xc(2).onFilterUpdated(t)})),n.mc()}if(2&amp;e){const e=n.xc(2);n.Dc("shouldFocus",e.shouldFocus)("filter",e.filter)}}function P(e,t){if(1&amp;e){const e=n.oc();n.nc(0,"filter-string-value",14),n.vc("filterChanged",(function(t){return n.Sc(e),n.xc(2).onFilterUpdated(t)})),n.mc()}if(2&amp;e){const e=n.xc(2);n.Dc("shouldFocus",e.shouldFocus)("filter",e.filter)}}function I(e,t){if(1&amp;e){const e=n.oc();n.nc(0,"filter-string-value",14),n.vc("filterChanged",(function(t){return n.Sc(e),n.xc(2).onFilterUpdated(t)})),n.mc()}if(2&amp;e){const e=n.xc(2);n.Dc("shouldFocus",e.shouldFocus)("filter",e.filter)}}function _(e,t){if(1&amp;e){const e=n.oc();n.nc(0,"filter-boolean-value",14),n.vc("filterChanged",(function(t){return n.Sc(e),n.xc(2).onFilterUpdated(t)})),n.mc()}if(2&amp;e){const e=n.xc(2);n.Dc("shouldFocus",e.shouldFocus)("filter",e.filter)}}function O(e,t){if(1&amp;e){const e=n.oc();n.nc(0,"filter-toggled-multiselect-value",14),n.vc("filterChanged",(function(t){return n.Sc(e),n.xc(2).onFilterUpdated(t)})),n.mc()}if(2&amp;e){const e=n.xc(2);n.Dc("shouldFocus",e.shouldFocus)("filter",e.filter)}}function D(e,t){if(1&amp;e&amp;&amp;(n.lc(0),n.nc(1,"div",11),n.ad(2,C,1,2,"filter-integer-value",12),n.ad(3,x,1,2,"filter-date-value",12),n.ad(4,j,1,2,"filter-dates-value",12),n.ad(5,S,1,2,"filter-date-time-value",12),n.ad(6,T,1,2,"filter-date-times-value",12),n.ad(7,P,1,2,"filter-string-value",12),n.ad(8,I,1,2,"filter-string-value",12),n.ad(9,_,1,2,"filter-boolean-value",12),n.ad(10,O,1,2,"filter-toggled-multiselect-value",13),n.mc(),n.kc()),2&amp;e){const e=n.xc();n.Tb(1),n.Dc("ngSwitch",e.valueType),n.Tb(1),n.Dc("ngSwitchCase","[1]Integer"),n.Tb(1),n.Dc("ngSwitchCase","[1]Date"),n.Tb(1),n.Dc("ngSwitchCase","[2]Date"),n.Tb(1),n.Dc("ngSwitchCase","[1]DateTime"),n.Tb(1),n.Dc("ngSwitchCase","[2]DateTime"),n.Tb(1),n.Dc("ngSwitchCase","[1]String"),n.Tb(1),n.Dc("ngSwitchCase","[1]Float"),n.Tb(1),n.Dc("ngSwitchCase","[1]Boolean")}}function R(e,t){1&amp;e&amp;&amp;n.ic(0,"div",15)}class E{constructor(e,t,i,s){this.wpTableFilters=e,this.wpFiltersService=t,this.I18n=i,this.bannerService=s,this.shouldFocus=!1,this.filterChanged=new n.s,this.deactivateFilter=new n.s,this.showValuesInput=!1,this.eeShowBanners=!1,this.trackByHref=r.a.halHref,this.compareByHref=r.a.compareByHref,this.text={open_filter:this.I18n.t("js.filter.description.text_open_filter"),close_filter:this.I18n.t("js.filter.description.text_close_filter"),label_filter_add:this.I18n.t("js.work_packages.label_filter_add"),upsale_for_more:this.I18n.t("js.filter.upsale_for_more"),upsale_link:this.I18n.t("js.filter.upsale_link"),button_delete:this.I18n.t("js.button_delete")}}onFilterUpdated(e){this.filter=e,this.showValuesInput=this.filter.currentSchema.isValueRequired(),this.filterChanged.emit(this.filter)}removeThisFilter(){this.deactivateFilter.emit(this.filter)}get valueType(){if(this.filter.currentSchema&amp;&amp;this.filter.currentSchema.values)return this.filter.currentSchema.values.type}ngOnInit(){this.eeShowBanners=this.bannerService.eeShowBanners,this.availableOperators=this.filter.schema.availableOperators,this.showValuesInput=this.filter.currentSchema.isValueRequired()}}E.\u0275fac=function(e){return new(e||E)(n.hc(c.a),n.hc(a.a),n.hc(s.a),n.hc(o.a))},E.\u0275cmp=n.bc({type:E,selectors:[["","query-filter",""]],inputs:{shouldFocus:"shouldFocus",filter:"filter"},outputs:{filterChanged:"filterChanged",deactivateFilter:"deactivateFilter"},attrs:["query-filter",""],decls:12,vars:14,consts:[[1,"advanced-filters--filter-name",3,"for","textContent"],[1,"advanced-filters--filter-operator"],[1,"hidden-for-sighted",3,"for"],["required","",1,"advanced-filters--select",2,"vertical-align","top",3,"id","name","ngModel","compareWith","ngModelChange"],[3,"textContent","ngValue",4,"ngFor","ngForOf"],[4,"ngIf"],["class","advanced-filters--filter-value",4,"ngIf"],[1,"advanced-filters--remove-filter"],[3,"execute"],["icon-classes","icon-close advanced-filters--remove-filter-icon",3,"icon-title"],[3,"textContent","ngValue"],[1,"advanced-filters--filter-value",3,"ngSwitch"],[3,"shouldFocus","filter","filterChanged",4,"ngSwitchCase"],[3,"shouldFocus","filter","filterChanged",4,"ngSwitchDefault"],[3,"shouldFocus","filter","filterChanged"],[1,"advanced-filters--filter-value"]],template:function(e,t){1&amp;e&amp;&amp;(n.lc(0),n.ic(1,"label",0),n.nc(2,"div",1),n.nc(3,"label",2),n.cd(4),n.mc(),n.nc(5,"select",3),n.vc("ngModelChange",(function(e){return t.filter.operator=e}))("ngModelChange",(function(){return t.onFilterUpdated(t.filter)})),n.ad(6,k,1,2,"option",4),n.mc(),n.mc(),n.ad(7,D,11,9,"ng-container",5),n.ad(8,R,1,0,"div",6),n.nc(9,"div",7),n.nc(10,"accessible-by-keyboard",8),n.vc("execute",(function(){return t.removeThisFilter()})),n.ic(11,"op-icon",9),n.mc(),n.mc(),n.kc()),2&amp;e&amp;&amp;(n.Tb(1),n.Fc("for","operators-",t.filter.id,""),n.Dc("textContent",t.filter.name),n.Ub("title",t.filter.name),n.Tb(2),n.Fc("for","operators-",t.filter.id,""),n.Tb(1),n.fd(" ",t.filter.name," ",t.text.open_filter," "),n.Tb(1),n.Fc("id","operators-",t.filter.id,""),n.Fc("name","op[",t.filter.id,"]"),n.Dc("ngModel",t.filter.operator)("compareWith",t.compareByHref),n.Tb(1),n.Dc("ngForOf",t.availableOperators),n.Tb(1),n.Dc("ngIf",t.showValuesInput&amp;&amp;t.valueType),n.Tb(1),n.Dc("ngIf",!t.showValuesInput),n.Tb(3),n.Dc("icon-title",t.text.button_delete))},directives:[l.y,l.x,l.m,l.p,d.p,d.q,u.a,h.a,l.r,l.B,d.u,d.v,d.w,p.a,m.a,g.a,f.a,b.a,v.a,w.a,y.a],encapsulation:2})},Ng29:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));class n{encodeKey(e){return encodeURIComponent(e)}encodeValue(e){return encodeURIComponent(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}},Nnhs:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("Mo6U");class s extends n.a{isLocked(){return"locked"===this.status}isOpen(){return"open"===this.status}isClosed(){return"closed"===this.status}}},Nolp:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i("mrSG"),s=i("IzEk"),a=i("zOhy"),r=i("uSJ+"),o=i("SKFm"),c=i("r0MM"),l=i("fXoL");class d extends a.a{constructor(){super(...arguments),this.copying=!0}ngOnInit(){super.ngOnInit(),this.wpCreate.onNewWorkPackage().pipe(this.untilDestroyed()).subscribe(e=&gt;{e.__initialized_at===this.__initialized_at&amp;&amp;this.wpRelations.addCommonRelation(e.id,"relates",this.copiedWorkPackageId)})}createdWorkPackage(){return this.copiedWorkPackageId=this.stateParams.copiedFromWorkPackageId,new Promise((e,t)=&gt;{this.wpCacheService.loadWorkPackage(this.copiedWorkPackageId).values$().pipe(Object(s.a)(1)).subscribe(i=&gt;{this.createCopyFrom(i).then(e,t)})})}setTitle(){this.titleService.setFirstPart(this.I18n.t("js.work_packages.copy.title"))}createCopyFrom(e){let t=this.halEditing.changeFor(e);return this.wpCreate.copyWorkPackage(t).then(e=&gt;(this.__initialized_at=e.pristineResource.__initialized_at,this.wpCacheService.updateWorkPackage(e.pristineResource),this.halEditing.updateValue("new",e),e))}}d.\u0275fac=function(e){return u(e||d)},d.\u0275dir=l.cc({type:d,features:[l.Qb]}),Object(n.c)([Object(c.a)(),Object(n.e)("design:type",r.a)],d.prototype,"wpRelations",void 0),Object(n.c)([Object(c.a)(),Object(n.e)("design:type",o.a)],d.prototype,"halEditing",void 0);const u=l.pc(d)},Nvnm:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("4rda");class s extends n.a{get value(){return this.schema?this.resource[this.name]||0:null}get percentLabel(){return this.roundedProgress+"%"}get roundedProgress(){return Math.round(Number(this.value))||0}render(e,t){e.setAttribute("title",t),e.innerHTML=`\n
         <span>
          \n
          <span class="progress-bar" style="width: 80px">
           \n
           <span class="inner-progress closed" style="width: ${this.roundedProgress}%">
           </span>
           \n
           <span class="inner-progress done" style="width: 0%">
           </span>
           \n
          </span>
          \n
          <span class="progress-bar-legend">
           ${this.percentLabel}
          </span>
          \n
         </span>
         \n    `}}},ODu2:function(e,t,i){"use strict";i.d(t,"a",(function(){return g}));var n=i("4zHP"),s=i("4EDS"),a=i("fXoL"),r=i("vd15"),o=i("ofXK"),c=i("Tcty"),l=i("/Rze");function d(e,t){if(1&amp;e){const e=a.oc();a.nc(0,"accessible-by-keyboard",10),a.vc("execute",(function(){return a.Sc(e),a.xc(4).toggleComments()})),a.ic(1,"span",11),a.mc()}if(2&amp;e){const e=a.xc(4);a.Dc("linkAriaLabel",e.togglerText),a.Tb(1),a.Dc("textContent",e.togglerText)}}const u=function(e){return{"-with-toggler":e}};function h(e,t){if(1&amp;e&amp;&amp;(a.nc(0,"h3",7),a.ic(1,"span",8),a.ad(2,d,2,2,"accessible-by-keyboard",9),a.mc()),2&amp;e){const e=a.xc(),t=e.first,i=e.$implicit,n=a.xc(2);a.Dc("ngClass",a.Ic(3,u,t&amp;&amp;n.showToggler)),a.Tb(1),a.Dc("textContent",i.date),a.Tb(1),a.Dc("ngIf",t&amp;&amp;n.showToggler)}}function p(e,t){if(1&amp;e&amp;&amp;(a.nc(0,"div",4),a.ad(1,h,3,5,"h3",5),a.ic(2,"activity-entry",6),a.mc()),2&amp;e){const e=t.$implicit,i=t.first,n=a.xc(2);a.Tb(1),a.Dc("ngIf",i||e.isNextDate),a.Tb(1),a.Dc("workPackage",n.workPackage)("activity",e.activity)("activityNo",e.number(e.isReversed))("isInitial",e.isInitial())}}function m(e,t){if(1&amp;e&amp;&amp;(a.nc(0,"div",1),a.nc(1,"div",2),a.ad(2,p,3,5,"div",3),a.mc(),a.mc()),2&amp;e){const e=a.xc();a.Tb(2),a.Dc("ngForOf",e.visibleActivities)("ngForTrackBy",e.trackByHref)}}class g extends n.a{constructor(){super(...arguments),this.tabName=this.I18n.t("js.work_packages.tabs.activity"),this.trackByHref=s.a.trackByHrefAndProperty("version")}ngOnInit(){this.workPackageId=this.$transition.params("to").workPackageId,super.ngOnInit()}}g.\u0275fac=function(e){return f(e||g)},g.\u0275cmp=a.bc({type:g,selectors:[["wp-activity-tab"]],features:[a.Qb],decls:2,vars:1,consts:[[3,"workPackage"],[1,"detail-activity"],[1,"work-package-details-activities-list"],["class","work-package-details-activities-activity",4,"ngFor","ngForOf","ngForTrackBy"],[1,"work-package-details-activities-activity"],["class","activity-date",3,"ngClass",4,"ngIf"],[3,"workPackage","activity","activityNo","isInitial"],[1,"activity-date",3,"ngClass"],[1,"activity-date--label",3,"textContent"],["linkClass","activity-comments--toggler button -small -transparent",3,"linkAriaLabel","execute",4,"ngIf"],["linkClass","activity-comments--toggler button -small -transparent",3,"linkAriaLabel","execute"],[3,"textContent"]],template:function(e,t){1&amp;e&amp;&amp;(a.nc(0,"work-package-comment",0),a.ad(1,m,3,2,"ng-template"),a.mc()),2&amp;e&amp;&amp;a.Dc("workPackage",t.workPackage)},directives:[r.a,o.p,o.q,c.a,o.n,l.a],encapsulation:2});const f=a.pc(g)},OGNV:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("kTsZ"),s=i("Jui0"),a=i("yQm5"),r=i("fXoL");class o{constructor(e,t){this.halResourceService=e,this.pathHelper=t}load(e){let t={name:e.name||"!!!__O__o__O__!!!"};return e.project&amp;&amp;(t._links={project:{href:e.project.$href}}),e.$links.update(t)}loadWithParams(e,t,i,n={}){t||n.name||(n.name="!!!__O__o__O__!!!"),i&amp;&amp;(n._links=n._links||{},n._links.project={href:this.pathHelper.api.v3.projects.id(i).toString()});let s=this.pathHelper.api.v3.queries.optionalId(t).form.toString();return s=a(s).search(e).toString(),this.halResourceService.post(s,n).toPromise()}buildQueryResource(e){return this.halResourceService.createHalResourceOfType("Query",e.payload)}}o.\u0275fac=function(e){return new(e||o)(r.rc(n.a),r.rc(s.a))},o.\u0275prov=r.dc({token:o,factory:o.\u0275fac})},ONn1:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i("JY8V"),s=i("wyKs"),a=i("E2tj"),r=i("kTsZ"),o=i("ug4p"),c=i("uSJ+"),l=i("qc15"),d=i("fXoL");class u{constructor(e,t,i,n,s,a,r){this.querySpace=e,this.wpTableHierarchies=t,this.wpTableColumns=i,this.notificationService=n,this.halResourceService=s,this.wpCacheService=a,this.wpRelations=r}initialize(e){Promise.all([this.requireInvolvedRelations(e.map(e=&gt;e.id)),this.requireHierarchyElements(e)]).then(e=&gt;{this.loadAdditional(_.flatten(e))})}loadAdditional(e){this.wpCacheService.requireAll(e).then(()=&gt;{this.querySpace.additionalRequiredWorkPackages.putValue(null,"All required work packages are loaded")}).catch(e=&gt;{this.querySpace.additionalRequiredWorkPackages.putValue(null,"Failure loading required work packages"),this.notificationService.handleRawError(e)})}requireInvolvedRelations(e){return this.wpTableColumns.hasRelationColumns()?this.wpRelations.requireAll(e,!0).then(()=&gt;{const t=this.getInvolvedWorkPackages(e.map(e=&gt;this.wpRelations.state(e).value));return _.flatten(t)}):Promise.resolve([])}requireHierarchyElements(e){if(!this.wpTableHierarchies.isEnabled)return Promise.resolve([]);const t=_.flatten(e.map(e=&gt;e.ancestorIds));return Promise.resolve(t)}getInvolvedWorkPackages(e){const t=[];return _.each(e,e=&gt;{_.each(e,e=&gt;{t.push(e.ids.from,e.ids.to)})}),t}}u.\u0275fac=function(e){return new(e||u)(d.rc(a.a),d.rc(s.a),d.rc(n.a),d.rc(l.a),d.rc(r.a),d.rc(o.a),d.rc(c.a))},u.\u0275prov=d.dc({token:u,factory:u.\u0275fac})},OW6k:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("PTRy");class s{constructor(e,t){this.down=!1,this.elements=e,this.scrollWhenOutside=t.scrollWhenOutside||!1,this.maxSpeed=t.maxSpeed||5,this.margin=t.margin||10,this.scrollWhenOutside=t.scrollWhenOutside||!1,this.autoScroll=t.autoScroll,this.point={},this.pointCB=Object(n.createPointCB)(this.point),this.init()}init(){jQuery(window).on("mousemove.domautoscroll touchmove.domautoscroll",e=&gt;{this.pointCB(e),this.onMove(e)}),jQuery(window).on("mouseup.domautoscroll touchend.domautoscroll",()=&gt;this.onUp()),jQuery(window).on("scroll.domautoscroll",e=&gt;this.setScroll(e))}destroy(){jQuery(window).off(".domautoscroll"),this.elements=[],this.cleanAnimation()}add(e){this.elements.push(e)}onUp(){cancelAnimationFrame(this.animationFrame),cancelAnimationFrame(this.windowAnimationFrame)}setScroll(e){for(let t=0;t
         <this.elements.length;t++)if(this.elements[t]===e.target){this.scrolling=!0;break}this.scrolling&&requestanimationframe(()=>
          this.scrolling=!1)}cleanAnimation(){cancelAnimationFrame(this.animationFrame),cancelAnimationFrame(this.windowAnimationFrame)}getTarget(e){if(!e)return[];let t=[];this.elements.includes(e)&amp;&amp;t.push(e);let i=e;for(;i=i.parentNode;)this.elements.includes(i)&amp;&amp;t.push(i);return t}getElementsUnderPoint(){let e=[];for(var t=0;t
          <this.elements.length;t++)this.inside(this.point,this.elements[t])&&e.push(this.elements[t]);return e}onmove(e){if(!this.autoscroll())return;if(e.dispatched)return;let="" i="document.body;t.length" t="[];null!==e.target&amp;&amp;t.push(e.target);let">
           0&amp;&amp;t[0].parentNode===i?t=this.getElementsUnderPoint():(t=this.getTarget(t[0]),0===t.length&amp;&amp;(t=this.getElementsUnderPoint())),this.current=t,0===this.current.length&amp;&amp;(this.current=[this.outerScrollContainer]),cancelAnimationFrame(this.animationFrame),this.animationFrame=requestAnimationFrame(this.scrollTick.bind(this))}setOuterScrollContainer(e){this.outerScrollContainer=e}scrollTick(){0!==this.current.length&amp;&amp;(this.current.forEach(e=&gt;{e&amp;&amp;this.scrollAutomatically(e)}),cancelAnimationFrame(this.animationFrame),this.animationFrame=requestAnimationFrame(this.scrollTick.bind(this)))}scrollAutomatically(e){let t,i,s=Object(n.getClientRect)(e);t=this.point.x
           <s.left+this.margin?-this.maxspeed:this.point.x>
            s.right-this.margin?this.maxSpeed:0,i=this.point.y
            <s.top+this.margin?-this.maxspeed:this.point.y>
             s.bottom-this.margin?this.maxSpeed:0,setTimeout(()=&gt;{i&amp;&amp;this.scrollY(e,i),t&amp;&amp;this.scrollX(e,t)})}scrollY(e,t){e===window?window.scrollTo(e.pageXOffset,e.pageYOffset+t):e.scrollTop+=t}scrollX(e,t){e===window?window.scrollTo(e.pageXOffset+t,e.pageYOffset):e.scrollLeft+=t}inside(e,t,i){return i?e.y&gt;i.top&amp;&amp;e.y
             <i.bottom&&e.x>
              i.left&amp;&amp;e.x
              <i.right:object(n.pointinside)(e,t)}}},ohnt:function(e,t,i){"use availableoptions(){return="" availableoptions(e){this._availableoptions="this.halSorting.sort(e)}get" g{constructor(e,t,i,n,a,o){this.rootdm="e,this.halResourceService=t,this.halSorting=i,this.PathHelper=n,this.cdRef=a,this.I18n=o,this.shouldFocus=!1,this.filterChanged=new" g}));i("aa01");var="" isempty(){return="" n='i("9cVk"),s=i("fXoL"),a=i("wZYP"),r=i("4EDS"),o=i("kTsZ"),c=i("iHm1"),l=i("Jui0"),d=i("ZOsW"),u=i("3Pt+"),h=i("ofXK");const' p='["ngSelectInstance"],m=function(e){return{"-required-highlighting":e}};class' s.s,this._availableoptions='[],this.compareByHrefOrString=r.a.compareByHrefOrString,this.text={placeholder:this.I18n.t("js.placeholders.selection")}}ngOnInit(){this.fetchAllowedValues()}ngAfterViewInit(){this.ngSelectInstance&amp;&amp;this.shouldFocus&amp;&amp;this.ngSelectInstance.focus()}get' strict";i.d(t,"a",(function(){return="" this._availableoptions}set="" this._isempty="0===this.value.length}repositionDropdown(){this.ngSelectInstance&amp;&amp;setTimeout(()=" this.filter.values}setvalues(e){this.filter.values="_.castArray(e),this.filterChanged.emit(this.filter),this.cdRef.detectChanges()}get" value(){return="">
               {const e=this.ngSelectInstance;e&amp;&amp;e.dropdownPanel&amp;&amp;e.dropdownPanel._updatePosition()},25)}get isUserResource(){let e=_.get(this.filter.currentSchema,"values.type",null);return e&amp;&amp;e.indexOf("User")&gt;0}fetchAllowedValues(){this.filter.currentSchema.values.allowedValues.$load?this.loadAllowedValues():this.availableOptions=this.filter.currentSchema.values.allowedValues}loadAllowedValues(){let e=[this.filter.currentSchema.values.allowedValues.$load()];this.isUserResource&amp;&amp;e.push(this.RootDm.load()),Promise.all(e).then(e=&gt;{let t=e[0].elements;this.availableOptions=t,this.isUserResource&amp;&amp;"memberOfGroup"!==this.filter.filter.id&amp;&amp;this.addMeValue(e[1].user)})}addMeValue(e){if(!e||!e.$href)return;let t=this.halResourceService.createHalResource({_links:{self:{href:this.PathHelper.api.v3.users.me,title:this.I18n.t("js.label_me")}}},!0);this._availableOptions.unshift(t)}}g.\u0275fac=function(e){return new(e||g)(s.hc(n.a),s.hc(o.a),s.hc(c.a),s.hc(l.a),s.hc(s.i),s.hc(a.a))},g.\u0275cmp=s.bc({type:g,selectors:[["filter-toggled-multiselect-value"]],viewQuery:function(e,t){var i;(1&amp;e&amp;&amp;s.Yc(p,!0),2&amp;e)&amp;&amp;(s.Pc(i=s.wc())&amp;&amp;(t.ngSelectInstance=i.first))},inputs:{shouldFocus:"shouldFocus",filter:"filter"},outputs:{filterChanged:"filterChanged"},decls:3,vars:14,consts:[[1,"inline-label","ng-select-container",3,"id"],["appendTo","body","bindLabel","name",1,"advanced-filters--ng-select","-multi-select",3,"ngModel","compareWith","clearSearchOnAdd","placeholder","ngClass","id","items","multiple","closeOnSelect","hideSelected","virtualScroll","change","add","remove","open"],["ngSelectInstance",""]],template:function(e,t){1&amp;e&amp;&amp;(s.nc(0,"div",0),s.nc(1,"ng-select",1,2),s.vc("change",(function(e){return t.setValues(e)}))("add",(function(){return t.repositionDropdown()}))("remove",(function(){return t.repositionDropdown()}))("open",(function(){return t.repositionDropdown()})),s.mc(),s.mc()),2&amp;e&amp;&amp;(s.Fc("id","div-values-",t.filter.id,""),s.Tb(1),s.Dc("ngModel",t.filter.values)("compareWith",t.compareByHrefOrString)("clearSearchOnAdd",!0)("placeholder",t.text.placeholder)("ngClass",s.Ic(12,m,t.isEmpty))("id","values-"+t.filter.id)("items",t.availableOptions)("multiple",!0)("closeOnSelect",!1)("hideSelected",!0)("virtualScroll",!0))},directives:[d.a,u.m,u.p,h.n],encapsulation:2,changeDetection:0})},P7xQ:function(e,t,i){"use strict";i.d(t,"a",(function(){return g}));var n=i("iB+3"),s=i("13ri"),a=i("Kg8T"),r=i("Jui0"),o=(i("ii2/"),i("g1AQ")),c=i("UUNb"),l=i("PUHT"),d=i("4lR/"),u=i("TM9v"),h=i("IaZ+");class p{constructor(e,t,i){this.workPackage=e,this.PathHelper=t,this.$state=i,this.project=e.project}get allActions(){return{workPackage:this.workPackage,project:this.project}}copyLink(){return 0===this.$state.current.name.indexOf("work-packages.partitioned.list.details")?this.PathHelper.workPackageDetailsCopyPath(this.project.identifier,this.workPackage.id):this.PathHelper.workPackageCopyPath(this.workPackage.id)}linkForAction(e){return"copy"===e.key?e.link=this.copyLink():e.link=this.allActions[e.resource][e.link].href,e}isPermitted(e){return void 0!==this.allActions[e.resource]&amp;&amp;void 0!==this.allActions[e.resource][e.link]}permittedActionKeys(e){var t=_.filter(e,e=&gt;this.isPermitted(e));return _.map(t,(function(e){return e.key}))}permittedActionsWithLinks(e){var t=_.filter(_.cloneDeep(e),e=&gt;this.isPermitted(e));return _.map(t,e=&gt;this.linkForAction(e))}}var m=i("fXoL");class g extends l.a{constructor(e,t,i,n,s,a,r,o){super(s,r),this.HookService=e,this.$state=t,this.injector=i,this.PathHelper=n,this.elementRef=s,this.opModalService=a,this.opContextMenuService=r,this.authorisationService=o}open(e){this.workPackage.project.$load().then(()=&gt;{this.authorisationService.initModelAuth("work_package",this.workPackage.$links);var t=new p(this.workPackage,this.PathHelper,this.$state);const i=this.getPermittedActions(t);this.buildItems(i),this.opContextMenu.show(this,e)})}triggerContextMenuAction(e,t){const i=e.link;switch(t){case"copy":this.$state.go("work-packages.copy",{copiedFromWorkPackageId:this.workPackage.id});break;case"delete":this.opModalService.show(c.a,this.injector,{workPackages:[this.workPackage]});break;default:window.location.href=i}}positionArgs(e){let t=super.positionArgs(e);return _.assign(t,{my:"right top",at:"right bottom"}),t}getPermittedActions(e){let t=e.permittedActionsWithLinks(u.a);return _.each(this.getPermittedPluginActions(e),e=&gt;{let i=e.indexBy?e.indexBy(t):t.length;t.splice(i,0,e)}),t}getPermittedPluginActions(e){let t=this.HookService.call("workPackageSingleContextMenu");return e.permittedActionsWithLinks(t)}buildItems(e){const t=this.workPackage.configureForm;return this.items=e.map(e=&gt;{const t=e.key;return{disabled:!1,linkText:I18n.t("js.button_"+t),href:e.link,icon:e.icon||`icon-${t}`,onClick:i=&gt;(!e.link||!s.a.isClickedWithModifier(i))&amp;&amp;(this.triggerContextMenuAction(e,t),!0)}}),t&amp;&amp;this.items.push({href:t.href,icon:"icon-settings3",linkText:I18n.t("js.button_configure-form"),onClick:()=&gt;!1}),this.items}}g.\u0275fac=function(e){return new(e||g)(m.hc(o.a),m.hc(n.G),m.hc(m.A),m.hc(r.a),m.hc(m.q),m.hc(h.b),m.hc(d.a),m.hc(a.a))},g.\u0275dir=m.cc({type:g,selectors:[["","wpSingleContextMenu",""]],inputs:{workPackage:["wpSingleContextMenu-workPackage","workPackage"]},features:[m.Qb]})},PHo6:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("Mo6U");class s extends n.a{get height(){return this.endRow-this.startRow}get width(){return this.endColumn-this.startColumn}}},POAS:function(e,t,i){"use strict";i.d(t,"a",(function(){return m}));var n=i("mrSG"),s=i("XZsv"),a=i("iB+3"),r=i("kTsZ"),o=i("Y0Nk"),c=i("d/TE"),l=i("wZYP"),d=i("tk/3"),u=i("Mo6U"),h=i("r0MM"),p=i("fXoL");class m{constructor(e){this.injector=e}showSave(e,t=!1){let i={message:this.I18n.t("js.notice_successful_"+(t?"create":"update"))};this.NotificationsService.addSuccess(i)}handleRawError(e,t){if(console.error("Handling error message %O for work package %O",e,t),e instanceof s.a)return this.handleErrorResponse(e,t);const i=this.retrieveError(e);if(i instanceof u.a)return this.handleErrorResponse(i,t);"string"!=typeof e?this.showGeneralError(i||e):this.NotificationsService.addError(e)}retrieveErrorMessage(e){const t=this.retrieveError(e);return t instanceof s.a?t.message:"string"==typeof t?t:this.I18n.t("js.error.internal")}retrieveError(e){let t=e;return e instanceof d.d&amp;&amp;(t=e.message||e.error),"Error"===_.get(e,"data._type")&amp;&amp;(t=e.data),t&amp;&amp;"Error"===t._type?this.halResourceService.createHalResourceOfClass(s.a,t):t}handleErrorResponse(e,t){return e instanceof s.a?t?this.showError(e,t):void this.showApiErrorMessages(e):this.showGeneralError(e)}showError(e,t){this.showCustomError(e,t)||this.showApiErrorMessages(e)}showGeneralError(e){let t=this.I18n.t("js.error.internal");("string"==typeof e||_.has(e,"toString"))&amp;&amp;(t+=" "+e.toString()),this.NotificationsService.addError(t)}showEditingBlockedError(e){this.NotificationsService.addError(this.I18n.t("js.hal.error.edit_prohibited",{attribute:e}))}showCustomError(e,t){if("urn:openproject-org:api:v3:errors:PropertyFormatError"===e.errorIdentifier){let i=t.schema[e.details.attribute].name,n="js.hal.error.format."+t.schema[e.details.attribute].type.toLowerCase();return void 0!==this.I18n.lookup(n)&amp;&amp;(this.NotificationsService.addError(this.I18n.t(n,{attribute:i})),!0)}return!1}showApiErrorMessages(e){let t=e.errorMessages;return t.length&gt;1?this.NotificationsService.addError("",t):this.NotificationsService.addError(t[0]),!0}}m.\u0275fac=function(e){return new(e||m)(p.rc(p.A))},m.\u0275prov=p.dc({token:m,factory:m.\u0275fac}),Object(n.c)([Object(h.a)(),Object(n.e)("design:type",l.a)],m.prototype,"I18n",void 0),Object(n.c)([Object(h.a)(),Object(n.e)("design:type",a.G)],m.prototype,"$state",void 0),Object(n.c)([Object(h.a)(),Object(n.e)("design:type",r.a)],m.prototype,"halResourceService",void 0),Object(n.c)([Object(h.a)(),Object(n.e)("design:type",c.a)],m.prototype,"NotificationsService",void 0),Object(n.c)([Object(h.a)(),Object(n.e)("design:type",o.a)],m.prototype,"loadingIndicator",void 0)},PSqx:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("ciXH"),s=i("fXoL");class a extends n.a{listAvailableProjects(e){return this.listRequest(this.availableProjectsUrl(),e)}listUrl(){return this.pathHelper.api.v3.memberships.toString()}oneUrl(e){return this.pathHelper.api.v3.memberships.id(e).toString()}availableProjectsUrl(){return this.pathHelper.api.v3.memberships.available_projects.toString()}}a.\u0275fac=function(e){return r(e||a)},a.\u0275prov=s.dc({token:a,factory:a.\u0275fac});const r=s.pc(a)},PUHT:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("4lR/"),s=i("9+6k"),a=i("fXoL");class r extends s.a{constructor(e,t){super(t),this.elementRef=e,this.opContextMenu=t,this.items=[]}ngAfterViewInit(){this.$element=jQuery(this.elementRef.nativeElement),this.$element.on("click",e=&gt;(e.preventDefault(),e.stopPropagation(),this.opContextMenu.isActive(this)?(this.opContextMenu.close(),!1):(this.open(e),!1))),Mousetrap(this.$element[0]).bind("shift+alt+f10",e=&gt;{this.open(e)})}positionArgs(e){return{my:"left top",at:"left bottom",of:this.$element,collision:"flipfit"}}}r.\u0275fac=function(e){return new(e||r)(a.hc(a.q),a.hc(n.a))},r.\u0275dir=a.cc({type:r,selectors:[["","opContextMenuTrigger",""]],features:[a.Qb]})},PZVJ:function(e,t,i){"use strict";var n;i.d(t,"a",(function(){return r})),i.d(t,"b",(function(){return o})),function(e){e.lazy=function(e,t,i,n){if(_.isObject(e)){let s,a=!1,r={get:()=&gt;(a||(s=i(),a=!0),s),set:()=&gt;{},configurable:!0,enumerable:!0};n&amp;&amp;(r.set=e=&gt;{s=n(e),a=!0}),Object.defineProperty(e,t,r)}}}(n||(n={}));var s=i("BtrP");const a=i("NAZG");function r(e){return _.isNil(e)?[]:e.map(e=&gt;e.$copy())}function o(e,t){function i(t,i=!0){return _.isNil(t)?t:t._links||t._embedded||t._type?e.createHalResource(t,i):t}function r(e,i){const s="$"+e,a="_"+e,r=t.$source[a];_.isObject(r)&amp;&amp;Object.keys(r).forEach(e=&gt;{n.lazy(t[s],e,()=&gt;i(r[e]))})}function o(e,i){const n=Array.isArray(e);if(e)if(n)t.$source._links[i]=e.map(e=&gt;({href:e.href}));else if(e.hasOwnProperty("$link")){const n=e.$link;n.href&amp;&amp;(t.$source._links[i]=n)}else"href"in e&amp;&amp;(t.$source._links[i]={href:e.href});else t.$source._links[i]={href:null};return t.$embedded&amp;&amp;t.$embedded[i]&amp;&amp;(t.$embedded[i]=e,t.$source._embedded[i]=n?e.map(e=&gt;e.$source):_.get(e,"$source",e)),e}!function(){t.$source._links||(t.$source._links={});t.$source._links.self||(t.$source._links.self={href:null})}(),r("links",t=&gt;Array.isArray(t)?t.map(t=&gt;s.a.fromObject(e,t).$callable()):s.a.fromObject(e,t).$callable()),r("embedded",e=&gt;Array.isArray(e)?e.map(e=&gt;i(e,!0)):(_.isObject(e)&amp;&amp;_.each(e,(t,s)=&gt;{t&amp;&amp;(t._embedded||t._links)&amp;&amp;n.lazy(e,s,()=&gt;i(t,!0))}),i(e,!0))),t.$embeddableKeys().forEach(e=&gt;{Object.defineProperty(t,e,{get:()=&gt;i(t.$source[e],!0),set(i){t.$source[e]=i},enumerable:!0,configurable:!0})}),t.$linkableKeys().forEach(i=&gt;{n.lazy(t,i,()=&gt;{const n=t.$links[i].$link||t.$links[i];if(Array.isArray(n)){var r=n.map(n=&gt;e.createLinkedResource(t,i,n.$link)),o=new a(...r).on("change",()=&gt;{o.forEach(e=&gt;{e.$link||o.splice(o.indexOf(e),1)}),t.$source._links[i]=o.map(e=&gt;e.$link)});return o}return n.href?"get"!==n.method?s.a.fromObject(e,n).$callable():e.createLinkedResource(t,i,n):null},e=&gt;o(e,i))}),function(){if(!t.$source._embedded)return;Object.keys(t.$source._embedded).forEach(e=&gt;{n.lazy(t,e,()=&gt;t.$embedded[e],t=&gt;o(t,e))})}()}},PkGb:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("iB+3"),s=i("jtHE"),a=i("fXoL");class r{constructor(e,t){this.$state=e,this.$transitions=t,this.currentTab="overview",this.subject=new s.a(1),this.updateTabs(),t.onSuccess({},e=&gt;{this.updateTabs(e.to().name)})}get observable(){return this.subject}get lastActiveTab(){return this.isCurrentState("show")?this.currentShowTab:this.currentDetailsTab}get currentShowState(){return"work-packages.show."+this.currentShowTab}get currentDetailsState(){return"work-packages.partitioned.list.details."+this.currentDetailsTab}isDetailsState(e){return"work-packages.partitioned.list.details"===e}get currentShowTab(){return"overview"===this.currentTab?"activity":this.currentTab}get currentDetailsTab(){return this.currentTab}notify(){this.subject.next({active:this.lastActiveTab,show:this.currentShowState,details:this.currentDetailsState})}updateTab(e){if(this.isCurrentState(e)){const e=this.$state.current.name;this.currentTab=e.split(".").pop(),this.notify()}}isCurrentState(e){return"show"===e?this.$state.includes("work-packages.show.*"):"details"===e&amp;&amp;this.$state.includes("work-packages.partitioned.list.details.*")}updateTabs(e){if("work-packages.show.activity"===e)return this.currentTab="overview",this.notify();this.updateTab("show"),this.updateTab("details")}}r.\u0275fac=function(e){return new(e||r)(a.rc(n.G),a.rc(n.O))},r.\u0275prov=a.dc({token:r,factory:r.\u0275fac})},PtkW:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i("E2tj"),s=i("FnNU"),a=i("zqrF"),r=i("4jc8"),o=i("fXoL");class c extends a.a{constructor(e){super(e),this.querySpace=e,this.appliedZoomLevel$=Object(s.f)("auto")}valueFromQuery(e){return Object.assign(Object.assign({},this.defaultState),{visible:e.timelineVisible,zoomLevel:e.timelineZoomLevel,labels:e.timelineLabels})}set appliedZoomLevel(e){this.appliedZoomLevel$.putValue(e)}get appliedZoomLevel(){return this.appliedZoomLevel$.value}hasChanged(e){const t=this.isVisible!==e.timelineVisible,i=this.zoomLevel!==e.timelineZoomLevel,n=!_.isEqual(this.current.labels,e.timelineLabels);return t||i||n}applyToQuery(e){return e.timelineVisible=this.isVisible,e.timelineZoomLevel=this.zoomLevel,e.timelineLabels=this.current.labels,!1}toggle(){let e=this.current;this.setVisible(!e.visible)}setVisible(e){this.updatesState.putValue(Object.assign(Object.assign({},this.current),{visible:e}))}get isVisible(){return this.current.visible}get zoomLevel(){return this.current.zoomLevel}get labels(){return _.isEmpty(this.current.labels)?this.defaultLabels:this.current.labels}updateLabels(e){this.modify({labels:e})}getNormalizedLabels(e){let t=this.defaultLabels;return _.each(this.current.labels,(e,i)=&gt;{const n=i;t[n]=""===e?null:e}),t}setZoomLevel(e){this.modify({zoomLevel:e})}updateZoomWithDelta(e){let t=this.current.zoomLevel;if("auto"!==t)return this.applyZoomLevel(t,e);const i=this.appliedZoomLevel;if(i&amp;&amp;"auto"!==i)this.applyZoomLevel(i,e);else{const t=e&lt;0?"days":"years";this.setZoomLevel(t)}}isAutoZoom(){return"auto"===this.current.zoomLevel}enableAutozoom(){this.modify({zoomLevel:"auto"})}get current(){return this.lastUpdatedState.getValueOr(this.defaultState)}modify(e){this.update(Object.assign(Object.assign({},this.current),e))}applyZoomLevel(e,t){let i=r.n.indexOf(e);i+=t,i&gt;=0&amp;&amp;i
               <r.n.length&&this.setzoomlevel(r.n[i])}get ${t}%)`}valuehash(e){let="" 50%)`}tohsla(e,t){return`hsla(${this.valuehash(e)},="" 50%,="" _(e,t){if(1&e&&(p.nc(0,"div",27),p.ic(1,"wp-details-toolbar",20),p.mc()),2&e){const="" d="" defaultlabels(){return{left:"",right:"",farright:"subject"}}get="" defaultstate(){return{zoomlevel:"auto",visible:!1,labels:this.defaultlabels}}}c.\u0275fac="function(e){return" d}));var="" e="this.$state.params.workPackageId;if(this.wpTableFocus.focusedWorkPackage)this.wpTableFocus.updateFocus(e,!1);else{const" extends="" i="0;i&lt;e.length;i++)t=e.charCodeAt(i)+((t&lt;&lt;5)-t);return" i(e,t){if(1&e&&(p.nc(0,"div",18),p.ic(1,"span",19),p.ic(2,"wp-breadcrumb",20),p.nc(3,"edit-form",21),p.nc(4,"div",22),p.ad(5,p,1,1,"back-button",23),p.nc(6,"div",24),p.ic(7,"wp-subject"),p.mc(),p.mc(),p.ic(8,"div",25),p.mc(),p.mc()),2&e){const="" l.a{constructor(e,t,i,n,s,a,r,o){super(e,r.params.workpackageid),this.injector="e,this.states=t,this.firstRoute=i,this.keepTab=n,this.wpTableSelection=s,this.wpTableFocus=a,this.$state=r,this.backRouting=o,this.baseRoute=this.$state.current.data.baseRoute}ngOnInit(){this.observeWorkPackage();let" n='i("iB+3"),s=i("Y/CA"),a=i("iMRi"),r=i("oqKi"),o=i("PkGb"),c=i("eyhC"),l=i("rOco"),d=i("POAS"),u=i("qc15"),h=i("pQre"),p=i("fXoL"),m=i("ofXK"),g=i("0loS"),f=i("S2zE"),b=i("/Rze"),v=i("f24R"),w=i("9pt+"),y=i("oUDv"),k=i("2orT"),C=i("711n"),x=i("ZAVI"),j=i("DLfB"),S=i("m3nR");function' new(e||c)(o.rc(n.a))},c.\u0275prov='o.dc({token:c,factory:c.\u0275fac})},PvNn:function(e,t,i){"use' new(e||s)},s.\u0275prov='n.dc({token:s,factory:s.\u0275fac,providedIn:"root"})},"PwL/":function(e,t,i){"use' o(e,t){if(1&e){const="" p(e,t){if(1&e&&p.ic(0,"back-button",26),2&e){const="" p.sc(e),p.xc().close()})),p.mc(),p.mc(),p.mc(),p.mc(),p.ad(15,i,9,4,"div",13),p.ad(16,_,2,1,"div",14),p.nc(17,"div",15),p.ic(18,"wp-resizer",16),p.mc(),p.mc()}if(2&e){const="" p.sc(e),p.xc().switchtofullscreen()})),p.mc(),p.mc(),p.nc(13,"li",10),p.nc(14,"accessible-by-keyboard",12),p.vc("execute",(function(){return="" strict";i.d(t,"a",(function(){return="" s{tohsl(e){return`hsl(${this.valuehash(e)},="" s}));var="" t="this.firstRoute.name===`${this.baseRoute}.details.overview`,i=this.firstRoute.params&amp;&amp;e===this.firstRoute.params.workPackageI;this.wpTableFocus.updateFocus(e,t&amp;&amp;i)}this.wpTableSelection.isEmpty&amp;&amp;this.wpTableSelection.setRowState(e,!0),this.wpTableFocus.whenChanged().pipe(this.untilDestroyed()).subscribe(t=" t%360}}s.\u0275fac="function(e){return" t(e,t){if(1&e&&(p.nc(0,"li",17),p.ic(1,"a",5),p.ic(2,"wp-watchers-count",8),p.mc()),2&e){const="">
                {!(e.toString()===t.toString())&amp;&amp;this.$state.includes(`${this.baseRoute}.details`)&amp;&amp;this.$state.go(this.$state.current.name,{workPackageId:t,focus:!1})})}close(){this.$state.go(this.baseRoute,this.$state.params)}switchToFullscreen(){this.$state.go(this.keepTab.currentShowState,this.$state.params)}get shouldFocus(){return!0===this.$state.params.focus}showBackButton(){return this.baseRoute.includes("bim")}backToList(){this.backRouting.goToBaseState()}initializeTexts(){super.initializeTexts(),this.text.closeDetailsView=this.I18n.t("js.button_close_details"),this.text.goTofullScreen=this.I18n.t("js.work_packages.message_successful_show_in_fullscreen")}}D.\u0275fac=function(e){return new(e||D)(p.hc(p.A),p.hc(a.a),p.hc(r.a),p.hc(o.a),p.hc(c.a),p.hc(s.a),p.hc(n.G),p.hc(h.a))},D.\u0275cmp=p.bc({type:D,selectors:[["wp-split-view-entry"]],features:[p.Sb([{provide:d.a,useClass:u.a}]),p.Qb],decls:1,vars:1,consts:[["class","work-packages--details loading-indicator--location","data-indicator-name","wpDetails",4,"ngIf"],["data-indicator-name","wpDetails",1,"work-packages--details","loading-indicator--location"],["id","tabs"],[1,"tabrow"],["uiSref",".overview","uiSrefActive","selected"],["href","",3,"textContent"],["uiSref",".activity","uiSrefActive","selected"],["uiSref",".relations","uiSrefActive","selected"],[3,"wpId"],["uiSref",".watchers","uiSrefActive","selected",4,"ngIf"],[1,"tab-icon"],["linkClass","work-packages--details-fullscreen-icon","spanClass","icon-context icon-to-fullscreen",3,"linkAriaLabel","linkTitle","execute"],["linkClass","work-packages--details-close-icon","spanClass","icon-context icon-close",3,"linkAriaLabel","linkTitle","execute"],["class","work-packages--details-content work-packages-tab-view--overflow",4,"ngIf"],["class","work-packages--details-toolbar-container",4,"ngIf"],[1,"work-packages--details--resizer","hidden-for-mobile","hide-when-print"],[3,"elementClass","localStorageKey"],["uiSref",".watchers","uiSrefActive","selected"],[1,"work-packages--details-content","work-packages-tab-view--overflow"],["tabindex","-1","focus","shouldFocus",1,"hidden-for-sighted",3,"textContent"],[3,"workPackage"],[3,"resource"],[1,"wp-show--header-container"],["linkClass","work-packages-back-button",3,"customBackMethod",4,"ngIf"],[1,"subject-header"],["ui-view","",1,"work-package-details-tab"],["linkClass","work-packages-back-button",3,"customBackMethod"],[1,"work-packages--details-toolbar-container"]],template:function(e,t){1&amp;e&amp;&amp;p.ad(0,O,19,13,"div",0),2&amp;e&amp;&amp;p.Dc("ngIf",t.workPackage)},directives:[m.q,g.UISref,g.UISrefActive,g.UISrefStatus,f.a,b.a,v.a,w.a,y.a,k.a,C.a,x.a,g.UIView,j.a,S.a],encapsulation:2,changeDetection:0})},Q2ix:function(e,t,i){"use strict";i.d(t,"a",(function(){return b}));var n=i("fXoL"),s=i("wZYP"),a=i("F5Dh"),r=i("ug4p"),o=i("XNiG"),c=i("lJxs"),l=i("/uUt"),d=i("vkgz"),u=i("Kj3r"),h=i("E2tj"),p=i("FnNU"),m=i("AEvm"),g=i("3Pt+"),f=i("ofXK");class b extends m.a{constructor(e,t,i,s){super(),this.I18n=e,this.querySpace=t,this.wpTableFilters=i,this.wpCacheService=s,this.deactivateFilter=new n.s,this.text={createWithDropdown:this.I18n.t("js.work_packages.create.button"),createButton:this.I18n.t("js.label_work_package"),explanation:this.I18n.t("js.label_create_work_package"),placeholder:this.I18n.t("js.work_packages.placeholder_filter_by_text")},this.searchTerm=Object(p.f)(""),this.searchTermChanged=new o.a,this.wpTableFilters.pristine$().pipe(this.untilDestroyed(),Object(c.a)(()=&gt;{const e=this.wpTableFilters.find("search");return e?e.values[0]:""})).subscribe(e=&gt;{console.log("upstream "+e+" "+this.searchTerm.timestampOfLastValue),this.searchTerm.value&amp;&amp;!this.searchTerm.isValueOlderThan(500)||(console.log("Upstream value setting to "+e),this.searchTerm.putValue(e))}),this.searchTermChanged.pipe(this.untilDestroyed(),Object(l.a)(),Object(d.a)(e=&gt;this.searchTerm.putValue(e)),Object(u.a)(500)).subscribe(e=&gt;{if(e.length&gt;0)this.wpTableFilters.replace("search",t=&gt;{t.operator=t.findOperator("**"),t.values=[e]});else{let e=this.wpTableFilters.find("search");this.wpTableFilters.remove(e),this.deactivateFilter.emit(e)}})}}b.\u0275fac=function(e){return new(e||b)(n.hc(s.a),n.hc(h.a),n.hc(a.a),n.hc(r.a))},b.\u0275cmp=n.bc({type:b,selectors:[["wp-filter-by-text-input"]],outputs:{deactivateFilter:"deactivateFilter"},features:[n.Qb],decls:2,vars:4,consts:[["id","filter-by-text-input","type","text",3,"placeholder","ngModel","ngModelChange"]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"input",0),n.vc("ngModelChange",(function(e){return t.searchTermChanged.next(e)})),n.yc(1,"async"),n.mc()),2&amp;e&amp;&amp;(n.Ec("placeholder",t.text.placeholder),n.Dc("ngModel",n.zc(1,2,t.searchTerm.values$())))},directives:[g.c,g.m,g.p],pipes:[f.a],encapsulation:2})},Q2x2:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("4rda");class s extends n.a{isEmpty(){return _.isEmpty(this.value)}get value(){let e=this.resource[this.name];return this.schema&amp;&amp;e?e.elements?e.elements.map(e=&gt;e.name):e.map?e.map(e=&gt;e.name):e.name?[e.name]:["error: "+JSON.stringify(e)]:[]}render(e,t){const i=this.value;e.innerHTML="",e.setAttribute("title",i.join(", ")),0===i.length?this.renderEmpty(e):this.renderValues(i,e)}renderValues(e,t){const i=document.createDocumentFragment(),n=this.optionDiv(this.valueAbridged(e));if(i.appendChild(n),e.length&gt;2){const t=this.optionDiv(e.length.toString(),"badge","-secondary");i.appendChild(t)}t.appendChild(i)}optionDiv(e,...t){const i=document.createElement("div"),s=document.createElement("span");return i.classList.add(n.b),s.classList.add(...t),s.textContent=e,i.appendChild(s),i}valueAbridged(e){const t=_.take(e,2);return e.length&gt;2&amp;&amp;t.push("... "),t.join(", ")}}},Q6HB:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i("Jui0"),s=i("pL6k"),a=i("g1AQ"),r=i("PtkW"),o=i("7xci"),c=i("Va5K"),l=i("fXoL");class d{constructor(e,t,i,n,s,a){this.HookService=e,this.UrlParamsHelper=t,this.wpViewRepresentation=i,this.wpViewTimeline=n,this.wpViewIndent=s,this.PathHelper=a,this.BULK_ACTIONS=[{text:I18n.t("js.work_packages.bulk_actions.edit"),key:"edit",link:"update",href:this.PathHelper.staticBase+"/work_packages/bulk/edit"},{text:I18n.t("js.work_packages.bulk_actions.move"),key:"move",link:"move",href:this.PathHelper.staticBase+"/work_packages/move/new"},{text:I18n.t("js.work_packages.bulk_actions.copy"),key:"copy",link:"copy",href:this.PathHelper.staticBase+"/work_packages/move/new?copy=true"},{text:I18n.t("js.work_packages.bulk_actions.delete"),key:"delete",link:"delete",href:this.PathHelper.staticBase+"/work_packages/bulk?_method=delete"}]}getPermittedActionLinks(e,t,i){let n=[],s=this.getAllowedActions(e,t);return s=s.concat(this.getAllowedParentActions(e)),s=s.concat(this.getAllowedRelationActions(e,i)),_.each(s,t=&gt;{n.push({key:t.key,text:t.text,icon:t.icon,link:t.link?e[t.link].href:void 0})}),n}getIntersectOfPermittedActions(e){let t=[],i=_.filter(this.BULK_ACTIONS,t=&gt;_.every(e,e=&gt;this.getAllowedActions(e,[t]).length&gt;=1));return _.each(i,i=&gt;{t.push({key:i.key,text:i.text,link:this.getBulkActionLink(i,e)})}),t}getBulkActionLink(e,t){let i={"ids[]":t.map((function(e){return e.id}))},n=this.UrlParamsHelper.buildQueryString(i),s=e.href.split("?");return s.shift()+"?"+s.concat(new Array(n)).join("&amp;")}getAllowedActions(e,t){let i=[];return _.each(t,t=&gt;{t.link&amp;&amp;e.hasOwnProperty(t.link)&amp;&amp;(t.text=t.text||I18n.t("js.button_"+t.key),i.push(t))}),_.each(this.HookService.call("workPackageTableContextMenu"),t=&gt;{if(e.hasOwnProperty(t.link)){let e=t.indexBy?t.indexBy(i):i.length;i.splice(e,0,t)}}),i}getAllowedParentActions(e){let t=[];return this.wpViewRepresentation.isList?(this.wpViewIndent.canOutdent(e)&amp;&amp;t.push({key:"hierarchy-outdent",icon:"icon-paragraph-left",text:I18n.t("js.relation_buttons.hierarchy_outdent")}),this.wpViewIndent.canIndent(e)&amp;&amp;t.push({key:"hierarchy-indent",icon:"icon-paragraph-right",text:I18n.t("js.relation_buttons.hierarchy_indent")}),t):[]}getAllowedRelationActions(e,t){let i=[];return e.addRelation&amp;&amp;this.wpViewTimeline.isVisible&amp;&amp;(i.push({key:"relation-precedes",text:I18n.t("js.relation_buttons.add_predecessor"),link:"addRelation"}),i.push({key:"relation-follows",text:I18n.t("js.relation_buttons.add_follower"),link:"addRelation"})),e.addChild&amp;&amp;t&amp;&amp;i.push({key:"relation-new-child",text:I18n.t("js.relation_buttons.add_new_child"),link:"addChild"}),i}getPermittedActions(e,t,i){return 1===e.length?this.getPermittedActionLinks(e[0],t,i):this.getIntersectOfPermittedActions(e)}}d.\u0275fac=function(e){return new(e||d)(l.rc(a.a),l.rc(s.a),l.rc(c.a),l.rc(r.a),l.rc(o.a),l.rc(n.a))},d.\u0275prov=l.dc({token:d,factory:d.\u0275fac})},QOiP:function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"a",(function(){return s}));const n={PROPERTY:"QueryColumn::Property",RELATION_OF_TYPE:"QueryColumn::RelationOfType",RELATION_TO_TYPE:"QueryColumn::RelationToType"};function s(e){return[n.RELATION_TO_TYPE,n.RELATION_OF_TYPE].indexOf(e._type)&gt;=0}},QihR:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("juWA"),s=i("fXoL");class a{constructor(e){this.timezoneService=e}ngOnInit(){var e=this.timezoneService.formattedDatetimeComponents(this.dateTimeValue);this.date=e[0],this.time=e[1]}}a.\u0275fac=function(e){return new(e||a)(s.hc(n.a))},a.\u0275cmp=s.bc({type:a,selectors:[["op-date-time"]],inputs:{dateTimeValue:"dateTimeValue"},decls:5,vars:4,consts:[[3,"title"],[3,"textContent"]],template:function(e,t){1&amp;e&amp;&amp;(s.nc(0,"span",0),s.ic(1,"span",1),s.nc(2,"span"),s.cd(3,"\xa0"),s.mc(),s.ic(4,"span",1),s.mc()),2&amp;e&amp;&amp;(s.Gc("title","",t.date," ",t.time,""),s.Tb(1),s.Dc("textContent",t.date),s.Tb(3),s.Dc("textContent",t.time))},encapsulation:2})},Qs0b:function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"a",(function(){return s}));const n="https://www.openproject.org/enterprise-edition/?op_edtion=community-edition",s="https://www.openproject.org/enterprise-demo/"},R9pB:function(e,t,i){"use strict";function n(e=16){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i="";for(let n of new Array(e))i+=t.charAt(Math.floor(Math.random()*t.length));return i}i.d(t,"a",(function(){return n}))},RGDJ:function(e,t,i){"use strict";var n;i.d(t,"a",(function(){return n})),function(e){e.backgroundClass=function(e,t){return`__hl_background_${e}_${t}`},e.inlineClass=function(e,t){return`__hl_inline_${e}_${t}`},e.colorClass=function(e,t){return e?`__hl_inline_color_${t}_text`:`__hl_inline_color_${t}_dot`},e.overdueDate=function(e){return 0===e?"__hl_date_due_today":e&lt;=-1?"__hl_date_overdue":"__hl_date_not_overdue"},e.isBright=function(e,t,i){const n=`--hl-${t}-${i}-dark`;return""!==e.getPropertyValue(n)}}(n||(n={}))},"RN/J":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("7ond"),s=i("fXoL");class a{constructor(e,t){this.el=e,this.focusHelper=t,this.condition=!0}ngAfterContentInit(){this.condition&amp;&amp;setTimeout(()=&gt;{this.focusHelper.focusElement(jQuery(this.el.nativeElement))},100)}}a.\u0275fac=function(e){return new(e||a)(s.hc(s.q),s.hc(n.a))},a.\u0275dir=s.cc({type:a,selectors:[["","autoFocus",""]],inputs:{condition:["autoFocus-condition","condition"]}})},RWlv:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("Mo6U");class s extends n.a{}},RhL0:function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return s}));class n{constructor(){this.filterMap={}}add(e,t,i){return this.filterMap[e]={operator:t,values:i},this}remove(e){delete this.filterMap[e]}toFilterObject(e){let t={};return e.forEach(e=&gt;{_.each(e,(e,i)=&gt;{t[i]=e})}),t}merge(e,...t){const i=_.pickBy(this.toFilterObject(e),(e,i)=&gt;t.includes(i));this.filterMap=Object.assign(Object.assign({},this.filterMap),i)}get filters(){let e=[];return _.each(this.filterMap,(t,i)=&gt;{e.push({[i]:t})}),e}toJson(){return JSON.stringify(this.filters)}toParams(e={}){let t=[];t=this.filters.map(e=&gt;this.serializeFilter(e));let i=Object.assign({filters:`[${t.join(",")}]`},e);return new URLSearchParams(i).toString()}clone(){let e=new n;return this.filters.forEach(t=&gt;{Object.keys(t).forEach(i=&gt;{e.add(i,t[i].operator,t[i].values)})}),e}serializeFilter(e){let t,i;i=Object.keys(e);let n=i[0],s=e[n];return t=`{"${n}":{"operator":"${s.operator}","values":[${s.values.map(e=&gt;this.serializeFilterValue(e)).join(",")}]}}`,t}serializeFilterValue(e){return`"${e}"`}}function s(e,t,i){return(new n).add(e,t,i)}},"Rky/":function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));i("72oW");var n=i("B4Ei"),s=i("pL6k"),a=i("AEvm"),r=i("fXoL");const o=["embeddedTable"];class c extends a.a{constructor(e){super(),this.queryUrlParamsHelper=e,this.hidden=!1}refreshTable(){this.embeddedTable.isInitialized&amp;&amp;this.embeddedTable.loadQuery(!0,!1)}handleQueryLoaded(e){if(!(this.query instanceof n.a))return;const t=this.projectValuesCount(this.query),i=this.projectValuesCount(e);null!==t&amp;&amp;null===i&amp;&amp;(this.hidden=!0),t&amp;&amp;i&amp;&amp;t&gt;0&amp;&amp;0===i&amp;&amp;(this.hidden=!0)}projectValuesCount(e){const t=e.filters.find(e=&gt;"project"===e.id);return t?t.values.length:null}buildQueryProps(){return this.query instanceof n.a?this.queryUrlParamsHelper.buildV3GetQueryFromQueryResource(this.query,{valid_subset:!0},{id:this.workPackage.id}):this.query}}c.\u0275fac=function(e){return new(e||c)(r.hc(s.a))},c.\u0275dir=r.cc({type:c,viewQuery:function(e,t){var i;(1&amp;e&amp;&amp;r.hd(o,!0),2&amp;e)&amp;&amp;(r.Pc(i=r.wc())&amp;&amp;(t.embeddedTable=i.first))},features:[r.Qb]})},RnhZ:function(e,t,i){var n={"./af":"K/tc","./af.js":"K/tc","./ar":"jnO4","./ar-dz":"o1bE","./ar-dz.js":"o1bE","./ar-kw":"Qj4J","./ar-kw.js":"Qj4J","./ar-ly":"HP3h","./ar-ly.js":"HP3h","./ar-ma":"CoRJ","./ar-ma.js":"CoRJ","./ar-sa":"gjCT","./ar-sa.js":"gjCT","./ar-tn":"bYM6","./ar-tn.js":"bYM6","./ar.js":"jnO4","./az":"SFxW","./az.js":"SFxW","./be":"H8ED","./be.js":"H8ED","./bg":"hKrs","./bg.js":"hKrs","./bm":"p/rL","./bm.js":"p/rL","./bn":"kEOa","./bn.js":"kEOa","./bo":"0mo+","./bo.js":"0mo+","./br":"aIdf","./br.js":"aIdf","./bs":"JVSJ","./bs.js":"JVSJ","./ca":"1xZ4","./ca.js":"1xZ4","./cs":"PA2r","./cs.js":"PA2r","./cv":"A+xa","./cv.js":"A+xa","./cy":"l5ep","./cy.js":"l5ep","./da":"DxQv","./da.js":"DxQv","./de":"tGlX","./de-at":"s+uk","./de-at.js":"s+uk","./de-ch":"u3GI","./de-ch.js":"u3GI","./de.js":"tGlX","./dv":"WYrj","./dv.js":"WYrj","./el":"jUeY","./el.js":"jUeY","./en-SG":"zavE","./en-SG.js":"zavE","./en-au":"Dmvi","./en-au.js":"Dmvi","./en-ca":"OIYi","./en-ca.js":"OIYi","./en-gb":"Oaa7","./en-gb.js":"Oaa7","./en-ie":"4dOw","./en-ie.js":"4dOw","./en-il":"czMo","./en-il.js":"czMo","./en-nz":"b1Dy","./en-nz.js":"b1Dy","./eo":"Zduo","./eo.js":"Zduo","./es":"iYuL","./es-do":"CjzT","./es-do.js":"CjzT","./es-us":"Vclq","./es-us.js":"Vclq","./es.js":"iYuL","./et":"7BjC","./et.js":"7BjC","./eu":"D/JM","./eu.js":"D/JM","./fa":"jfSC","./fa.js":"jfSC","./fi":"gekB","./fi.js":"gekB","./fo":"ByF4","./fo.js":"ByF4","./fr":"nyYc","./fr-ca":"2fjn","./fr-ca.js":"2fjn","./fr-ch":"Dkky","./fr-ch.js":"Dkky","./fr.js":"nyYc","./fy":"cRix","./fy.js":"cRix","./ga":"USCx","./ga.js":"USCx","./gd":"9rRi","./gd.js":"9rRi","./gl":"iEDd","./gl.js":"iEDd","./gom-latn":"DKr+","./gom-latn.js":"DKr+","./gu":"4MV3","./gu.js":"4MV3","./he":"x6pH","./he.js":"x6pH","./hi":"3E1r","./hi.js":"3E1r","./hr":"S6ln","./hr.js":"S6ln","./hu":"WxRl","./hu.js":"WxRl","./hy-am":"1rYy","./hy-am.js":"1rYy","./id":"UDhR","./id.js":"UDhR","./is":"BVg3","./is.js":"BVg3","./it":"bpih","./it-ch":"bxKX","./it-ch.js":"bxKX","./it.js":"bpih","./ja":"B55N","./ja.js":"B55N","./jv":"tUCv","./jv.js":"tUCv","./ka":"IBtZ","./ka.js":"IBtZ","./kk":"bXm7","./kk.js":"bXm7","./km":"6B0Y","./km.js":"6B0Y","./kn":"PpIw","./kn.js":"PpIw","./ko":"Ivi+","./ko.js":"Ivi+","./ku":"JCF/","./ku.js":"JCF/","./ky":"lgnt","./ky.js":"lgnt","./lb":"RAwQ","./lb.js":"RAwQ","./lo":"sp3z","./lo.js":"sp3z","./lt":"JvlW","./lt.js":"JvlW","./lv":"uXwI","./lv.js":"uXwI","./me":"KTz0","./me.js":"KTz0","./mi":"aIsn","./mi.js":"aIsn","./mk":"aQkU","./mk.js":"aQkU","./ml":"AvvY","./ml.js":"AvvY","./mn":"lYtQ","./mn.js":"lYtQ","./mr":"Ob0Z","./mr.js":"Ob0Z","./ms":"6+QB","./ms-my":"ZAMP","./ms-my.js":"ZAMP","./ms.js":"6+QB","./mt":"G0Uy","./mt.js":"G0Uy","./my":"honF","./my.js":"honF","./nb":"bOMt","./nb.js":"bOMt","./ne":"OjkT","./ne.js":"OjkT","./nl":"+s0g","./nl-be":"2ykv","./nl-be.js":"2ykv","./nl.js":"+s0g","./nn":"uEye","./nn.js":"uEye","./pa-in":"8/+R","./pa-in.js":"8/+R","./pl":"jVdC","./pl.js":"jVdC","./pt":"8mBD","./pt-br":"0tRk","./pt-br.js":"0tRk","./pt.js":"8mBD","./ro":"lyxo","./ro.js":"lyxo","./ru":"lXzo","./ru.js":"lXzo","./sd":"Z4QM","./sd.js":"Z4QM","./se":"//9w","./se.js":"//9w","./si":"7aV9","./si.js":"7aV9","./sk":"e+ae","./sk.js":"e+ae","./sl":"gVVK","./sl.js":"gVVK","./sq":"yPMs","./sq.js":"yPMs","./sr":"zx6S","./sr-cyrl":"E+lV","./sr-cyrl.js":"E+lV","./sr.js":"zx6S","./ss":"Ur1D","./ss.js":"Ur1D","./sv":"X709","./sv.js":"X709","./sw":"dNwA","./sw.js":"dNwA","./ta":"PeUW","./ta.js":"PeUW","./te":"XLvN","./te.js":"XLvN","./tet":"V2x9","./tet.js":"V2x9","./tg":"Oxv6","./tg.js":"Oxv6","./th":"EOgW","./th.js":"EOgW","./tl-ph":"Dzi0","./tl-ph.js":"Dzi0","./tlh":"z3Vd","./tlh.js":"z3Vd","./tr":"DoHr","./tr.js":"DoHr","./tzl":"z1FC","./tzl.js":"z1FC","./tzm":"wQk9","./tzm-latn":"tT3J","./tzm-latn.js":"tT3J","./tzm.js":"wQk9","./ug-cn":"YRex","./ug-cn.js":"YRex","./uk":"raLr","./uk.js":"raLr","./ur":"UpQW","./ur.js":"UpQW","./uz":"Loxo","./uz-latn":"AQ68","./uz-latn.js":"AQ68","./uz.js":"Loxo","./vi":"KSF8","./vi.js":"KSF8","./x-pseudo":"/X5v","./x-pseudo.js":"/X5v","./yo":"fzPg","./yo.js":"fzPg","./zh-cn":"XDpg","./zh-cn.js":"XDpg","./zh-hk":"SatO","./zh-hk.js":"SatO","./zh-tw":"kOpN","./zh-tw.js":"kOpN"};function s(e){var t=a(e);return i(t)}function a(e){if(!i.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}s.keys=function(){return Object.keys(n)},s.resolve=a,e.exports=s,s.id="RnhZ"},RuUM:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i("wZYP"),s=i("d/TE"),a=i("XNiG"),r=i("qc15"),o=i("fXoL");class c{constructor(e,t,i){this.I18n=e,this.workPackageNotificationService=t,this.NotificationsService=i,this.quoteEvents=new a.a}createComment(e,t){return e.addComment({comment:t},{"Content-Type":"application/json; charset=UTF-8"}).catch(t=&gt;this.errorAndReject(t,e))}updateComment(e,t){JSON.stringify({comment:t});return e.update({comment:t},{"Content-Type":"application/json; charset=UTF-8"}).then(e=&gt;(this.NotificationsService.addSuccess(this.I18n.t("js.work_packages.comment_updated")),e)).catch(e=&gt;this.errorAndReject(e))}errorAndReject(e,t){return this.workPackageNotificationService.handleRawError(e,t),Promise.reject(e)}}c.\u0275fac=function(e){return new(e||c)(o.rc(n.a),o.rc(r.a),o.rc(s.a))},c.\u0275prov=o.dc({token:c,factory:c.\u0275fac})},S2zE:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i("uSJ+"),s=i("ug4p"),a=i("itXk"),r=i("AEvm"),o=i("fXoL"),c=i("ofXK");function l(e,t){if(1&amp;e&amp;&amp;o.ic(0,"span",1),2&amp;e){const e=o.xc();o.Dc("textContent",e.count)}}class d extends r.a{constructor(e,t){super(),this.wpCacheService=e,this.wpRelations=t,this.count=0}ngOnInit(){this.wpRelations.require(this.wpId.toString()),Object(a.a)(this.wpRelations.state(this.wpId.toString()).values$(),this.wpCacheService.loadWorkPackage(this.wpId.toString()).values$()).pipe(this.untilDestroyed()).subscribe(([e,t])=&gt;{let i=_.size(e),n=_.size(t.children);this.count=i+n})}}d.\u0275fac=function(e){return new(e||d)(o.hc(s.a),o.hc(n.a))},d.\u0275cmp=o.bc({type:d,selectors:[["wp-relations-count"]],inputs:{wpId:"wpId"},features:[o.Qb],decls:1,vars:1,consts:[["class","wp-tabs-count",3,"textContent",4,"ngIf"],[1,"wp-tabs-count",3,"textContent"]],template:function(e,t){1&amp;e&amp;&amp;o.ad(0,l,1,1,"span",0),2&amp;e&amp;&amp;o.Dc("ngIf",t.count&gt;0)},directives:[c.q],encapsulation:2})},SIjI:function(e,t,i){"use strict";i.d(t,"a",(function(){return _}));var n=i("fXoL"),s=(i("ii2/"),i("cd/7")),a=i("Jui0"),r=i("RGDJ"),o=i("iB+3"),c=i("eyhC"),l=i("WW/2"),d=i("wZYP"),u=i("AEvm"),h=i("ofXK"),p=i("kor4"),m=i("N5AO"),g=i("711n"),f=i("80WE"),b=i("0loS"),v=i("K8b8"),w=i("u8Ab");const y=function(e){return{"-show":e}};function k(e,t){if(1&amp;e){const e=n.oc();n.nc(0,"a",7),n.vc("accessibleClick",(function(){n.Sc(e);const t=n.xc();return t.onRemoved(t.workPackage)})),n.ic(1,"op-icon",8),n.mc()}if(2&amp;e){const e=n.xc();n.Dc("ngClass",n.Ic(2,y,e.workPackage.isNew))("title",e.text.removeCard)}}function C(e,t){if(1&amp;e){const e=n.oc();n.nc(0,"a",9),n.vc("accessibleClick",(function(){n.Sc(e);const t=n.xc();return t.openSplitScreen(t.workPackage)})),n.ic(1,"op-icon",10),n.mc()}if(2&amp;e){const e=n.xc();n.Dc("title",e.text.detailsView)}}function x(e,t){if(1&amp;e&amp;&amp;(n.nc(0,"edit-form",11),n.nc(1,"div",12),n.ic(2,"editable-attribute-field",13),n.ic(3,"editable-attribute-field",14),n.mc(),n.mc()),2&amp;e){const e=n.xc();n.Dc("resource",e.workPackage)("inEditMode",e.workPackage.isNew),n.Tb(2),n.Dc("resource",e.workPackage)("wrapperClasses","work-packages--type-selector")("fieldName","type"),n.Tb(1),n.Dc("resource",e.workPackage)}}function j(e,t){if(1&amp;e&amp;&amp;n.ic(0,"img",22),2&amp;e){const e=n.xc(2);n.Dc("src",e.bcfSnapshotPath(e.workPackage),n.Vc)}}function S(e,t){if(1&amp;e&amp;&amp;n.ic(0,"wp-status-button",23),2&amp;e){const e=n.xc(2);n.Dc("workPackage",e.workPackage)}}function T(e,t){if(1&amp;e&amp;&amp;n.ic(0,"user-avatar",24),2&amp;e){const e=n.xc(2);n.Dc("user",e.workPackage.assignee)}}const P=function(e){return{workPackageId:e}};function I(e,t){if(1&amp;e&amp;&amp;(n.nc(0,"div",15),n.ic(1,"span",16),n.nc(2,"a",17),n.cd(3),n.mc(),n.ic(4,"span",18),n.ad(5,j,1,1,"img",19),n.ad(6,S,1,1,"wp-status-button",20),n.ad(7,T,1,1,"user-avatar",21),n.mc()),2&amp;e){const e=n.xc();n.Tb(1),n.Dc("textContent",e.wpTypeAttribute(e.workPackage))("ngClass",e.typeHighlightingClass(e.workPackage)),n.Tb(1),n.Dc("uiParams",n.Ic(9,P,e.workPackage.id))("ngClass",e.uiStateLinkClass),n.Tb(1),n.ed(" #",e.workPackage.id," "),n.Tb(1),n.Dc("textContent",e.wpSubject(e.workPackage)),n.Tb(1),n.Dc("ngIf",e.cardCoverImageShown(e.workPackage)),n.Tb(1),n.Dc("ngIf",e.showStatusButton),n.Tb(1),n.Dc("ngIf",e.workPackage.assignee)}}class _ extends u.a{constructor(e,t,i,a,r,o){super(),this.pathHelper=e,this.I18n=t,this.$state=i,this.wpTableSelection=a,this.cardView=r,this.cdRef=o,this.showInfoButton=!1,this.showStatusButton=!0,this.showRemoveButton=!1,this.highlightingMode="inline",this.draggable=!1,this.orientation="vertical",this.shrinkOnMobile=!1,this.onRemove=new n.s,this.uiStateLinkClass=s.c,this.text={removeCard:this.I18n.t("js.card.remove_from_list"),detailsView:this.I18n.t("js.button_open_details")}}ngOnInit(){this.wpTableSelection.selection$().pipe(this.untilDestroyed()).subscribe(()=&gt;{this.cdRef.detectChanges()})}classIdentifier(e){return this.cardView.classIdentifier(e)}openSplitScreen(e){let t=this.classIdentifier(e);this.wpTableSelection.setSelection(e.id,this.cardView.findRenderedCard(t)),this.$state.go(".details",{workPackageId:e.id})}cardClasses(){let e=this.isSelected(this.workPackage)?s.b:"";return e+=this.draggable?" -draggable":"",e+=this.workPackage.isNew?" -new":"",e+=" wp-card-"+this.workPackage.id,e+=" -"+this.orientation,e+=this.shrinkOnMobile?" -shrink":"",e}wpTypeAttribute(e){return e.type.name}wpSubject(e){return e.subject}cardHighlightingClass(e){return this.cardHighlighting(e)}typeHighlightingClass(e){return this.attributeHighlighting("type",e)}onRemoved(e){this.onRemove.emit(e)}cardCoverImageShown(e){return null!==this.bcfSnapshotPath(e)}bcfSnapshotPath(e){return e.bcfViewpoints&amp;&amp;e.bcfViewpoints.length&gt;0?e.bcfViewpoints[0].href+"/snapshot":null}isSelected(e){return this.wpTableSelection.isSelected(e.id)}cardHighlighting(e){return["status","priority","type"].includes(this.highlightingMode)?r.a.backgroundClass(this.highlightingMode,e[this.highlightingMode].id):""}attributeHighlighting(e,t){return r.a.inlineClass(e,t.type.id)}}_.\u0275fac=function(e){return new(e||_)(n.hc(a.a),n.hc(d.a),n.hc(o.G),n.hc(c.a),n.hc(l.a),n.hc(n.i))},_.\u0275cmp=n.bc({type:_,selectors:[["wp-single-card"]],inputs:{workPackage:"workPackage",showInfoButton:"showInfoButton",showStatusButton:"showStatusButton",showRemoveButton:"showRemoveButton",highlightingMode:"highlightingMode",draggable:"draggable",orientation:"orientation",shrinkOnMobile:"shrinkOnMobile"},outputs:{onRemove:"onRemove"},features:[n.Qb],decls:7,vars:6,consts:[[1,"wp-card",3,"ngClass"],[1,"wp-card--highlighting",3,"ngClass"],[1,"wp-card--inline-buttons","hidden-for-mobile"],["class","wp-card--inline-cancel-button -no-decoration",3,"ngClass","title","accessibleClick",4,"ngIf"],["class","wp-card--details-button -no-decoration",3,"title","accessibleClick",4,"ngIf"],[3,"resource","inEditMode",4,"ngIf"],["class","wp-card--content",4,"ngIf"],[1,"wp-card--inline-cancel-button","-no-decoration",3,"ngClass","title","accessibleClick"],["icon-classes","icon icon-close"],[1,"wp-card--details-button","-no-decoration",3,"title","accessibleClick"],["icon-classes","icon icon-info2"],[3,"resource","inEditMode"],[1,"wp-card--content","-new"],[1,"wp-card--type",3,"resource","wrapperClasses","fieldName"],["fieldName","subject",1,"wp-card--subject","-bold",3,"resource"],[1,"wp-card--content"],[1,"wp-card--type",3,"textContent","ngClass"],["uiSref","work-packages.show",1,"wp-card--id",3,"uiParams","ngClass"],[1,"wp-card--subject",3,"textContent"],["class","wp-card--cover-image",3,"src",4,"ngIf"],["class","wp-card--status",3,"workPackage",4,"ngIf"],["data-class-list","avatar-mini","class","wp-card--assignee",3,"user",4,"ngIf"],[1,"wp-card--cover-image",3,"src"],[1,"wp-card--status",3,"workPackage"],["data-class-list","avatar-mini",1,"wp-card--assignee",3,"user"]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"div",0),n.ic(1,"div",1),n.nc(2,"div",2),n.ad(3,k,2,4,"a",3),n.ad(4,C,2,1,"a",4),n.mc(),n.ad(5,x,4,6,"edit-form",5),n.ad(6,I,8,11,"div",6),n.mc()),2&amp;e&amp;&amp;(n.Dc("ngClass",t.cardClasses()),n.Tb(1),n.Dc("ngClass",t.cardHighlightingClass(t.workPackage)),n.Tb(2),n.Dc("ngIf",t.workPackage.isNew||t.showRemoveButton),n.Tb(1),n.Dc("ngIf",!t.workPackage.isNew&amp;&amp;t.showInfoButton),n.Tb(1),n.Dc("ngIf",t.workPackage.isNew),n.Tb(1),n.Dc("ngIf",!t.workPackage.isNew))},directives:[h.n,h.q,p.a,m.a,g.a,f.a,b.AnchorUISref,b.UISref,v.a,w.a],styles:['.cdk-drag-preview[_ngcontent-%COMP%]{box-shadow:0 0 10px 5px rgba(0,0,0,.1);z-index:10000!important}.wp-card[_ngcontent-%COMP%]{display:flex;-webkit-user-select:none;user-select:none;width:100%;border:1px solid var(--widget-box-block-border-color);border-radius:2px;padding:10px;position:relative;box-shadow:1px 1px 3px 0 #d3d3d3;background:var(--body-background);font-size:var(--card-font-size);max-width:400px}.wp-card[_ngcontent-%COMP%]:hover{box-shadow:0 0 10px #d3d3d3}.wp-card.-new[_ngcontent-%COMP%]{padding-right:25px}.wp-card.-checked[_ngcontent-%COMP%]{background-color:var(--table-row-highlighting-color)}.wp-card.-horizontal[_ngcontent-%COMP%]{height:100%}.wp-card.-vertical[_ngcontent-%COMP%]{margin-top:10px}.wp-card.-vertical[_ngcontent-%COMP%]:last-of-type{margin-bottom:5px}wp-single-card.gu-transit[_nghost-%COMP%]   .wp-card[_ngcontent-%COMP%]{border:1px dashed var(--primary-color);pointer-events:none}wp-single-card.gu-transit[_nghost-%COMP%]   .wp-card[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{visibility:hidden}.wp-card--content[_ngcontent-%COMP%]:not(.-new){display:grid;grid-template-columns:auto 1fr auto;grid-template-rows:auto auto 1fr auto;grid-row-gap:10px;grid-template-areas:"type type type" "subject subject subject" "image image image" "attributeTag avatar idlink";overflow:hidden;flex-grow:1}.wp-card--content[_ngcontent-%COMP%]:not(.-new)   .wp-card--type[_ngcontent-%COMP%]{grid-area:type}.wp-card--content[_ngcontent-%COMP%]:not(.-new)   .wp-card--subject[_ngcontent-%COMP%]{grid-area:subject;overflow:hidden;text-overflow:ellipsis;-o-text-overflow:ellipsis;-ms-text-overflow:ellipsis}.wp-card--content[_ngcontent-%COMP%]:not(.-new)   .wp-card--assignee[_ngcontent-%COMP%]{grid-area:avatar;place-self:center left}.wp-card--content[_ngcontent-%COMP%]:not(.-new)   .wp-card--id[_ngcontent-%COMP%]{grid-area:idlink;place-self:center right}.wp-card--content[_ngcontent-%COMP%]:not(.-new)   .wp-card--status[_ngcontent-%COMP%]{grid-area:attributeTag;max-width:120px;margin-right:5px;overflow:hidden}.wp-card--content[_ngcontent-%COMP%]:not(.-new)   .wp-card--cover-image[_ngcontent-%COMP%]{grid-area:image;max-height:350px}@media screen and (max-width:679px){.wp-card--content[_ngcontent-%COMP%]:not(.-new)   .wp-card--cover-image[_ngcontent-%COMP%]{max-height:250px}}.wp-card--highlighting[_ngcontent-%COMP%]{width:5px;height:100%;position:absolute;top:0;left:0;border-radius:2px 0 0 2px}.wp-card--inline-buttons[_ngcontent-%COMP%]{position:absolute;right:0;top:5px;opacity:0}.wp-card--inline-buttons.-show[_ngcontent-%COMP%], .wp-card[_ngcontent-%COMP%]:hover   .wp-card--inline-buttons[_ngcontent-%COMP%]{opacity:1}@media only screen and (max-width:679px){.wp-card[_ngcontent-%COMP%]{max-width:none}.wp-card.-shrink[_ngcontent-%COMP%]{border:none;box-shadow:none;padding:15px}}'],changeDetection:0})},SJoB:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("mrSG"),s=i("eyhC"),a=i("iB+3"),r=i("r0MM");class o{constructor(e,t){this.injector=e}get EVENT(){return"dblclick.cardView.card"}get SELECTOR(){return".wp-card"}eventScope(e){return jQuery(e.container.nativeElement)}handleEvent(e,t){let i=jQuery(t.target);if(i.is("a")||i.parent().is("a"))return!0;let n=i.closest("wp-single-card").data("workPackageId");return!n||(this.handleWorkPackage(n),!1)}handleWorkPackage(e){this.$state.go("work-packages.show",{workPackageId:e})}}Object(n.c)([Object(r.a)(),Object(n.e)("design:type",a.G)],o.prototype,"$state",void 0),Object(n.c)([Object(r.a)(),Object(n.e)("design:type",s.a)],o.prototype,"wpTableSelection",void 0)},SKFm:function(e,t,i){"use strict";i.d(t,"a",(function(){return p}));var n=i("mrSG"),s=i("FnNU"),a=i("lJxs"),r=i("XNiG"),o=i("GntA"),c=i("UD+K"),l=i("g1AQ"),d=i("fXoL");class u extends s.a{constructor(){super(),this.name="Changesets",this.changesets=Object(s.g)(),this.initializeMembers()}}class h{constructor(e,t){this.wasNew=!1,this.id=t.id.toString(),this.wasNew=e.pristineResource.isNew,this.resource=t,this.changes=e.changes}}class p extends c.a{constructor(e,t){super(),this.injector=e,this.hook=t,this.comittedChanges=new r.a,this.stateGroup=new u}save(e){return Object(n.b)(this,void 0,void 0,(function*(){const t=yield e.buildRequestPayload(),i=yield e.pristineResource.$links.updateImmediately(t);return i.retainFrom(e.pristineResource),this.onSaved(i),this.complete(e,i)}))}complete(e,t){const i=new h(e,t);return this.comittedChanges.next(i),this.reset(e),i}reset(e){e.clear(),this.clearSome(e.href)}typedState(e){return this.multiState.get(e.href)}edit(e,t){const i=this.multiState.get(e.href),n=this.newChangeset(e,i,t);return i.putValue(n),n}newChangeset(e,t,i){return new(this.hook.call("halResourceChangesetClass",e).pop()||o.a)(e,t,i)}changeFor(e){const t=this.multiState.get(e.href);let i=e;e.state&amp;&amp;(i=e.state.getValueOr(e));let n=t.value;return n&amp;&amp;!n.isEmpty()?n:!n||n.pristineResource!==i||i.hasOwnProperty("lockVersion")&amp;&amp;n.pristineResource.lockVersion
                <i.lockversion?this.edit(i):n}temporaryeditresource(e){const object(s.d)(t,e="" t="Object(s.b)(e.state,this.typedState(e));return">
                 e.pipe(Object(a.a)(([e,t])=&gt;e&amp;&amp;t&amp;&amp;!t.isEmpty()?t.projectedResource:e)))}stopEditing(e){this.multiState.get(e.href).clear()}load(e){return Promise.reject("Loading not applicable for changesets.")}onSaved(e){e.state&amp;&amp;e.push(e)}loadAll(e){return Promise.all(e.map(e=&gt;this.load(e)))}get multiState(){return this.stateGroup.changesets}}p.\u0275fac=function(e){return new(e||p)(d.rc(d.A),d.rc(l.a))},p.\u0275prov=d.dc({token:p,factory:p.\u0275fac})},SU55:function(e,t){!function(e){"use strict";e((function(){e("[data-selected-page].tree-menu--container").each((function(t,i){let n=e(i).data("selected-page");n&amp;&amp;e("[slug="+n+"]",i).toggleClass("-selected",!0)})),e(".pages-hierarchy.-with-hierarchy .tree-menu--hierarchy-span").on("click keypress",(function(t){return"keypress"===t.type&amp;&amp;13!==t.which||e(t.target).closest("ul.-with-hierarchy &gt; li").toggleClass("-hierarchy-collapsed -hierarchy-expanded"),!1}))}))}(jQuery)},SgrZ:function(e,t,i){"use strict";i.d(t,"a",(function(){return g}));i("AA01");var n=i("59tY"),s=i("wZYP"),a=i("Y41n"),r=i("juWA"),o=i("Hg4z"),c=i("fXoL"),l=i("ecJW"),d=i("3Pt+"),u=i("oUDv"),h=i("ofXK"),p=i("N5AO");function m(e,t){if(1&amp;e&amp;&amp;(c.nc(0,"span",6),c.ic(1,"op-icon",7),c.mc()),2&amp;e){const e=c.xc();c.Ub("data-tooltip",e.timeZoneText)}}class g extends n.a{constructor(e,t){super(e,t),this.I18n=e,this.timezoneService=t,this.shouldFocus=!1,this.filterChanged=new a.a(Object(o.b)(this)),this.text={spacer:this.I18n.t("js.filter.value_spacer")}}get begin(){return this.filter.values[0]}set begin(e){this.filter.values[0]=e||"",this.filterChanged.emit(this.filter)}get end(){return this.filter.values[1]}set end(e){this.filter.values[1]=e||"",this.filterChanged.emit(this.filter)}get lowerBoundary(){return this.begin&amp;&amp;this.timezoneService.isValidISODateTime(this.begin.toString())?this.timezoneService.parseDatetime(this.begin.toString()):null}get upperBoundary(){return this.end&amp;&amp;this.timezoneService.isValidISODateTime(this.end.toString())?this.timezoneService.parseDatetime(this.end.toString()):null}}g.\u0275fac=function(e){return new(e||g)(c.hc(s.a),c.hc(r.a))},g.\u0275cmp=c.bc({type:g,selectors:[["filter-date-times-value"]],inputs:{shouldFocus:"shouldFocus",filter:"filter"},outputs:{filterChanged:"filterChanged"},features:[c.Qb],decls:7,vars:10,consts:[[1,"inline-label",3,"id"],[3,"onChange"],["required","","size","10","type","text",1,"advanced-filters--date-field",3,"ngModel","focus","id","name","ngModelChange"],[1,"advanced-filters--affix",3,"textContent"],["size","10","type","text",1,"advanced-filters--date-field",3,"ngModel","id","name","ngModelChange"],["class","advanced-filters--tooltip-trigger -multiline",4,"ngIf"],[1,"advanced-filters--tooltip-trigger","-multiline"],["icon-classes","icon icon-warning"]],template:function(e,t){1&amp;e&amp;&amp;(c.nc(0,"div",0),c.nc(1,"op-date-picker",1),c.vc("onChange",(function(e){return t.begin=t.isoDateParser(e)})),c.nc(2,"input",2),c.vc("ngModelChange",(function(e){return t.begin=t.isoDateParser(e)})),c.mc(),c.mc(),c.ic(3,"span",3),c.nc(4,"op-date-picker",1),c.vc("onChange",(function(e){return t.end=t.isoDateParser(e)})),c.nc(5,"input",4),c.vc("ngModelChange",(function(e){return t.end=t.isoDateParser(e)})),c.mc(),c.mc(),c.ad(6,m,2,1,"span",5),c.mc()),2&amp;e&amp;&amp;(c.Fc("id","div-values-",t.filter.id,""),c.Tb(2),c.Fc("id","values-",t.filter.id,"-begin"),c.Fc("name","v[",t.filter.id,"]-begin"),c.Dc("ngModel",t.isoDateFormatter(t.begin))("focus",t.shouldFocus),c.Tb(1),c.Dc("textContent",t.text.spacer),c.Tb(2),c.Fc("id","values-",t.filter.id,"-end"),c.Fc("name","v[",t.filter.id,"]-end"),c.Dc("ngModel",t.isoDateFormatter(t.end)),c.Tb(1),c.Dc("ngIf",t.isTimeZoneDifferent))},directives:[l.a,d.c,d.x,d.m,d.p,u.a,h.q,p.a],encapsulation:2})},SqdZ:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");class s{constructor(e,t,i){this.locals=e,this.cdRef=t,this.elementRef=i,this.closeOnEscape=!0,this.closeOnEscapeFunction=this.closeMe,this.closeOnOutsideClick=!0,this.service=this.locals.service,this.closingEvent=new n.s,this.openingEvent=new n.s}ngOnInit(){this.$element=jQuery(this.elementRef.nativeElement)}ngOnDestroy(){this.closingEvent.complete(),this.openingEvent.complete()}onClose(){return this.afterFocusOn&amp;&amp;this.afterFocusOn.focus(),!0}closeMe(e){this.service.close(),e&amp;&amp;(e.stopPropagation(),e.preventDefault())}onOpen(e){this.openingEvent.emit(),this.cdRef.detectChanges()}get afterFocusOn(){return this.$element}}s.\u0275fac=function(e){n.uc()},s.\u0275dir=n.cc({type:s})},Sulb:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i("mrSG"),s=i("2Vo4"),a=i("wZYP"),r=i("sjKJ"),o=i("K247"),c=i("r0MM"),l=i("fXoL");class d{constructor(e,t,i){this.I18n=e,this.injector=t,this.deviceService=i,this.elementMinWidth=11,this.defaultWidth=230,this.localStorageKey="openProject-mainMenuWidth",this.localStorageStateKey="openProject-mainMenuCollapsed",this.global=window,this.htmlNode=document.getElementsByTagName("html")[0],this.mainMenu=jQuery("#main-menu")[0],this.hideElements=jQuery(".can-hide-navigation"),this.titleData=new s.a(""),this.titleData$=this.titleData.asObservable(),this.changeData=new s.a({}),this.changeData$=this.changeData.asObservable()}initializeMenu(){if(!this.mainMenu)return;this.elementWidth=parseInt(window.OpenProject.guardedLocalStorage(this.localStorageKey));const e=window.OpenProject.guardedLocalStorage(this.localStorageStateKey);this.elementWidth?e&amp;&amp;JSON.parse(e)?this.closeMenu():this.setWidth():this.saveWidth(this.mainMenu.offsetWidth);let t=this.injector.get(r.a);(jQuery(document.body).hasClass("controller-my")&amp;&amp;0===this.elementWidth||null===t.id)&amp;&amp;this.saveWidth(this.defaultWidth),this.closeWhenOnMobile()}toggleNavigation(e){if(e&amp;&amp;(e.stopPropagation(),e.preventDefault()),this.showNavigation)this.closeMenu();else if(this.deviceService.isMobile)this.setWidth(window.innerWidth);else{const e=parseInt(window.OpenProject.guardedLocalStorage(this.localStorageKey)),t=e&gt;=this.elementMinWidth?e:this.defaultWidth;this.saveWidth(t)}setTimeout((function(){jQuery('#main-menu [class*="-menu-item"]:visible').first().focus()}),500)}closeMenu(){this.setWidth(0),window.OpenProject.guardedLocalStorage(this.localStorageStateKey,"true"),jQuery(".wp-query-menu--search-input").blur()}closeWhenOnMobile(){this.deviceService.isMobile&amp;&amp;(this.closeMenu(),window.OpenProject.guardedLocalStorage(this.localStorageStateKey,"false"))}saveWidth(e){this.setWidth(e),window.OpenProject.guardedLocalStorage(this.localStorageKey,String(this.elementWidth)),window.OpenProject.guardedLocalStorage(this.localStorageStateKey,String(0===this.elementWidth))}setWidth(e){if(void 0!==e){let t=this.deviceService.isMobile?window.innerWidth-120:window.innerWidth-520;this.elementWidth=e&gt;t?t:e}this.snapBack(),this.setToggleTitle(),this.toggleClassHidden(),this.global.showNavigation=this.showNavigation,this.htmlNode.style.setProperty("--main-menu-width",this.elementWidth+"px");let t=jQuery.Event("change");jQuery("#content-wrapper").on("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",()=&gt;{this.changeData.next(t)})}get showNavigation(){return this.elementWidth&gt;=this.elementMinWidth}snapBack(){this.elementWidth
                 <this.elementminwidth&&(this.elementwidth=0)}settoggletitle(){this.shownavigation?this.toggletitle=this.i18n.t("js.label_hide_project_menu"):this.toggletitle=this.i18n.t("js.label_expand_project_menu"),this.titledata.next(this.toggletitle)}toggleclasshidden(){this.hideelements.toggleclass("hidden-navigation",!this.shownavigation)}}d.\u0275fac=function(e){return 0)},t9ri:function(e,t,i){"use="" n(e){let="" new(e||d)(l.rc(a.a),l.rc(l.a),l.rc(o.a))},d.\u0275prov='l.dc({token:d,factory:d.\u0275fac,providedIn:"root"}),Object(n.c)([Object(c.a)(),Object(n.e)("design:type",r.a)],d.prototype,"currentProject",void' strict";function="" t='e.value||"nullValue";if(e.href)try{t+=e.href.map(e='>
                  e.href).join("-")}catch(i){console.error("Failed to extract group identifier for "+e.value)}return t=t.toLowerCase().replace(/[^a-z0-9]+/g,"-"),`${a(e)}-${t}`}function s(e){let t=e.value;return null===t?"-":t}function a(e){return e._links.groupBy.href.split("/").pop()}function r(e){return`__row-group-${e}`}i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return s})),i.d(t,"a",(function(){return a})),i.d(t,"d",(function(){return r}))},TAxG:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i("fXoL"),s=i("wZYP"),a=(i("AA01"),i("3Pt+")),r=i("oUDv"),o=i("ofXK");function c(e,t){if(1&amp;e&amp;&amp;n.ic(0,"option",4),2&amp;e){const e=n.xc();n.Dc("textContent",e.text.placeholder)}}function l(e,t){if(1&amp;e&amp;&amp;n.ic(0,"option",5),2&amp;e){const e=t.$implicit,i=n.xc();n.Dc("textContent",i.text[e])("ngValue",e)}}class d{constructor(e){this.I18n=e,this.shouldFocus=!1,this.filterChanged=new n.s,this.text={placeholder:this.I18n.t("js.placeholders.selection"),true:this.I18n.t("js.general_text_Yes"),false:this.I18n.t("js.general_text_No")}}get value(){return this.filter.values[0]}set value(e){this.filter.values[0]=e,this.filterChanged.emit(this.filter)}get hasNoValue(){return _.isEmpty(this.filter.values)}get availableOptions(){return[!0,!1]}}d.\u0275fac=function(e){return new(e||d)(n.hc(s.a))},d.\u0275cmp=n.bc({type:d,selectors:[["filter-boolean-value"]],inputs:{shouldFocus:"shouldFocus",filter:"filter"},outputs:{filterChanged:"filterChanged"},decls:4,vars:7,consts:[[3,"id"],[1,"advanced-filters--select-field",3,"ngModel","focus","id","name","ngModelChange"],["value","","disabled","",3,"textContent",4,"ngIf"],[3,"textContent","ngValue",4,"ngFor","ngForOf"],["value","","disabled","",3,"textContent"],[3,"textContent","ngValue"]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"div",0),n.nc(1,"select",1),n.vc("ngModelChange",(function(e){return t.value=e})),n.ad(2,c,1,1,"option",2),n.ad(3,l,1,2,"option",3),n.mc(),n.mc()),2&amp;e&amp;&amp;(n.Fc("id","div-values-",t.filter.name,""),n.Tb(1),n.Fc("id","values-",t.filter.name,""),n.Fc("name","v[",t.filter.name,"]"),n.Dc("ngModel",t.value)("focus",t.shouldFocus),n.Tb(1),n.Dc("ngIf",t.hasNoValue),n.Tb(1),n.Dc("ngForOf",t.availableOptions))},directives:[a.y,a.m,a.p,r.a,o.q,o.p,a.r,a.B],encapsulation:2})},TKcc:function(e,t,i){var n={"./apl/apl.js":["4kmW",0,26],"./asciiarmor/asciiarmor.js":["Jt+K",0,27],"./asn.1/asn.1.js":["0OHD",0,28],"./asterisk/asterisk.js":["yGjk",0,29],"./brainfuck/brainfuck.js":["oF4/",0,30],"./clike/clike.js":["S6bl",0,5],"./clojure/clojure.js":["LA1u",0,31],"./cmake/cmake.js":["qE+Q",0,32],"./cobol/cobol.js":["JNJg",0,33],"./coffeescript/coffeescript.js":["oL3q",0,1],"./commonlisp/commonlisp.js":["kmAK",0,34],"./crystal/crystal.js":["JRJP",0,35],"./css/css.js":["ewDg",0,3],"./cypher/cypher.js":["vW+e",0,36],"./d/d.js":["zRyg",0,37],"./dart/dart.js":["6q/U",0,5,38],"./diff/diff.js":["3fnu",0,39],"./django/django.js":["SzTn",0,2,3,1,17],"./dockerfile/dockerfile.js":["R6x9",0,1,40],"./dtd/dtd.js":["/YIB",0,41],"./dylan/dylan.js":["PLH4",0,42],"./ebnf/ebnf.js":["AvIz",0,43],"./ecl/ecl.js":["rSpl",0,44],"./eiffel/eiffel.js":["t86p",0,45],"./elm/elm.js":["Rba3",0,46],"./erlang/erlang.js":["9RTS",0,47],"./factor/factor.js":["yv4w",0,1,48],"./fcl/fcl.js":["xvvs",0,49],"./forth/forth.js":["CDkR",0,50],"./fortran/fortran.js":["UYub",0,51],"./gas/gas.js":["Upog",0,52],"./gfm/gfm.js":["RKCW",0,7,1,53],"./gherkin/gherkin.js":["tkAH",0,54],"./go/go.js":["T/QY",0,55],"./groovy/groovy.js":["X7TR",0,56],"./haml/haml.js":["c+b1",0,2,3,1,18],"./handlebars/handlebars.js":["4d6s",0,1],"./haskell-literate/haskell-literate.js":["INem",0,1,57],"./haskell/haskell.js":["0+DK",0,1],"./haxe/haxe.js":["We/1",0,58],"./htmlembedded/htmlembedded.js":["dLt8",0,2,3,1,19],"./htmlmixed/htmlmixed.js":["1p+/",0,2,3,24],"./http/http.js":["scEK",0,59],"./idl/idl.js":["HqpV",0,60],"./javascript/javascript.js":["+dQi",0,2],"./jinja2/jinja2.js":["ToA7",0,61],"./jsx/jsx.js":["onn/",0,2,25],"./julia/julia.js":["NGrM",0,62],"./livescript/livescript.js":["5RX+",0,63],"./lua/lua.js":["jrMQ",0,64],"./markdown/markdown.js":["lZu9",0,7],"./mathematica/mathematica.js":["ztbM",0,65],"./mbox/mbox.js":["6mA5",0,66],"./mirc/mirc.js":["o5kb",0,67],"./mllike/mllike.js":["NU+Z",0,68],"./modelica/modelica.js":["lQiH",0,69],"./mscgen/mscgen.js":["6gTk",0,70],"./mumps/mumps.js":["Q7su",0,71],"./nginx/nginx.js":["srmC",0,72],"./nsis/nsis.js":["bYLO",0,1,73],"./ntriples/ntriples.js":["PWBO",0,74],"./octave/octave.js":["mybg",0,75],"./oz/oz.js":["yhmh",0,76],"./pascal/pascal.js":["lB9V",0,77],"./pegjs/pegjs.js":["ZGb1",0,2,78],"./perl/perl.js":["kG+r",0,79],"./php/php.js":["RNWO",0,2,3,5,20],"./pig/pig.js":["860+",0,80],"./powershell/powershell.js":["naPG",0,81],"./properties/properties.js":["3Fvf",0,82],"./protobuf/protobuf.js":["cHwl",0,83],"./pug/pug.js":["W+/v",0,2,3,6],"./puppet/puppet.js":["cwoo",0,84],"./python/python.js":["25Eh",0,1],"./q/q.js":["MiqB",0,85],"./r/r.js":["kD6b",0,86],"./rpm/rpm.js":["Qs4+",0,87],"./rst/rst.js":["jIQM",0,1,88],"./ruby/ruby.js":["hTYL",0,1],"./rust/rust.js":["sY4N",0,1,89],"./sas/sas.js":["Sh3j",0,90],"./sass/sass.js":["G2Pi",0,3,1],"./scheme/scheme.js":["8wdy",0,91],"./shell/shell.js":["AvDn",0,92],"./sieve/sieve.js":["1dRh",0,93],"./slim/slim.js":["VI2i",0,2,3,1,21],"./smalltalk/smalltalk.js":["n4Nj",0,94],"./smarty/smarty.js":["QWhe",0,95],"./solr/solr.js":["xhF3",0,96],"./soy/soy.js":["vH+N",0,2,3,22],"./sparql/sparql.js":["++e5",0,97],"./spreadsheet/spreadsheet.js":["bEWP",0,98],"./sql/sql.js":["/9rB",0,99],"./stex/stex.js":["+NIl",0,1],"./stylus/stylus.js":["dtKC",0,8],"./swift/swift.js":["wOIU",0,100],"./tcl/tcl.js":["BEBj",0,101],"./textile/textile.js":["TD3l",0,102],"./tiddlywiki/tiddlywiki.js":["9+NH",0,103],"./tiki/tiki.js":["Km7L",0,104],"./toml/toml.js":["0sou",0,105],"./tornado/tornado.js":["xbNY",0,2,3,1,23],"./troff/troff.js":["s1o1",0,106],"./ttcn-cfg/ttcn-cfg.js":["hmTv",0,107],"./ttcn/ttcn.js":["TYrp",0,108],"./turtle/turtle.js":["P3N9",0,109],"./twig/twig.js":["SII/",0,1,110],"./vb/vb.js":["Kr55",0,111],"./vbscript/vbscript.js":["axah",0,112],"./velocity/velocity.js":["/kYp",0,113],"./verilog/verilog.js":["m2bc",0,114],"./vhdl/vhdl.js":["PP56",0,115],"./vue/vue.js":["aT2M",0,2,3,8,6,1,116],"./webidl/webidl.js":["PVgs",0,117],"./xml/xml.js":["1eCo",0,118],"./xquery/xquery.js":["bJEP",0,119],"./yacas/yacas.js":["WThJ",0,120],"./yaml-frontmatter/yaml-frontmatter.js":["0gIM",0,1,121],"./yaml/yaml.js":["ztCB",0,1],"./z80/z80.js":["dRHf",0,122]};function s(e){if(!i.o(n,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],s=t[0];return Promise.all(t.slice(1).map(i.e)).then((function(){return i.t(s,7)}))}s.keys=function(){return Object.keys(n)},s.id="TKcc",e.exports=s},TM9v:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));const n=[{key:"log_time",link:"logTime",resource:"workPackage"},{key:"change_project",icon:"icon-move",link:"move",resource:"workPackage"},{key:"copy",link:"copy",resource:"workPackage"},{key:"delete",link:"delete",resource:"workPackage"},{key:"export-pdf",link:"pdf",resource:"workPackage"},{key:"export-atom",link:"atom",resource:"workPackage"}]},TTfU:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("kTsZ"),s=i("Jui0"),a=i("fXoL");class r{constructor(e,t){this.halResourceService=e,this.pathHelper=t}load(e){const t=this.pathHelper.api.v3.users.id(e).toString();return this.halResourceService.get(t).toPromise()}}r.\u0275fac=function(e){return new(e||r)(a.rc(n.a),a.rc(s.a))},r.\u0275prov=a.dc({token:r,factory:r.\u0275fac})},Tac9:function(e,t,i){"use strict";i.d(t,"a",(function(){return w}));var n=i("IaZ+"),s=i("TrTv"),a=i("SqdZ"),r=i("wZYP"),o=i("fXoL"),c=i("ofXK"),l=i("3Pt+");const d=["selectedPageInput"];function u(e,t){if(1&amp;e){const e=o.oc();o.nc(0,"a",18),o.nc(1,"i",19),o.vc("click",(function(t){return o.Sc(e),o.xc().closeMe(t)})),o.mc(),o.mc()}if(2&amp;e){const e=o.xc();o.Tb(1),o.Ub("title",e.text.close_popup)}}class h extends a.a{constructor(e,t,i,n){super(t,i,e),this.elementRef=e,this.locals=t,this.cdRef=i,this.I18n=n,this.changed=!1,this.showClose=!0,this.closeOnEscape=!0,this.closeOnOutsideClick=!0,this.page="",this.text={title:this.I18n.t("js.editor.macro.wiki_page_include.button"),hint:this.I18n.t("js.editor.macro.wiki_page_include.hint"),page:this.I18n.t("js.editor.macro.wiki_page_include.page"),button_save:this.I18n.t("js.button_save"),button_cancel:this.I18n.t("js.button_cancel"),close_popup:this.I18n.t("js.close_popup_title")},this.selectedPage=this.page=this.locals.page}applyAndClose(e){this.changed=!0,this.page=this.selectedPage,this.closeMe(e)}ngAfterViewInit(){this.selectedPageInput.nativeElement.focus()}}h.\u0275fac=function(e){return new(e||h)(o.hc(o.q),o.hc(n.a),o.hc(o.i),o.hc(r.a))},h.\u0275cmp=o.bc({type:h,selectors:[["ng-component"]],viewQuery:function(e,t){var i;(1&amp;e&amp;&amp;o.Yc(d,!0),2&amp;e)&amp;&amp;(o.Pc(i=o.wc())&amp;&amp;(t.selectedPageInput=i.first))},features:[o.Qb],decls:22,vars:10,consts:[[1,"op-modal--portal","op-modal--macro-modal","ngdialog-theme-openproject"],["tabindex","1",1,"op-modal--modal-container"],[1,"op-modal--modal-header"],["class","op-modal--modal-close-button",4,"ngIf"],[1,"icon-context","icon-attention",3,"textContent"],[1,"ngdialog-body","op-modal--modal-body"],[1,"form","-vertical",3,"submit"],[1,"form--fieldset"],[3,"textContent"],[1,"form--field"],["for","selected-page",1,"form--label","hidden-for-sighted",3,"textContent"],[1,"form--field-container"],[1,"form--select-container"],["tabindex","2","type","text","id","selected-page","name","selected-page",1,"form--select",3,"value","change"],["selectedPageInput",""],[1,"op-modal--modal-footer"],["tabindex","4",1,"op-modal--cancel-button","button",3,"textContent","click"],["tabindex","3",1,"op-modal--submit-button","button","-highlight",3,"textContent","click"],[1,"op-modal--modal-close-button"],[1,"icon-close",3,"click"]],template:function(e,t){1&amp;e&amp;&amp;(o.nc(0,"div",0),o.nc(1,"div",1),o.nc(2,"div",2),o.ad(3,u,2,1,"a",3),o.ic(4,"h3",4),o.mc(),o.nc(5,"div",5),o.nc(6,"form",6),o.vc("submit",(function(e){return t.applyAndClose(e)})),o.nc(7,"fieldset",7),o.ic(8,"legend",8),o.nc(9,"div",9),o.ic(10,"label",10),o.nc(11,"div",11),o.nc(12,"div",12),o.nc(13,"input",13,14),o.vc("change",(function(e){return t.selectedPage=e.target.value})),o.mc(),o.mc(),o.mc(),o.ic(15,"p",8),o.nc(16,"p"),o.nc(17,"kbd"),o.cd(18,"project-identifier:my-wiki-page"),o.mc(),o.mc(),o.mc(),o.mc(),o.mc(),o.mc(),o.nc(19,"div",15),o.nc(20,"button",16),o.vc("click",(function(e){return t.closeMe(e)})),o.mc(),o.nc(21,"button",17),o.vc("click",(function(e){return t.applyAndClose(e)})),o.mc(),o.mc(),o.mc(),o.mc()),2&amp;e&amp;&amp;(o.Tb(3),o.Dc("ngIf",t.showClose),o.Tb(1),o.Dc("textContent",t.text.title),o.Tb(4),o.Dc("textContent",t.text.page),o.Tb(2),o.Dc("textContent",t.text.page),o.Tb(3),o.Dc("value",t.selectedPage),o.Tb(2),o.Dc("textContent",t.text.hint),o.Tb(5),o.Dc("textContent",t.text.button_cancel),o.Ub("title",t.text.button_cancel),o.Tb(1),o.Dc("textContent",t.text.button_save),o.Ub("title",t.text.button_save))},directives:[c.q,l.C,l.n,l.o],encapsulation:2});const p=["codeMirrorPane"];function m(e,t){if(1&amp;e){const e=o.oc();o.nc(0,"a",19),o.nc(1,"i",20),o.vc("click",(function(t){return o.Sc(e),o.xc().closeMe(t)})),o.mc(),o.mc()}if(2&amp;e){const e=o.xc();o.Tb(1),o.Ub("title",e.text.close_popup)}}class g extends a.a{constructor(e,t,i,n){super(t,i,e),this.elementRef=e,this.locals=t,this.cdRef=i,this.I18n=n,this.changed=!1,this.showClose=!0,this.closeOnEscape=!0,this.closeOnOutsideClick=!0,this._language="",this.debouncedLanguageLoader=_.debounce(()=&gt;this.loadLanguageAsMode(this.language),300),this.text={title:this.I18n.t("js.editor.macro.code_block.title"),language:this.I18n.t("js.editor.macro.code_block.language"),language_hint:this.I18n.t("js.editor.macro.code_block.language_hint"),button_save:this.I18n.t("js.button_save"),button_cancel:this.I18n.t("js.button_cancel"),close_popup:this.I18n.t("js.close_popup_title")},this.languageClass=t.languageClass||"language-text",this.content=t.content;const s=this.languageClass.match(/language-(\w+)/);this.language=s?s[1]:"text"}applyAndClose(e){this.content=this.codeMirrorInstance.getValue();const t=this.language||"text";this.languageClass=`language-${t}`,this.changed=!0,this.closeMe(e)}ngAfterViewInit(){i.e(0).then(i.t.bind(null,"VrN/",7)).then(e=&gt;{const t=e.default;this.codeMirrorInstance=t.fromTextArea(this.codeMirrorPane.nativeElement,{lineNumbers:!0,smartIndent:!0,autofocus:!0,value:this.content,mode:""})})}get language(){return this._language}set language(e){this._language=e,this.debouncedLanguageLoader()}loadLanguageAsMode(e){if(!e||"text"===e)return this.updateCodeMirrorMode("");i("TKcc")(`./${e}/${e}.js`).then(()=&gt;{this.updateCodeMirrorMode(e)}).catch(t=&gt;{console.error(`Failed to load language ${e}: ${t}`),this.updateCodeMirrorMode("")})}updateCodeMirrorMode(e){const t=this.codeMirrorInstance;t&amp;&amp;t.setOption("mode",e)}updateLanguage(e){e?e.match(/^\w+$/)?this.language=e:console.error("Not updating non-matching language: "+e):this.language=""}}g.\u0275fac=function(e){return new(e||g)(o.hc(o.q),o.hc(n.a),o.hc(o.i),o.hc(r.a))},g.\u0275cmp=o.bc({type:g,selectors:[["ng-component"]],viewQuery:function(e,t){var i;(1&amp;e&amp;&amp;o.Yc(p,!0),2&amp;e)&amp;&amp;(o.Pc(i=o.wc())&amp;&amp;(t.codeMirrorPane=i.first))},features:[o.Qb],decls:20,vars:10,consts:[[1,"op-modal--portal","op-modal--macro-modal","ngdialog-theme-openproject"],["tabindex","1",1,"op-modal--modal-container","-wide"],[1,"op-modal--modal-header"],["class","op-modal--modal-close-button",4,"ngIf"],[1,"icon-context","icon-attention",3,"textContent"],[1,"ngdialog-body","op-modal--modal-body"],[1,"form","-vertical"],["name","codemirror-element","id","codemirror-element",3,"ngModel"],["codeMirrorPane",""],[1,"form--field"],["for","selected-language",1,"form--label","hidden-for-sighted",3,"textContent"],[1,"form--field-container"],[1,"form--select-container"],["tabindex","2","type","text","id","selected-language","name","selected-language",1,"form--select",3,"ngModel","ngModelChange"],["selectedLanguage",""],[3,"textContent"],[1,"op-modal--modal-footer"],["tabindex","4",1,"op-modal--cancel-button","button",3,"textContent","click"],["tabindex","3",1,"op-modal--submit-button","button","-highlight",3,"textContent","click"],[1,"op-modal--modal-close-button"],[1,"icon-close",3,"click"]],template:function(e,t){1&amp;e&amp;&amp;(o.nc(0,"div",0),o.nc(1,"div",1),o.nc(2,"div",2),o.ad(3,m,2,1,"a",3),o.ic(4,"h3",4),o.mc(),o.nc(5,"div",5),o.nc(6,"form",6),o.ic(7,"textarea",7,8),o.ic(9,"hr"),o.nc(10,"div",9),o.ic(11,"label",10),o.nc(12,"div",11),o.nc(13,"div",12),o.nc(14,"input",13,14),o.vc("ngModelChange",(function(e){return t.updateLanguage(e)})),o.mc(),o.mc(),o.mc(),o.ic(16,"p",15),o.mc(),o.mc(),o.mc(),o.nc(17,"div",16),o.nc(18,"button",17),o.vc("click",(function(e){return t.closeMe(e)})),o.mc(),o.nc(19,"button",18),o.vc("click",(function(e){return t.applyAndClose(e)})),o.mc(),o.mc(),o.mc(),o.mc()),2&amp;e&amp;&amp;(o.Tb(3),o.Dc("ngIf",t.showClose),o.Tb(1),o.Dc("textContent",t.text.title),o.Tb(3),o.Dc("ngModel",t.content),o.Tb(4),o.Dc("textContent",t.text.language),o.Tb(3),o.Dc("ngModel",t.language),o.Tb(2),o.Dc("textContent",t.text.language_hint),o.Tb(2),o.Dc("textContent",t.text.button_cancel),o.Ub("title",t.text.button_cancel),o.Tb(1),o.Dc("textContent",t.text.button_save),o.Ub("title",t.text.button_save))},directives:[c.q,l.C,l.n,l.o,l.c,l.m,l.p],encapsulation:2});const f=["selectedPageInput"];function b(e,t){if(1&amp;e){const e=o.oc();o.nc(0,"a",22),o.nc(1,"i",23),o.vc("click",(function(t){return o.Sc(e),o.xc().closeMe(t)})),o.mc(),o.mc()}if(2&amp;e){const e=o.xc();o.Tb(1),o.Ub("title",e.text.close_popup)}}class v extends a.a{constructor(e,t,i,n){super(t,i,e),this.elementRef=e,this.locals=t,this.cdRef=i,this.I18n=n,this.changed=!1,this.showClose=!0,this.closeOnEscape=!0,this.closeOnOutsideClick=!0,this.page="",this.includeParent=!1,this.text={title:this.I18n.t("js.editor.macro.child_pages.button"),hint:this.I18n.t("js.editor.macro.child_pages.hint"),page:this.I18n.t("js.editor.macro.child_pages.page"),include_parent:this.I18n.t("js.editor.macro.child_pages.include_parent"),button_save:this.I18n.t("js.button_save"),button_cancel:this.I18n.t("js.button_cancel"),close_popup:this.I18n.t("js.close_popup_title")},this.selectedPage=this.page=this.locals.page,this.selectedIncludeParent=this.includeParent=this.locals.includeParent}applyAndClose(e){this.changed=!0,this.page=this.selectedPage,this.includeParent=this.selectedIncludeParent,this.closeMe(e)}ngAfterViewInit(){this.selectedPageInput.nativeElement.focus()}updateIncludeParent(e){this.selectedIncludeParent=e}}v.\u0275fac=function(e){return new(e||v)(o.hc(o.q),o.hc(n.a),o.hc(o.i),o.hc(r.a))},v.\u0275cmp=o.bc({type:v,selectors:[["ng-component"]],viewQuery:function(e,t){var i;(1&amp;e&amp;&amp;o.Yc(f,!0),2&amp;e)&amp;&amp;(o.Pc(i=o.wc())&amp;&amp;(t.selectedPageInput=i.first))},features:[o.Qb],decls:26,vars:12,consts:[[1,"op-modal--portal","op-modal--macro-modal","ngdialog-theme-openproject"],["tabindex","1",1,"op-modal--modal-container"],[1,"op-modal--modal-header"],["class","op-modal--modal-close-button",4,"ngIf"],[1,"icon-context","icon-attention",3,"textContent"],[1,"ngdialog-body","op-modal--modal-body"],[1,"form","-vertical",3,"submit"],[1,"form--fieldset"],[3,"textContent"],[1,"form--field"],["for","selected-page",1,"form--label","hidden-for-sighted",3,"textContent"],[1,"form--field-container"],[1,"form--select-container"],["tabindex","2","type","text","id","selected-page","name","selected-page","placeholder","my-project:my-page",1,"form--select",3,"value","change"],["selectedPageInput",""],[1,"form--label-with-check-box"],[1,"form--check-box-container"],["tabindex","3","type","checkbox","id","include-parent","name","include-parent",1,"form--check-box",3,"ngModel","ngModelChange"],["parentIncludedInput",""],[1,"op-modal--modal-footer"],["tabindex","4",1,"op-modal--cancel-button","button",3,"textContent","click"],["tabindex","3",1,"op-modal--submit-button","button","-highlight",3,"textContent","click"],[1,"op-modal--modal-close-button"],[1,"icon-close",3,"click"]],template:function(e,t){1&amp;e&amp;&amp;(o.nc(0,"div",0),o.nc(1,"div",1),o.nc(2,"div",2),o.ad(3,b,2,1,"a",3),o.ic(4,"h3",4),o.mc(),o.nc(5,"div",5),o.nc(6,"form",6),o.vc("submit",(function(e){return t.applyAndClose(e)})),o.nc(7,"fieldset",7),o.ic(8,"legend",8),o.nc(9,"div",9),o.ic(10,"label",10),o.nc(11,"div",11),o.nc(12,"div",12),o.nc(13,"input",13,14),o.vc("change",(function(e){return t.selectedPage=e.target.value})),o.mc(),o.mc(),o.mc(),o.mc(),o.nc(15,"div",9),o.nc(16,"div",11),o.nc(17,"label",15),o.nc(18,"div",16),o.nc(19,"input",17,18),o.vc("ngModelChange",(function(e){return t.updateIncludeParent(e)})),o.mc(),o.mc(),o.cd(21),o.mc(),o.mc(),o.mc(),o.ic(22,"p",8),o.mc(),o.mc(),o.mc(),o.nc(23,"div",19),o.nc(24,"button",20),o.vc("click",(function(e){return t.closeMe(e)})),o.mc(),o.nc(25,"button",21),o.vc("click",(function(e){return t.applyAndClose(e)})),o.mc(),o.mc(),o.mc(),o.mc()),2&amp;e&amp;&amp;(o.Tb(3),o.Dc("ngIf",t.showClose),o.Tb(1),o.Dc("textContent",t.text.title),o.Tb(4),o.Dc("textContent",t.text.page),o.Tb(2),o.Dc("textContent",t.text.page),o.Tb(3),o.Dc("value",t.selectedPage),o.Tb(6),o.Dc("ngModel",t.selectedIncludeParent),o.Tb(2),o.ed(" ",t.text.include_parent," "),o.Tb(1),o.Dc("textContent",t.text.hint),o.Tb(2),o.Dc("textContent",t.text.button_cancel),o.Ub("title",t.text.button_cancel),o.Tb(1),o.Dc("textContent",t.text.button_save),o.Ub("title",t.text.button_save))},directives:[c.q,l.C,l.n,l.o,l.a,l.m,l.p],encapsulation:2});class w{constructor(e,t){this.opModalService=e,this.injector=t}configureWorkPackageButton(e,t){return new Promise((i,n)=&gt;{this.opModalService.show(s.a,this.injector,{type:e,classes:t}).closingEvent.subscribe(e=&gt;{e.changed&amp;&amp;i({type:e.type,classes:e.classes})})})}configureWikiPageInclude(e){return new Promise((t,i)=&gt;{const n=e||"";this.opModalService.show(h,this.injector,{page:n}).closingEvent.subscribe(e=&gt;{e.changed&amp;&amp;t(e.page)})})}editCodeBlock(e,t){return new Promise((i,n)=&gt;{this.opModalService.show(g,this.injector,{content:e,languageClass:t}).closingEvent.subscribe(e=&gt;{e.changed&amp;&amp;i({languageClass:e.languageClass,content:e.content})})})}configureChildPages(e,t){return new Promise((i,n)=&gt;{this.opModalService.show(v,this.injector,{page:e,includeParent:t}).closingEvent.subscribe(e=&gt;{e.changed&amp;&amp;i({page:e.page,includeParent:e.includeParent})})})}}w.\u0275fac=function(e){return new(e||w)(o.rc(n.b),o.rc(o.A))},w.\u0275prov=o.dc({token:w,factory:w.\u0275fac})},Tcty:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));i("ii2/");var n=i("Jui0"),s=i("wZYP"),a=i("fXoL"),r=i("ofXK"),o=i("oLh2"),c=i("Wo/B");function l(e,t){if(1&amp;e&amp;&amp;a.ic(0,"revision-activity",4),2&amp;e){const e=a.xc();a.Dc("workPackage",e.workPackage)("activity",e.activity)("activityNo",e.activityNo)}}function d(e,t){if(1&amp;e&amp;&amp;a.ic(0,"user-activity",5),2&amp;e){const e=a.xc();a.Dc("workPackage",e.workPackage)("activity",e.activity)("activityNo",e.activityNo)("isInitial",e.isInitial)}}class u{constructor(e,t){this.PathHelper=e,this.I18n=t}ngOnInit(){this.projectId=this.workPackage.project.idFromLink,this.activityType=this.activity._type}}u.\u0275fac=function(e){return new(e||u)(a.hc(n.a),a.hc(s.a))},u.\u0275cmp=a.bc({type:u,selectors:[["activity-entry"]],inputs:{workPackage:"workPackage",activity:"activity",activityNo:"activityNo",isInitial:"isInitial"},decls:4,vars:3,consts:[[3,"id"],[3,"ngSwitch"],[3,"workPackage","activity","activityNo",4,"ngSwitchCase"],[3,"workPackage","activity","activityNo","isInitial",4,"ngSwitchDefault"],[3,"workPackage","activity","activityNo"],[3,"workPackage","activity","activityNo","isInitial"]],template:function(e,t){1&amp;e&amp;&amp;(a.nc(0,"div",0),a.nc(1,"div",1),a.ad(2,l,1,3,"revision-activity",2),a.ad(3,d,1,4,"user-activity",3),a.mc(),a.mc()),2&amp;e&amp;&amp;(a.Fc("id","activity-",t.activityNo,""),a.Tb(1),a.Dc("ngSwitch",t.activityType),a.Tb(1),a.Dc("ngSwitchCase","Revision"))},directives:[r.u,r.v,r.w,o.a,c.a],encapsulation:2})},TrTv:function(e,t,i){"use strict";i.d(t,"a",(function(){return m}));var n=i("SqdZ"),s=i("IaZ+"),a=i("wZYP"),r=i("sjKJ"),o=i("5JuZ"),c=i("fXoL"),l=i("ofXK"),d=i("3Pt+");const u=["typeSelect"];function h(e,t){if(1&amp;e){const e=c.oc();c.nc(0,"a",25),c.nc(1,"i",26),c.vc("click",(function(t){return c.Sc(e),c.xc().closeMe(t)})),c.mc(),c.mc()}if(2&amp;e){const e=c.xc();c.Tb(1),c.Ub("title",e.text.close_popup)}}function p(e,t){if(1&amp;e&amp;&amp;c.ic(0,"option",15),2&amp;e){const e=t.$implicit,i=c.xc();c.Dc("textContent",e.name)("selected",i.selectedType===e.name)("value",e.name)}}class m extends n.a{constructor(e,t,i,n,s,a){super(t,s,e),this.elementRef=e,this.locals=t,this.currentProject=i,this.workPackageDmService=n,this.cdRef=s,this.I18n=a,this.changed=!1,this.showClose=!0,this.closeOnEscape=!0,this.closeOnOutsideClick=!0,this.type="",this.classes="",this.text={title:this.I18n.t("js.editor.macro.work_package_button.button"),none:this.I18n.t("js.label_none"),selected_type:this.I18n.t("js.editor.macro.work_package_button.type"),button_style:this.I18n.t("js.editor.macro.work_package_button.button_style"),button_style_hint:this.I18n.t("js.editor.macro.work_package_button.button_style_hint"),button_save:this.I18n.t("js.button_save"),button_cancel:this.I18n.t("js.button_cancel"),close_popup:this.I18n.t("js.close_popup_title")},this.selectedType=this.type=this.locals.type,this.classes=this.locals.classes,this.buttonStyle="button"===this.classes,this.workPackageDmService.emptyCreateForm({},this.currentProject.identifier).then(e=&gt;{this.availableTypes=e.schema.type.allowedValues})}applyAndClose(e){this.changed=!0,this.classes=this.buttonStyle?"button":"",this.type=this.selectedType,this.closeMe(e)}ngAfterViewInit(){this.typeSelect.nativeElement.focus()}}m.\u0275fac=function(e){return new(e||m)(c.hc(c.q),c.hc(s.a),c.hc(r.a),c.hc(o.a),c.hc(c.i),c.hc(a.a))},m.\u0275cmp=c.bc({type:m,selectors:[["ng-component"]],viewQuery:function(e,t){var i;(1&amp;e&amp;&amp;c.Yc(u,!0),2&amp;e)&amp;&amp;(c.Pc(i=c.wc())&amp;&amp;(t.typeSelect=i.first))},features:[c.Qb],decls:27,vars:14,consts:[[1,"op-modal--portal","op-modal--macro-modal","ngdialog-theme-openproject"],["data-indicator-name","modal","tabindex","0",1,"op-modal--modal-container","loading-indicator--location"],[1,"op-modal--modal-header"],["class","op-modal--modal-close-button",4,"ngIf"],[1,"icon-context","icon-attention",3,"textContent"],[1,"ngdialog-body","op-modal--modal-body"],[1,"form","-vertical",3,"submit"],[1,"form--fieldset"],[3,"textContent"],[1,"form--field"],["for","selected-type",1,"form--label","hidden-for-sighted",3,"textContent"],[1,"form--field-container"],[1,"form--select-container"],["id","selected-type","tabindex","1","name","selected-type",1,"form--select",3,"change"],["typeSelect",""],[3,"textContent","selected","value"],[3,"textContent","selected","value",4,"ngFor","ngForOf"],[1,"form--field","-wide-label"],[1,"form--field-container","-vertical"],[1,"form--label-with-check-box"],[1,"form--check-box-container"],["type","checkbox","tabindex","2","id","wp_button_macro_style","name","button_style",3,"checked","change"],[1,"op-modal--modal-footer"],["tabindex","4",1,"op-modal--cancel-button","button",3,"textContent","click"],["tabindex","3",1,"op-modal--submit-button","button","-highlight",3,"textContent","click"],[1,"op-modal--modal-close-button"],[1,"icon-close",3,"click"]],template:function(e,t){1&amp;e&amp;&amp;(c.nc(0,"div",0),c.nc(1,"div",1),c.nc(2,"div",2),c.ad(3,h,2,1,"a",3),c.ic(4,"h3",4),c.mc(),c.nc(5,"div",5),c.nc(6,"form",6),c.vc("submit",(function(e){return t.applyAndClose(e)})),c.nc(7,"fieldset",7),c.ic(8,"legend",8),c.nc(9,"div",9),c.ic(10,"label",10),c.nc(11,"div",11),c.nc(12,"div",12),c.nc(13,"select",13,14),c.vc("change",(function(e){return t.selectedType=e.target.value})),c.ic(15,"option",15),c.ad(16,p,1,3,"option",16),c.mc(),c.mc(),c.mc(),c.mc(),c.mc(),c.nc(17,"div",17),c.nc(18,"div",18),c.nc(19,"label",19),c.nc(20,"div",20),c.nc(21,"input",21),c.vc("change",(function(e){return t.buttonStyle=e.target.checked})),c.mc(),c.mc(),c.cd(22),c.mc(),c.mc(),c.mc(),c.ic(23,"p",8),c.mc(),c.mc(),c.nc(24,"div",22),c.nc(25,"button",23),c.vc("click",(function(e){return t.closeMe(e)})),c.mc(),c.nc(26,"button",24),c.vc("click",(function(e){return t.applyAndClose(e)})),c.mc(),c.mc(),c.mc(),c.mc()),2&amp;e&amp;&amp;(c.Tb(3),c.Dc("ngIf",t.showClose),c.Tb(1),c.Dc("textContent",t.text.title),c.Tb(4),c.Dc("textContent",t.text.selected_type),c.Tb(2),c.Dc("textContent",t.text.selected_type),c.Tb(5),c.Dc("textContent",t.text.none)("selected",!t.selectedType),c.Tb(1),c.Dc("ngForOf",t.availableTypes),c.Tb(5),c.Dc("checked",t.buttonStyle),c.Tb(1),c.ed(" ",t.text.button_style," "),c.Tb(1),c.Dc("textContent",t.text.button_style_hint),c.Tb(2),c.Dc("textContent",t.text.button_cancel),c.Ub("title",t.text.button_cancel),c.Tb(1),c.Dc("textContent",t.text.button_save),c.Ub("title",t.text.button_save))},directives:[l.q,d.C,d.n,d.o,d.r,d.B,l.p],encapsulation:2})},"U/vl":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));class n{constructor(e,t,i){this.page=e,this.total=t,this.perPage=i}getLowerPageBound(){return this.perPage*(this.page-1)+1}getUpperPageBound(e){return Math.min(this.perPage*this.page,e)}nextPage(){this.page+=1}previousPage(){this.page-=1}}},U1xf:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));class n{constructor(e){this.tableVisible=!0,this.compactTableStyle=!1,this.actionsColumnEnabled=!0,this.contextMenuEnabled=!0,this.columnMenuEnabled=!0,this.projectContext=!0,this.projectIdentifier=null,this.inlineCreateEnabled=!0,this.hierarchyToggleEnabled=!0,this.dragAndDropEnabled=!1,this.isEmbedded=!1,this.isCardView=!1,this.withFilters=!1,this.filtersExpanded=!1,this.showFilterButton=!1,this.filterButtonText=I18n.t("js.button_filter"),_.each(e,(e,t)=&gt;{this[t]=e})}}},"UD+K":function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("JX91"),s=i("3UWI"),a=i("lJxs");class r{constructor(e=3600){this.holdValuesForSeconds=e,this.cacheDurationInMs=1e3*e}state(e){return this.multiState.get(e)}touch(e){const t=this.multiState.get(e);t.putValue(t.value,"Touching the state")}current(e,t){return this.state(e).getValueOr(t)}updateValue(e,t){this.multiState.get(e).putValue(t)}observe(e){return this.state(e).values$()}changes$(e){return this.state(e).changes$()}observeAll(){return this.multiState.observeChange().pipe(Object(n.a)([]),Object(s.a)(250),Object(a.a)(()=&gt;{let e=[];return _.each(this.multiState.getValueOr({}),t=&gt;{t.value&amp;&amp;e.push(t.value)}),e}))}clearSome(...e){e.forEach(e=&gt;this.multiState.get(e).clear())}require(e,t=!1){const i=this.multiState.get(e);if(this.stale(i)||t){let t=this.load(e);return i.clearAndPutFromPromise(t),t}return i.valuesPromise()}requireAndStream(e,t=!1){const i=this.multiState.get(e);return(this.stale(i)||t)&amp;&amp;(i.clear(),i.putFromPromiseIfPristine(()=&gt;this.load(e))),i.values$()}requireAll(e,t=!1){let i;return i=t?e:e.filter(e=&gt;this.stale(this.multiState.get(e))),0===i.length?Promise.resolve(void 0):this.loadAll(i)}stale(e){return!e.hasActivePromiseRequest()&amp;&amp;(e.isPristine()||e.isValueOlderThan(this.cacheDurationInMs))}}},UUNb:function(e,t,i){"use strict";i.d(t,"a",(function(){return x}));var n=i("DhiE"),s=i("iMRi"),a=i("SqdZ"),r=i("IaZ+"),o=i("Y/CA"),c=i("iB+3"),l=i("wZYP"),d=i("ABwi"),u=i("pQre"),h=i("qc15"),p=i("fXoL"),m=i("3Pt+"),g=i("ofXK");function f(e,t){if(1&amp;e&amp;&amp;(p.nc(0,"li"),p.cd(1," #"),p.ic(2,"span",13),p.ic(3,"span",13),p.mc()),2&amp;e){const e=t.$implicit;p.Tb(2),p.Dc("textContent",e.id),p.Tb(1),p.Dc("textContent",e.subject||"")}}function b(e,t){if(1&amp;e&amp;&amp;(p.nc(0,"div"),p.nc(1,"p",14),p.ic(2,"span",15),p.ic(3,"strong",13),p.cd(4,": "),p.ic(5,"span",13),p.mc(),p.nc(6,"ul"),p.ad(7,f,4,2,"li",16),p.mc(),p.nc(8,"p"),p.ic(9,"span",13),p.mc(),p.mc()),2&amp;e){const e=p.xc(2);p.Tb(3),p.Dc("textContent",e.text.warning),p.Tb(2),p.Dc("textContent",e.text.hasChildren(e.singleWorkPackage)),p.Tb(2),p.Dc("ngForOf",e.singleWorkPackageChildren),p.Tb(2),p.Dc("textContent",e.text.deletesChildren)}}function v(e,t){if(1&amp;e&amp;&amp;(p.lc(0),p.nc(1,"p"),p.ic(2,"span",13),p.ic(3,"br"),p.nc(4,"strong"),p.cd(5),p.mc(),p.mc(),p.ad(6,b,10,4,"div",9),p.kc()),2&amp;e){const e=p.xc();p.Tb(2),p.Dc("textContent",e.text.text),p.Tb(3),p.gd(" ",e.singleWorkPackage.type.name," #",e.singleWorkPackage.id," ",e.singleWorkPackage.subject," "),p.Tb(1),p.Dc("ngIf",e.singleWorkPackageChildren&amp;&amp;e.singleWorkPackageChildren.length&gt;0)}}function w(e,t){if(1&amp;e&amp;&amp;(p.nc(0,"strong"),p.cd(1),p.mc()),2&amp;e){const e=p.xc().$implicit,t=p.xc(2);p.Tb(1),p.ed(" (+ ",t.text.childCount(e),") ")}}function y(e,t){if(1&amp;e&amp;&amp;(p.nc(0,"li"),p.cd(1," #"),p.ic(2,"span",13),p.cd(3," "),p.ic(4,"span",13),p.ad(5,w,2,1,"strong",9),p.mc()),2&amp;e){const e=t.$implicit,i=p.xc(2);p.Tb(2),p.Dc("textContent",e.id),p.Tb(2),p.Dc("textContent",e.subject),p.Tb(1),p.Dc("ngIf",i.children(e).length&gt;0)}}function k(e,t){if(1&amp;e&amp;&amp;(p.lc(0),p.nc(1,"p",14),p.ic(2,"span",15),p.ic(3,"strong",13),p.mc(),p.nc(4,"ul"),p.ad(5,y,6,3,"li",16),p.mc(),p.kc()),2&amp;e){const e=p.xc();p.Tb(3),p.Dc("textContent",e.text.text),p.Tb(2),p.Dc("ngForOf",e.workPackages)}}function C(e,t){if(1&amp;e){const e=p.oc();p.nc(0,"div"),p.nc(1,"label",17),p.nc(2,"div",18),p.nc(3,"input",19),p.vc("ngModelChange",(function(t){return p.Sc(e),p.xc().childrenDeletionConfirmed=t})),p.mc(),p.mc(),p.cd(4),p.mc(),p.mc()}if(2&amp;e){const e=p.xc();p.Tb(3),p.Dc("ngModel",e.childrenDeletionConfirmed),p.Tb(1),p.ed(" ",e.text.label_confirm_children_deletion," ")}}class x extends a.a{constructor(e,t,i,n,s,a,r,o,c,l,d){super(i,s,e),this.elementRef=e,this.WorkPackageService=t,this.locals=i,this.I18n=n,this.cdRef=s,this.$state=a,this.states=r,this.wpTableFocus=o,this.wpListService=c,this.notificationService=l,this.backRoutingService=d,this.busy=!1,this.childrenDeletionConfirmed=!1,this.text={label_visibility_settings:this.I18n.t("js.label_visibility_settings"),button_save:this.I18n.t("js.modals.button_save"),confirm:this.I18n.t("js.button_confirm"),warning:this.I18n.t("js.label_warning"),cancel:this.I18n.t("js.button_cancel"),close:this.I18n.t("js.close_popup_title"),label_confirm_children_deletion:this.I18n.t("js.modals.destroy_work_package.confirm_deletion_children")}}ngOnInit(){super.ngOnInit(),this.workPackages=this.locals.workPackages,this.workPackageLabel=this.I18n.t("js.units.workPackage",{count:this.workPackages.length}),1===this.workPackages.length&amp;&amp;(this.singleWorkPackage=this.workPackages[0],this.singleWorkPackageChildren=this.singleWorkPackage.children),this.text.title=this.I18n.t("js.modals.destroy_work_package.title",{label:this.workPackageLabel}),this.text.text=this.I18n.t("js.modals.destroy_work_package.text",{label:this.workPackageLabel,count:this.workPackages.length}),this.text.childCount=e=&gt;{const t=this.children(e).length;return this.I18n.t("js.units.child_work_packages",{count:t})},this.text.hasChildren=e=&gt;this.I18n.t("js.modals.destroy_work_package.has_children",{childUnits:this.text.childCount(e)}),this.text.deletesChildren=this.I18n.t("js.modals.destroy_work_package.deletes_children")}get blockedDueToUnconfirmedChildren(){return this.mustConfirmChildren&amp;&amp;!this.childrenDeletionConfirmed}get mustConfirmChildren(){if(this.singleWorkPackage&amp;&amp;this.singleWorkPackageChildren){this.singleWorkPackageChildren.length}return!!_.find(this.workPackages,e=&gt;e.children&amp;&amp;e.children.length&gt;0)}confirmDeletion(e){return this.busy||this.blockedDueToUnconfirmedChildren||(this.busy=!0,this.WorkPackageService.performBulkDelete(this.workPackages.map(e=&gt;e.id),!0).then(()=&gt;{this.busy=!1,this.closeMe(e),this.wpTableFocus.clear(),this.$state.current.data.baseRoute&amp;&amp;this.backRoutingService.goBack(!0)}).catch(()=&gt;{this.busy=!1})),!1}children(e){return e.hasOwnProperty("children")?e.children:[]}}x.\u0275fac=function(e){return new(e||x)(p.hc(p.q),p.hc(d.a),p.hc(r.a),p.hc(l.a),p.hc(p.i),p.hc(c.G),p.hc(s.a),p.hc(o.a),p.hc(n.a),p.hc(h.a),p.hc(u.a))},x.\u0275cmp=p.bc({type:x,selectors:[["ng-component"]],features:[p.Qb],decls:15,vars:8,consts:[[1,"op-modal--portal"],["id","wp_destroy_modal","data-indicator-name","modal","tabindex","0",1,"op-modal--modal-container","wp-table--configuration-modal","loading-indicator--location"],[1,"op-modal--modal-header"],[1,"op-modal--modal-close-button"],[1,"icon-close",3,"click"],["name","modalWpDestroyForm",1,"form","danger-zone"],[1,"form--section","-inner-scrolling"],[1,"form--section-title",3,"textContent"],[1,"modal-inner-scrolling-container"],[4,"ngIf"],[1,"form--space","-left-spacing"],[1,"button","-danger",3,"textContent","click"],[1,"button",3,"textContent","click"],[3,"textContent"],[1,"danger-zone--warning"],[1,"icon","icon-error"],[4,"ngFor","ngForOf"],[1,"form--label-with-check-box"],[1,"form--check-box-container"],["type","checkbox","name","confirm-children-deletion","id","confirm-children-deletion",1,"form--check-box",3,"ngModel","ngModelChange"]],template:function(e,t){1&amp;e&amp;&amp;(p.nc(0,"div",0),p.nc(1,"div",1),p.nc(2,"div",2),p.nc(3,"a",3),p.nc(4,"i",4),p.vc("click",(function(e){return t.closeMe(e)})),p.mc(),p.mc(),p.mc(),p.nc(5,"form",5),p.nc(6,"section",6),p.ic(7,"h3",7),p.nc(8,"div",8),p.ad(9,v,7,5,"ng-container",9),p.ad(10,k,6,2,"ng-container",9),p.ad(11,C,5,2,"div",9),p.mc(),p.mc(),p.nc(12,"div",10),p.nc(13,"button",11),p.vc("click",(function(e){return t.confirmDeletion(e)})),p.mc(),p.nc(14,"button",12),p.vc("click",(function(e){return t.closeMe(e)})),p.mc(),p.mc(),p.mc(),p.mc(),p.mc()),2&amp;e&amp;&amp;(p.Tb(4),p.Ub("title",t.text.close),p.Tb(3),p.Dc("textContent",t.text.title),p.Tb(2),p.Dc("ngIf",t.singleWorkPackage),p.Tb(1),p.Dc("ngIf",t.workPackages.length&gt;1),p.Tb(1),p.Dc("ngIf",t.mustConfirmChildren),p.Tb(2),p.Dc("textContent",t.text.confirm),p.Ub("disabled",t.busy||t.blockedDueToUnconfirmedChildren||void 0),p.Tb(1),p.Dc("textContent",t.text.cancel))},directives:[m.C,m.n,m.o,g.q,g.p,m.a,m.m,m.p],encapsulation:2})},Ul5t:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("kTsZ"),s=i("Jui0"),a=i("fXoL");class r{constructor(e,t){this.halResourceService=e,this.pathHelper=t}loadAll(){return this.halResourceService.get(this.pathHelper.api.v3.help_texts.toString()).toPromise()}load(e){return this.halResourceService.get(this.pathHelper.api.v3.help_texts.id(e).toString()).toPromise()}}r.\u0275fac=function(e){return new(e||r)(a.rc(n.a),a.rc(s.a))},r.\u0275prov=a.dc({token:r,factory:r.\u0275fac})},Uprc:function(e,t,i){"use strict";i.d(t,"a",(function(){return p}));var n=i("wZYP"),s=i("AeZM"),a=i("wyKs"),r=i("EnRq"),o=i("fXoL"),c=i("3Pt+"),l=i("N5AO"),d=i("ofXK");function u(e,t){if(1&amp;e&amp;&amp;o.ic(0,"span",6),2&amp;e){const e=o.xc();o.Dc("textContent",e.text.display_mode.hierarchy_hint)}}function h(e,t){if(1&amp;e&amp;&amp;o.ic(0,"option",15),2&amp;e){const e=t.$implicit,i=o.xc();o.Dc("textContent",e.name)("selected",i.currentGroup&amp;&amp;i.currentGroup.href===e.href)("value",e.href)}}class p{constructor(e,t,i,n,s){this.injector=e,this.I18n=t,this.wpTableGroupBy=i,this.wpTableHierarchies=n,this.wpTableSums=s,this.displayMode="default",this.availableGroups=[],this.displaySums=!1,this.text={choose_mode:this.I18n.t("js.work_packages.table_configuration.choose_display_mode"),label_group_by:this.I18n.t("js.label_group_by"),title:this.I18n.t("js.label_group_by"),placeholder:this.I18n.t("js.placeholders.default"),please_select:this.I18n.t("js.placeholders.selection"),default:"\u2014 "+this.I18n.t("js.work_packages.table_configuration.default"),display_sums:this.I18n.t("js.work_packages.query.display_sums"),display_sums_hint:"\u2014 "+this.I18n.t("js.work_packages.table_configuration.display_sums_hint"),display_mode:{default:this.I18n.t("js.work_packages.table_configuration.default_mode"),grouped:this.I18n.t("js.work_packages.table_configuration.grouped_mode"),hierarchy:this.I18n.t("js.work_packages.table_configuration.hierarchy_mode"),hierarchy_hint:"\u2014 "+this.I18n.t("js.work_packages.table_configuration.hierarchy_hint")}}}onSave(){this.wpTableHierarchies.setEnabled("hierarchy"===this.displayMode);let e="grouped"===this.displayMode?this.currentGroup:null;this.wpTableGroupBy.update(e),this.wpTableSums.setEnabled(this.displaySums)}updateGroup(e){this.displayMode="grouped",this.currentGroup=_.find(this.availableGroups,t=&gt;t.href===e)||null}ngOnInit(){this.wpTableHierarchies.isEnabled?this.displayMode="hierarchy":this.wpTableGroupBy.current&amp;&amp;(this.displayMode="grouped"),this.displaySums=this.wpTableSums.current,this.wpTableGroupBy.onReady().then(()=&gt;{this.availableGroups=_.sortBy(this.wpTableGroupBy.available,"name"),this.currentGroup=this.wpTableGroupBy.current})}}p.\u0275fac=function(e){return new(e||p)(o.hc(o.A),o.hc(n.a),o.hc(s.a),o.hc(a.a),o.hc(r.a))},p.\u0275cmp=o.bc({type:p,selectors:[["ng-component"]],decls:39,vars:16,consts:[[3,"textContent"],[1,"form--field","-full-width"],[1,"form--field-container"],[1,"option-label"],["type","radio","value","default","name","display_mode_switch",3,"ngModel","ngModelChange"],["icon-classes","icon-no-hierarchy"],[1,"form--inline-instructions",3,"textContent"],["type","radio","value","hierarchy","name","display_mode_switch",3,"ngModel","ngModelChange"],["icon-classes","icon-hierarchy"],["class","form--inline-instructions",3,"textContent",4,"ngIf"],["type","radio","value","grouped","name","display_mode_switch",3,"ngModel","ngModelChange"],["icon-classes","icon-group-by"],["id","selected_grouping","name","selected_grouping",1,"form--select","form--inline-select",3,"change"],[3,"textContent","selected","value",4,"ngFor","ngForOf"],["type","checkbox","name","display_sums_switch",3,"checked","change"],[3,"textContent","selected","value"]],template:function(e,t){1&amp;e&amp;&amp;(o.nc(0,"div"),o.nc(1,"form"),o.ic(2,"p",0),o.nc(3,"div",1),o.nc(4,"div",2),o.nc(5,"label",3),o.nc(6,"input",4),o.vc("ngModelChange",(function(e){return t.displayMode=e})),o.mc(),o.ic(7,"op-icon",5),o.cd(8," "),o.ic(9,"span",0),o.cd(10," "),o.ic(11,"span",6),o.mc(),o.mc(),o.mc(),o.nc(12,"div",1),o.nc(13,"div",2),o.nc(14,"label",3),o.nc(15,"input",7),o.vc("ngModelChange",(function(e){return t.displayMode=e})),o.mc(),o.ic(16,"op-icon",8),o.cd(17," "),o.ic(18,"span",0),o.cd(19," "),o.ad(20,u,1,1,"span",9),o.mc(),o.mc(),o.mc(),o.nc(21,"div",1),o.nc(22,"div",2),o.nc(23,"label",3),o.nc(24,"input",10),o.vc("ngModelChange",(function(e){return t.displayMode=e})),o.mc(),o.ic(25,"op-icon",11),o.cd(26," "),o.ic(27,"span",0),o.cd(28," "),o.nc(29,"select",12),o.vc("change",(function(e){return t.updateGroup(e.target.value)})),o.ad(30,h,1,3,"option",13),o.mc(),o.mc(),o.mc(),o.mc(),o.ic(31,"hr"),o.nc(32,"div"),o.nc(33,"div",1),o.nc(34,"div",2),o.nc(35,"label",3),o.nc(36,"input",14),o.vc("change",(function(){return t.displaySums=!t.displaySums})),o.mc(),o.cd(37),o.ic(38,"span",6),o.mc(),o.mc(),o.mc(),o.mc(),o.mc(),o.mc()),2&amp;e&amp;&amp;(o.Tb(2),o.Dc("textContent",t.text.choose_mode),o.Tb(4),o.Dc("ngModel",t.displayMode),o.Tb(1),o.Ub("icon-title",t.text.display_mode.default),o.Tb(2),o.Dc("textContent",t.text.display_mode.default),o.Tb(2),o.Dc("textContent",t.text.default),o.Tb(4),o.Dc("ngModel",t.displayMode),o.Tb(1),o.Ub("icon-title",t.text.display_mode.hierarchy),o.Tb(2),o.Dc("textContent",t.text.display_mode.hierarchy),o.Tb(2),o.Dc("ngIf","hierarchy"===t.displayMode),o.Tb(4),o.Dc("ngModel",t.displayMode),o.Tb(1),o.Ub("icon-title",t.text.label_group_by),o.Tb(2),o.Dc("textContent",t.text.label_group_by),o.Tb(3),o.Dc("ngForOf",t.availableGroups),o.Tb(6),o.Dc("checked",t.displaySums),o.Tb(1),o.ed(" ",t.text.display_sums," "),o.Tb(1),o.Dc("textContent",t.text.display_sums_hint))},directives:[c.C,c.n,c.o,c.u,c.c,c.m,c.p,l.a,d.q,d.p,c.r,c.B],encapsulation:2})},Uyc6:function(e,t,i){"use strict";i.d(t,"a",(function(){return g}));var n=i("mrSG"),s=i("zqrF"),a=i("E2tj"),r=i("Jui0"),o=i("iMRi"),c=i("qHU1");class l{constructor(e,t,i,n,s){this.order=e,this.positions=t,this.wpId=i,this.index=n,this.fromIndex=s,this.delta={}}buildDelta(){return Object(c.b)(`Building delta for ${this.wpId}@${this.index}`,()=&gt;{this.isAscendingOrder()?this.buildInsertPosition():this.rebuildPositions()}),Object(c.a)("Order DELTA was built as %O",this.delta),this.delta}isAscendingOrder(){let e;for(let t=0,i=this.order.length;t
                  <i;t++){const 0="this.positions[this.wpId])return" 0!="n){if(n&lt;e)return!1}else" e="this.buildUpPredecessorPosition();if(e" i="this.order[t],n=this.positions[i];if(t!==this.index)if(void" this.insertasfirst();const="" void(this.delta[this.wpid]="0);if(null!==this.fromIndex&amp;&amp;1===Math.abs(this.fromIndex-this.index)&amp;&amp;this.positionSwap())return;if(0===this.index)return">
                   =2147483647)return Object(c.a)("Predecessor position is at max order, need to reorder"),this.reorderedInsert();const t=this.positionFor(this.index+1);if(void 0===t)return void(this.delta[this.wpId]=e+8192);if(t&gt;=2147483647)return Object(c.a)("Successor position is at max order, need to reorder"),this.reorderedInsert();const i=Math.floor((t-e)/2);if(i&lt;1)return Object(c.a)("Cannot insert at optimal position, no space left. Need to reorder"),this.reorderedInsert();this.delta[this.wpId]=e+i}insertAsFirst(){const e=this.positionFor(this.index+1);this.delta[this.wpId]=void 0===e?0:e-8192}positionSwap(){const e=this.positionFor(this.index),t=this.order[this.fromIndex],i=this.positionFor(this.fromIndex);return void 0!==e&amp;&amp;void 0!==i&amp;&amp;(this.delta[this.wpId]=i,this.delta[t]=e,!0)}buildUpPredecessorPosition(){let e=-16384;for(let t=0;t
                   <this.index;t++){const 0="n?this.delta[i]=e+16384:n}return" e="this.firstPosition,t=this.lastPosition;this.redistribute(e,t)}redistribute(e,t){const" e}positionfor(e){const="" i="this.order.length;let" n="Math.floor((t-e)/(i-1));if(n&lt;1){if(t+i&lt;=2147483647)t+=i;else{if(!(e-i" t="this.order[e];return" this.delta[e]||this.positions[e]}reorderedinsert(){let="" this.liveposition(t)}liveposition(e){return="">
                    =-2147483647))throw"Elements cannot be moved further and no space is left. Too many elements";e-=i}n=Math.floor((t-e)/(i-1))}for(let s=0;s
                    <i;s++){const e="2147483647,t=-2147483647,i=!1;for(let" minmaxpositions(){let="" n="this.order.length-1;n" t="this.order[s];this.delta[t]=e+s*n}}get">
                     =0;n--){let s=this.order[n],a=this.livePosition(s);void 0!==a&amp;&amp;(e=Math.min(a,e),t=Math.max(a,t),i=!0)}return i&amp;&amp;e!==t?[e,t]:[0,16384*this.order.length]}get firstPosition(){const e=this.order[0];return this.livePosition(e)}get lastPosition(){for(let e=this.order.length-1;e&gt;=0;e--){let t=this.order[e],i=this.livePosition(t);if(void 0!==i)return i}}}var d=i("Gyz5"),u=i("IzEk"),h=i("6yP5"),p=i("x5It"),m=i("fXoL");class g extends s.a{constructor(e,t,i,n,s,a){super(e),this.querySpace=e,this.queryOrderDm=t,this.states=i,this.causedUpdates=n,this.wpTableSortBy=s,this.pathHelper=a}initialize(e,t,i){return!e.persisted&amp;&amp;this.positions.hasValue()&amp;&amp;this.applyToQuery(e),this.wpTableSortBy.isManualSortingMode?this.withLoadedPositions():Promise.resolve()}move(e,t,i){return Object(n.b)(this,void 0,void 0,(function*(){let n=e.findIndex(e=&gt;e===t);return e.splice(n,1),e.splice(i,0,t),yield this.assignPosition(e,t,i,n),e}))}remove(e,t){return _.remove(e,e=&gt;e===t),this.update({[t]:-1}),e}add(e,t,i=-1){return Object(n.b)(this,void 0,void 0,(function*(){return-1===i?(e.push(t),i=e.length-1):e.splice(i,0,t),yield this.assignPosition(e,t,i),e}))}get applicable(){return this.currentQuery.persisted}get currentQuery(){return this.querySpace.query.value}assignPosition(e,t,i,s=null){return Object(n.b)(this,void 0,void 0,(function*(){const n=yield this.withLoadedPositions(),a=new l(e,n,t,i,s).buildDelta();yield this.update(a)}))}get positions(){return this.updatesState}update(e){return Object(n.b)(this,void 0,void 0,(function*(){let t=this.positions.getValueOr({});if(this.positions.putValue(Object.assign(Object.assign({},t),e)),this.currentQuery.persisted){const t=yield this.queryOrderDm.update(this.currentQuery.id,e);this.currentQuery.updatedAt=t,this.causedUpdates.add(this.currentQuery)}this.applyToQuery(this.currentQuery),this.querySpace.query.putValue(this.currentQuery)}))}withLoadedPositions(){if(this.currentQuery.persisted){(this.positions.value==={}||this.positions.isValueOlderThan(6e4))&amp;&amp;this.positions.clear("Clearing old positions value"),this.positions.putFromPromiseIfPristine(()=&gt;this.queryOrderDm.get(this.currentQuery.id))}else this.positions.isPristine()&amp;&amp;this.positions.putValue({});return this.positions.values$().pipe(Object(u.a)(1)).toPromise()}valueFromQuery(e){}orderedWorkPackages(){const e=this.querySpace.results.value.elements.map(e=&gt;this.states.workPackages.get(e.id).getValueOr(e));if(this.currentQuery.persisted||this.positions.isPristine())return e;{const t=this.positions.value;return _.sortBy(e,e=&gt;{const i=t[e.id];return void 0!==i?i:2147483647})}}applyToQuery(e){return e.orderedWorkPackages=this.positions.getValueOr({}),!1}hasChanged(e){return!1}}g.\u0275fac=function(e){return new(e||g)(m.rc(a.a),m.rc(d.a),m.rc(o.a),m.rc(p.a),m.rc(h.a),m.rc(r.a))},g.\u0275prov=m.dc({token:g,factory:g.\u0275fac})},V4eP:function(e,t,i){"use strict";i.d(t,"d",(function(){return r})),i.d(t,"c",(function(){return o})),i.d(t,"b",(function(){return c})),i.d(t,"e",(function(){return l})),i.d(t,"a",(function(){return d}));var n=i("fXoL"),s=(i("kgyZ"),i("wZYP")),a=i("M0J3");i("GntA");const r=new n.z("editing-portal--schema"),o=new n.z("editing-portal--handler"),c=new n.z("editing-portal--changeset"),l="-editing";class d extends a.a{constructor(e,t,i,n,s,a,r){super(),this.I18n=e,this.elementRef=t,this.change=i,this.schema=n,this.handler=s,this.cdRef=a,this.injector=r,this.self=this,this.schema=this.schema||this.change.schema[this.name],this.change.state&amp;&amp;this.change.state.values$().pipe(this.untilDestroyed()).subscribe(e=&gt;{if(!e.schema[this.name])return s.deactivate(!1);this.change=e,this.schema=e.schema[this.name],this.initialize(),this.cdRef.markForCheck()})}ngOnInit(){this.$element=jQuery(this.elementRef.nativeElement),this.initialize()}get overflowingSelector(){return this.$element?this.$element.closest(".__overflowing_element_container").data("overflowingIdentifier"):null}get inFlight(){return this.handler.inFlight}get value(){return this.resource[this.name]}get name(){return this.change.getSchemaName(this.handler.fieldName)}set value(e){this.resource[this.name]=this.parseValue(e)}get placeholder(){return"subject"===this.name?this.I18n.t("js.placeholders.subject"):""}get resource(){return this.change.projectedResource}initialize(){}parseValue(e){return e}}d.\u0275fac=function(e){return new(e||d)(n.hc(s.a),n.hc(n.q),n.hc(c),n.hc(r),n.hc(o),n.hc(n.i),n.hc(n.A))},d.\u0275dir=n.cc({type:d,features:[n.Qb]})},VFHb:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("hgso"),s=i("fXoL");class a extends n.a{load(e){return e.watchers.$update().then(e=&gt;e.elements)}}a.\u0275fac=function(e){return r(e||a)},a.\u0275prov=s.dc({token:a,factory:a.\u0275fac});const r=s.pc(a)},VNOR:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("V4eP"),s=i("k8lp"),a=i("fXoL"),r=i("ofXK"),o=i("32V0");function c(e,t){if(1&amp;e){const e=a.oc();a.nc(0,"edit-field-controls",4),a.vc("onSave",(function(){return a.Sc(e),a.xc().handleUserSubmit()}))("onCancel",(function(){return a.Sc(e),a.xc().handler.handleUserCancel()})),a.mc()}if(2&amp;e){const e=a.xc();a.Dc("fieldController",e.field)("saveTitle",e.text.save)("cancelTitle",e.text.cancel)}}class l extends n.a{constructor(){super(...arguments),this.field=this,this.initializationError=!1,this.isPreview=!1,this.previewHtml="",this.text={},this.editorType=this.resource.getEditorTypeFor(this.field.name)}ngOnInit(){super.ngOnInit(),this.handler.registerOnSubmit(()=&gt;this.getCurrentValue()),this.text={attachmentLabel:this.I18n.t("js.label_formattable_attachment_hint"),save:this.I18n.t("js.inplace.button_save",{attribute:this.schema.name}),cancel:this.I18n.t("js.inplace.button_cancel",{attribute:this.schema.name})}}onCkeditorSetup(e){this.resource.isNew||setTimeout(()=&gt;e.editing.view.focus())}getCurrentValue(){return this.editor.getTransformedContent().then(e=&gt;{this.rawValue=e})}onContentChange(e){this.rawValue!==e&amp;&amp;(this.rawValue=e)}handleUserSubmit(){return this.getCurrentValue().then(()=&gt;{this.handler.handleUserSubmit()}),!1}get ckEditorContext(){return{resource:this.resource,macros:"none",previewContext:this.previewContext,options:{rtl:this.schema.options&amp;&amp;this.schema.options.rtl}}}get previewContext(){return this.handler.previewContext(this.resource)}reset(){this.editor&amp;&amp;this.editor.initialized&amp;&amp;(this.editor.content=this.rawValue,this.cdRef.markForCheck())}get rawValue(){return this.value&amp;&amp;this.value.raw?this.value.raw:""}set rawValue(e){this.value={raw:e}}isEmpty(){return!(this.value&amp;&amp;this.value.raw)}initialize(){this.resource.isNew&amp;&amp;this.editor&amp;&amp;this.reset()}}l.\u0275fac=function(e){return d(e||l)},l.\u0275cmp=a.bc({type:l,selectors:[["ng-component"]],viewQuery:function(e,t){var i;(1&amp;e&amp;&amp;a.Yc(s.a,!0),2&amp;e)&amp;&amp;(a.Pc(i=a.wc())&amp;&amp;(t.editor=i.first))},features:[a.Qb],decls:4,vars:4,consts:[[1,"textarea-wrapper"],[1,"op-ckeditor--wrapper","op-ckeditor-element"],[3,"context","content","ckEditorType","onContentChange","onInitializationFailed","onInitialized"],[3,"fieldController","saveTitle","cancelTitle","onSave","onCancel",4,"ngIf"],[3,"fieldController","saveTitle","cancelTitle","onSave","onCancel"]],template:function(e,t){1&amp;e&amp;&amp;(a.nc(0,"div",0),a.nc(1,"div",1),a.nc(2,"op-ckeditor",2),a.vc("onContentChange",(function(e){return t.onContentChange(e)}))("onInitializationFailed",(function(){return t.initializationError=!0}))("onInitialized",(function(e){return t.onCkeditorSetup(e)})),a.mc(),a.mc(),a.ad(3,c,1,3,"edit-field-controls",3),a.mc()),2&amp;e&amp;&amp;(a.Tb(2),a.Dc("context",t.ckEditorContext)("content",t.rawValue)("ckEditorType",t.editorType),a.Tb(1),a.Dc("ngIf",!(t.handler.inEditMode||t.initializationError)))},directives:[s.a,r.q,o.a],encapsulation:2,changeDetection:0});const d=a.pc(l)},VPzE:function(e,t,i){"use strict";i.d(t,"a",(function(){return f}));var n=i("iMRi"),s=i("POAS"),a=i("d/TE"),r=i("SqdZ"),o=i("IaZ+"),c=i("wZYP"),l=i("E2tj"),d=i("DhiE"),u=i("fXoL"),h=i("kor4"),p=i("3Pt+"),m=i("k1Xe");const g=["queryNameField"];class f extends r.a{constructor(e,t,i,n,s,a,r,o,c){super(t,o,e),this.elementRef=e,this.locals=t,this.I18n=i,this.states=n,this.querySpace=s,this.wpListService=a,this.halNotification=r,this.cdRef=o,this.notificationsService=c,this.queryName="",this.isStarred=!1,this.isPublic=!1,this.isBusy=!1,this.text={title:this.I18n.t("js.modals.form_submit.title"),text:this.I18n.t("js.modals.form_submit.text"),save_as:this.I18n.t("js.label_save_as"),label_name:this.I18n.t("js.modals.label_name"),label_visibility_settings:this.I18n.t("js.label_visibility_settings"),button_save:this.I18n.t("js.modals.button_save"),button_cancel:this.I18n.t("js.button_cancel"),close_popup:this.I18n.t("js.close_popup_title")}}setValues(e){this.isStarred=e.isStarred,this.isPublic=e.isPublic}onOpen(){this.queryNameField.nativeElement.focus()}get afterFocusOn(){return jQuery("#work-packages-settings-button")}saveQueryAs(e){if(this.isBusy||!this.queryName)return;this.isBusy=!0;const t=this.querySpace.query.value;t.public=this.isPublic,this.wpListService.create(t,this.queryName).then(t=&gt;this.isStarred&amp;&amp;!t.starred?this.wpListService.toggleStarred(t).then(()=&gt;this.closeMe(e)):(this.closeMe(e),Promise.resolve(!0))).catch(e=&gt;this.halNotification.handleRawError(e)).then(()=&gt;this.isBusy=!1)}}f.\u0275fac=function(e){return new(e||f)(u.hc(u.q),u.hc(o.a),u.hc(c.a),u.hc(n.a),u.hc(l.a),u.hc(d.a),u.hc(s.a),u.hc(u.i),u.hc(a.a))},f.\u0275cmp=u.bc({type:f,selectors:[["ng-component"]],viewQuery:function(e,t){var i;(1&amp;e&amp;&amp;u.Yc(g,!0),2&amp;e)&amp;&amp;(u.Pc(i=u.wc())&amp;&amp;(t.queryNameField=i.first))},features:[u.Qb],decls:19,vars:11,consts:[[1,"op-modal--portal"],["data-indicator-name","modal","tabindex","0",1,"op-modal--modal-container","wp-table--configuration-modal","loading-indicator--location"],[1,"op-modal--modal-header"],[1,"op-modal--modal-close-button"],[1,"icon-close",3,"accessibleClick"],[3,"textContent"],["name","modalSaveForm",1,"form"],[1,"form--field","-required"],["for","save-query-name",1,"form--label",3,"textContent"],[1,"form--field-container"],[1,"form--text-field-container"],["type","text","name","save-query-name","id","save-query-name","required","",1,"form--text-field",3,"ngModel","ngModelChange"],["queryNameField",""],[1,"form--section"],[3,"isSave","isStarred","isPublic","onChange"],[1,"form--space"],[1,"button","-highlight","-with-icon","icon-checkmark",3,"textContent","disabled","click"],[1,"button",3,"textContent","click"]],template:function(e,t){1&amp;e&amp;&amp;(u.nc(0,"div",0),u.nc(1,"div",1),u.nc(2,"div",2),u.nc(3,"a",3),u.nc(4,"i",4),u.vc("accessibleClick",(function(e){return t.closeMe(e)})),u.mc(),u.mc(),u.mc(),u.ic(5,"h3",5),u.nc(6,"form",6),u.nc(7,"div",7),u.ic(8,"label",8),u.nc(9,"div",9),u.nc(10,"div",10),u.nc(11,"input",11,12),u.vc("ngModelChange",(function(e){return t.queryName=e})),u.mc(),u.mc(),u.mc(),u.mc(),u.nc(13,"section",13),u.ic(14,"h3",5),u.nc(15,"query-sharing-form",14),u.vc("onChange",(function(e){return t.setValues(e)})),u.mc(),u.mc(),u.nc(16,"div",15),u.nc(17,"button",16),u.vc("click",(function(e){return t.saveQueryAs(e)})),u.mc(),u.nc(18,"button",17),u.vc("click",(function(e){return t.closeMe(e)})),u.mc(),u.mc(),u.mc(),u.mc(),u.mc()),2&amp;e&amp;&amp;(u.Tb(4),u.Ub("title",t.text.close_popup),u.Tb(1),u.Dc("textContent",t.text.save_as),u.Tb(3),u.Dc("textContent",t.text.label_name),u.Tb(3),u.Dc("ngModel",t.queryName),u.Tb(3),u.Dc("textContent",t.text.label_visibility_settings),u.Tb(1),u.Dc("isSave",!0)("isStarred",t.isStarred)("isPublic",t.isPublic),u.Tb(2),u.Dc("textContent",t.text.button_save)("disabled",t.isBusy||!t.queryName),u.Tb(1),u.Dc("textContent",t.text.button_cancel))},directives:[h.a,p.C,p.n,p.o,p.c,p.x,p.m,p.p,m.a],encapsulation:2})},"VQC/":function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("kTsZ"),s=i("Jui0"),a=i("RhL0"),r=i("fXoL");class o{constructor(e,t){this.halResourceService=e,this.pathHelper=t}createVersion(e){return this.halResourceService.post(this.pathHelper.api.v3.versions.path,e).toPromise()}emptyCreateForm(e){return this.halResourceService.post(this.pathHelper.api.v3.versions.form.toString(),e).toPromise()}one(e){return this.halResourceService.get(this.pathHelper.api.v3.versions.id(e).toString()).toPromise()}list(){return this.halResourceService.get(this.pathHelper.api.v3.versions.toString()).toPromise()}listForProject(e){return this.halResourceService.get(this.pathHelper.api.v3.projects.id(e).versions.toString()).toPromise()}canCreateVersionInProject(e){return this.halResourceService.get(this.pathHelper.api.v3.versions.availableProjects.toString(),{filters:Object(a.b)("id","=",[e]).toJson()}).toPromise().then(e=&gt;1===e.elements.length)}listProjectsAvailableForVersions(){return this.halResourceService.get(this.pathHelper.api.v3.versions.availableProjects.toString()).toPromise()}patch(e,t){return this.halResourceService.patch(this.pathHelper.api.v3.versions.id(e.id).toString(),t).toPromise()}}o.\u0275fac=function(e){return new(e||o)(r.rc(n.a),r.rc(s.a))},o.\u0275prov=r.dc({token:o,factory:o.\u0275fac})},VYxi:function(e,t,i){"use strict";i.d(t,"a",(function(){return m}));var n=i("Nolp"),s=i("fXoL"),a=i("ofXK"),r=i("711n"),o=i("XZlt"),c=i("qvi4"),l=i("1zMF"),d=i("aveh"),u=i("2bW2");const h=function(){return["status","type"]};function p(e,t){if(1&amp;e){const e=s.oc();s.nc(0,"div",1),s.nc(1,"edit-form",2),s.vc("onSaved",(function(t){return s.Sc(e),s.xc().onSaved(t)})),s.nc(2,"div",3),s.nc(3,"div",4),s.ic(4,"wp-type-status",5),s.mc(),s.nc(5,"ul",6),s.nc(6,"li",7),s.ic(7,"zen-mode-toggle-button"),s.mc(),s.nc(8,"li",7),s.nc(9,"button",8),s.ic(10,"i",9),s.mc(),s.mc(),s.mc(),s.mc(),s.ic(11,"wp-single-view",10),s.nc(12,"wp-edit-actions-bar",11),s.vc("onCancel",(function(){return s.Sc(e),s.xc().cancelAndBackToList()})),s.mc(),s.mc(),s.mc()}if(2&amp;e){const e=s.xc();s.Tb(1),s.Dc("resource",e.newWorkPackage)("skippedFields",s.Hc(7,h))("inEditMode",!0),s.Tb(3),s.Dc("workPackage",e.newWorkPackage),s.Tb(5),s.Ub("title",e.text.button_settings),s.Tb(2),s.Dc("workPackage",e.newWorkPackage)("showProject",e.copying)}}class m extends n.a{constructor(){super(...arguments),this.successState="work-packages.show"}}m.\u0275fac=function(e){return g(e||m)},m.\u0275cmp=s.bc({type:m,selectors:[["wp-copy-full-view"]],hostAttrs:[1,"work-packages-page--ui-view"],features:[s.Qb],decls:1,vars:1,consts:[["class","work-package--new-state work-packages--new work-packages--show-view toolbar-container",4,"ngIf"],[1,"work-package--new-state","work-packages--new","work-packages--show-view","toolbar-container"],[3,"resource","skippedFields","inEditMode","onSaved"],[1,"toolbar"],[1,"title-container"],[3,"workPackage"],[1,"toolbar-items","hide-when-print"],[1,"toolbar-item","hidden-for-mobile"],["id","create-wp-menu-button","wpCreateSettingsMenu","",1,"button","last","work-packages-settings-button","toolbar-icon"],[1,"button--icon","icon-show-more"],[3,"workPackage","showProject"],[3,"onCancel"]],template:function(e,t){1&amp;e&amp;&amp;s.ad(0,p,13,8,"div",0),2&amp;e&amp;&amp;s.Dc("ngIf",t.newWorkPackage)},directives:[a.q,r.a,o.a,c.a,l.a,d.a,u.a],encapsulation:2,changeDetection:0});const g=s.pc(m)},Va5K:function(e,t,i){"use strict";i.d(t,"c",(function(){return o})),i.d(t,"b",(function(){return c})),i.d(t,"a",(function(){return l}));var n=i("zqrF"),s=i("iMRi"),a=i("E2tj"),r=i("fXoL");const o="list",c="card";class l extends n.a{constructor(e,t){super(t),this.states=e,this.querySpace=t}hasChanged(e){return this.current!==e.displayRepresentation}valueFromQuery(e){return e.displayRepresentation||null}applyToQuery(e){const t=this.current;return e.displayRepresentation=null===t?void 0:t,!1}get current(){return this.lastUpdatedState.getValueOr(null)}get isList(){const e=this.current;return!e||e===o}get isCards(){return this.current===c}setDisplayRepresentation(e){this.update(e)}}l.\u0275fac=function(e){return new(e||l)(r.rc(s.a),r.rc(a.a))},l.\u0275prov=r.dc({token:l,factory:l.\u0275fac})},VgZ9:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i("ug4p"),s=i("iMRi"),a=i("iB+3"),r=i("Jui0"),o=i("/C7M"),c=i("qc15"),l=i("fXoL");class d{constructor(e,t,i,n,s,a){this.$state=e,this.states=t,this.halEvents=i,this.notificationService=n,this.pathHelper=s,this.wpCacheService=a}changeParent(e,t){let i={lockVersion:e.lockVersion};return i._links=t?{parent:{href:this.pathHelper.api.v3.work_packages.id(t).toString()}}:{parent:{href:null}},e.changeParent(i).then(i=&gt;(this.wpCacheService.updateWorkPackage(i),this.notificationService.showSave(i),this.halEvents.push(e,{eventType:"association",relatedWorkPackage:t,relationType:"parent"}),i)).catch(t=&gt;(this.notificationService.handleRawError(t,e),Promise.reject(t)))}removeParent(e){return this.changeParent(e,null)}addExistingChildWp(e,t){return this.wpCacheService.require(t).then(t=&gt;this.changeParent(t,e.id).then(i=&gt;(this.wpCacheService.loadWorkPackage(e.id,!0),this.halEvents.push(e,{eventType:"association",relatedWorkPackage:t.id,relationType:"child"}),i)))}addNewChildWp(e,t){t.project.$load().then(()=&gt;{const i=[e+".new",{parent_id:t.id}];this.$state.includes("work-packages.show")&amp;&amp;(i[0]="work-packages.new"),this.$state.go(...i)})}removeChild(e){return e.$load().then(()=&gt;{let t=e.parent;return e.changeParent({_links:{parent:{href:null}},lockVersion:e.lockVersion}).then(e=&gt;{this.wpCacheService.loadWorkPackage(t.id,!0),this.wpCacheService.updateWorkPackage(e)}).catch(t=&gt;(this.notificationService.handleRawError(t,e),Promise.reject(t)))})}}d.\u0275fac=function(e){return new(e||d)(l.rc(a.G),l.rc(s.a),l.rc(o.a),l.rc(c.a),l.rc(r.a),l.rc(n.a))},d.\u0275prov=l.dc({token:d,factory:d.\u0275fac})},VpST:function(e,t,i){"use strict";i.d(t,"a",(function(){return Hn}));var n=i("u4T9"),s=i("wZYP"),a=(i("ii2/"),i("711n")),r=i("fXoL"),o=i("ofXK"),c=i("+ytV"),l=i("CX+C"),d=i("80WE");function u(e,t){1&amp;e&amp;&amp;(r.nc(0,"span",11),r.cd(1," *"),r.mc())}function h(e,t){if(1&amp;e&amp;&amp;(r.nc(0,"div",7),r.nc(1,"wp-replacement-label",8),r.cd(2),r.ad(3,u,2,0,"span",9),r.mc(),r.ic(4,"attribute-help-text",10),r.mc()),2&amp;e){const e=r.xc(2).$implicit;r.Tb(1),r.Dc("fieldName",e.name),r.Tb(1),r.ed(" ",e.label," "),r.Tb(1),r.Dc("ngIf",e.field.required&amp;&amp;e.field.writable),r.Tb(1),r.Dc("attribute",e.name)("attributeScope","WorkPackage")}}function p(e,t){if(1&amp;e&amp;&amp;r.ic(0,"editable-attribute-field",15),2&amp;e){const e=r.xc(3).$implicit,t=r.xc();r.Dc("resource",t.workPackage)("isDropTarget",!0)("fieldName",e.name)}}function m(e,t){if(1&amp;e&amp;&amp;r.ic(0,"editable-attribute-field",16),2&amp;e){const e=r.xc(3).$implicit,t=r.xc();r.Dc("resource",t.workPackage)("fieldName",e.name)}}function g(e,t){if(1&amp;e&amp;&amp;(r.nc(0,"div",12),r.ad(1,p,1,3,"editable-attribute-field",13),r.ad(2,m,1,2,"editable-attribute-field",14),r.mc()),2&amp;e){const e=r.xc(2).$implicit;r.Tb(1),r.Dc("ngIf",e.field.isFormattable),r.Tb(1),r.Dc("ngIf",!e.field.isFormattable)}}function f(e,t){if(1&amp;e&amp;&amp;(r.nc(0,"div",7),r.nc(1,"wp-replacement-label",8),r.cd(2),r.mc(),r.ic(3,"attribute-help-text",10),r.mc()),2&amp;e){const e=r.xc(2).$implicit;r.Tb(1),r.Dc("fieldName",e.name),r.Tb(1),r.ed(" ",e.label," "),r.Tb(1),r.Dc("attribute",e.name)("attributeScope","WorkPackage")}}function b(e,t){if(1&amp;e&amp;&amp;(r.nc(0,"div",17),r.ic(1,"editable-attribute-field",18),r.ic(2,"span",19),r.ic(3,"editable-attribute-field",18),r.mc()),2&amp;e){const e=r.xc(2).$implicit,t=r.xc();r.Tb(1),r.Dc("fieldName",e.fields[0].name)("resource",t.workPackage)("wrapperClasses","-small -shrink")("displayPlaceholder",t.text[e.name][e.fields[0].name]),r.Tb(2),r.Dc("fieldName",e.fields[1].name)("resource",t.workPackage)("wrapperClasses","-small -shrink")("displayPlaceholder",t.text[e.name][e.fields[1].name])}}function v(e,t){if(1&amp;e&amp;&amp;(r.ad(0,h,5,5,"div",4),r.ad(1,g,3,2,"div",5),r.ad(2,f,4,4,"div",4),r.ad(3,b,4,8,"div",6)),2&amp;e){const e=r.xc().$implicit;r.Dc("ngIf",!e.multiple&amp;&amp;e.field),r.Tb(1),r.Dc("ngIf",!e.multiple&amp;&amp;e.field),r.Tb(1),r.Dc("ngIf",e.multiple),r.Tb(1),r.Dc("ngIf",e.multiple)}}const w=function(e){return{"-span-all-columns":e}};function y(e,t){if(1&amp;e&amp;&amp;(r.nc(0,"div",2),r.ad(1,v,4,4,"ng-template",3),r.mc()),2&amp;e){const e=t.$implicit,i=r.xc();r.Dc("ngClass",r.Ic(2,w,e.spanAll)),r.Tb(1),r.Dc("ngIf",!i.shouldHideField(e))}}class k{constructor(e,t,i){this.I18n=e,this.wpeditForm=t,this.injector=i,this.text={date:{startDate:this.I18n.t("js.label_no_start_date"),dueDate:this.I18n.t("js.label_no_due_date")}}}trackByName(e,t){return t.name}shouldHideField(e){const t=e.field||e.fields[0];return this.wpeditForm.editMode&amp;&amp;!t.writable}}k.\u0275fac=function(e){return new(e||k)(r.hc(s.a),r.hc(a.a),r.hc(r.A))},k.\u0275cmp=r.bc({type:k,selectors:[["wp-attribute-group"]],inputs:{workPackage:"workPackage",group:"group"},decls:2,vars:2,consts:[[1,"-columns-2"],["class","attributes-key-value",3,"ngClass",4,"ngFor","ngForOf","ngForTrackBy"],[1,"attributes-key-value",3,"ngClass"],[3,"ngIf"],["class","attributes-key-value--key",4,"ngIf"],["class","attributes-key-value--value-container",4,"ngIf"],["class","attributes-key-value--value-container -minimal",4,"ngIf"],[1,"attributes-key-value--key"],[3,"fieldName"],["class","required",4,"ngIf"],[3,"attribute","attributeScope"],[1,"required"],[1,"attributes-key-value--value-container"],["class","wp-edit-formattable-field",3,"resource","isDropTarget","fieldName",4,"ngIf"],[3,"resource","fieldName",4,"ngIf"],[1,"wp-edit-formattable-field",3,"resource","isDropTarget","fieldName"],[3,"resource","fieldName"],[1,"attributes-key-value--value-container","-minimal"],[3,"fieldName","resource","wrapperClasses","displayPlaceholder"],[1,"attributes-key-value--value-separator"]],template:function(e,t){1&amp;e&amp;&amp;(r.nc(0,"div",0),r.ad(1,y,2,4,"div",1),r.mc()),2&amp;e&amp;&amp;(r.Tb(1),r.Dc("ngForOf",t.group.members)("ngForTrackBy",t.trackByName))},directives:[o.p,o.n,o.q,c.a,l.a,d.a],encapsulation:2});var C=i("oT5z"),x=i("aveh"),j=i("g1AQ"),S=i("72oW"),T=i("CVKj"),P=i("9hh2"),I=i("lmDM"),O=i("f24R"),D=i("d/TE"),R=i("E2tj"),E=i("wd/R"),F=i("1G5W"),M=i("pLZG"),A=i("4jc8"),L=i("FnNU"),q=i("mrSG"),$=i("iMRi"),V=i("ug4p"),N=i("0bag"),H=i("E5Dd"),z=i("IzEk");function B(e,t,i,n,s,a,r,o,c,l,d,u,h){e.get(R.a);let p,m,g=null;h.change=s.changeFor(h.workPackage);const f=jQuery("body");function b(e,t){const n=i.getAbsoluteLeftCoordinates(),s=t.clientX-n;return Math.floor(s/e.viewParams.pixelPerDay)}function v(e){return t=&gt;{const i=b(h,t.originalEvent)-g,n=Math.floor(t.offsetX/h.viewParams.pixelPerDay),s=h.viewParams.dateDisplayStart.clone().add(n,"days");p=u.onDaysMoved(h.change,s,i,e),function(e,t){u.assignDateValues(e.change,d,t)}(h,p),u.update(l,d,h)}}function w(e){e.keyCode===H.a.ESCAPE&amp;&amp;k(!0)}function y(e){const t=h.workPackage;u.isEmpty(t)&amp;&amp;(t.isLeaf&amp;&amp;u.canMoveDates(t)?(c.style.cursor="",m&amp;&amp;m.remove(),m=u.displayPlaceholderUnderCursor(e,h),c.appendChild(m),c.onmouseleave=()=&gt;{m.remove()},c.onmousedown=e=&gt;{m.remove(),l.style.pointerEvents="none",e.preventDefault();const t=Math.floor(e.offsetX/h.viewParams.pixelPerDay),i=h.viewParams.dateDisplayStart.clone().add(t,"days").format("YYYY-MM-DD"),n=u.onMouseDown(e,i,h,d,l);if(u.update(l,d,h),"create"===n)return k(!1),void e.preventDefault();c.onmousemove=e=&gt;{const i=Math.floor(e.offsetX/h.viewParams.pixelPerDay),s=h.viewParams.dateDisplayStart.clone().add(i,"days"),a=i-t,r=u.onDaysMoved(h.change,s,a,n);u.assignDateValues(h.change,d,r),u.update(l,d,h)},c.onmouseleave=()=&gt;{k(!0)},c.onmouseup=()=&gt;{k(!1)},f.on("keyup.timelinecell",w)}):c.style.cursor="not-allowed")}function k(t){if(i.disableViewParamsCalculation=!1,c.onmousemove=y,c.onmousedown=_.noop,c.onmouseleave=_.noop,c.onmouseup=_.noop,l.style.pointerEvents="auto",f.off(".timelinecell"),i.resetCursor(),g=null,p={},t||h.change.isEmpty())h.change.clear(),u.update(l,d,h),u.onMouseDownEnd(d,h.change),i.refreshView();else{const t=()=&gt;{h.change.clear(),u.onMouseDownEnd(d,h.change)};(function(t){const i=e.get(N.a),c=e.get(R.a),l=E().toISOString();return o.table.promise=s.save(t).then(e=&gt;{r.showSave(e.resource);const t=_.map(c.tableRendered.value,e=&gt;e.workPackageId);return i.loadIdsUpdatedSince(t,l).then(t=&gt;(n.updateWorkPackageList(t.elements),a.push(e.resource,{eventType:"updated"}),c.timelineRendered.pipe(Object(z.a)(1)).toPromise()))}).catch(e=&gt;{r.handleRawError(e,h.workPackage)})})(h.change).then(t).catch(t)}}l.onmousedown=e=&gt;{1===e.which&amp;&amp;function(e,t){t.preventDefault();if(e.classList.add("active-drag"),f.on("mouseup.timelinecell",()=&gt;e.classList.remove("active-drag")),i.disableViewParamsCalculation=!0,g=b(h,t),!h.workPackage.isLeaf&amp;&amp;!h.viewParams.activeSelectionMode)return;const n=u.onMouseDown(t,null,h,d,e);f.on("mousemove.timelinecell",v(n)),f.on("keyup.timelinecell",w),f.on("mouseup.timelinecell",()=&gt;k(!1))}(l,e)},c.onmousemove=y}var Q=i("Y0Nk"),W=i("SKFm"),U=i("/C7M"),X=i("qc15"),Y=i("r0MM");class G{constructor(e,t,i,n,s,a){this.center=e,this.left=t,this.leftHover=i,this.right=n,this.rightHover=s,this.farRight=a}}class K{constructor(e,t,i,n,s,a){this.injector=e,this.workPackageTimeline=t,this.renderers=i,this.latestRenderInfo=n,this.classIdentifier=s,this.workPackageId=a,this.wpElement=null}getMarginLeftOfLeftSide(){return this.cellRenderer(this.latestRenderInfo.workPackage).getMarginLeftOfLeftSide(this.latestRenderInfo)}getMarginLeftOfRightSide(){return this.cellRenderer(this.latestRenderInfo.workPackage).getMarginLeftOfRightSide(this.latestRenderInfo)}getPaddingLeftForIncomingRelationLines(){return this.cellRenderer(this.latestRenderInfo.workPackage).getPaddingLeftForIncomingRelationLines(this.latestRenderInfo)}getPaddingRightForOutgoingRelationLines(){return this.cellRenderer(this.latestRenderInfo.workPackage).getPaddingRightForOutgoingRelationLines(this.latestRenderInfo)}canConnectRelations(){const e=this.latestRenderInfo.workPackage;return e.isMilestone?!_.isNil(e.date):!_.isNil(e.startDate)||!_.isNil(e.dueDate)}clear(){this.cellElement.html(""),this.wpElement=null}get cellContainer(){return this.workPackageTimeline.timelineBody}get cellElement(){return this.cellContainer.find(`.${this.classIdentifier}`)}lazyInit(e,t){const i=this.workPackageTimeline.timelineBody[0],n=this.cellElement;return n.length?(null!==this.wpElement&amp;&amp;i.contains(this.wpElement)&amp;&amp;this.elementShape===e.type||(this.clear(),this.wpElement=e.render(t),this.labels=e.createAndAddLabels(t,this.wpElement),this.elementShape=e.type,n.append(this.wpElement),e.canMoveDates(t.workPackage)&amp;&amp;(this.wpElement.classList.add("-editable"),B(this.injector,0,this.workPackageTimeline,this.wpCacheService,this.halEditing,this.halEvents,this.notificationService,this.loadingIndicator,n[0],this.wpElement,this.labels,e,t))),Promise.resolve()):Promise.reject("uninitialized")}cellRenderer(e){return e.isMilestone?this.renderers.milestone:this.renderers.generic}refreshView(e){this.latestRenderInfo=e;const t=this.cellRenderer(e.workPackage);this.lazyInit(t,e).then(()=&gt;{t.update(this.wpElement,this.labels,e)||this.clear()}).catch(()=&gt;null)}}Object(q.c)([Object(Y.a)(),Object(q.e)("design:type",V.a)],K.prototype,"wpCacheService",void 0),Object(q.c)([Object(Y.a)(),Object(q.e)("design:type",W.a)],K.prototype,"halEditing",void 0),Object(q.c)([Object(Y.a)(),Object(q.e)("design:type",U.a)],K.prototype,"halEvents",void 0),Object(q.c)([Object(Y.a)(),Object(q.e)("design:type",X.a)],K.prototype,"notificationService",void 0),Object(q.c)([Object(Y.a)(),Object(q.e)("design:type",$.a)],K.prototype,"states",void 0),Object(q.c)([Object(Y.a)(),Object(q.e)("design:type",Q.a)],K.prototype,"loadingIndicator",void 0);var Z=i("Ncnr"),J=i("juWA"),ee=i("RGDJ"),te=i("PtkW");class ie{constructor(e,t){this.injector=e,this.workPackageTimeline=t,this.fieldRenderer=new Z.a(this.injector,"timeline"),this.dateDisplaysOnMouseMove={}}get type(){return"bar"}canMoveDates(e){return e.schema.startDate.writable&amp;&amp;e.schema.dueDate.writable&amp;&amp;e.isAttributeEditable("startDate")}isEmpty(e){const t=E(e.startDate),i=E(e.dueDate);return _.isNaN(t.valueOf())&amp;&amp;_.isNaN(i.valueOf())}displayPlaceholderUnderCursor(e,t){const i=Math.floor(e.offsetX/t.viewParams.pixelPerDay),n=document.createElement("div");return n.style.pointerEvents="none",n.style.position="absolute",n.style.height="1em",n.style.width="30px",n.style.zIndex="9999",n.style.left=i*t.viewParams.pixelPerDay+"px",this.applyTypeColor(t,n),n}assignDateValues(e,t,i){this.assignDate(e,"startDate",i.startDate),this.assignDate(e,"dueDate",i.dueDate),this.updateLabels(!0,t,e)}onDaysMoved(e,t,i,n){const s=e.pristineResource.startDate,a=e.pristineResource.dueDate,r=E().format("YYYY-MM-DD"),o=E(e.projectedResource.startDate),c=E(e.projectedResource.dueDate);let l={};return"left"===n?l.startDate=E(s||a).add(i,"days"):"right"===n?l.dueDate=E(a||r).add(i,"days"):"both"===n?(s&amp;&amp;(l.startDate=E(s).add(i,"days")),a&amp;&amp;(l.dueDate=E(a).add(i,"days"))):"dragright"===n&amp;&amp;(l.dueDate=o.clone().add(i,"days")),"both"!==n&amp;&amp;(void 0!==l.startDate&amp;&amp;l.startDate.isAfter(c)?l.startDate=c:void 0!==l.dueDate&amp;&amp;l.dueDate.isBefore(o)&amp;&amp;(l.dueDate=o)),l}onMouseDown(e,t,i,n,s){if(i.viewParams.activeSelectionMode)return i.viewParams.activeSelectionMode(i.workPackage),e.preventDefault(),"both";const a=i.change.projectedResource;let r;return jQuery(e.target).hasClass("leftHandle")?(r="left",this.workPackageTimeline.forceCursor("col-resize"),null===a.startDate&amp;&amp;(a.startDate=a.dueDate)):jQuery(e.target).hasClass("rightHandle")||t?(r="right",this.workPackageTimeline.forceCursor("col-resize")):(r="both",this.workPackageTimeline.forceCursor("ew-resize")),t&amp;&amp;(a.startDate=t,a.dueDate=t,r="dragright"),this.updateLabels(!0,n,i.change),r}onMouseDownEnd(e,t){this.updateLabels(!1,e,t)}update(e,t,i){const n=i.change,s=e.querySelector(`.${A.h}`),a=i.viewParams;let r=E(n.projectedResource.startDate),o=E(n.projectedResource.dueDate);_.isNaN(r.valueOf())&amp;&amp;_.isNaN(o.valueOf())?e.style.visibility="hidden":e.style.visibility="visible",_.isNaN(o.valueOf())&amp;&amp;!_.isNaN(r.valueOf())&amp;&amp;(o=E(),s.style.backgroundImage="linear-gradient(90deg, rgba(255,255,255,0) 0%, #F1F1F1 100%)"),_.isNaN(r.valueOf())&amp;&amp;!_.isNaN(o.valueOf())&amp;&amp;(r=o.clone(),s.style.backgroundImage="linear-gradient(90deg, #F1F1F1 0%, rgba(255,255,255,0) 80%)");const c=r.diff(a.dateDisplayStart,"days");e.style.left=Object(A.c)(a,c);const l=o.diff(r,"days")+1;if(e.style.width=Object(A.c)(a,l),!_.isNaN(r.valueOf())||!_.isNaN(o.valueOf())){const t=_.max([i.viewParams.pixelPerDay,2]);e.style.minWidth=t+"px"}return t&amp;&amp;this.updateLabels(!1,t,n),this.checkForActiveSelectionMode(i,s),this.checkForSpecialDisplaySituations(i,s),this.applyTypeColor(i,s),!0}checkForActiveSelectionMode(e,t){e.viewParams.activeSelectionMode&amp;&amp;(t.style.backgroundImage="",e.viewParams.selectionModeStart===""+e.workPackage.id&amp;&amp;(jQuery(t).addClass(A.m),t.style.background="none"))}getMarginLeftOfLeftSide(e){const t=e.change.projectedResource;let i=E(t.startDate),n=E(t.dueDate);i=_.isNaN(i.valueOf())?n.clone():i;const s=i.diff(e.viewParams.dateDisplayStart,"days");return Object(A.d)(e.viewParams,s)}getMarginLeftOfRightSide(e){const t=e.change.projectedResource;let i=E(t.startDate),n=E(t.dueDate);i=_.isNaN(i.valueOf())?n.clone():i,n=_.isNaN(n.valueOf())?i.clone():n;const s=i.diff(e.viewParams.dateDisplayStart,"days"),a=n.diff(i,"days")+1;return Object(A.d)(e.viewParams,s+a)}getPaddingLeftForIncomingRelationLines(e){return e.viewParams.pixelPerDay/8}getPaddingRightForOutgoingRelationLines(e){return 0}render(e){const t=document.createElement("div"),i=document.createElement("div"),n=document.createElement("div"),s=document.createElement("div");return t.className=A.i+" "+this.type,i.className=A.h,n.className="leftHandle",s.className="rightHandle",t.appendChild(i),t.appendChild(n),t.appendChild(s),t}createAndAddLabels(e,t){const i=document.createElement("div");i.classList.add("bar-label"),this.applyTypeColor(e,i),t.appendChild(i);const n=document.createElement("div");n.classList.add("labelLeft","hide-on-hover"),t.appendChild(n);const s=document.createElement("div");s.classList.add("containerRight"),t.appendChild(s);const a=document.createElement("div");a.classList.add("labelRight","hide-on-hover"),s.appendChild(a);const r=document.createElement("div");r.classList.add("labelFarRight","hide-on-hover"),s.appendChild(r);const o=document.createElement("div");o.classList.add("labelHoverLeft","show-on-hover","-label-style"),t.appendChild(o);const c=document.createElement("div");c.classList.add("labelHoverRight","show-on-hover","-label-style"),t.appendChild(c);const l=new G(i,n,o,a,c,r);return this.updateLabels(!1,l,e.change),l}applyTypeColor(e,t){let i=e.workPackage,n=i.type,s=e.viewParams.activeSelectionMode;const a=n.id;s||this.isParentWithVisibleChildren(i)?t.classList.remove(ee.a.backgroundClass("type",a)):t.classList.add(ee.a.backgroundClass("type",a))}assignDate(e,t,i){i&amp;&amp;(e.projectedResource[t]=i.format("YYYY-MM-DD"))}checkForSpecialDisplaySituations(e,t){const i=e.workPackage;let n=e.viewParams.activeSelectionMode;i.isLeaf||n?t.classList.remove("-readonly"):t.classList.add("-readonly"),this.isParentWithVisibleChildren(i)&amp;&amp;(t.classList.add("-clamp-style"),t.style.borderStyle="solid",t.style.borderWidth="2px",t.style.borderBottom="none",t.style.background="none")}updateLabels(e,t,i){const n=this.wpTableTimeline.getNormalizedLabels(i.projectedResource);e||(this.renderLabel(i,t,"left",n.left),this.renderLabel(i,t,"right",n.right),this.renderLabel(i,t,"farRight",n.farRight)),this.renderHoverLabels(t,i)}renderHoverLabels(e,t){this.renderLabel(t,e,"leftHover","startDate"),this.renderLabel(t,e,"rightHover","dueDate")}renderLabel(e,t,i,n){let s=t[i];if(!s)return;if(s.innerHTML="",null===n)return void s.classList.remove("not-empty");let[a,r]=this.fieldRenderer.renderFieldValue(e.projectedResource,n,e);s&amp;&amp;a&amp;&amp;r?(r.classList.add("label-content"),s.appendChild(r),s.classList.add("not-empty")):s&amp;&amp;s.classList.remove("not-empty")}isParentWithVisibleChildren(e){if(!this.workPackageTimeline.inHierarchyMode)return!1;const t=this.workPackageTimeline.workPackageTable.lastRenderPass;return!!t&amp;&amp;!!t.parentsWithVisibleChildren[e.id]}}Object(q.c)([Object(Y.a)(),Object(q.e)("design:type",te.a)],ie.prototype,"wpTableTimeline",void 0),Object(q.c)([Object(Y.a)(),Object(q.e)("design:type",J.a)],ie.prototype,"TimezoneService",void 0);class ne extends ie{get type(){return"milestone"}isEmpty(e){const t=E(e.date);return _.isNaN(t.valueOf())}canMoveDates(e){return e.schema.date.writable&amp;&amp;e.isAttributeEditable("date")}displayPlaceholderUnderCursor(e,t){const i=Math.floor(e.offsetX/t.viewParams.pixelPerDay),n=document.createElement("div");n.className="timeline-element milestone",n.style.pointerEvents="none",n.style.height="1em",n.style.width="1em",n.style.left=i*t.viewParams.pixelPerDay+"px";const s=document.createElement("div");return s.className="diamond",s.style.left="0.5em",s.style.height="1em",s.style.width="1em",n.appendChild(s),this.applyTypeColor(t,s),n}assignDateValues(e,t,i){this.assignDate(e,"date",i.date),this.updateLabels(!0,t,e)}onDaysMoved(e,t,i,n){const s=e.pristineResource.date;let a={};return s&amp;&amp;(a.date=E(s).add(i,"days")),a}onMouseDown(e,t,i,n,s){if(i.viewParams.activeSelectionMode)return i.viewParams.activeSelectionMode(i.workPackage),e.preventDefault(),"both";let a="both";return this.workPackageTimeline.forceCursor("ew-resize"),t?(i.change.projectedResource.date=t,a="create",a):(this.updateLabels(!0,n,i.change),a)}update(e,t,i){const n=i.viewParams,s=E(i.change.projectedResource.date);if(_.isNaN(s.valueOf()))return!1;const a=jQuery(".diamond",e)[0];a.style.width="15px",a.style.height="15px",a.style.width="15px",a.style.height="15px",a.style.marginLeft=i.viewParams.pixelPerDay/2-7.5+"px",this.applyTypeColor(i,a);const r=s.diff(n.dateDisplayStart,"days");return e.style.left=Object(A.d)(n,r)+"px",t&amp;&amp;this.updateLabels(!1,t,i.change),this.checkForActiveSelectionMode(i,a),!0}getMarginLeftOfLeftSide(e){const t=e.change;const i=E(t.projectedResource.date).diff(e.viewParams.dateDisplayStart,"days");return Object(A.d)(e.viewParams,i)}getMarginLeftOfRightSide(e){return this.getMarginLeftOfLeftSide(e)+e.viewParams.pixelPerDay}getPaddingLeftForIncomingRelationLines(e){return e.viewParams.pixelPerDay/2-1}getPaddingRightForOutgoingRelationLines(e){return 7.5}render(e){const t=document.createElement("div");t.className=A.i+" "+this.type;const i=document.createElement("div");return i.className="diamond",t.appendChild(i),t}createAndAddLabels(e,t){const i=document.createElement("div");i.classList.add("labelLeft","hide-on-hover"),t.appendChild(i);const n=document.createElement("div");n.classList.add("containerRight"),t.appendChild(n);const s=document.createElement("div");s.classList.add("labelRight","hide-on-hover"),n.appendChild(s);const a=document.createElement("div");a.classList.add("labelFarRight","hide-on-hover"),n.appendChild(a);const r=document.createElement("div");r.classList.add("labelHoverRight","show-on-hover","-label-style"),t.appendChild(r);const o=new G(null,i,null,s,r,a);return this.updateLabels(!1,o,e.change),o}renderHoverLabels(e,t){this.renderLabel(t,e,"rightHover","date")}updateLabels(e,t,i){const n=this.wpTableTimeline.getNormalizedLabels(i.projectedResource);e||("startDate"===n.left&amp;&amp;"dueDate"===n.right?(this.renderLabel(i,t,"left",null),this.renderLabel(i,t,"right","date")):(this.renderLabel(i,t,"left",n.left),this.renderLabel(i,t,"right",n.right)),this.renderLabel(i,t,"farRight",n.farRight)),this.renderHoverLabels(t,i)}renderLabel(e,t,i,n){"startDate"!==n&amp;&amp;"dueDate"!==n||(n="date"),super.renderLabel(e,t,i,n)}}class se{constructor(e,t){this.injector=e,this.wpTimeline=t,this.cells={},this.cellRenderers={milestone:new ne(this.injector,t),generic:new ie(this.injector,t)}}hasCell(e){return this.getCellsFor(e).length&gt;0}getCellsFor(e){return _.filter(this.cells,t=&gt;t.workPackageId===e)||[]}refreshAllCells(){this.synchronizeCells(),_.each(this.cells,e=&gt;this.refreshSingleCell(e))}refreshCellsFor(e){_.each(this.getCellsFor(e),e=&gt;this.refreshSingleCell(e))}refreshSingleCell(e){const t=this.renderInfoFor(e.workPackageId);t.workPackage&amp;&amp;e.refreshView(t)}synchronizeCells(){const e=Object.keys(this.cells),t=[];_.each(this.wpTimeline.workPackageIdOrder,e=&gt;{const i=e.workPackageId;if(!i)return;if(this.states.workPackages.get(i).isPristine())return;const n=e.classIdentifier;this.cells[n]||(this.cells[n]=this.buildCell(n,i.toString())),t.push(n)}),_.difference(e,t).forEach(e=&gt;{this.cells[e].clear(),delete this.cells[e]})}buildCell(e,t){return new K(this.injector,this.wpTimeline,this.cellRenderers,this.renderInfoFor(t),e,t)}renderInfoFor(e){const t=this.states.workPackages.get(e).value;return{viewParams:this.wpTimeline.viewParameters,workPackage:t,change:this.halEditing.changeFor(t)}}}Object(q.c)([Object(Y.a)(),Object(q.e)("design:type",$.a)],se.prototype,"states",void 0),Object(q.c)([Object(Y.a)(),Object(q.e)("design:type",W.a)],se.prototype,"halEditing",void 0);var ae=i("uSJ+"),re=i("wyKs"),oe=i("5iud"),ce=i("qHU1"),le=i("itXk"),de=i("AEvm");class ue extends de.a{constructor(e,t,i,n,s,a,r,o,c,l,d,u){super(),this.injector=e,this.elementRef=t,this.states=i,this.wpTableDirective=n,this.NotificationsService=s,this.wpTableTimeline=a,this.notificationService=r,this.wpRelations=o,this.wpTableHierarchies=c,this.halEvents=l,this.querySpace=d,this.I18n=u,this._viewParameters=new A.a,this.disableViewParamsCalculation=!1,this.workPackageIdOrder=[],this.renderers={},this.cellsRenderer=new se(this.injector,this),this.selectionParams={notification:null},this.refreshRequest=Object(L.f)()}ngAfterViewInit(){this.$element=jQuery(this.elementRef.nativeElement),this.text={selectionMode:this.I18n.t("js.timelines.selection_mode.notification")},this.outerContainer=this.$element.find(".wp-table-timeline--outer"),this.timelineBody=this.$element.find(".wp-table-timeline--body"),this.wpTableDirective.registerTimeline(this,this.timelineBody[0]),window.addEventListener("wp-resize.timeline",()=&gt;this.refreshRequest.putValue(void 0)),Object(le.a)([this.querySpace.tableRendered.values$(),this.refreshRequest.changes$(),this.wpTableTimeline.live$()]).pipe(this.untilDestroyed(),Object(F.a)(this.querySpace.stopAllSubscriptions),Object(M.a)(()=&gt;this.initialized&amp;&amp;this.wpTableTimeline.isVisible)).subscribe(([e,t,i])=&gt;{this.workPackageIdOrder=e.filter(e=&gt;!e.hidden),this.refreshView()})}workPackageCells(e){return this.cellsRenderer.getCellsFor(e)}workPackageIndex(e){return this.workPackageIdOrder.findIndex(t=&gt;t.classIdentifier===e)}onRefreshRequested(e,t){this.renderers[e]=t}getAbsoluteLeftCoordinates(){return this.$element.offset().left}getParentScrollContainer(){return this.outerContainer.closest(oe.b)[0]}get viewParameters(){return this._viewParameters}get inHierarchyMode(){return this.wpTableHierarchies.isEnabled}get initialized(){return this.workPackageTable&amp;&amp;this.querySpace.tableRendered.hasValue()}refreshView(){this.wpTableTimeline.isVisible?(this.wpTableTimeline.isAutoZoom()?this.applyAutoZoomLevel():(this._viewParameters.settings.zoomLevel=this.wpTableTimeline.zoomLevel,this.wpTableTimeline.appliedZoomLevel=this.wpTableTimeline.zoomLevel),Object(ce.b)("refreshView() in timeline container",()=&gt;{this.outerContainer.css("width","auto"),this.calculateViewParams(this._viewParameters),this.cellsRenderer.refreshAllCells(),_.each(this.renderers,(e,t)=&gt;{Object(ce.a)(`Refreshing timeline member ${t}`),e(this._viewParameters)});const e=this.$element.find(A.l)[0].scrollWidth;this.outerContainer.width(e),setTimeout(()=&gt;{this.querySpace.timelineRendered.next(null)})})):Object(ce.a)("refreshView() requested, but TL is invisible.")}startAddRelationPredecessor(e){this.activateSelectionMode(e.id,t=&gt;{this.wpRelations.addCommonRelation(e.id,"follows",t.id).then(()=&gt;{this.halEvents.push(e,{eventType:"association",relatedWorkPackage:t.id,relationType:"follows"})}).catch(e=&gt;this.notificationService.handleRawError(e,t))})}startAddRelationFollower(e){this.activateSelectionMode(e.id,t=&gt;{this.wpRelations.addCommonRelation(e.id,"precedes",t.id).then(()=&gt;{this.halEvents.push(e,{eventType:"association",relatedWorkPackage:t.id,relationType:"precedes"})}).catch(e=&gt;this.notificationService.handleRawError(e,t))})}getFirstDayInViewport(){const e=this.getParentScrollContainer().scrollLeft,t=Math.floor(e/this.viewParameters.pixelPerDay);return this.viewParameters.dateDisplayStart.clone().add(t,"days")}getLastDayInViewport(){const e=this.getParentScrollContainer(),t=e.scrollLeft+e.offsetWidth,i=Math.ceil(t/this.viewParameters.pixelPerDay)+1;return this.viewParameters.dateDisplayStart.clone().add(i,"days")}forceCursor(e){jQuery("."+A.i).css("cursor",e),jQuery(".wp-timeline-cell").css("cursor",e),jQuery(".hascontextmenu").css("cursor",e),jQuery(".leftHandle").css("cursor",e),jQuery(".rightHandle").css("cursor",e)}resetCursor(){jQuery("."+A.i).css("cursor",""),jQuery(".wp-timeline-cell").css("cursor",""),jQuery(".hascontextmenu").css("cursor",""),jQuery(".leftHandle").css("cursor",""),jQuery(".rightHandle").css("cursor","")}resetSelectionMode(){this._viewParameters.activeSelectionMode=null,this._viewParameters.selectionModeStart=null,this.selectionParams.notification&amp;&amp;this.NotificationsService.remove(this.selectionParams.notification),Mousetrap.unbind("esc"),this.$element.removeClass("active-selection-mode"),jQuery("."+A.m).removeClass(A.m),this.refreshView()}activateSelectionMode(e,t){e=e.toString(),this._viewParameters.activeSelectionMode=e=&gt;{t(e),this.resetSelectionMode()},this._viewParameters.selectionModeStart=e,Mousetrap.bind("esc",()=&gt;this.resetSelectionMode()),this.selectionParams.notification=this.NotificationsService.addNotice(this.text.selectionMode),this.$element.addClass("active-selection-mode"),this.refreshView()}calculateViewParams(e){if(this.disableViewParamsCalculation)return!1;const t=new A.a;let i=!1;this.workPackageIdOrder.forEach(i=&gt;{const n=i.workPackageId;if(!n)return;const s=this.states.workPackages.get(n).value;if(!s)return;const a=s.startDate?E(s.startDate):e.now,r=s.dueDate?E(s.dueDate):e.now,o=s.date?E(s.date):e.now;t.dateDisplayStart=E.min(t.dateDisplayStart,e.now,a,o),t.dateDisplayEnd=E.max(t.dateDisplayEnd,e.now,r,o)}),t.dateDisplayStart=t.dateDisplayStart.subtract(e.dayCountForMarginLeft,"days");const n=this.$element.children().width(),s=e.pixelPerDay,a=Math.ceil(n/s*1.5);t.dateDisplayEnd=t.dateDisplayEnd.add(a,"days"),t.dateDisplayStart.isSame(this._viewParameters.dateDisplayStart)||(i=!0,this._viewParameters.dateDisplayStart=t.dateDisplayStart),t.dateDisplayEnd.isSame(this._viewParameters.dateDisplayEnd)||(i=!0,this._viewParameters.dateDisplayEnd=t.dateDisplayEnd);const r=[this.getFirstDayInViewport(),this.getLastDayInViewport()];return this._viewParameters.visibleViewportAtCalculationTime=r,i}applyAutoZoomLevel(){if(0===this.workPackageIdOrder.length)return;const e=Object(A.b)(this.workPackageIdOrder,this.states.workPackages,this._viewParameters),t=this.$element.parent().width()-2*A.g;for(let i of A.n){if(t/Object(A.e)(i)&gt;=e||i===_.last(A.n)){return this._viewParameters.settings.zoomLevel!==i&amp;&amp;(this._viewParameters.settings.zoomLevel=i,this.wpTableDirective.timeline.scrollLeft=0),void(this.wpTableTimeline.appliedZoomLevel=i)}}}}ue.\u0275fac=function(e){return new(e||ue)(r.hc(r.A),r.hc(r.q),r.hc($.a),r.hc(P.a),r.hc(D.a),r.hc(te.a),r.hc(X.a),r.hc(ae.a),r.hc(re.a),r.hc(U.a),r.hc(R.a),r.hc(s.a))},ue.\u0275cmp=r.bc({type:ue,selectors:[["wp-timeline-container"]],features:[r.Qb],decls:7,vars:0,consts:[[1,"wp-table-timeline--outer"],[1,"wp-table-timeline--container"],[1,"wp-table-timeline--body"]],template:function(e,t){1&amp;e&amp;&amp;(r.nc(0,"div",0),r.nc(1,"div",1),r.ic(2,"wp-timeline-header"),r.ic(3,"wp-timeline-static-elements"),r.ic(4,"wp-timeline-grid"),r.ic(5,"wp-timeline-relations"),r.ic(6,"div",2),r.mc(),r.mc())},encapsulation:2});var he=i("6p3c"),pe=i("8YXA"),me=i("PUHT"),ge=i("4lR/"),fe=i("IaZ+"),be=i("JY8V"),ve=i("AeZM"),we=i("6yP5"),ye=(i("5HGI"),i("sngl")),ke=i("DvFC"),Ce=i("qg8y");class xe extends me.a{constructor(e,t,i,n,s,a,r,o,c,l){super(e,t),this.elementRef=e,this.opContextMenu=t,this.wpTableColumns=i,this.wpTableSortBy=n,this.wpTableGroupBy=s,this.wpTableHierarchies=a,this.opModalService=r,this.injector=o,this.I18n=c,this.confirmDialog=l,this.text={confirmDelete:{text:this.I18n.t("js.work_packages.table_configuration.sorting_mode.warning"),title:this.I18n.t("js.modals.form_submit.title")}}}open(e){this.table.configuration.columnMenuEnabled&amp;&amp;(this.buildItems(),this.opContextMenu.show(this,e))}get locals(){return{showAnchorRight:this.column&amp;&amp;"id"!==this.column.id,contextMenuId:"column-context-menu",items:this.items}}positionArgs(e){let t={of:this.$element.find(".generic-table--sort-header-outer")},i=super.positionArgs(e);return _.assign(i,t),i}get afterFocusOn(){return this.$element.find(`#${this.column.id}`)}buildItems(){let e=this.column;this.items=[{hidden:!this.wpTableSortBy.isSortable(e),linkText:this.I18n.t("js.work_packages.query.sort_descending"),icon:"icon-sort-descending",onClick:t=&gt;this.wpTableSortBy.isManualSortingMode?(this.confirmDialog.confirm({text:this.text.confirmDelete}).then(()=&gt;(this.wpTableSortBy.setAsSingleSortCriteria(e,Ce.b),!0)),!1):(this.wpTableSortBy.addSortCriteria(e,Ce.b),!0)},{hidden:!this.wpTableSortBy.isSortable(e),linkText:this.I18n.t("js.work_packages.query.sort_ascending"),icon:"icon-sort-ascending",onClick:t=&gt;this.wpTableSortBy.isManualSortingMode?(this.confirmDialog.confirm({text:this.text.confirmDelete}).then(()=&gt;(this.wpTableSortBy.setAsSingleSortCriteria(e,Ce.a),!0)),!1):(this.wpTableSortBy.addSortCriteria(e,Ce.a),!0)},{hidden:!this.wpTableGroupBy.isGroupable(e)||this.wpTableGroupBy.isCurrentlyGroupedBy(e),linkText:this.I18n.t("js.work_packages.query.group"),icon:"icon-group-by",onClick:()=&gt;(this.wpTableHierarchies.isEnabled&amp;&amp;this.wpTableHierarchies.setEnabled(!1),this.wpTableGroupBy.setBy(e),!0)},{hidden:this.wpTableColumns.isFirst(e),linkText:this.I18n.t("js.work_packages.query.move_column_left"),icon:"icon-column-left",onClick:()=&gt;(this.wpTableColumns.shift(e,-1),!0)},{hidden:this.wpTableColumns.isLast(e),linkText:this.I18n.t("js.work_packages.query.move_column_right"),icon:"icon-column-right",onClick:()=&gt;(this.wpTableColumns.shift(e,1),!0)},{linkText:this.I18n.t("js.work_packages.query.hide_column"),icon:"icon-delete",onClick:()=&gt;{let t=this.wpTableColumns.previous(e)||this.wpTableColumns.next(e);return this.wpTableColumns.removeColumn(e),setTimeout(()=&gt;{t&amp;&amp;jQuery(`#${t.id}`).focus()}),!0}},{linkText:this.I18n.t("js.work_packages.query.insert_columns"),icon:"icon-columns",onClick:()=&gt;(this.opModalService.show(ye.a,this.injector,{initialTab:"columns"}),!0)}]}}xe.\u0275fac=function(e){return new(e||xe)(r.hc(r.q),r.hc(ge.a),r.hc(be.a),r.hc(we.a),r.hc(ve.a),r.hc(re.a),r.hc(fe.b),r.hc(r.A),r.hc(s.a),r.hc(ke.a))},xe.\u0275dir=r.cc({type:xe,selectors:[["","opColumnsContextMenu",""]],inputs:{column:["opColumnsContextMenu-column","column"],table:["opColumnsContextMenu-table","table"]},features:[r.Qb]});var je=i("FDKb"),Se=i("t7qP"),Te=i("1zMF"),Pe=i("P7xQ"),Ie=i("5gqY");class _e{constructor(e,t,i,n){this.I18n=t,this.wpTimelineService=i,this.workPackageTimelineTableController=n,this.$element=jQuery(e.nativeElement)}ngOnInit(){this.workPackageTimelineTableController.onRefreshRequested("header",e=&gt;this.refreshView(e))}refreshView(e){this.innerHeader=this.$element.find(".wp-table-timeline--header-inner"),this.renderLabels(e)}renderLabels(e){if(this.activeZoomLevel!==e.settings.zoomLevel){switch(this.innerHeader.empty(),this.innerHeader.attr("data-current-zoom-level",this.wpTimelineService.zoomLevel),e.settings.zoomLevel){case"days":return this.renderLabelsDays(e);case"weeks":return this.renderLabelsWeeks(e);case"months":return this.renderLabelsMonths(e);case"quarters":return this.renderLabelsQuarters(e);case"years":return this.renderLabelsYears(e)}this.activeZoomLevel=e.settings.zoomLevel}}renderLabelsDays(e){this.renderTimeSlices(e,"month",0,e.dateDisplayStart,e.dateDisplayEnd,(e,t)=&gt;{t.innerHTML=e.format("MMM YYYY"),t.classList.add("wp-timeline--header-top-bold-element"),t.style.height="13px"}),this.renderTimeSlices(e,"week",13,e.dateDisplayStart,e.dateDisplayEnd,(e,t)=&gt;{t.innerHTML=e.format("ww"),t.classList.add("-top-border"),t.style.height="32px"}),this.renderTimeSlices(e,"day",23,e.dateDisplayStart,e.dateDisplayEnd,(e,t)=&gt;{t.innerHTML=e.format("D"),t.classList.add("-top-border"),t.style.height="22px"}),this.renderTimeSlices(e,"day",33,e.dateDisplayStart,e.dateDisplayEnd,(e,t)=&gt;{t.innerHTML=e.format("dd"),t.classList.add("wp-timeline--header-day-element")})}renderLabelsWeeks(e){this.renderTimeSlices(e,"month",0,e.dateDisplayStart,e.dateDisplayEnd,(e,t)=&gt;{t.innerHTML=e.format("MMM YYYY"),t.classList.add("wp-timeline--header-top-bold-element")}),this.renderTimeSlices(e,"week",15,e.dateDisplayStart,e.dateDisplayEnd,(e,t)=&gt;{t.innerHTML=e.format("ww"),t.classList.add("-top-border"),t.style.height="22px"}),this.renderTimeSlices(e,"day",25,e.dateDisplayStart,e.dateDisplayEnd,(e,t)=&gt;{t.innerHTML=e.format("D"),t.classList.add("wp-timeline--header-middle-element")})}renderLabelsMonths(e){this.renderTimeSlices(e,"year",0,e.dateDisplayStart,e.dateDisplayEnd,(e,t)=&gt;{t.innerHTML=e.format("YYYY"),t.classList.add("wp-timeline--header-top-bold-element")}),this.renderTimeSlices(e,"month",15,e.dateDisplayStart,e.dateDisplayEnd,(e,t)=&gt;{t.innerHTML=e.format("MMM"),t.classList.add("-top-border"),t.style.height="30px"}),this.renderTimeSlices(e,"week",25,e.dateDisplayStart,e.dateDisplayEnd,(e,t)=&gt;{t.innerHTML=e.format("ww"),t.classList.add("wp-timeline--header-middle-element")})}renderLabelsQuarters(e){this.renderTimeSlices(e,"year",0,e.dateDisplayStart,e.dateDisplayEnd,(e,t)=&gt;{t.classList.add("wp-timeline--header-top-bold-element"),t.innerHTML=e.format("YYYY")}),this.renderTimeSlices(e,"quarter",15,e.dateDisplayStart,e.dateDisplayEnd,(e,t)=&gt;{t.innerHTML=this.I18n.t("js.timelines.quarter_label",{quarter_number:e.format("Q")}),t.classList.add("-top-border"),t.style.height="30px"}),this.renderTimeSlices(e,"month",25,e.dateDisplayStart,e.dateDisplayEnd,(e,t)=&gt;{t.innerHTML=e.format("MMM"),t.classList.add("wp-timeline--header-middle-element")})}renderLabelsYears(e){this.renderTimeSlices(e,"year",0,e.dateDisplayStart,e.dateDisplayEnd,(e,t)=&gt;{t.innerHTML=e.format("YYYY"),t.classList.add("wp-timeline--header-top-bold-element")}),this.renderTimeSlices(e,"quarter",15,e.dateDisplayStart,e.dateDisplayEnd,(e,t)=&gt;{t.innerHTML=this.I18n.t("js.timelines.quarter_label",{quarter_number:e.format("Q")}),t.classList.add("-top-border"),t.style.height="30px"}),this.renderTimeSlices(e,"month",25,e.dateDisplayStart,e.dateDisplayEnd,(e,t)=&gt;{t.innerHTML=e.format("M"),t.classList.add("wp-timeline--header-middle-element")})}renderTimeSlices(e,t,i,n,s,a){const{inViewportAndBoundaries:r,rest:o}=Object(A.f)(e,t,n,s);for(let[c,l]of r){const t=this.addLabelCell();t.style.top=i+"px",t.style.left=Object(A.c)(e,c.diff(n,"days")),t.style.width=Object(A.c)(e,l.diff(c,"days")+1),a(c,t)}setTimeout(()=&gt;{for(let[t,s]of o){const r=this.addLabelCell();r.style.top=i+"px",r.style.left=Object(A.c)(e,t.diff(n,"days")),r.style.width=Object(A.c)(e,s.diff(t,"days")+1),a(t,r)}},0)}addLabelCell(){const e=document.createElement("div");return e.className=A.k,this.innerHeader.append(e),e}}_e.\u0275fac=function(e){return new(e||_e)(r.hc(r.q),r.hc(s.a),r.hc(te.a),r.hc(ue))},_e.\u0275cmp=r.bc({type:_e,selectors:[["wp-timeline-header"]],decls:2,vars:0,consts:[[1,"wp-table-timeline--header"],[1,"wp-table-timeline--header-inner"]],template:function(e,t){1&amp;e&amp;&amp;(r.nc(0,"div",0),r.ic(1,"div",1),r.mc())},encapsulation:2});var Oe=i("lJxs");function De(e){return`__tl-relation-${e}`}class Re{constructor(e,t){this.belongsToId=e,this.relation=t}get classNames(){return[De(this.relation.ids.from),De(this.relation.ids.to)]}}function Ee(e,t,i,n,s,a,r,o){const c=document.createElement("div");return c.classList.add(A.i,"relation-line",...t),c.style.top=40*i+n+"px",c.style.left=s+"px",c.style.width=a+"px",c.style.height=r+"px",c}class Fe extends de.a{constructor(e,t,i,n,s,a){super(),this.injector=e,this.elementRef=t,this.states=i,this.workPackageTimelineTableController=n,this.wpTableTimeline=s,this.wpRelations=a,this.workPackagesWithRelations={}}ngOnInit(){const e=jQuery(this.elementRef.nativeElement);this.container=e.find(".wp-table-timeline--relations"),this.workPackageTimelineTableController.onRefreshRequested("relations",e=&gt;this.refreshView()),this.setupRelationSubscription()}refreshView(){this.update()}get workPackageIdOrder(){return this.workPackageTimelineTableController.workPackageIdOrder}setupRelationSubscription(){Object(le.a)([this.querySpace.renderedWorkPackages.values$(),this.wpTableTimeline.live$()]).pipe(Object(M.a)(([e,t])=&gt;t.visible),this.untilDestroyed(),Object(Oe.a)(([e,t])=&gt;e)).subscribe(e=&gt;{const t=_.compact(e.map(e=&gt;e.workPackageId));this.wpRelations.requireAll(t),t.forEach(e=&gt;{const t=this.wpRelations.state(e);this.workPackagesWithRelations[e]=t,t.values$().pipe(Object(z.a)(1)).subscribe(()=&gt;{this.renderWorkPackagesRelations([e])})})}),this.states.workPackages.observeChange().pipe(this.untilDestroyed(),Object(M.a)(()=&gt;this.wpTableTimeline.isVisible)).subscribe(([e])=&gt;{this.renderWorkPackagesRelations([e])})}renderWorkPackagesRelations(e){e.forEach(e=&gt;{const t=this.workPackagesWithRelations[e];if(_.isNil(t))return;this.removeRelationElementsForWorkPackage(e);const i=_.values(t.value);_.values(i).forEach(e=&gt;{if("precedes"!==e.type&amp;&amp;"follows"!==e.type)return;const t=new Re(e.ids.from,e);this.renderElement(this.workPackageTimelineTableController.viewParameters,t)})})}update(){this.removeAllVisibleElements(),this.renderElements()}removeRelationElementsForWorkPackage(e){const t=De(e);this.container.find("."+t).remove()}removeAllVisibleElements(){this.container.find(".relation-line").remove()}renderElements(){const e=_.keys(this.workPackagesWithRelations);this.renderWorkPackagesRelations(e)}renderElement(e,t){const i=t.relation.ids,n=this.workPackageTimelineTableController.workPackageCells(i.to),s=this.workPackageTimelineTableController.workPackageCells(i.from);0!==n.length&amp;&amp;0!==s.length&amp;&amp;n.forEach(i=&gt;{const n=this.workPackageTimelineTableController.workPackageIndex(i.classIdentifier);s.forEach(s=&gt;{const a=this.workPackageTimelineTableController.workPackageIndex(s.classIdentifier);this.renderRelation(e,t,n,a,i,s)})})}renderRelation(e,t,i,n,s,a){const r=this.workPackageIdOrder[i],o=this.workPackageIdOrder[n];if(!r||!o||r.hidden||o.hidden)return;if(!s.canConnectRelations()||!a.canConnectRelations())return;const c=s.getMarginLeftOfRightSide()-s.getPaddingRightForOutgoingRelationLines(),l=a.getMarginLeftOfLeftSide()+a.getPaddingLeftForIncomingRelationLines(),d=i
                     <n?"todown":"toup",u=l>
                      c?"toRight":l
                      <c?"toleft":"beneath";if(!s)return;const h="s.getPaddingRightForOutgoingRelationLines(),p=a.getPaddingLeftForIncomingRelationLines()+(h">
                       0?h:0);this.container.append(Ee(0,t.classNames,i,19,c,p,1));let m=c+p;const g=Math.abs(n-i);"toDown"===d?"toRight"===u||"beneath"===u?this.container.append(Ee(0,t.classNames,i,19,m,1,40*g)):"toLeft"===u&amp;&amp;this.container.append(Ee(0,t.classNames,i,19,m,1,40*g-10)):"toUp"===d&amp;&amp;this.container.append(Ee(0,t.classNames,n,30,m,1,40*g-10)),"toRight"===u?"toDown"===d?this.container.append(Ee(0,t.classNames,n,19,m,l-m,1)):"toUp"===d&amp;&amp;(this.container.append(Ee(0,t.classNames,n,20,m,1,10)),this.container.append(Ee(0,t.classNames,n,20,m,l-m,1))):"toLeft"===u&amp;&amp;("toDown"===d?(this.container.append(Ee(0,t.classNames,n,0,m,1,8)),this.container.append(Ee(0,t.classNames,n,8,l,m-l,1)),this.container.append(Ee(0,t.classNames,n,8,l,1,11))):"toUp"===d&amp;&amp;(this.container.append(Ee(0,t.classNames,n,30,l+1,m-l,1)),this.container.append(Ee(0,t.classNames,n,19,l+1,1,11))))}}Fe.\u0275fac=function(e){return new(e||Fe)(r.hc(r.A),r.hc(r.q),r.hc($.a),r.hc(ue),r.hc(te.a),r.hc(ae.a))},Fe.\u0275cmp=r.bc({type:Fe,selectors:[["wp-timeline-relations"]],features:[r.Qb],decls:1,vars:0,consts:[[1,"wp-table-timeline--relations"]],template:function(e,t){1&amp;e&amp;&amp;r.ic(0,"div",0)},encapsulation:2}),Object(q.c)([Object(Y.a)(),Object(q.e)("design:type",R.a)],Fe.prototype,"querySpace",void 0);class Me extends class{constructor(){}render(e){const t=document.createElement("div");return t.id=this.identifier,t.classList.add(...this.classNames),this.finishElement(t,e)}get classNames(){return["wp-timeline--static-element"]}}{finishElement(e,t){const i=t.now.diff(t.dateDisplayStart,"days"),n=E().hour()/24;return e.style.left=Object(A.c)(t,i+n),e}get identifier(){return"wp-timeline-static-element-today-line"}}class Ae{constructor(e,t,i){this.states=t,this.workPackageTimelineTableController=i,this.$element=jQuery(e.nativeElement),this.elements=[new Me]}ngOnInit(){this.container=this.$element.find(".wp-table-timeline--static-elements"),this.workPackageTimelineTableController.onRefreshRequested("static elements",e=&gt;this.update(e))}update(e){this.removeAllVisibleElements(),this.renderElements(e)}removeAllVisibleElements(){jQuery(".wp-timeline--static-element").remove()}renderElements(e){for(const t of this.elements)this.container[0].appendChild(t.render(e))}}function Le(e,t){const i=e.day();0!==i&amp;&amp;6!==i||t.classList.add("grid-weekend")}Ae.\u0275fac=function(e){return new(e||Ae)(r.hc(r.q),r.hc($.a),r.hc(ue))},Ae.\u0275cmp=r.bc({type:Ae,selectors:[["wp-timeline-static-elements"]],decls:1,vars:0,consts:[[1,"wp-table-timeline--static-elements"]],template:function(e,t){1&amp;e&amp;&amp;r.ic(0,"div",0)},encapsulation:2});class qe{constructor(e,t){this.elementRef=e,this.wpTimeline=t}ngAfterViewInit(){const e=jQuery(this.elementRef.nativeElement);this.gridContainer=e.find(".wp-table-timeline--grid"),this.wpTimeline.onRefreshRequested("grid",e=&gt;this.refreshView(e))}refreshView(e){this.renderLabels(e)}renderLabels(e){if(this.activeZoomLevel!==e.settings.zoomLevel){switch(this.gridContainer.empty(),e.settings.zoomLevel){case"days":return this.renderLabelsDays(e);case"weeks":return this.renderLabelsWeeks(e);case"months":return this.renderLabelsMonths(e);case"quarters":return this.renderLabelsQuarters(e);case"years":return this.renderLabelsYears(e)}this.activeZoomLevel=e.settings.zoomLevel}}renderLabelsDays(e){this.renderTimeSlices(e,"day",e.dateDisplayStart,e.dateDisplayEnd,(e,t)=&gt;{t.style.paddingTop="1px",Le(e,t)}),this.renderTimeSlices(e,"year",e.dateDisplayStart,e.dateDisplayEnd,(e,t)=&gt;{t.classList.add("-grid-highlight"),t.style.zIndex="2"})}renderLabelsWeeks(e){this.renderTimeSlices(e,"day",e.dateDisplayStart,e.dateDisplayEnd,(e,t)=&gt;{Le(e,t)}),this.renderTimeSlices(e,"week",e.dateDisplayStart,e.dateDisplayEnd,(e,t)=&gt;{t.classList.add("-grid-highlight")}),this.renderTimeSlices(e,"year",e.dateDisplayStart,e.dateDisplayEnd,(e,t)=&gt;{t.classList.add("-grid-highlight"),t.style.zIndex="2"})}renderLabelsMonths(e){this.renderTimeSlices(e,"week",e.dateDisplayStart,e.dateDisplayEnd,(e,t)=&gt;{}),this.renderTimeSlices(e,"month",e.dateDisplayStart,e.dateDisplayEnd,(e,t)=&gt;{t.classList.add("-grid-highlight")}),this.renderTimeSlices(e,"year",e.dateDisplayStart,e.dateDisplayEnd,(e,t)=&gt;{t.classList.add("-grid-highlight"),t.style.zIndex="2"})}renderLabelsQuarters(e){this.renderTimeSlices(e,"month",e.dateDisplayStart,e.dateDisplayEnd,(e,t)=&gt;{}),this.renderTimeSlices(e,"quarter",e.dateDisplayStart,e.dateDisplayEnd,(e,t)=&gt;{t.classList.add("-grid-highlight")}),this.renderTimeSlices(e,"year",e.dateDisplayStart,e.dateDisplayEnd,(e,t)=&gt;{t.classList.add("-grid-highlight"),t.style.zIndex="2"})}renderLabelsYears(e){this.renderTimeSlices(e,"month",e.dateDisplayStart,e.dateDisplayEnd,(e,t)=&gt;{}),this.renderTimeSlices(e,"year",e.dateDisplayStart,e.dateDisplayEnd,(e,t)=&gt;{t.classList.add("-grid-highlight")})}renderTimeSlices(e,t,i,n,s){const{inViewportAndBoundaries:a,rest:r}=Object(A.f)(e,t,i,n);for(let[o,c]of a){const t=document.createElement("div");t.classList.add(A.i,A.j),t.style.left=Object(A.c)(e,o.diff(i,"days")),t.style.width=Object(A.c)(e,c.diff(o,"days")+1),this.gridContainer[0].appendChild(t),s(o,t)}setTimeout(()=&gt;{for(let[t,n]of r){const a=document.createElement("div");a.classList.add(A.i,A.j),a.style.left=Object(A.c)(e,t.diff(i,"days")),a.style.width=Object(A.c)(e,n.diff(t,"days")+1),this.gridContainer[0].appendChild(a),s(t,a)}},0)}}qe.\u0275fac=function(e){return new(e||qe)(r.hc(r.q),r.hc(ue))},qe.\u0275cmp=r.bc({type:qe,selectors:[["wp-timeline-grid"]],decls:1,vars:0,consts:[[1,"wp-table-timeline--grid"]],template:function(e,t){1&amp;e&amp;&amp;r.ic(0,"div",0)},encapsulation:2});var $e=i("ul8C"),Ve=i("gvAf"),Ne=i("K8b8"),He=i("4Obc"),ze=i("+pCT"),Be=i("vd15"),Qe=i("9oW/"),We=i("Tcty"),Ue=i("Wo/B"),Xe=i("oLh2"),Ye=i("0XIV"),Ge=i("ODu2"),Ke=i("xRac"),Ze=i("kY/U"),Je=i("lJGx"),et=i("S2zE"),tt=i("9pt+"),it=i("2orT"),nt=i("m3nR"),st=i("8+xT"),at=i("ZAVI"),rt=i("qs3h"),ot=i("m0WY"),ct=i("BV52"),lt=i("s/U8"),dt=i("60np"),ut=i("4fzr"),ht=i("2TbE"),pt=i("Eofd"),mt=i("p5fp"),gt=i("eaMR"),ft=i("70hh"),bt=i("Ndcw"),vt=i("TAxG"),wt=i("72I8"),yt=i("DiYd"),kt=i("67Ga"),Ct=i("SgrZ"),xt=i("ahm3"),jt=i("q/QC"),St=i("OhNT"),Tt=i("BjK6"),Pt=i("r76g"),It=i("Uprc"),_t=i("byj5"),Ot=i("YO9K"),Dt=i("hj8t"),Rt=i("yUKD"),Et=i("AcWF"),Ft=i("ylTo"),Mt=(i("y2Tr"),i("th4C")),At=i("u8Ab"),Lt=i("/Rze"),qt=i("N5AO");const $t=function(e){return{deleting:e}};class Vt{constructor(e,t){this.I18n=e,this.panelCtrl=t,this.deleting=!1}ngOnInit(){this.text={remove:this.I18n.t("js.label_remove_watcher",{name:this.watcher.name})}}remove(){this.deleting=!0,this.panelCtrl.removeWatcher(this.watcher)}}Vt.\u0275fac=function(e){return new(e||Vt)(r.hc(s.a),r.hc(Ft.a))},Vt.\u0275cmp=r.bc({type:Vt,selectors:[["wp-watcher-entry"]],inputs:{watcher:"watcher"},decls:8,vars:10,consts:[["focus-within","accessible-by-keyboard",1,"form--selected-value--container"],[1,"form--selected-value"],[3,"ngClass"],["data-class-list","avatar-mini"],[1,"work-package--watcher-name",3,"textContent"],["linkClass","form--selected-value--remover",3,"linkAriaLabel","linkTitle","execute"],["icon-classes","icon-remove",3,"icon-title"]],template:function(e,t){1&amp;e&amp;&amp;(r.nc(0,"div",0),r.nc(1,"span",1),r.nc(2,"span",2),r.nc(3,"a"),r.ic(4,"user-avatar",3),r.ic(5,"span",4),r.mc(),r.mc(),r.mc(),r.nc(6,"accessible-by-keyboard",5),r.vc("execute",(function(){return t.remove()})),r.ic(7,"op-icon",6),r.mc(),r.mc()),2&amp;e&amp;&amp;(r.Tb(2),r.Dc("ngClass",r.Ic(8,$t,t.deleting)),r.Tb(1),r.Ub("href",t.watcher.showUser.href,r.Vc),r.Tb(1),r.Ub("data-user-name",t.watcher.name)("data-user-id",t.watcher.id),r.Tb(1),r.Dc("textContent",t.watcher.name),r.Tb(1),r.Dc("linkAriaLabel",t.text.remove)("linkTitle",t.text.remove),r.Tb(1),r.Dc("icon-title",t.text.remove))},directives:[Mt.a,o.n,At.a,Lt.a,qt.a],encapsulation:2});var Nt=i("VYxi"),Ht=i("4fM7"),zt=i("XZlt"),Bt=i("ZGxV"),Qt=i("kZPr"),Wt=i("F3Jm"),Ut=i("u/Nd"),Xt=i("VPzE"),Yt=i("UUNb"),Gt=i("k1Xe"),Kt=i("saRB"),Zt=i("TrTv"),Jt=i("Xmgp"),ei=i("J30J"),ti=i("EnRq");class ii{constructor(e,t,i,n,s,a,r,o){this.injector=e,this.elementRef=t,this.querySpace=i,this.states=n,this.displayFieldService=s,this.wpTableColumns=a,this.wpTableSums=r,this.I18n=o,this.text={sum:o.t("js.label_sum")}}ngAfterViewInit(){this.$element=jQuery(this.elementRef.nativeElement),Object(le.a)([this.wpTableColumns.live$(),this.wpTableSums.live$(),this.querySpace.results.values$()]).pipe(Object(F.a)(this.querySpace.stopAllSubscriptions)).subscribe(([e,t,i])=&gt;{t&amp;&amp;i.sumsSchema?i.sumsSchema.$load().then(t=&gt;{this.refresh(e,i,t)}):this.clear()})}clear(){this.$element.empty()}refresh(e,t,i){this.clear(),this.render(e,t,i)}render(e,t,i){e.forEach((e,n)=&gt;{const s=document.createElement("td");s.classList.add("wp-table--sum-container");const a=this.renderContent(t.totalSums,e.id,i[e.id]);0===n&amp;&amp;(this.appendFirstLabel(a),s.setAttribute("colspan","2")),s.appendChild(a),this.$element.append(s)}),this.$element.append('
                       <td>
                        <div class="generic-table--footer-outer">
                        </div>
                       </td>
                       ')}renderContent(e,t,i){const n=document.createElement("div");if(!i)return n;const s=this.displayFieldService.getField(e,t,i,{injector:this.injector,container:"table",options:{}});return s.isEmpty()||s.render(n,s.valueString),n}appendFirstLabel(e){const t=document.createElement("span");t.textContent=`${this.text.sum}`,jQuery(e).prepend(t)}}ii.\u0275fac=function(e){return new(e||ii)(r.hc(r.A),r.hc(r.q),r.hc(R.a),r.hc($.a),r.hc(ei.a),r.hc(be.a),r.hc(ti.a),r.hc(s.a))},ii.\u0275dir=r.cc({type:ii,selectors:[["","wpTableSumsRow",""]]});var ni=i("WgCp"),si=i("oJ+N"),ai=i("Ioun"),ri=i("CK39"),oi=i("kTg4"),ci=i("l4W+"),li=i("dMmB"),di=i("VFHb"),ui=i("mMv8"),hi=i("PkGb"),pi=i("OGNV"),mi=i("t+3x"),gi=i("i95X"),fi=i("Jui0"),bi=i("pL6k"),vi=i("sl7t"),wi=i("FDFi"),yi=i("Rky/"),ki=i("Yblc");i("B4Ei");function Ci(e,t){if(1&amp;e&amp;&amp;(r.nc(0,"div",4),r.nc(1,"div",5),r.ic(2,"h3",6),r.mc(),r.mc()),2&amp;e){const e=r.xc(2);r.Tb(2),r.Dc("textContent",e.group.name)}}const xi=function(e){return{actionsColumnEnabled:!0,hierarchyToggleEnabled:!1,inlineCreateEnabled:!0,compactTableStyle:!0,columnMenuEnabled:!1,contextMenuEnabled:!1,projectIdentifier:e,projectContext:!1}};function ji(e,t){if(1&amp;e){const e=r.oc();r.lc(0),r.ad(1,Ci,3,1,"div",1),r.nc(2,"wp-embedded-table",2,3),r.vc("onQueryLoaded",(function(t){return r.Sc(e),r.xc().handleQueryLoaded(t)})),r.mc(),r.kc()}if(2&amp;e){const e=r.xc();r.Tb(1),r.Dc("ngIf",e.group),r.Tb(1),r.Dc("initialLoadingIndicator",!1)("queryProps",e.queryProps)("tableActions",e.tableActions)("configuration",r.Ic(5,xi,e.workPackage.project.idFromLink))}}class Si extends yi.a{constructor(e,t,i,n,s,a,r){super(s),this.PathHelper=e,this.wpInlineCreate=t,this.wpRelations=i,this.halEvents=n,this.queryUrlParamsHelper=s,this.notificationService=a,this.I18n=r,this.tableActions=[vi.a.factoryFor("remove-relation-action",this.I18n.t("js.relation_buttons.remove"),e=&gt;{this.embeddedTable.loadingIndicator=this.wpRelations.require(e.id).then(()=&gt;this.wpInlineCreate.remove(this.workPackage,e)).then(()=&gt;this.refreshTable()).catch(e=&gt;this.notificationService.handleRawError(e,this.workPackage))},e=&gt;!!e.changeParent)]}ngOnInit(){let e=this.getRelationTypeFromQuery();this.wpInlineCreate.referenceTarget=this.workPackage,this.wpInlineCreate.relationType=e,this.queryProps=this.buildQueryProps(),this.wpInlineCreate.newInlineWorkPackageCreated.pipe(this.untilDestroyed()).subscribe(e=&gt;this.addRelation(e)),this.wpRelations.observe(this.workPackage.id).pipe(Object(M.a)(e=&gt;!_.isEmpty(e)),this.untilDestroyed()).subscribe(()=&gt;this.refreshTable())}addRelation(e){this.wpInlineCreate.add(this.workPackage,e).then(()=&gt;{this.halEvents.push(this.workPackage,{eventType:"association",relatedWorkPackage:e,relationType:this.getRelationTypeFromQuery()})}).catch(e=&gt;this.notificationService.handleRawError(e,this.workPackage))}getRelationTypeFromQuery(){return this.group.relationType}}Si.\u0275fac=function(e){return new(e||Si)(r.hc(fi.a),r.hc(wi.a),r.hc(ae.a),r.hc(U.a),r.hc(bi.a),r.hc(X.a),r.hc(s.a))},Si.\u0275cmp=r.bc({type:Si,selectors:[["wp-relation-query"]],inputs:{workPackage:"workPackage",query:"query",group:"group"},features:[r.Sb([{provide:wi.a,useClass:ki.a}]),r.Qb],decls:1,vars:1,consts:[[4,"ngIf"],["class","attributes-group--header",4,"ngIf"],[3,"initialLoadingIndicator","queryProps","tableActions","configuration","onQueryLoaded"],["embeddedTable",""],[1,"attributes-group--header"],[1,"attributes-group--header-container"],[1,"attributes-group--header-text",3,"textContent"]],template:function(e,t){1&amp;e&amp;&amp;r.ad(0,ji,4,7,"ng-container",0),2&amp;e&amp;&amp;r.Dc("ngIf",!t.hidden)},directives:[o.q,S.a],encapsulation:2});var Ti=i("YefF"),Pi=i("PwL/"),Ii=i("rJ6b"),_i=i("2yvi"),Oi=i("5mBr"),Di=i("Q2ix"),Ri=i("1SJX"),Ei=i("hvpr"),Fi=i("HEQ6"),Mi=i("5JuZ"),Ai=i("w6CH"),Li=i("MIK2"),qi=i("wOIT");class $i{constructor(e,t,i,n){this.I18n=e,this.injector=t,this.opModalService=i,this.opContextMenu=n}ngOnInit(){this.text={configureTable:I18n.t("js.toolbar.settings.configure_view")}}openTableConfigurationModal(){this.opContextMenu.close(),this.opModalService.show(ye.a,this.injector)}}$i.\u0275fac=function(e){return new(e||$i)(r.hc(s.a),r.hc(r.A),r.hc(fe.b),r.hc(ge.a))},$i.\u0275cmp=r.bc({type:$i,selectors:[["wp-table-config-menu"]],decls:2,vars:2,consts:[["linkClass","wp-table--columns-selection",3,"linkTitle","linkAriaLabel","execute"],["icon-classes","icon-button icon-small icon-settings"]],template:function(e,t){1&amp;e&amp;&amp;(r.nc(0,"accessible-by-keyboard",0),r.vc("execute",(function(){return t.openTableConfigurationModal()})),r.ic(1,"op-icon",1),r.mc()),2&amp;e&amp;&amp;r.Dc("linkTitle",t.text.configureTable)("linkAriaLabel",t.text.configureTable)},directives:[Lt.a,qt.a],encapsulation:2});var Vi=i("ZTEj"),Ni=i("XlgE"),Hi=i("eJFM"),zi=i("+B5R"),Bi=i("GZlY"),Qi=i("2bW2"),Wi=i("+NA0"),Ui=i("SIjI"),Xi=i("GntA");class Yi extends Xi.a{setValue(e,t){super.setValue(e,t),"workPackage"===e&amp;&amp;this.updateForm()}buildPayloadFromChanges(){let e=super.buildPayloadFromChanges();return delete e._links.project,e}}var Gi=i("fdeW"),Ki=i("ahVz"),Zi=i("hxzR"),Ji=i("EzE4"),en=i("DLfB"),tn=i("0loS"),nn=i("3Pt+"),sn=i("+rOU"),an=i("5+WD"),rn=i("kor4"),on=i("1EAr"),cn=i("ZOsW"),ln=i("ximh"),dn=i("ecJW"),un=i("QihR"),hn=i("RN/J"),pn=i("YIAj"),mn=i("oUDv"),gn=i("2hMx"),fn=i("+1L4"),bn=i("cJ7v"),vn=i("lmKF"),wn=i("HN1l"),yn=i("v9+U"),kn=i("mRSd"),Cn=i("X4Sm"),xn=i("qvi4"),jn=i("lfQJ"),Sn=i("AdL0"),Tn=i("8h6p"),Pn=i("IYP9"),In=i("upbp"),_n=i("CV67"),On=i("xFOf"),Dn=i("CS/5"),Rn=i("gh2L"),En=i("jQQo"),Fn=i("32V0"),Mn=i("7MH/"),An=i("kl08"),Ln=i("feia"),qn=i("k8lp"),$n=i("jEcX"),Vn=i("xiBa"),Nn=i("zTuL");class Hn{constructor(e){Hn.bootstrapAttributeGroups(e)}static bootstrapAttributeGroups(e){if(this.bootstrapAttributeGroupsCalled)return;this.bootstrapAttributeGroupsCalled=!0;const t=e.get(j.a);t.register("attributeGroupComponent",(e,t)=&gt;"WorkPackageFormAttributeGroup"===e.type?k:t.isNew||"WorkPackageFormChildrenQueryGroup"!==e.type?t.isNew||"WorkPackageFormRelationQueryGroup"!==e.type?null:Si:mi.a),t.register("workPackageAttachmentUploadComponent",e=&gt;_i.a),t.register("workPackageAttachmentListComponent",e=&gt;Oi.a),t.register("halResourceChangesetClass",e=&gt;{switch(e._type){case"WorkPackage":return Wi.a;case"TimeEntry":return Yi;default:return null}})}}Hn.bootstrapAttributeGroupsCalled=!1,Hn.\u0275mod=r.fc({type:Hn}),Hn.\u0275inj=r.ec({factory:function(e){return new(e||Hn)(r.rc(r.A))},providers:[X.a,si.a,ri.a,V.a,li.a,Ri.a,oi.a,ci.a,ae.a,V.a,li.a,hi.a,Mi.a,ui.a,ae.a,di.a,pi.a,U.a],imports:[[n.a,C.a,Jt.a,Ke.a,Ai.a,Bi.a]]}),r.Wc(P.a,[tn.UISref,tn.AnchorUISref,tn.UIView,tn.UISrefActive,tn.UISrefStatus,o.n,o.o,o.p,o.q,o.x,o.t,o.u,o.v,o.w,o.r,o.s,nn.C,nn.r,nn.B,nn.c,nn.s,nn.v,nn.a,nn.y,nn.z,nn.u,nn.m,nn.n,nn.x,nn.k,nn.j,nn.t,nn.b,nn.d,nn.p,nn.q,nn.o,sn.a,sn.b,sn.h,sn.e,an.e,an.f,an.a,an.b,an.d,an.c,rn.a,on.a,Lt.a,cn.a,cn.n,cn.d,cn.c,cn.e,cn.f,cn.g,cn.h,cn.i,cn.j,cn.k,cn.l,cn.m,ln.a,dn.a,un.a,qt.a,hn.a,l.a,pn.a,Mt.a,mn.a,gn.a,fn.a,bn.a,vn.a,wn.a,yn.a,kn.a,Cn.a,xn.a,jn.a,Sn.a,Tn.a,Pn.a,In.a,_n.a,At.a,On.a,Dn.c,Dn.d,Dn.a,Dn.b,Dn.e,Rn.a,En.a,Fn.a,Mn.a,An.a,a.a,d.a,Ln.a,qn.a,_i.a,Oi.a,$n.a,Vn.a,Nn.a,Ti.a,Ki.a,Zi.a,Gi.a,Ji.a,Fi.a,Vi.a,Qt.a,Bt.a,zt.a,Qi.a,Nt.a,Ht.a,S.a,T.a,ni.a,ai.a,he.a,gi.a,Hi.a,P.a,$i,I.a,O.a,ii,ft.a,bt.a,vt.a,wt.a,yt.a,kt.a,Ct.a,xt.a,jt.a,St.a,gt.a,mt.a,pe.a,xe,je.a,Se.a,Te.a,Pe.a,Ie.a,zi.a,$e.a,_e,Fe,Ae,qe,ue,ht.a,Di.a,Ve.a,x.a,Ne.a,c.a,ze.a,mi.a,Si,k,en.a,He.a,Be.a,Qe.a,We.a,Ue.a,Xe.a,Ye.a,Ge.a,Ft.a,Vt,rt.a,ot.a,ct.a,lt.a,dt.a,ut.a,Li.a,pt.a,Tt.a,Pi.a,et.a,tt.a,it.a,nt.a,st.a,at.a,Ii.a,ye.a,Pt.a,It.a,_t.a,Ot.a,Dt.a,Rt.a,Et.a,Wt.a,Gt.a,Ut.a,Xt.a,Yt.a,Ze.a,Je.a,qi.a,Kt.a,Zt.a,Ei.a,Ui.a,Ni.a],[o.a,o.C,o.m,o.j,o.A,o.f,o.z,o.B,o.c,o.e,o.h,o.i,o.k]),r.Wc(ue,[tn.UISref,tn.AnchorUISref,tn.UIView,tn.UISrefActive,tn.UISrefStatus,o.n,o.o,o.p,o.q,o.x,o.t,o.u,o.v,o.w,o.r,o.s,nn.C,nn.r,nn.B,nn.c,nn.s,nn.v,nn.a,nn.y,nn.z,nn.u,nn.m,nn.n,nn.x,nn.k,nn.j,nn.t,nn.b,nn.d,nn.p,nn.q,nn.o,sn.a,sn.b,sn.h,sn.e,an.e,an.f,an.a,an.b,an.d,an.c,rn.a,on.a,Lt.a,cn.a,cn.n,cn.d,cn.c,cn.e,cn.f,cn.g,cn.h,cn.i,cn.j,cn.k,cn.l,cn.m,ln.a,dn.a,un.a,qt.a,hn.a,l.a,pn.a,Mt.a,mn.a,gn.a,fn.a,bn.a,vn.a,wn.a,yn.a,kn.a,Cn.a,xn.a,jn.a,Sn.a,Tn.a,Pn.a,In.a,_n.a,At.a,On.a,Dn.c,Dn.d,Dn.a,Dn.b,Dn.e,Rn.a,En.a,Fn.a,Mn.a,An.a,a.a,d.a,Ln.a,qn.a,_i.a,Oi.a,$n.a,Vn.a,Nn.a,Ti.a,Ki.a,Zi.a,Gi.a,Ji.a,Fi.a,Vi.a,Qt.a,Bt.a,zt.a,Qi.a,Nt.a,Ht.a,S.a,T.a,ni.a,ai.a,he.a,gi.a,Hi.a,P.a,$i,I.a,O.a,ii,ft.a,bt.a,vt.a,wt.a,yt.a,kt.a,Ct.a,xt.a,jt.a,St.a,gt.a,mt.a,pe.a,xe,je.a,Se.a,Te.a,Pe.a,Ie.a,zi.a,$e.a,_e,Fe,Ae,qe,ue,ht.a,Di.a,Ve.a,x.a,Ne.a,c.a,ze.a,mi.a,Si,k,en.a,He.a,Be.a,Qe.a,We.a,Ue.a,Xe.a,Ye.a,Ge.a,Ft.a,Vt,rt.a,ot.a,ct.a,lt.a,dt.a,ut.a,Li.a,pt.a,Tt.a,Pi.a,et.a,tt.a,it.a,nt.a,st.a,at.a,Ii.a,ye.a,Pt.a,It.a,_t.a,Ot.a,Dt.a,Rt.a,Et.a,Wt.a,Gt.a,Ut.a,Xt.a,Yt.a,Ze.a,Je.a,qi.a,Kt.a,Zt.a,Ei.a,Ui.a,Ni.a],[o.a,o.C,o.m,o.j,o.A,o.f,o.z,o.B,o.c,o.e,o.h,o.i,o.k]),r.Wc(Ft.a,[tn.UISref,tn.AnchorUISref,tn.UIView,tn.UISrefActive,tn.UISrefStatus,o.n,o.o,o.p,o.q,o.x,o.t,o.u,o.v,o.w,o.r,o.s,nn.C,nn.r,nn.B,nn.c,nn.s,nn.v,nn.a,nn.y,nn.z,nn.u,nn.m,nn.n,nn.x,nn.k,nn.j,nn.t,nn.b,nn.d,nn.p,nn.q,nn.o,sn.a,sn.b,sn.h,sn.e,an.e,an.f,an.a,an.b,an.d,an.c,rn.a,on.a,Lt.a,cn.a,cn.n,cn.d,cn.c,cn.e,cn.f,cn.g,cn.h,cn.i,cn.j,cn.k,cn.l,cn.m,ln.a,dn.a,un.a,qt.a,hn.a,l.a,pn.a,Mt.a,mn.a,gn.a,fn.a,bn.a,vn.a,wn.a,yn.a,kn.a,Cn.a,xn.a,jn.a,Sn.a,Tn.a,Pn.a,In.a,_n.a,At.a,On.a,Dn.c,Dn.d,Dn.a,Dn.b,Dn.e,Rn.a,En.a,Fn.a,Mn.a,An.a,a.a,d.a,Ln.a,qn.a,_i.a,Oi.a,$n.a,Vn.a,Nn.a,Ti.a,Ki.a,Zi.a,Gi.a,Ji.a,Fi.a,Vi.a,Qt.a,Bt.a,zt.a,Qi.a,Nt.a,Ht.a,S.a,T.a,ni.a,ai.a,he.a,gi.a,Hi.a,P.a,$i,I.a,O.a,ii,ft.a,bt.a,vt.a,wt.a,yt.a,kt.a,Ct.a,xt.a,jt.a,St.a,gt.a,mt.a,pe.a,xe,je.a,Se.a,Te.a,Pe.a,Ie.a,zi.a,$e.a,_e,Fe,Ae,qe,ue,ht.a,Di.a,Ve.a,x.a,Ne.a,c.a,ze.a,mi.a,Si,k,en.a,He.a,Be.a,Qe.a,We.a,Ue.a,Xe.a,Ye.a,Ge.a,Ft.a,Vt,rt.a,ot.a,ct.a,lt.a,dt.a,ut.a,Li.a,pt.a,Tt.a,Pi.a,et.a,tt.a,it.a,nt.a,st.a,at.a,Ii.a,ye.a,Pt.a,It.a,_t.a,Ot.a,Dt.a,Rt.a,Et.a,Wt.a,Gt.a,Ut.a,Xt.a,Yt.a,Ze.a,Je.a,qi.a,Kt.a,Zt.a,Ei.a,Ui.a,Ni.a],[o.a,o.C,o.m,o.j,o.A,o.f,o.z,o.B,o.c,o.e,o.h,o.i,o.k]),r.Wc(Ei.a,[tn.UISref,tn.AnchorUISref,tn.UIView,tn.UISrefActive,tn.UISrefStatus,o.n,o.o,o.p,o.q,o.x,o.t,o.u,o.v,o.w,o.r,o.s,nn.C,nn.r,nn.B,nn.c,nn.s,nn.v,nn.a,nn.y,nn.z,nn.u,nn.m,nn.n,nn.x,nn.k,nn.j,nn.t,nn.b,nn.d,nn.p,nn.q,nn.o,sn.a,sn.b,sn.h,sn.e,an.e,an.f,an.a,an.b,an.d,an.c,rn.a,on.a,Lt.a,cn.a,cn.n,cn.d,cn.c,cn.e,cn.f,cn.g,cn.h,cn.i,cn.j,cn.k,cn.l,cn.m,ln.a,dn.a,un.a,qt.a,hn.a,l.a,pn.a,Mt.a,mn.a,gn.a,fn.a,bn.a,vn.a,wn.a,yn.a,kn.a,Cn.a,xn.a,jn.a,Sn.a,Tn.a,Pn.a,In.a,_n.a,At.a,On.a,Dn.c,Dn.d,Dn.a,Dn.b,Dn.e,Rn.a,En.a,Fn.a,Mn.a,An.a,a.a,d.a,Ln.a,qn.a,_i.a,Oi.a,$n.a,Vn.a,Nn.a,Ti.a,Ki.a,Zi.a,Gi.a,Ji.a,Fi.a,Vi.a,Qt.a,Bt.a,zt.a,Qi.a,Nt.a,Ht.a,S.a,T.a,ni.a,ai.a,he.a,gi.a,Hi.a,P.a,$i,I.a,O.a,ii,ft.a,bt.a,vt.a,wt.a,yt.a,kt.a,Ct.a,xt.a,jt.a,St.a,gt.a,mt.a,pe.a,xe,je.a,Se.a,Te.a,Pe.a,Ie.a,zi.a,$e.a,_e,Fe,Ae,qe,ue,ht.a,Di.a,Ve.a,x.a,Ne.a,c.a,ze.a,mi.a,Si,k,en.a,He.a,Be.a,Qe.a,We.a,Ue.a,Xe.a,Ye.a,Ge.a,Ft.a,Vt,rt.a,ot.a,ct.a,lt.a,dt.a,ut.a,Li.a,pt.a,Tt.a,Pi.a,et.a,tt.a,it.a,nt.a,st.a,at.a,Ii.a,ye.a,Pt.a,It.a,_t.a,Ot.a,Dt.a,Rt.a,Et.a,Wt.a,Gt.a,Ut.a,Xt.a,Yt.a,Ze.a,Je.a,qi.a,Kt.a,Zt.a,Ei.a,Ui.a,Ni.a],[o.a,o.C,o.m,o.j,o.A,o.f,o.z,o.B,o.c,o.e,o.h,o.i,o.k])},W6hW:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("iB+3"),s=i("pL6k"),a=i("fXoL");class r{constructor(e,t){this.UrlParamsHelper=e,this.$state=t}updateIfDifferent(e,t){let i=this.getNewChecksum(e,t),n=Promise.resolve();return this.isUninitialized()||(this.isIdDifferent(e.id)?(n=this.maintainUrlQueryState(e.id,null),this.clear()):this.isChecksumDifferent(i)&amp;&amp;(n=this.maintainUrlQueryState(e.id,i))),this.set(e.id,i),n}update(e,t){let i=this.getNewChecksum(e,t);this.set(e.id,i),this.maintainUrlQueryState(e.id,i)}setToQuery(e,t){let i=this.getNewChecksum(e,t);return this.set(e.id,i),this.maintainUrlQueryState(e.id,null)}isQueryOutdated(e,t){let i=this.getNewChecksum(e,t);return this.isOutdated(e.id,i)}executeIfOutdated(e,t,i){(this.isUninitialized()||this.isOutdated(e,t))&amp;&amp;(this.set(e,t),i())}set(e,t){this.id=e,this.checksum=t}clear(){this.id=null,this.checksum=null,this.visibleChecksum=null}isUninitialized(){return!this.id&amp;&amp;!this.checksum}isIdDifferent(e){return this.id!==e}isChecksumDifferent(e){return this.checksum&amp;&amp;e!==this.checksum}isOutdated(e,t){const i=!!this.id,n=!!this.checksum,s=this.id!==e,a=t!==this.checksum,r=this.checksum&amp;&amp;!t&amp;&amp;this.visibleChecksumreturn(i||n)&amp;&amp;(s||!s&amp;&amp;a&amp;&amp;(t||this.visibleChecksum)||!i&amp;&amp;r)}getNewChecksum(e,t){return this.UrlParamsHelper.encodeQueryJsonParams(e,_.pick(t,["page","perPage"]))}maintainUrlQueryState(e,t){return this.visibleChecksum=t,this.$state.go(".",{query_props:t,query_id:e},{custom:{notify:!1}})}}r.\u0275fac=function(e){return new(e||r)(a.rc(s.a),a.rc(n.G))},r.\u0275prov=a.dc({token:r,factory:r.\u0275fac})},WUI6:function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"a",(function(){return s}));const n=new(i("fXoL").z)("CardEventHandler");class s{constructor(e){this.injector=e}attachTo(e){this.eventHandlers.map(t=&gt;{let i=t(e);return i.eventScope(e).on(i.EVENT,i.SELECTOR,t=&gt;{i.handleEvent(e,t)}),i})}}},"WW/2":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("E2tj"),s=i("fXoL");class a{constructor(e){this.querySpace=e}classIdentifier(e){return`wp-row-${e.id}`}get renderedCards(){return this.querySpace.tableRendered.getValueOr([])}findRenderedCard(e){return _.findIndex(this.renderedCards,t=&gt;t.classIdentifier===e)}updateRenderedCardsValues(e){this.querySpace.tableRendered.putValue(e.map(e=&gt;({classIdentifier:this.classIdentifier(e),workPackageId:e.id,hidden:!1})))}}a.\u0275fac=function(e){return new(e||a)(s.rc(n.a))},a.\u0275prov=s.dc({token:a,factory:a.\u0275fac})},Wcm6:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("6DMU"),s=i("SJoB"),a=i("yIst"),r=i("WUI6");class o extends r.a{constructor(){super(...arguments),this.eventHandlers=[e=&gt;new n.a(this.injector,e),e=&gt;new s.a(this.injector,e),e=&gt;new a.a(this.injector,e)]}}},WgCp:function(e,t,i){"use strict";i.d(t,"a",(function(){return h}));var n=i("72oW"),s=i("tN7n"),a=i("0zio"),r=i("ho3E"),o=i("fXoL"),c=i("HEQ6");const l=["embeddedTableForConfiguration"],d=function(){return{}},u=function(){return{tableVisible:!1}};class h{constructor(e,t){this.locals=e,this.cdRef=t}ngAfterViewInit(){setTimeout(()=&gt;{this.embeddedTable.openConfigurationModal(()=&gt;{this.service.detach(),this.locals.callback(this.embeddedTable.buildQueryProps())}),this.cdRef.detectChanges()})}get service(){return this.locals.service}}h.\u0275fac=function(e){return new(e||h)(o.hc(r.a),o.hc(o.i))},h.\u0275cmp=o.bc({type:h,selectors:[["ng-component"]],viewQuery:function(e,t){var i;(1&amp;e&amp;&amp;o.Yc(l,!0),2&amp;e)&amp;&amp;(o.Pc(i=o.wc())&amp;&amp;(t.embeddedTable=i.first))},features:[o.Sb([[{provide:s.a,useClass:a.a}]])],decls:3,vars:4,consts:[["wp-isolated-query-space",""],[3,"queryProps","configuration"],["embeddedTableForConfiguration",""]],template:function(e,t){1&amp;e&amp;&amp;(o.lc(0,0),o.ic(1,"wp-embedded-table",1,2),o.kc()),2&amp;e&amp;&amp;(o.Tb(1),o.Dc("queryProps",t.locals.currentQuery||o.Hc(2,d))("configuration",o.Hc(3,u)))},directives:[c.a,n.a],encapsulation:2})},Wi9d:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("UD+K"),s=i("FnNU"),a=i("CZZR"),r=i("fXoL");class o extends n.a{constructor(e){super(),this.boardDm=e,this._state=Object(s.g)()}load(e){return this.boardDm.one(parseInt(e)).toPromise().then(t=&gt;(this.updateValue(e,t),t))}loadAll(e=[]){return Promise.all(e.map(e=&gt;this.load(e))).then(()=&gt;{})}get multiState(){return this._state}update(e){this.updateValue(e.id,e)}}o.\u0275fac=function(e){return new(e||o)(r.rc(a.a))},o.\u0275prov=r.dc({token:o,factory:o.\u0275fac,providedIn:"root"})},"Wo/B":function(e,t,i){"use strict";i.d(t,"a",(function(){return R}));var n=i("mrSG"),s=i("ug4p"),a=i("Jui0"),r=i("8zkO"),o=(i("ii2/"),i("mMv8")),c=i("nckM"),l=i("RuUM"),d=i("wZYP"),u=i("2Uhg"),h=(i("Mo6U"),i("fXoL")),p=i("jhN1"),m=i("ofXK"),g=i("+pCT"),f=i("QihR"),b=i("0XIV"),v=i("u8Ab"),w=i("/Rze"),y=i("N5AO"),k=i("7MH/");function C(e,t){if(1&amp;e&amp;&amp;h.ic(0,"user-avatar",17),2&amp;e){const e=h.xc(2);h.Ub("data-user-name",e.userName)("data-user-id",e.userId)}}function x(e,t){if(1&amp;e){const e=h.oc();h.nc(0,"accessible-by-keyboard",18),h.vc("execute",(function(){return h.Sc(e),h.xc(2).quoteComment()})),h.ic(1,"op-icon",19),h.mc()}if(2&amp;e){const e=h.xc(2);h.Dc("linkTitle",e.text.quote_comment),h.Tb(1),h.Dc("icon-title",e.text.quote_comment)}}function j(e,t){if(1&amp;e){const e=h.oc();h.nc(0,"accessible-by-keyboard",18),h.vc("execute",(function(){return h.Sc(e),h.xc(2).activate()})),h.ic(1,"op-icon",20),h.mc()}if(2&amp;e){const e=h.xc(2);h.Wb("edit-activity--",e.activityNo,""),h.Dc("linkTitle",e.text.edit_comment),h.Tb(1),h.Dc("icon-title",e.text.edit_comment)}}function S(e,t){if(1&amp;e&amp;&amp;h.ic(0,"img",21),2&amp;e){const e=h.xc(2);h.Dc("src",e.bcfSnapshotUrl,h.Vc)}}function T(e,t){if(1&amp;e&amp;&amp;(h.nc(0,"div",22),h.nc(1,"div",23),h.ic(2,"edit-form-portal",24),h.mc(),h.mc()),2&amp;e){const e=h.xc(2);h.Tb(2),h.Dc("changeInput",e.change)("schemaInput",e.schema)("editFieldHandler",e.handler)}}function P(e,t){if(1&amp;e&amp;&amp;h.ic(0,"div",25),2&amp;e){const e=h.xc(2);h.Dc("innerHtml",e.postedComment,h.Tc)}}function I(e,t){if(1&amp;e&amp;&amp;(h.nc(0,"li"),h.ic(1,"span",28),h.mc()),2&amp;e){const e=t.$implicit;h.Tb(1),h.Dc("innerHtml",e,h.Tc)}}function O(e,t){if(1&amp;e&amp;&amp;(h.nc(0,"ul",26),h.ad(1,I,2,1,"li",27),h.mc()),2&amp;e){const e=h.xc(2);h.Tb(1),h.Dc("ngForOf",e.details)}}function D(e,t){if(1&amp;e){const e=h.oc();h.nc(0,"div",1),h.vc("mouseenter",(function(){return h.Sc(e),h.xc().focus()}))("mouseleave",(function(){return h.Sc(e),h.xc().blur()})),h.ad(1,C,1,2,"user-avatar",2),h.nc(2,"span",3),h.ic(3,"user-link",4),h.mc(),h.nc(4,"span",5),h.cd(5),h.ic(6,"op-date-time",6),h.mc(),h.nc(7,"div",7),h.ic(8,"activity-link",8),h.nc(9,"div",9),h.ad(10,x,2,2,"accessible-by-keyboard",10),h.ad(11,j,2,5,"accessible-by-keyboard",11),h.mc(),h.mc(),h.ad(12,S,1,1,"img",12),h.nc(13,"div",13),h.ad(14,T,3,3,"div",14),h.ad(15,P,1,1,"div",15),h.ad(16,O,2,1,"ul",16),h.mc(),h.mc()}if(2&amp;e){const e=h.xc();h.Tb(1),h.Dc("ngIf",e.userName),h.Tb(2),h.Dc("user",e.user),h.Tb(2),h.ed(" ",e.isInitial?e.text.label_created_on:e.text.label_updated_on," "),h.Tb(1),h.Dc("dateTimeValue",e.activity.createdAt),h.Tb(2),h.Dc("workPackage",e.workPackage)("activityNo",e.activityNo),h.Tb(1),h.Dc("hidden",e.shouldHideIcons()),h.Tb(1),h.Dc("ngIf",e.userCanQuote),h.Tb(1),h.Dc("ngIf",e.userCanEdit),h.Tb(1),h.Dc("ngIf",e.bcfSnapshotUrl),h.Tb(2),h.Dc("ngIf",e.active),h.Tb(1),h.Dc("ngIf",!e.active&amp;&amp;(e.isComment||e.isBcfComment)),h.Tb(1),h.Dc("ngIf",!e.isInitial)}}class R extends u.a{constructor(e,t,i,n,s,a,r,o,c,l,d){super(e,t),this.elementRef=e,this.injector=t,this.sanitization=i,this.PathHelper=n,this.wpLinkedActivities=s,this.commentService=a,this.wpCacheService=r,this.ConfigurationService=o,this.userCacheService=c,this.cdRef=l,this.I18n=d,this.userCanEdit=!1,this.userCanQuote=!1,this.details=[],this.focused=!1,this.text={label_created_on:this.I18n.t("js.label_created_on"),label_updated_on:this.I18n.t("js.label_updated_on"),quote_comment:this.I18n.t("js.label_quote_comment"),edit_comment:this.I18n.t("js.label_edit_comment")}}ngOnInit(){super.ngOnInit(),this.updateCommentText(),this.isComment="Activity::Comment"===this.activity._type,this.isBcfComment="Activity::BcfComment"===this.activity._type,this.$element=jQuery(this.elementRef.nativeElement),this.reset(),this.userCanEdit=!!this.activity.update,this.userCanQuote=!!this.workPackage.addComment,this.$element.bind("focusin",this.focus.bind(this)),this.$element.bind("focusout",this.blur.bind(this)),_.each(this.activity.details,e=&gt;{this.details.push(e.html)}),this.userCacheService.require(this.activity.user.idFromLink).then(e=&gt;{this.user=e,this.userId=e.id,this.userName=e.name,this.userAvatar=e.avatar,this.cdRef.detectChanges()})}shouldHideIcons(){return!((this.isComment||this.isBcfComment)&amp;&amp;this.focussing())}ngAfterViewInit(){window.location.hash==="activity-"+this.activityNo&amp;&amp;this.elementRef.nativeElement.scrollIntoView(!0)}activate(){super.activate(this.activity.comment.raw),this.cdRef.detectChanges()}handleUserSubmit(){return this.inFlight||!this.rawComment?Promise.resolve():this.updateComment()}quoteComment(){this.commentService.quoteEvents.next(this.quotedText(this.activity.comment.raw))}get bcfSnapshotUrl(){return _.get(this.activity,"bcfViewpoints[0]")?`${_.get(this.activity,"bcfViewpoints[0]").href}/snapshot`:null}updateComment(){return Object(n.b)(this,void 0,void 0,(function*(){return this.inFlight=!0,yield this.onSubmit(),this.commentService.updateComment(this.activity,this.rawComment||"").then(e=&gt;{this.activity=e,this.updateCommentText(),this.wpLinkedActivities.require(this.workPackage,!0),this.wpCacheService.updateWorkPackage(this.workPackage),this.deactivate(!0)}).catch(()=&gt;this.deactivate(!0))}))}focusEditIcon(){jQuery(".edit-activity--"+this.activityNo+" a").focus()}focus(){this.focused=!0,this.cdRef.detectChanges()}blur(){this.focused=!1,this.cdRef.detectChanges()}focussing(){return this.focused}setErrors(e){}quotedText(e){let t=e.split("\n").map((function(e){return"\n&gt; "+e})).join("");return this.userName+" wrote:\n"+t}get htmlId(){return`user_activity_edit_field_${this.activityNo}`}deactivate(e){super.deactivate(e),e&amp;&amp;this.focusEditIcon()}updateCommentText(){this.postedComment=this.sanitization.bypassSecurityTrustHtml(this.activity.comment.html)}}R.\u0275fac=function(e){return new(e||R)(h.hc(h.q),h.hc(h.A),h.hc(p.b),h.hc(a.a),h.hc(o.a),h.hc(l.a),h.hc(s.a),h.hc(r.a),h.hc(c.a),h.hc(h.i),h.hc(d.a))},R.\u0275cmp=h.bc({type:R,selectors:[["user-activity"]],inputs:{workPackage:"workPackage",activity:"activity",activityNo:"activityNo",isInitial:"isInitial"},features:[h.Qb],decls:1,vars:1,consts:[["class","work-package-details-activities-activity-contents",3,"mouseenter","mouseleave",4,"ngIf"],[1,"work-package-details-activities-activity-contents",3,"mouseenter","mouseleave"],["data-class-list","avatar",4,"ngIf"],[1,"user"],[3,"user"],[1,"date"],[3,"dateTimeValue"],[1,"comments-number"],[3,"workPackage","activityNo"],[1,"comments-icons",3,"hidden"],[3,"linkTitle","execute",4,"ngIf"],[3,"linkTitle","class","execute",4,"ngIf"],["class","activity-thumbnail",3,"src",4,"ngIf"],[1,"user-comment"],["class","inplace-edit",4,"ngIf"],["class","message wiki",3,"innerHtml",4,"ngIf"],["class","work-package-details-activities-messages",4,"ngIf"],["data-class-list","avatar"],[3,"linkTitle","execute"],["icon-classes","action-icon icon-quote",3,"icon-title"],["icon-classes","action-icon icon-edit",3,"icon-title"],[1,"activity-thumbnail",3,"src"],[1,"inplace-edit"],[1,"user-comment--form","inplace-edit--write-value"],[3,"changeInput","schemaInput","editFieldHandler"],[1,"message","wiki",3,"innerHtml"],[1,"work-package-details-activities-messages"],[4,"ngFor","ngForOf"],[1,"message",3,"innerHtml"]],template:function(e,t){1&amp;e&amp;&amp;h.ad(0,D,17,13,"div",0),2&amp;e&amp;&amp;h.Dc("ngIf",t.workPackage)},directives:[m.q,g.a,f.a,b.a,v.a,w.a,y.a,k.a,m.p],encapsulation:2,changeDetection:0})},X4Sm:function(e,t,i){"use strict";i.d(t,"a",(function(){return P}));var n=i("wZYP"),s=(i("5HGI"),i("qg8y")),a=i("wyKs"),r=i("6yP5"),o=i("AeZM"),c=i("FB4C"),l=i("itXk"),d=i("AEvm"),u=i("fXoL"),h=i("ofXK"),p=i("N5AO");function m(e,t){if(1&amp;e){const e=u.oc();u.nc(0,"span",9),u.vc("click",(function(t){return u.Sc(e),u.xc(2).toggleHierarchy(t)})),u.ic(1,"op-icon",10),u.mc()}if(2&amp;e){const e=u.xc(2);u.Ub("title",e.text.toggleHierarchy),u.Tb(1),u.Fc("icon-classes","icon ",e.hierarchyIcon,"")}}const g=function(e,t){return[e,t]};function f(e,t){if(1&amp;e&amp;&amp;(u.nc(0,"a",11),u.cd(1),u.mc()),2&amp;e){const e=u.xc(2);u.Ec("lang",e.locale),u.Ec("id",e.headerColumn.id),u.Dc("ngClass",u.Jc(4,g,e.directionClass&amp;&amp;"sort",e.directionClass)),u.Tb(1),u.dd(e.headerColumn.name)}}function b(e,t){if(1&amp;e&amp;&amp;(u.nc(0,"a"),u.cd(1),u.mc()),2&amp;e){const e=u.xc(2);u.Tb(1),u.dd(e.headerColumn.name)}}function v(e,t){if(1&amp;e&amp;&amp;u.ic(0,"op-icon",12),2&amp;e){const e=u.xc(2);u.Ec("icon-title",e.text.openMenu)}}function w(e,t){if(1&amp;e&amp;&amp;(u.nc(0,"span",4),u.ad(1,m,2,2,"span",5),u.ad(2,f,2,7,"a",6),u.ad(3,b,2,1,"a",7),u.ad(4,v,1,1,"op-icon",8),u.mc()),2&amp;e){const e=u.xc();u.Tb(1),u.Dc("ngIf",e.displayHierarchyIcon),u.Tb(1),u.Dc("ngIf",e.sortable),u.Tb(1),u.Dc("ngIf",!e.sortable),u.Tb(1),u.Dc("ngIf",e.displayDropdownIcon)}}function y(e,t){if(1&amp;e&amp;&amp;u.ic(0,"op-icon",12),2&amp;e){const e=u.xc(2);u.Ec("icon-title",e.text.openMenu)}}function k(e,t){if(1&amp;e&amp;&amp;(u.nc(0,"span",4),u.nc(1,"a"),u.ic(2,"op-icon",13),u.cd(3),u.mc(),u.ad(4,y,1,1,"op-icon",8),u.mc()),2&amp;e){const e=u.xc();u.Tb(1),u.Ub("title",e.headerColumn.name),u.Tb(2),u.ed(" ",e.columnName," "),u.Tb(1),u.Dc("ngIf",e.displayDropdownIcon)}}function C(e,t){if(1&amp;e&amp;&amp;u.ic(0,"span",14),2&amp;e){const e=u.xc();u.Ub("title",e.text.sortColumn)}}function x(e,t){if(1&amp;e&amp;&amp;(u.nc(0,"a",11),u.cd(1),u.mc()),2&amp;e){const e=u.xc(2);u.Ec("lang",e.locale),u.Ec("id",e.headerColumn.id),u.Dc("ngClass",u.Jc(4,g,e.directionClass&amp;&amp;"sort",e.directionClass)),u.Tb(1),u.dd(e.headerColumn.name)}}function j(e,t){if(1&amp;e&amp;&amp;(u.nc(0,"a"),u.cd(1),u.mc()),2&amp;e){const e=u.xc(2);u.Tb(1),u.dd(e.headerColumn.name)}}function S(e,t){if(1&amp;e&amp;&amp;u.ic(0,"op-icon",12),2&amp;e){const e=u.xc(2);u.Ec("icon-title",e.text.openMenu)}}function T(e,t){if(1&amp;e&amp;&amp;(u.nc(0,"span",4),u.ad(1,x,2,7,"a",6),u.ad(2,j,2,1,"a",7),u.ad(3,S,1,1,"op-icon",8),u.mc()),2&amp;e){const e=u.xc();u.Tb(1),u.Dc("ngIf",e.sortable),u.Tb(1),u.Dc("ngIf",!e.sortable),u.Tb(1),u.Dc("ngIf",e.displayDropdownIcon)}}class P extends d.a{constructor(e,t,i,n,s,a,r){super(),this.wpTableHierarchies=e,this.wpTableSortBy=t,this.wpTableGroupBy=i,this.wpTableRelationColumns=n,this.elementRef=s,this.cdRef=a,this.I18n=r,this.text={toggleHierarchy:this.I18n.t("js.work_packages.hierarchy.show"),openMenu:this.I18n.t("js.label_open_menu"),sortColumn:"Sorting column"}}ngAfterViewInit(){setTimeout(()=&gt;this.initialize())}initialize(){this.element=jQuery(this.elementRef.nativeElement),Object(l.a)([this.wpTableSortBy.onReadyWithAvailable(),this.wpTableSortBy.live$()]).pipe(this.untilDestroyed()).subscribe(()=&gt;{let e=this.wpTableSortBy.current[0];e&amp;&amp;this.headerColumn.$href===e.column.$href?this.currentSortDirection=e.direction:this.currentSortDirection=null,this.setActiveColumnClass(),this.sortable=this.wpTableSortBy.isSortable(this.headerColumn),this.directionClass=this.getDirectionClass(),this.cdRef.detectChanges()}),this.isHierarchyColumn="subject"===this.headerColumn.id,"sortHandle"===this.headerColumn.id&amp;&amp;(this.columnType="sort"),this.isHierarchyColumn?this.columnType="hierarchy":"toType"===this.wpTableRelationColumns.relationColumnType(this.headerColumn)?(this.columnType="relation",this.columnName=this.headerColumn.type.name):"ofType"===this.wpTableRelationColumns.relationColumnType(this.headerColumn)&amp;&amp;(this.columnType="relation",this.columnName=I18n.t("js.relation_labels."+this.headerColumn.relationType)),this.isHierarchyColumn&amp;&amp;(this.hierarchyIcon="icon-hierarchy",this.isHierarchyDisabled=this.wpTableGroupBy.isEnabled,this.wpTableGroupBy.live$().pipe(this.untilDestroyed()).subscribe(()=&gt;{this.isHierarchyDisabled=this.wpTableGroupBy.isEnabled,this.cdRef.detectChanges()}),this.wpTableHierarchies.live$().pipe(this.untilDestroyed()).subscribe(()=&gt;{this.setHierarchyIcon(),this.cdRef.detectChanges()}),this.setHierarchyIcon()),this.cdRef.detectChanges()}get displayDropdownIcon(){return this.table&amp;&amp;this.table.configuration.columnMenuEnabled}get displayHierarchyIcon(){return this.table&amp;&amp;this.table.configuration.hierarchyToggleEnabled}toggleHierarchy(e){return this.wpTableHierarchies.toggleState()&amp;&amp;this.wpTableGroupBy.disable(),this.setHierarchyIcon(),e.stopPropagation(),!1}setHierarchyIcon(){this.wpTableHierarchies.isEnabled?(this.text.toggleHierarchy=I18n.t("js.work_packages.hierarchy.hide"),this.hierarchyIcon="icon-hierarchy"):(this.text.toggleHierarchy=I18n.t("js.work_packages.hierarchy.show"),this.hierarchyIcon="icon-no-hierarchy")}getDirectionClass(){if(!this.currentSortDirection)return"";switch(this.currentSortDirection.$href){case s.a:return"asc";case s.b:return"desc";default:return""}}setActiveColumnClass(){this.element.toggleClass("active-column",!!this.currentSortDirection)}}P.\u0275fac=function(e){return new(e||P)(u.hc(a.a),u.hc(r.a),u.hc(o.a),u.hc(c.a),u.hc(u.q),u.hc(u.i),u.hc(n.a))},P.\u0275cmp=u.bc({type:P,selectors:[["sortHeader"]],inputs:{headerColumn:"headerColumn",locale:"locale",table:"table"},features:[u.Qb],decls:5,vars:4,consts:[[1,"generic-table--sort-header-outer",3,"ngSwitch"],["class","generic-table--sort-header",4,"ngSwitchCase"],["class","draggable-table--sort-header",4,"ngSwitchCase"],["class","generic-table--sort-header",4,"ngSwitchDefault"],[1,"generic-table--sort-header"],["class","hierarchy-header--icon","tabindex","-1","aria-hidden","true",3,"click",4,"ngIf"],["href","#","lang-attribute","",3,"ngClass","lang","id",4,"ngIf"],[4,"ngIf"],["icon-classes","dropdown-indicator icon-small icon-pulldown",3,"icon-title",4,"ngIf"],["tabindex","-1","aria-hidden","true",1,"hierarchy-header--icon",3,"click"],[3,"icon-classes"],["href","#","lang-attribute","",3,"ngClass","lang","id"],["icon-classes","dropdown-indicator icon-small icon-pulldown",3,"icon-title"],["icon-classes","icon-context icon-relations relations-header--icon"],[1,"draggable-table--sort-header"]],template:function(e,t){1&amp;e&amp;&amp;(u.nc(0,"div",0),u.ad(1,w,5,4,"span",1),u.ad(2,k,5,3,"span",1),u.ad(3,C,1,1,"span",2),u.ad(4,T,4,3,"span",3),u.mc()),2&amp;e&amp;&amp;(u.Dc("ngSwitch",t.columnType),u.Tb(1),u.Dc("ngSwitchCase","hierarchy"),u.Tb(1),u.Dc("ngSwitchCase","relation"),u.Tb(1),u.Dc("ngSwitchCase","sort"))},directives:[h.u,h.v,h.w,h.q,p.a,h.n],encapsulation:2})},XV4z:function(e,t,i){"use strict";i.d(t,"a",(function(){return m}));var n=i("mrSG"),s=i("sBdf"),a=i("kTsZ"),r=i("Jui0"),o=i("sjKJ"),c=i("CZZR"),l=i("Wi9d"),d=i("DHgU"),u=i("wZYP"),h=i("AAic"),p=i("fXoL");class m{constructor(e,t,i,n,s,a,r,o,c){this.boardDm=e,this.PathHelper=t,this.Gon=i,this.CurrentProject=n,this.halResourceService=s,this.boardCache=a,this.boardActions=r,this.I18n=o,this.boardsList=c,this.text={unnamed_board:this.I18n.t("js.boards.label_unnamed_board"),action_board:e=&gt;this.I18n.t("js.boards.board_type.action_by_attribute",{attribute:this.I18n.t("js.boards.board_type.action_type."+e)}),unnamed_list:this.I18n.t("js.boards.label_unnamed_list")}}loadAllBoards(e=this.CurrentProject.identifier,t=!1){return t||void 0===this.loadAllPromise?this.loadAllPromise=this.boardDm.allInScope().toPromise().then(e=&gt;(e.forEach(e=&gt;this.buildOrderAndUpdate(e)),e)):this.loadAllPromise}canManage(e){return!!e.grid.$links.delete}save(e){return this.reorderWidgets(e),this.boardDm.save(e).then(e=&gt;(e.sortWidgets(),this.boardCache.update(e),e))}create(e){return Object(n.b)(this,void 0,void 0,(function*(){const t=yield this.boardDm.create(e.type,this.boardName(e),e.attribute);return"free"===e.type?yield this.boardsList.addFreeQuery(t,{name:this.text.unnamed_list}):yield this.boardActions.get(e.attribute).addActionQueries(t),yield this.save(t),t}))}delete(e){return this.boardDm.delete(e).then(()=&gt;this.boardCache.clearSome(e.id))}boardName(e){return e.boardName?e.boardName:"action"===e.type?this.text.action_board(e.attribute):this.text.unnamed_board}reorderWidgets(e){e.grid.columnCount=Math.max(e.grid.widgets.length,1),e.grid.widgets.map((e,t)=&gt;(e.startColumn=t+1,e.endColumn=t+2,e))}buildOrderAndUpdate(e){e.sortWidgets(),this.boardCache.update(e)}}m.\u0275fac=function(e){return new(e||m)(p.rc(c.a),p.rc(r.a),p.rc(d.a),p.rc(o.a),p.rc(a.a),p.rc(l.a),p.rc(h.a),p.rc(u.a),p.rc(s.a))},m.\u0275prov=p.dc({token:m,factory:m.\u0275fac,providedIn:"root"})},XZlt:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));i("ii2/");var n=i("fXoL"),s=i("ofXK"),a=i("80WE");const r=function(){return{colorize:!1}};function o(e,t){if(1&amp;e&amp;&amp;(n.nc(0,"div",1),n.nc(1,"div",2),n.ic(2,"editable-attribute-field",3),n.mc(),n.nc(3,"div",4),n.ic(4,"editable-attribute-field",5),n.mc(),n.mc()),2&amp;e){const e=n.xc();n.Tb(2),n.Dc("resource",e.workPackage)("displayFieldOptions",n.Hc(7,r))("wrapperClasses","wp-new-top-row--status -no-label")("fieldName","status"),n.Tb(2),n.Dc("resource",e.workPackage)("wrapperClasses","wp-new-top-row--type -no-label")("fieldName","type")}}class c{}c.\u0275fac=function(e){return new(e||c)},c.\u0275cmp=n.bc({type:c,selectors:[["wp-type-status"]],inputs:{workPackage:"workPackage"},decls:1,vars:1,consts:[["class","wp-new-top-row",4,"ngIf"],[1,"wp-new-top-row"],[1,"work-packages--status-selector","wp-new-top-row--element"],[3,"resource","displayFieldOptions","wrapperClasses","fieldName"],[1,"work-packages--type-selector","wp-new-top-row--element"],[3,"resource","wrapperClasses","fieldName"]],template:function(e,t){1&amp;e&amp;&amp;n.ad(0,o,5,8,"div",0),2&amp;e&amp;&amp;n.Dc("ngIf",t.workPackage)},directives:[s.q,a.a],encapsulation:2})},XZsv:function(e,t,i){"use strict";i.d(t,"b",(function(){return s})),i.d(t,"a",(function(){return a}));var n=i("Mo6U");const s="urn:openproject-org:api:v3:errors:MultipleErrors";class a extends n.a{constructor(){super(...arguments),this.isValidationError=!1}toString(){return`[ErrorResource ${this.message}]`}get errorMessages(){return this.isMultiErrorMessage()?this.errors.map(e=&gt;e.message):[this.message]}isMultiErrorMessage(){return this.errorIdentifier===s}getInvolvedAttributes(){var e=[];return this.details?e=[{details:this.details}]:this.errors&amp;&amp;(e=this.errors),_.flatten(e.map(e=&gt;e.errorIdentifier===s?this.extractMultiError(e)[0]:e.details.attribute))}getMessagesPerAttribute(){let e={};return this.details?e[this.details.attribute]=[this.message]:_.forEach(this.errors,t=&gt;{if(t.errorIdentifier===s){const[i,n]=this.extractMultiError(t);let s=e[i]||[];e[i]=s.concat(n)}else e[t.details.attribute]?e[t.details.attribute].push(t.message):e[t.details.attribute]=[t.message]}),e}extractMultiError(e){return[e.errors[0].details.attribute,e.errors.map(e=&gt;e.message)]}}},XaHm:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("kTsZ"),s=i("Jui0"),a=i("UXun"),r=i("fXoL");class o{constructor(e,t){this.halResourceService=e,this.pathHelper=t}load(){return this.$configuration?this.$configuration:this.$configuration=this.halResourceService.get(this.pathHelper.api.v3.configuration.toString()).pipe(Object(a.a)())}}o.\u0275fac=function(e){return new(e||o)(r.rc(n.a),r.rc(s.a))},o.\u0275prov=r.dc({token:o,factory:o.\u0275fac})},XlgE:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i("wZYP"),s=i("Va5K"),a=i("PtkW"),r=i("itXk"),o=i("AEvm"),c=i("fXoL"),l=i("+B5R"),d=i("N5AO");class u extends o.a{constructor(e,t,i,n){super(),this.I18n=e,this.cdRef=t,this.wpDisplayRepresentationService=i,this.wpTableTimeline=n,this.text={card:this.I18n.t("js.views.card"),list:this.I18n.t("js.views.list"),timeline:this.I18n.t("js.views.timeline")}}ngOnInit(){Object(r.a)([this.wpDisplayRepresentationService.live$(),this.wpTableTimeline.live$()]).pipe(this.untilDestroyed()).subscribe(([e,t])=&gt;{this.detectView(e,t.visible),this.cdRef.detectChanges()})}detectView(e,t){e!==s.b?this.view=t?"timeline":s.c:this.view=s.b}}u.\u0275fac=function(e){return new(e||u)(c.hc(n.a),c.hc(c.i),c.hc(s.a),c.hc(a.a))},u.\u0275cmp=c.bc({type:u,selectors:[["wp-view-toggle-button"]],features:[c.Qb],decls:4,vars:2,consts:[["id","wp-view-toggle-button","wpViewDropdown","",1,"button"],[3,"icon-classes"],["aria-hidden","true",1,"button--text",3,"textContent"],["icon-classes","button--icon icon-small icon-pulldown"]],template:function(e,t){1&amp;e&amp;&amp;(c.nc(0,"button",0),c.ic(1,"op-icon",1),c.ic(2,"span",2),c.ic(3,"op-icon",3),c.mc()),2&amp;e&amp;&amp;(c.Tb(1),c.Fc("icon-classes","button--icon icon-view-",t.view,""),c.Tb(1),c.Dc("textContent",t.text[t.view]))},directives:[l.a,d.a],encapsulation:2,changeDetection:0})},Xmgp:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i("xRac"),s=i("3Pt+"),a=i("Tac9"),r=i("5Mgc"),o=i("GLdX"),c=i("ofXK"),l=i("fXoL");class d{}d.\u0275mod=l.fc({type:d}),d.\u0275inj=l.ec({factory:function(e){return new(e||d)},providers:[a.a,r.a,o.a],imports:[[s.i,c.b,n.a]]})},"Y/CA":function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i("E2tj"),s=i("lJxs"),a=i("/uUt"),r=i("eyhC"),o=i("fXoL");class c{constructor(e,t){this.querySpace=e,this.wpTableSelection=t,this.state=e.focusedWorkPackage}isFocused(e){return this.focusedWorkPackage===e}ifShouldFocus(e){const t=this.state.value;t&amp;&amp;t.focusAfterRender&amp;&amp;(e(t.workPackageId),t.focusAfterRender=!1,this.state.putValue(t,"Setting focus to false after callback."))}get focusedWorkPackage(){const e=this.state.value;if(e)return e.workPackageId;const t=this.querySpace.results.value;return t&amp;&amp;t.elements.length&gt;0?t.elements[0].id.toString():null}clear(){this.state.clear()}whenChanged(){return this.state.values$().pipe(Object(s.a)(e=&gt;e.workPackageId),Object(a.a)())}updateFocus(e,t=!1){this.wpTableSelection.isEmpty&amp;&amp;this.wpTableSelection.setRowState(e,!0),this.state.putValue({workPackageId:e,focusAfterRender:t})}}c.\u0275fac=function(e){return new(e||c)(o.rc(n.a),o.rc(r.a))},c.\u0275prov=o.dc({token:c,factory:c.\u0275fac})},Y0Nk:function(e,t,i){"use strict";i.d(t,"c",(function(){return a})),i.d(t,"b",(function(){return r})),i.d(t,"a",(function(){return c}));var n=i("vkgz"),s=i("fXoL");function a(e,t){return i=&gt;(e.start(),i.pipe(Object(n.a)(()=&gt;e.delayedStop(t),()=&gt;e.stop(),()=&gt;e.stop())))}function r(e){return t=&gt;(setTimeout(()=&gt;e().start()),t.pipe(Object(n.a)(()=&gt;{},()=&gt;e().stop(),()=&gt;e().stop())))}class o{constructor(e){this.indicator=e,this.indicatorTemplate='
                       <div class="loading-indicator--background">
                        \n
                        <div class="loading-indicator">
                         \n
                         <div class="block-1">
                         </div>
                         \n
                         <div class="block-2">
                         </div>
                         \n
                         <div class="block-3">
                         </div>
                         \n
                         <div class="block-4">
                         </div>
                         \n
                         <div class="block-5">
                         </div>
                         \n
                        </div>
                        \n
                       </div>
                       \n   '}set promise(e){this.start();const t=()=&gt;this.delayedStop();e.then(t).catch(t)}start(){this.stop(),this.indicator.prepend(this.indicatorTemplate)}delayedStop(e=25){setTimeout(()=&gt;this.stop(),e)}stop(){this.indicator.find(".loading-indicator--background").remove()}}class c{get table(){return this.indicator("table")}get wpDetails(){return this.indicator("wpDetails")}get modal(){return this.indicator("modal")}getter(e){return this.indicator.bind(this,e)}indicator(e){return"string"==typeof e&amp;&amp;(e=this.getIndicatorAt(e)),new o(e)}getIndicatorAt(e){return jQuery(".loading-indicator--location").filter(`[data-indicator-name="${e}"]`)}}c.\u0275fac=function(e){return new(e||c)},c.\u0275prov=s.dc({token:c,factory:c.\u0275fac,providedIn:"root"})},Y41n:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("fXoL"),s=i("XNiG"),a=i("Kj3r"),r=i("1G5W");class o{constructor(e,t=250){this.emitter=new n.s,this.debouncer=new s.a,this.debouncer.pipe(Object(a.a)(t),Object(r.a)(e)).subscribe(e=&gt;this.emitter.emit(e))}emit(e){this.debouncer.next(e)}subscribe(e,t,i){return this.emitter.subscribe(e,t,i)}}},YIAj:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i("SqdZ"),s=i("wZYP"),a=i("IaZ+"),r=i("fXoL"),o=i("kor4"),c=i("ofXK"),l=i("N5AO");function d(e,t){if(1&amp;e&amp;&amp;(r.nc(0,"a",10),r.ic(1,"op-icon",11),r.ic(2,"span",12),r.mc()),2&amp;e){const e=r.xc();r.Ub("href",e.helpTextLink,r.Vc)("title",e.text.edit),r.Tb(2),r.Dc("textContent",e.text.edit)}}class u extends n.a{constructor(e,t,i,n){super(e,i,n),this.locals=e,this.I18n=t,this.cdRef=i,this.elementRef=n,this.closeOnEscape=!0,this.closeOnOutsideClick=!1,this.text={edit:this.I18n.t("js.button_edit"),close:this.I18n.t("js.button_close")},this.helpText=this.locals.helpText}get helpTextLink(){return this.helpText.editText?this.helpText.editText.$link.href:""}}u.\u0275fac=function(e){return new(e||u)(r.hc(a.a),r.hc(s.a),r.hc(r.i),r.hc(r.q))},u.\u0275cmp=r.bc({type:u,selectors:[["ng-component"]],features:[r.Qb],decls:11,vars:4,consts:[["data-indicator-name","modal",1,"op-modal--portal","loading-indicator--location"],["tabindex","0",1,"op-modal--modal-container","attribute-help-text--modal"],[1,"op-modal--modal-header"],[1,"op-modal--modal-close-button"],[1,"icon-close",3,"accessibleClick"],[1,"icon-context","icon-help1"],[1,"ellipsis",3,"textContent"],["tabindex","0",1,"op-modal--modal-body","-formattable",3,"innerHtml"],[1,"modal--form-actions"],["class","help-text--edit-button button",4,"ngIf"],[1,"help-text--edit-button","button"],["icon-classes","button--icon icon-edit"],[1,"button--text",3,"textContent"]],template:function(e,t){1&amp;e&amp;&amp;(r.nc(0,"div",0),r.nc(1,"div",1),r.nc(2,"div",2),r.nc(3,"a",3),r.nc(4,"i",4),r.vc("accessibleClick",(function(e){return t.closeMe(e)})),r.mc(),r.mc(),r.mc(),r.nc(5,"h3"),r.ic(6,"span",5),r.ic(7,"span",6),r.mc(),r.ic(8,"div",7),r.nc(9,"div",8),r.ad(10,d,3,3,"a",9),r.mc(),r.mc(),r.mc()),2&amp;e&amp;&amp;(r.Tb(4),r.Ub("title",t.text.close),r.Tb(3),r.Dc("textContent",t.helpText.attributeCaption),r.Tb(1),r.Dc("innerHtml",t.helpText.helpText.html,r.Tc),r.Tb(2),r.Dc("ngIf",t.helpText.editText))},directives:[o.a,c.q,l.a],encapsulation:2})},YO9K:function(e,t,i){"use strict";i.d(t,"a",(function(){return g}));var n=i("wZYP"),s=i("qg8y"),a=i("6yP5"),r=i("fXoL"),o=i("3Pt+"),c=i("ofXK");function l(e,t){if(1&amp;e&amp;&amp;r.ic(0,"option",18),2&amp;e){const e=r.xc().$implicit;r.Dc("textContent",e.column.name)("value",e.column.href)}}function d(e,t){if(1&amp;e&amp;&amp;r.ic(0,"option",19),2&amp;e){const e=t.$implicit;r.Dc("textContent",e.name)("value",e.href)}}function u(e,t){if(1&amp;e){const e=r.oc();r.nc(0,"label",5),r.nc(1,"input",20),r.vc("ngModelChange",(function(t){return r.Sc(e),r.xc().$implicit.direction=t})),r.mc(),r.cd(2),r.mc()}if(2&amp;e){const e=t.$implicit,i=r.xc(),n=i.index,s=i.$implicit;r.Tb(1),r.Fc("name","modal-sorting-attribute-",n,"--sort-direction"),r.Dc("ngModel",s.direction)("value",e.$href)("textContent",e.name),r.Tb(1),r.ed(" ",e.name," ")}}function h(e,t){if(1&amp;e){const e=r.oc();r.nc(0,"div"),r.nc(1,"div",3),r.ic(2,"label",11),r.nc(3,"div",4),r.nc(4,"div",12),r.nc(5,"select",13),r.vc("change",(function(i){r.Sc(e);const n=t.$implicit;return r.xc(2).updateSelection(n,i.target.value)})),r.ad(6,l,1,2,"option",14),r.ic(7,"option",15),r.ad(8,d,1,2,"option",16),r.mc(),r.mc(),r.mc(),r.mc(),r.nc(9,"div",3),r.nc(10,"div",4),r.ad(11,u,3,5,"label",17),r.mc(),r.mc(),r.mc()}if(2&amp;e){const e=t.$implicit,i=t.index,n=r.xc(2);r.Wb("form--row modal-sorting-row-",i,""),r.Tb(2),r.Fc("for","modal-sorting-attribute-",i,""),r.Dc("textContent",n.text["sort_criteria_"+i]),r.Tb(3),r.Fc("id","modal-sorting-attribute-",i,""),r.Fc("name","modal-sorting-attribute-",i,""),r.Tb(1),r.Dc("ngIf",!!e.column.href),r.Tb(1),r.Dc("textContent",n.emptyColumn.name)("value",n.emptyColumn.href)("selected",!e.column.href),r.Tb(1),r.Dc("ngForOf",n.availableColumns),r.Tb(3),r.Dc("ngForOf",n.availableDirections)}}function p(e,t){if(1&amp;e&amp;&amp;(r.lc(0),r.ad(1,h,12,13,"div",10),r.kc()),2&amp;e){const e=r.xc();r.Tb(1),r.Dc("ngForOf",e.sortationObjects)}}class m{constructor(e,t){this.column=e,this.direction=t}}class g{constructor(e,t,i){this.injector=e,this.I18n=t,this.wpTableSortBy=i,this.text={title:this.I18n.t("js.label_sort_by"),placeholder:this.I18n.t("js.placeholders.default"),sort_criteria_1:this.I18n.t("js.filter.sorting.criteria.one"),sort_criteria_2:this.I18n.t("js.filter.sorting.criteria.two"),sort_criteria_3:this.I18n.t("js.filter.sorting.criteria.three"),sorting_mode:{description:this.I18n.t("js.work_packages.table_configuration.sorting_mode.description"),automatic:this.I18n.t("js.work_packages.table_configuration.sorting_mode.automatic"),manually:this.I18n.t("js.work_packages.table_configuration.sorting_mode.manually"),warning:this.I18n.t("js.work_packages.table_configuration.sorting_mode.warning")}},this.availableDirections=[{$href:s.a,name:this.I18n.t("js.label_ascending")},{$href:s.b,name:this.I18n.t("js.label_descending")}],this.availableColumns=[],this.allColumns=[],this.sortationObjects=[],this.emptyColumn={name:this.text.placeholder,href:null},this.sortingMode="automatic"}onSave(){let e;e="automatic"===this.sortingMode?this.sortationObjects.filter(e=&gt;null!==e.column):[new m(this.manualSortColumn,s.a)],e=e.map(e=&gt;this.getMatchingSort(e.column.href,e.direction)),this.wpTableSortBy.update(_.compact(e))}ngOnInit(){this.wpTableSortBy.onReadyWithAvailable().subscribe(()=&gt;{let e=this.wpTableSortBy.available.filter(e=&gt;!e.column.$href.endsWith("/parent")).map(e=&gt;({name:e.column.name,href:e.column.$href}));this.allColumns=_.uniqBy(e,"href"),this.getManualSortingOption(),_.each(this.wpTableSortBy.current,e=&gt;{e.column.$href.endsWith("/parent")||(this.sortationObjects.push(new m({name:e.column.name,href:e.column.$href},e.direction.$href)),e.column.href===this.manualSortColumn.href&amp;&amp;this.updateSortingMode("manual"))}),this.updateUsedColumns(),this.fillUpSortElements()})}updateSelection(e,t){e.column=_.find(this.allColumns,e=&gt;e.href===t)||this.emptyColumn,this.updateUsedColumns()}updateUsedColumns(){let e=this.sortationObjects.filter(e=&gt;null!==e.column).map(e=&gt;e.column);this.availableColumns=_.sortBy(_.differenceBy(this.allColumns,e,"href"),"name")}updateSortingMode(e){this.sortingMode=e}getMatchingSort(e,t){return _.find(this.wpTableSortBy.available,i=&gt;i.column.$href===e&amp;&amp;i.direction.$href===t)}fillUpSortElements(){for(;this.sortationObjects.length&lt;3;)this.sortationObjects.push(new m(this.emptyColumn,s.a))}getManualSortingOption(){this.manualSortColumn=this.allColumns.find(e=&gt;e.href.endsWith("/manualSorting")),this.allColumns.splice(this.allColumns.indexOf(this.manualSortColumn),1)}}g.\u0275fac=function(e){return new(e||g)(r.hc(r.A),r.hc(n.a),r.hc(a.a))},g.\u0275cmp=r.bc({type:g,selectors:[["ng-component"]],decls:16,vars:7,consts:[["name","modalSortingForm"],["id","modal-sorting","data-indicator-name","sorting-modal",1,"modal-content-container","loading-indicator--location"],[3,"textContent"],[1,"form--field","-full-width"],[1,"form--field-container"],[1,"option-label"],["type","radio","name","sorting_mode_switch","value","manual",3,"ngModel","ngModelChange","change"],["type","radio","name","sorting_mode_switch","value","automatic",3,"ngModel","ngModelChange","change"],[1,"form--field-instructions"],[4,"ngIf"],[3,"class",4,"ngFor","ngForOf"],[1,"form--label","hidden-for-sighted",3,"for","textContent"],[1,"form--select-container"],[1,"form--select",3,"id","name","change"],["selected","",3,"textContent","value",4,"ngIf"],[3,"textContent","value","selected"],[3,"textContent","value",4,"ngFor","ngForOf"],["class","option-label",4,"ngFor","ngForOf"],["selected","",3,"textContent","value"],[3,"textContent","value"],["type","radio",3,"ngModel","value","textContent","name","ngModelChange"]],template:function(e,t){1&amp;e&amp;&amp;(r.nc(0,"form",0),r.nc(1,"div",1),r.ic(2,"p",2),r.nc(3,"div",3),r.nc(4,"div",4),r.nc(5,"label",5),r.nc(6,"input",6),r.vc("ngModelChange",(function(e){return t.sortingMode=e}))("change",(function(e){return t.updateSortingMode(e.target.value)})),r.mc(),r.cd(7),r.mc(),r.mc(),r.mc(),r.nc(8,"div",3),r.nc(9,"div",4),r.nc(10,"label",5),r.nc(11,"input",7),r.vc("ngModelChange",(function(e){return t.sortingMode=e}))("change",(function(e){return t.updateSortingMode(e.target.value)})),r.mc(),r.cd(12),r.mc(),r.mc(),r.nc(13,"div",8),r.cd(14),r.mc(),r.mc(),r.ad(15,p,2,1,"ng-container",9),r.mc(),r.mc()),2&amp;e&amp;&amp;(r.Tb(2),r.Dc("textContent",t.text.sorting_mode.description),r.Tb(4),r.Dc("ngModel",t.sortingMode),r.Tb(1),r.ed(" ",t.text.sorting_mode.manually," "),r.Tb(4),r.Dc("ngModel",t.sortingMode),r.Tb(1),r.ed(" ",t.text.sorting_mode.automatic," "),r.Tb(2),r.ed(" ",t.text.sorting_mode.warning," "),r.Tb(1),r.Dc("ngIf","automatic"===t.sortingMode))},directives:[o.C,o.n,o.o,o.u,o.c,o.m,o.p,c.q,c.p,o.r,o.B],encapsulation:2})},YW04:function(e,t){},Yblc:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("mrSG"),s=i("FDFi"),a=i("i95X"),r=i("uSJ+"),o=i("r0MM"),c=i("fXoL");class l extends s.a{constructor(e){super(e),this.injector=e,this.referenceComponentClass=a.a,this.relationType="",this.referenceTarget=null,this.buttonTexts={reference:this.I18n.t("js.relation_buttons.add_existing"),create:this.I18n.t("js.relation_buttons.create_new")}}add(e,t){return this.wpRelations.addCommonRelation(t,this.relationType,e.id)}remove(e,t){const i=this.wpRelations.find(t,e,this.relationType);return void 0!==i?this.wpRelations.removeRelation(i):Promise.reject()}get canAdd(){return!!(this.referenceTarget&amp;&amp;this.canCreateWorkPackages&amp;&amp;this.referenceTarget.addRelation)}get canReference(){return!!this.canAdd}}l.\u0275fac=function(e){return new(e||l)(c.rc(c.A))},l.\u0275prov=c.dc({token:l,factory:l.\u0275fac}),Object(n.c)([Object(o.a)(),Object(n.e)("design:type",r.a)],l.prototype,"wpRelations",void 0)},YefF:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("A0F/"),s=i("fXoL");class a extends n.a{blockedTransition(e){const t=e.to(),i=e.from(),n=e.params("from"),s=e.params("to");return i.name&amp;&amp;i.name.match(/\.(new|copy)$/)?!(t.data&amp;&amp;t.data.allowMovingInEditMode):void 0===s.workPackageId||s.workPackageId!==n.workPackageId}}a.\u0275fac=function(e){return r(e||a)},a.\u0275prov=s.dc({token:a,factory:a.\u0275fac});const r=s.pc(a);var o=i("HEQ6"),c=i("0loS");class l{}l.\u0275fac=function(e){return new(e||l)},l.\u0275cmp=s.bc({type:l,selectors:[["work-packages-base"]],features:[s.Sb([{provide:n.a,useClass:a}])],decls:2,vars:0,consts:[["wp-isolated-query-space","",1,"work-packages-page--ui-view"]],template:function(e,t){1&amp;e&amp;&amp;(s.nc(0,"div",0),s.ic(1,"ui-view"),s.mc())},directives:[o.a,c.UIView],encapsulation:2})},"Yg+W":function(e,t,i){"use strict";i.d(t,"b",(function(){return s})),i.d(t,"a",(function(){return a}));var n=i("E5Dd");function s(e,t){return"click"!==e.type&amp;&amp;("keydown"!==e.type||e.which!==n.a.ENTER)||(t(),!1)}class a{handleEvent(e,t){s(t,()=&gt;this.processEvent(e,t))}}},Ywds:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("ciXH"),s=i("fXoL");class a extends n.a{schema(){return this.halResourceService.get(this.projectsPath.schema).toPromise()}listUrl(){return this.projectsPath.toString()}oneUrl(e){return this.projectsPath.id(e).toString()}get projectsPath(){return this.pathHelper.api.v3.projects}}a.\u0275fac=function(e){return r(e||a)},a.\u0275prov=s.dc({token:a,factory:a.\u0275fac});const r=s.pc(a)},ZAVI:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i("iB+3"),s=(i("ii2/"),i("ug4p")),a=i("R9pB"),r=i("AEvm"),o=i("fXoL"),c=i("ofXK"),l=i("80WE");function d(e,t){if(1&amp;e&amp;&amp;(o.nc(0,"div",1),o.nc(1,"div",2),o.ic(2,"editable-attribute-field",3),o.mc(),o.nc(3,"div",4),o.ic(4,"editable-attribute-field",3),o.mc(),o.mc()),2&amp;e){const e=o.xc();o.Dc("ngClass","__overflowing_"+e.uniqueElementIdentifier),o.Ub("data-overflowing-identifier",".__overflowing_"+e.uniqueElementIdentifier),o.Tb(2),o.Dc("resource",e.workPackage)("wrapperClasses","work-packages--type-selector work-packages--subject-element -no-label")("fieldName","type"),o.Tb(2),o.Dc("resource",e.workPackage)("wrapperClasses","work-packages--details--subject work-packages--subject-element -no-label")("fieldName","subject")}}class u extends r.a{constructor(e,t){super(),this.uiRouterGlobals=e,this.wpCacheService=t,this.uniqueElementIdentifier=`work-packages--subject-type-row-${Object(a.a)(16)}`}ngOnInit(){this.workPackage||this.wpCacheService.loadWorkPackage(this.uiRouterGlobals.params.workPackageId).values$().pipe(this.untilDestroyed()).subscribe(e=&gt;{this.workPackage=e})}}u.\u0275fac=function(e){return new(e||u)(o.hc(n.Q),o.hc(s.a))},u.\u0275cmp=o.bc({type:u,selectors:[["wp-subject"]],inputs:{workPackage:"workPackage"},features:[o.Qb],decls:1,vars:1,consts:[["class","work-packages--subject-type-row __overflowing_element_container",3,"ngClass",4,"ngIf"],[1,"work-packages--subject-type-row","__overflowing_element_container",3,"ngClass"],[1,"work-packages--type-selector","work-packages--subject-element"],[3,"resource","wrapperClasses","fieldName"],[1,"work-packages--details--subject","work-packages--subject-element"]],template:function(e,t){1&amp;e&amp;&amp;o.ad(0,d,5,8,"div",0),2&amp;e&amp;&amp;o.Dc("ngIf",t.workPackage)},directives:[c.q,c.n,l.a],encapsulation:2})},ZGxV:function(e,t,i){"use strict";i.d(t,"a",(function(){return p}));var n=i("zOhy"),s=i("fXoL"),a=i("ofXK"),r=i("711n"),o=i("XZlt"),c=i("aveh"),l=i("2bW2"),d=i("f24R");const u=function(){return["status","type"]};function h(e,t){if(1&amp;e){const e=s.oc();s.nc(0,"div",1),s.nc(1,"edit-form",2),s.vc("onSaved",(function(t){return s.Sc(e),s.xc().onSaved(t)})),s.nc(2,"div",3),s.nc(3,"div",4),s.ic(4,"wp-type-status",5),s.nc(5,"div",6),s.nc(6,"a",7),s.vc("click",(function(){return s.Sc(e),s.xc().switchToFullscreen()})),s.ic(7,"span",8),s.mc(),s.mc(),s.mc(),s.ic(8,"wp-single-view",9),s.mc(),s.nc(9,"div",10),s.nc(10,"wp-edit-actions-bar",11),s.vc("onCancel",(function(){return s.Sc(e),s.xc().cancelAndBackToList()})),s.mc(),s.mc(),s.nc(11,"div",12),s.ic(12,"wp-resizer",13),s.mc(),s.mc(),s.mc()}if(2&amp;e){const e=s.xc();s.Tb(1),s.Dc("resource",e.newWorkPackage)("skippedFields",s.Hc(8,u))("inEditMode",!0),s.Tb(3),s.Dc("workPackage",e.newWorkPackage),s.Tb(4),s.Dc("workPackage",e.newWorkPackage)("showProject",e.copying),s.Tb(4),s.Dc("elementClass","work-packages-partitioned-page--content-right")("localStorageKey","openProject-splitViewFlexBasis")}}class p extends n.a{}p.\u0275fac=function(e){return m(e||p)},p.\u0275cmp=s.bc({type:p,selectors:[["wp-new-split-view"]],features:[s.Qb],decls:1,vars:1,consts:[["class","work-packages--details work-packages--new",4,"ngIf"],[1,"work-packages--details","work-packages--new"],[3,"resource","skippedFields","inEditMode","onSaved"],[1,"work-packages--details-content","-create-mode"],[1,"work-packages--new-details-header"],[3,"workPackage"],[1,"wp--details--switch-fullscreen-wrapper"],[1,"work-packages-show-view-button","wp--details--switch-fullscreen",3,"click"],[1,"icon-context","icon-to-fullscreen"],[3,"workPackage","showProject"],[1,"work-packages--details-toolbar-container"],[3,"onCancel"],[1,"work-packages--details--resizer","hidden-for-mobile","hide-when-print"],[3,"elementClass","localStorageKey"]],template:function(e,t){1&amp;e&amp;&amp;s.ad(0,h,13,9,"div",0),2&amp;e&amp;&amp;s.Dc("ngIf",t.newWorkPackage)},directives:[a.q,r.a,o.a,c.a,l.a,d.a],encapsulation:2,changeDetection:0});const m=s.pc(p)},ZTEj:function(e,t,i){"use strict";i.d(t,"a",(function(){return $}));var n=i("E2tj"),s=i("ooSb"),a=i("FB4C"),r=i("Zq3F"),o=i("AeZM"),c=i("wyKs"),l=i("6yP5"),d=i("JY8V"),u=i("F5Dh"),h=i("PtkW"),p=i("eyhC"),m=i("EnRq"),g=i("ONn1"),f=i("2Qcm"),b=i("4n9w"),v=i("+oAL"),w=i("Y/CA"),y=i("SKFm"),k=i("DhiE"),C=i("ABwi"),x=i("VgZ9"),j=i("l08T"),S=i("Q6HB"),T=i("FDFi"),P=i("f9kS"),I=i("Yblc"),_=i("W6hW"),O=i("ouar"),D=i("pSHE"),R=i("FnNU"),E=i("fXoL");class F extends n.a{constructor(){super(...arguments),this.chartType=Object(R.f)()}}F.\u0275fac=function(e){return M(e||F)},F.\u0275prov=E.dc({token:F,factory:F.\u0275fac});const M=E.pc(F);var A=i("HEQ6"),L=i("7xci");const q=[{provide:n.a,useClass:F},s.a,_.a,k.a,a.a,r.a,o.a,c.a,l.a,d.a,u.a,h.a,p.a,m.a,g.a,w.a,f.a,C.a,L.a,x.a,j.a,S.a,T.a,P.a,I.a,y.a,b.a,v.a,O.a,D.a];class $ extends A.a{}$.\u0275fac=function(e){return V(e||$)},$.\u0275dir=E.cc({type:$,selectors:[["","wp-isolated-graph-query-space",""]],features:[E.Sb(q),E.Qb]});const V=E.pc($)},Zq3F:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("E2tj"),s=i("kt6C"),a=i("U/vl");class r{constructor(e){this.current=new a.a(e.offset,e.total,e.pageSize)}get page(){return this.current.page}set page(e){this.current.page=e}get perPage(){return this.current.perPage}set perPage(e){this.current.perPage=e}get total(){return this.current.total}set total(e){this.current.total=e}}var o=i("zqrF"),c=i("fXoL");class l extends o.b{constructor(e,t){super(e),this.paginationService=t}get paginationObject(){return this.current?{pageSize:this.current.perPage,offset:this.current.page}:{pageSize:this.paginationService.getCachedPerPage([]),offset:1}}valueFromQuery(e,t){return new r(t)}updateFromObject(e){let t=this.current;e.page&amp;&amp;(t.page=e.page),e.perPage&amp;&amp;(t.perPage=e.perPage),e.total&amp;&amp;(t.total=e.total),this.updatesState.putValue(t)}updateFromResults(e){let t={page:e.offset,perPage:e.pageSize,total:e.total,count:e.count};this.updateFromObject(t)}get current(){return this.lastUpdatedState.value}}l.\u0275fac=function(e){return new(e||l)(c.rc(n.a),c.rc(s.a))},l.\u0275prov=c.dc({token:l,factory:l.\u0275fac})},"ZsX/":function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("tk/3"),s=i("w1tV"),a=i("pLZG"),r=i("lJxs"),o=i("kTsZ"),c=i("fXoL");class l{constructor(e,t){this.http=e,this.halResource=t}uploadAndMapResponse(e,t,i="post"){const{uploads:n,finished:s}=this.upload(e,t);return{uploads:n,finished:s.then(e=&gt;e.map(e=&gt;({response:e,uploadUrl:e.staticDownloadLocation.href})))}}upload(e,t,i="post"){t=_.filter(t,e=&gt;"directory"!==e.type);const n=_.map(t,t=&gt;this.uploadSingle(e,t,i));return{uploads:n,finished:this.whenFinished(n)}}uploadSingle(e,t,i="post",n="json"){const a=new FormData,r={description:t.description,fileName:t.customName||t.name};return a.append("metadata",JSON.stringify(r)),a.append("file",t,r.fileName),[t,this.http.request(i,e,{body:a,observe:"events",withCredentials:!0,responseType:n,reportProgress:!0}).pipe(Object(s.a)())]}whenFinished(e){const t=e.map(([e,t])=&gt;t.pipe(Object(a.a)(e=&gt;e.type===n.e.Response),Object(r.a)(e=&gt;this.halResource.createHalResource(e.body))).toPromise());return Promise.all(t)}}l.\u0275fac=function(e){return new(e||l)(c.rc(n.b),c.rc(o.a))},l.\u0275prov=c.dc({token:l,factory:l.\u0275fac})},ahVz:function(e,t,i){"use strict";i.d(t,"a",(function(){return y}));var n=i("mrSG"),s=i("dfy/"),a=i("Dp3K"),r=i("IzEk"),o=i("POAS"),c=i("qc15"),l=i("E05v"),d=i("r0MM"),u=i("fXoL"),h=i("ofXK"),p=i("CV67"),m=i("eaMR"),g=i("0loS"),f=i("CS/5");function b(e,t){if(1&amp;e&amp;&amp;(u.nc(0,"li",11),u.ic(1,"ndc-dynamic",12),u.mc()),2&amp;e){const e=u.xc().$implicit,t=u.xc(2);u.Dc("ngClass",e.containerClasses),u.Tb(1),u.Dc("ndcDynamicComponent",e.component)("ndcDynamicInputs",e.inputs)("ndcDynamicInjector",t.injector)("ndcDynamicOutputs",e.outputs)}}function v(e,t){if(1&amp;e&amp;&amp;(u.lc(0),u.ad(1,b,2,5,"li",10),u.kc()),2&amp;e){const e=t.$implicit;u.Tb(1),u.Dc("ngIf",!e.show||e.show())}}function w(e,t){if(1&amp;e&amp;&amp;(u.nc(0,"ul",8),u.ad(1,v,2,1,"ng-container",9),u.mc()),2&amp;e){const e=u.xc();u.Tb(1),u.Dc("ngForOf",e.toolbarButtonComponents)}}class y extends a.a{constructor(){super(...arguments),this.text={jump_to_pagination:this.I18n.t("js.work_packages.jump_marks.pagination"),text_jump_to_pagination:this.I18n.t("js.work_packages.jump_marks.label_pagination")},this.tableInformationLoaded=!1,this.toolbarButtonComponents=[],this.filterAllowed=!0,this.currentPartition="-split"}ngOnInit(){super.ngOnInit(),this.hasQueryProps=!!this.$state.params.query_props,this.setPartition(this.$state.current),this.removeTransitionSubscription=this.$transitions.onSuccess({},e=&gt;{const t=e.params("to"),i=e.to();this.hasQueryProps=!!t.query_props,this.setPartition(i),this.cdRef.detectChanges()});const e=!this.querySpace.initialized.hasValue();this.refresh(e,e),this.setupInformationLoadedListener(),this.queryParamListener.observe$.pipe(this.untilDestroyed()).subscribe(()=&gt;{this.currentQuery=void 0,this.refresh(!0,!0)}),this.unRegisterTitleListener=this.$transitions.onSuccess({},()=&gt;{this.updateTitle(this.querySpace.query.value)}),this.querySpace.query.values$().pipe(this.untilDestroyed()).subscribe(e=&gt;{this.onQueryUpdated(e)})}setPartition(e){this.currentPartition=e.data&amp;&amp;e.data.partition?e.data.partition:"-split"}setupInformationLoadedListener(){this.querySpace.initialized.values$().pipe(Object(r.a)(1)).subscribe(()=&gt;{this.tableInformationLoaded=!0,this.cdRef.detectChanges()})}onQueryUpdated(e){this.updateTitle(e),this.currentQuery=e,this.cdRef.detectChanges()}ngOnDestroy(){super.ngOnDestroy(),this.unRegisterTitleListener(),this.removeTransitionSubscription(),this.queryParamListener.removeQueryChangeListener()}saveQueryFromTitle(e){this.currentQuery&amp;&amp;this.currentQuery.persisted?this.updateQueryName(e):this.wpListService.create(this.currentQuery,e).then(()=&gt;this.querySaving=!1).catch(()=&gt;this.querySaving=!1)}updateQueryName(e){this.querySaving=!0,this.currentQuery.name=e,this.wpListService.save(this.currentQuery).then(()=&gt;this.querySaving=!1).catch(()=&gt;this.querySaving=!1)}updateTitle(e){e&amp;&amp;(e.persisted?this.selectedTitle=e.name:this.selectedTitle=this.wpStaticQueries.getStaticName(e),this.titleEditingEnabled=this.authorisationService.can("query","updateImmediately"),this.shouldUpdateHtmlTitle()&amp;&amp;this.titleService.setFirstPart(this.selectedTitle))}refresh(e=!1,t=!1){let i;return i=t?this.loadFirstPage():this.wpListService.reloadCurrentResultsList(),e&amp;&amp;(this.loadingIndicator=i.then(()=&gt;this.additionalLoadingTime())),i}loadFirstPage(){return this.currentQuery?this.wpListService.reloadQuery(this.currentQuery,this.projectIdentifier).toPromise():this.wpListService.loadCurrentQueryFromParams(this.projectIdentifier)}additionalLoadingTime(){return Promise.resolve()}set loadingIndicator(e){this.loadingIndicatorService.table.promise=e}shouldUpdateHtmlTitle(){return!0}}y.\u0275fac=function(e){return k(e||y)},y.\u0275cmp=u.bc({type:y,selectors:[["partitioned-query-space-page"]],features:[u.Sb([{provide:o.a,useClass:c.a},l.a]),u.Qb],decls:9,vars:6,consts:[[1,"work-packages-partitioned-query-space--container",3,"ngClass"],[1,"toolbar-container","-editable"],[1,"toolbar"],[3,"title","inFlight","showSaveCondition","editable","onSave","onEmptySubmit"],["class","toolbar-items hide-when-print",4,"ngIf"],[1,"work-packages-partitioned-page--content-container"],["data-indicator-name","table","ui-view","content-left",1,"work-packages-partitioned-page--content-left","loading-indicator--location"],["ui-view","content-right",1,"work-packages-partitioned-page--content-right"],[1,"toolbar-items","hide-when-print"],[4,"ngFor","ngForOf"],["class","toolbar-item",3,"ngClass",4,"ngIf"],[1,"toolbar-item",3,"ngClass"],[3,"ndcDynamicComponent","ndcDynamicInputs","ndcDynamicInjector","ndcDynamicOutputs"]],template:function(e,t){1&amp;e&amp;&amp;(u.nc(0,"div",0),u.nc(1,"div",1),u.nc(2,"div",2),u.nc(3,"editable-toolbar-title",3),u.vc("onSave",(function(e){return t.saveQueryFromTitle(e)}))("onEmptySubmit",(function(){return t.updateQueryName("")})),u.mc(),u.ad(4,w,2,1,"ul",4),u.mc(),u.mc(),u.ic(5,"filter-container"),u.nc(6,"div",5),u.ic(7,"div",6),u.ic(8,"div",7),u.mc(),u.mc()),2&amp;e&amp;&amp;(u.Dc("ngClass",t.currentPartition),u.Tb(3),u.Dc("title",t.selectedTitle)("inFlight",t.querySaving)("showSaveCondition",t.hasQueryProps)("editable",t.titleEditingEnabled),u.Tb(1),u.Dc("ngIf",t.tableInformationLoaded))},directives:[h.n,p.a,h.q,m.a,g.UIView,h.p,f.c,f.d],styles:[".cdk-drag-preview[_ngcontent-%COMP%]{box-shadow:0 0 10px 5px rgba(0,0,0,.1);z-index:10000!important}.work-packages-partitioned-query-space--container[_ngcontent-%COMP%]{height:100%;overflow:hidden;display:grid;grid-template-columns:1fr;grid-template-rows:auto auto minmax(200px,1fr)}.work-packages-partitioned-query-space--container.-left-only[_ngcontent-%COMP%]   .work-packages-partitioned-page--content-right[_ngcontent-%COMP%], .work-packages-partitioned-query-space--container.-right-only[_ngcontent-%COMP%]   .work-packages-partitioned-page--content-left[_ngcontent-%COMP%]{display:none}.work-packages-partitioned-query-space--container[_ngcontent-%COMP%]   .work-packages-partitioned-page--content-container[_ngcontent-%COMP%]{display:flex;overflow:auto;scrollbar-color:transparent transparent;scrollbar-width:thin}.work-packages-partitioned-query-space--container[_ngcontent-%COMP%]   .work-packages-partitioned-page--content-container[_ngcontent-%COMP%]::-webkit-scrollbar{height:10px;width:10px}.work-packages-partitioned-query-space--container[_ngcontent-%COMP%]   .work-packages-partitioned-page--content-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.work-packages-partitioned-query-space--container[_ngcontent-%COMP%]   .work-packages-partitioned-page--content-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ddd;visibility:hidden}.work-packages-partitioned-query-space--container[_ngcontent-%COMP%]   .work-packages-partitioned-page--content-container[_ngcontent-%COMP%]:hover{scrollbar-color:#ddd transparent}.work-packages-partitioned-query-space--container[_ngcontent-%COMP%]   .work-packages-partitioned-page--content-container[_ngcontent-%COMP%]:hover::-webkit-scrollbar-thumb{visibility:visible}.work-packages-partitioned-query-space--container[_ngcontent-%COMP%]   .work-packages-partitioned-page--content-left[_ngcontent-%COMP%], .work-packages-partitioned-query-space--container[_ngcontent-%COMP%]   .work-packages-partitioned-page--content-right[_ngcontent-%COMP%]{position:relative}.work-packages-partitioned-query-space--container[_ngcontent-%COMP%]   .work-packages-partitioned-page--content-left[_ngcontent-%COMP%]{flex:1}@media only screen and (max-width:679px){.work-packages-partitioned-query-space--container[_ngcontent-%COMP%]   .work-packages-partitioned-page--content-left[_ngcontent-%COMP%], .work-packages-partitioned-query-space--container[_ngcontent-%COMP%]   .work-packages-partitioned-page--content-right[_ngcontent-%COMP%]{min-width:0;max-width:100vw;max-height:100%}}"],changeDetection:0}),Object(n.c)([Object(d.a)(),Object(n.e)("design:type",s.a)],y.prototype,"titleService",void 0),Object(n.c)([Object(d.a)(),Object(n.e)("design:type",l.a)],y.prototype,"queryParamListener",void 0);const k=u.pc(y)},ahm3:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));i("AA01");var n=i("wZYP"),s=i("Y41n"),a=i("AEvm"),r=i("Hg4z"),o=i("fXoL"),c=i("3Pt+"),l=i("oUDv");class d extends a.a{constructor(e){super(),this.I18n=e,this.shouldFocus=!1,this.filterChanged=new s.a(Object(r.b)(this))}get value(){return parseInt(this.filter.values[0])}set value(e){this.filter.values="number"==typeof e?[e.toString()]:[],this.filterChanged.emit(this.filter)}get unit(){switch(this.filter.schema.filter.allowedValues[0].id){case"startDate":case"dueDate":case"updatedAt":case"createdAt":return this.I18n.t("js.work_packages.time_relative.days");default:return""}}}d.\u0275fac=function(e){return new(e||d)(o.hc(n.a))},d.\u0275cmp=o.bc({type:d,selectors:[["filter-integer-value"]],inputs:{shouldFocus:"shouldFocus",filter:"filter"},outputs:{filterChanged:"filterChanged"},features:[o.Qb],decls:3,vars:7,consts:[[1,"inline-label",3,"id"],["required","","min","0","type","number",1,"advanced-filters--number-field",3,"ngModel","focus","id","name","ngModelChange"],[1,"advanced-filters--affix",3,"for","textContent"]],template:function(e,t){1&amp;e&amp;&amp;(o.nc(0,"div",0),o.nc(1,"input",1),o.vc("ngModelChange",(function(e){return t.value=e})),o.mc(),o.ic(2,"label",2),o.mc()),2&amp;e&amp;&amp;(o.Fc("id","div-values-",t.filter.id,""),o.Tb(1),o.Fc("id","values-",t.filter.id,""),o.Fc("name","v[",t.filter.id,"]"),o.Dc("ngModel",t.value)("focus",t.shouldFocus),o.Tb(1),o.Fc("for","values-",t.filter.id,""),o.Dc("textContent",t.unit))},directives:[c.s,c.c,c.x,c.m,c.p,l.a],encapsulation:2})},aveh:function(e,t,i){"use strict";i.d(t,"a",(function(){return J}));var n=i("wZYP"),s=i("Jui0"),a=i("/uUt"),r=i("lJxs"),o=i("qHU1"),c=i("sjKJ"),l=i("iMRi"),d=(i("ii2/"),i("SKFm")),u=i("ug4p"),h=i("J30J"),p=i("B4Ei"),m=i("g1AQ"),g=i("XNiG"),f=i("R9pB"),b=i("buwf"),v=i("ouar"),w=i("kTsZ"),y=i("AEvm"),k=i("fXoL"),C=i("ofXK"),x=i("lJGx"),j=i("80WE"),S=i("K8b8"),T=i("CX+C"),P=i("+pCT"),I=i("QihR"),O=i("+ytV"),D=i("CS/5"),R=i("HEQ6");function E(e,t){if(1&amp;e&amp;&amp;(k.nc(0,"div",19),k.ic(1,"editable-attribute-field",20),k.mc()),2&amp;e){const e=k.xc(2);k.Tb(1),k.Dc("resource",e.workPackage)("wrapperClasses","-no-label")("fieldName","subject")}}function F(e,t){if(1&amp;e&amp;&amp;k.ic(0,"wp-status-button",21),2&amp;e){const e=k.xc(2);k.Dc("workPackage",e.workPackage)}}function M(e,t){1&amp;e&amp;&amp;k.ic(0,"attribute-help-text",22),2&amp;e&amp;&amp;k.Dc("attribute","status")("attributeScope","WorkPackage")}function A(e,t){if(1&amp;e&amp;&amp;(k.nc(0,"div",23),k.ic(1,"span",24),k.cd(2,": "),k.ic(3,"span",24),k.nc(4,"span"),k.cd(5,"\xa0"),k.mc(),k.ic(6,"user-link",25),k.cd(7,". "),k.ic(8,"span",24),k.nc(9,"span"),k.cd(10,"\xa0"),k.mc(),k.ic(11,"op-date-time",26),k.cd(12,". "),k.mc()),2&amp;e){const e=k.xc(2);k.Tb(1),k.Dc("textContent",e.idLabel),k.Tb(2),k.Dc("textContent",e.text.infoRow.createdBy),k.Tb(3),k.Dc("user",e.workPackage.author),k.Tb(2),k.Dc("textContent",e.text.infoRow.lastUpdatedOn),k.Tb(3),k.Dc("dateTimeValue",e.workPackage.updatedAt)}}function L(e,t){1&amp;e&amp;&amp;(k.nc(0,"span",36),k.cd(1,"*"),k.mc())}const q=function(e){return{"-span-all-columns":e}};function $(e,t){if(1&amp;e&amp;&amp;(k.nc(0,"div",30),k.nc(1,"div",31),k.nc(2,"wp-replacement-label",32),k.cd(3),k.ad(4,L,2,0,"span",33),k.mc(),k.ic(5,"attribute-help-text",22),k.mc(),k.nc(6,"div",34),k.ic(7,"editable-attribute-field",35),k.mc(),k.mc()),2&amp;e){const e=t.$implicit,i=k.xc(3);k.Dc("ngClass",k.Ic(8,q,e.spanAll)),k.Tb(2),k.Dc("fieldName",e.name),k.Tb(1),k.ed(" ",e.label," "),k.Tb(1),k.Dc("ngIf",e.field.required&amp;&amp;e.field.writable),k.Tb(1),k.Dc("attribute",e.name)("attributeScope","WorkPackage"),k.Tb(2),k.Dc("resource",i.workPackage)("fieldName",e.name)}}function V(e,t){if(1&amp;e&amp;&amp;(k.nc(0,"div",27),k.nc(1,"div"),k.ic(2,"p",28),k.ad(3,$,8,10,"div",29),k.mc(),k.mc()),2&amp;e){const e=k.xc(2);k.Tb(2),k.Dc("textContent",e.text.project.required),k.Tb(1),k.Dc("ngForOf",e.projectContext.field)("ngForTrackBy",e.trackByName)}}function N(e,t){if(1&amp;e&amp;&amp;(k.nc(0,"div",37),k.nc(1,"div"),k.nc(2,"p"),k.ic(3,"span",38),k.ic(4,"br"),k.ic(5,"a",39),k.mc(),k.mc(),k.mc()),2&amp;e){const e=k.xc(2);k.Tb(3),k.Dc("innerHTML",e.projectContextText,k.Tc),k.Tb(2),k.Dc("textContent",e.text.project.switchTo),k.Ub("href",e.projectContext.href,k.Vc)}}const H=function(e){return{workPackage:e}};function z(e,t){if(1&amp;e&amp;&amp;(k.lc(0),k.ic(1,"ndc-dynamic",40),k.kc()),2&amp;e){const e=t.$implicit,i=k.xc(2);k.Tb(1),k.Dc("ndcDynamicComponent",e)("ndcDynamicInputs",k.Ic(2,H,i.workPackage))}}const B=function(e,t,i){return{workPackage:e,group:t,query:i}};function Q(e,t){if(1&amp;e&amp;&amp;(k.lc(0,44),k.ic(1,"ndc-dynamic",40),k.kc()),2&amp;e){const e=k.xc().$implicit,t=k.xc(2);k.Tb(1),k.Dc("ndcDynamicComponent",t.attributeGroupComponent(e))("ndcDynamicInputs",k.Kc(2,B,t.workPackage,e,e.query))}}const W=function(e,t){return{workPackage:e,group:t}};function U(e,t){if(1&amp;e&amp;&amp;(k.lc(0),k.nc(1,"div",13),k.nc(2,"div",14),k.ic(3,"h3",15),k.mc(),k.mc(),k.ic(4,"ndc-dynamic",45),k.kc()),2&amp;e){const e=k.xc().$implicit,t=k.xc(2);k.Tb(3),k.Dc("textContent",e.name),k.Tb(1),k.Dc("ndcDynamicComponent",t.attributeGroupComponent(e))("ndcDynamicInjector",t.injector)("ndcDynamicInputs",k.Jc(4,W,t.workPackage,e))}}function X(e,t){if(1&amp;e&amp;&amp;(k.nc(0,"div",41),k.ad(1,Q,2,6,"ng-container",42),k.ad(2,U,5,7,"ng-container",43),k.mc()),2&amp;e){const e=t.$implicit,i=k.xc(2);k.Dc("hidden",i.shouldHideGroup(e))("ngClass","__overflowing_"+e.id),k.Ub("data-group-name",e.name)("data-overflowing-identifier",".__overflowing_"+e.id),k.Tb(1),k.Dc("ngIf",e.isolated),k.Tb(1),k.Dc("ngIf",!e.isolated)}}const Y=function(e){return{"-can-have-columns":e}};function G(e,t){if(1&amp;e&amp;&amp;(k.nc(0,"div",2),k.ad(1,E,2,3,"div",3),k.nc(2,"div",4),k.ad(3,F,1,1,"wp-status-button",5),k.ad(4,M,1,2,"attribute-help-text",6),k.ad(5,A,13,5,"div",7),k.ic(6,"wp-custom-actions",8),k.mc(),k.ad(7,V,4,3,"div",9),k.ad(8,N,6,3,"div",10),k.ad(9,z,2,4,"ng-container",11),k.nc(10,"div",12),k.nc(11,"div",13),k.nc(12,"div",14),k.ic(13,"h3",15),k.mc(),k.mc(),k.nc(14,"div",16),k.ic(15,"editable-attribute-field",17),k.mc(),k.mc(),k.ad(16,X,3,6,"div",18),k.mc()),2&amp;e){const e=k.xc();k.Dc("ngClass",k.Ic(16,Y,e.enableTwoColumnLayout)),k.Tb(1),k.Dc("ngIf",e.workPackage.isNew),k.Tb(2),k.Dc("ngIf",!e.workPackage.isNew),k.Tb(1),k.Dc("ngIf",!e.workPackage.isNew),k.Tb(1),k.Dc("ngIf",!e.workPackage.isNew),k.Tb(1),k.Dc("workPackage",e.workPackage),k.Tb(1),k.Dc("ngIf",e.projectContext&amp;&amp;e.projectContext.field),k.Tb(1),k.Dc("ngIf",!e.workPackage.isNew&amp;&amp;e.projectContext&amp;&amp;!e.projectContext.matches),k.Tb(1),k.Dc("ngForOf",e.prependedAttributeGroupComponents()),k.Tb(4),k.Dc("textContent",e.text.fields.description),k.Tb(2),k.Dc("fieldName","description")("resource",e.workPackage)("isDropTarget",!0)("wrapperClasses","-no-label"),k.Tb(1),k.Dc("ngForOf",e.groupedFields)("ngForTrackBy",e.trackByName)}}const K=function(e){return{resource:e}};function Z(e,t){if(1&amp;e&amp;&amp;(k.nc(0,"div",46),k.nc(1,"div",47),k.nc(2,"div",13),k.nc(3,"div",14),k.ic(4,"h3",15),k.mc(),k.mc(),k.ic(5,"ndc-dynamic",40),k.ic(6,"ndc-dynamic",40),k.mc(),k.mc()),2&amp;e){const e=k.xc();k.Tb(4),k.Dc("textContent",e.text.attachments.label),k.Tb(1),k.Dc("ndcDynamicComponent",e.attachmentListComponent())("ndcDynamicInputs",k.Ic(5,K,e.workPackage)),k.Tb(1),k.Dc("ndcDynamicComponent",e.attachmentUploadComponent())("ndcDynamicInputs",k.Ic(7,K,e.workPackage))}}class J extends y.a{constructor(e,t,i,n,s,a,r,o,c,l,d,u,h,p){super(),this.I18n=e,this.currentProject=t,this.PathHelper=i,this.states=n,this.halEditing=s,this.halResourceService=a,this.displayFieldService=r,this.wpCacheService=o,this.hook=c,this.injector=l,this.cdRef=d,this.elementRef=u,this.cleanupService=h,this.browserDetector=p,this.showProject=!1,this.groupedFields=[],this.resourceContextChange=new g.a,this.text={attachments:{label:this.I18n.t("js.label_attachments")},project:{required:this.I18n.t("js.project.required_outside_context"),context:this.I18n.t("js.project.context"),switchTo:this.I18n.t("js.project.click_to_switch_context")},fields:{description:this.I18n.t("js.work_packages.properties.description")},infoRow:{createdBy:this.I18n.t("js.label_created_by"),lastUpdatedOn:this.I18n.t("js.label_last_updated_on")}},this.firstTimeFocused=!1}ngOnInit(){this.$element=jQuery(this.elementRef.nativeElement);const e=this.halEditing.changeFor(this.workPackage);this.resourceContextChange.next(this.contextFrom(e)),this.refresh(e),this.resourceContextChange.pipe(this.untilDestroyed(),Object(a.a)((e,t)=&gt;_.isEqual(e,t)),Object(r.a)(()=&gt;this.halEditing.changeFor(this.workPackage))).subscribe(e=&gt;this.refresh(e)),this.halEditing.typedState(this.workPackage).values$().pipe(this.untilDestroyed()).subscribe(e=&gt;{this.resourceContextChange.next(this.contextFrom(e))})}refresh(e){const t=this.workPackage.isNew,i=e.projectedResource;i.project?this.projectContext={href:this.PathHelper.projectWorkPackagePath(i.project.idFromLink,this.workPackage.id),matches:i.project.href===this.currentProject.apiv3Path}:this.projectContext={matches:!1,href:null},t&amp;&amp;!this.currentProject.inProjectContext&amp;&amp;(this.projectContext.field=this.getFields(i,["project"]));const n=i.schema._attributeGroups;this.groupedFields=this.rebuildGroupedFields(i,n),this.cdRef.detectChanges()}shouldHideGroup(e){const t=0===e.members.length,i=this.workPackage.isNew&amp;&amp;!!e.query;return t||i}trackByName(e,t){return t.name}prependedAttributeGroupComponents(){return this.hook.call("prependedAttributeGroups",this.workPackage)}attributeGroupComponent(e){return this.hook.call("attributeGroupComponent",e,this.workPackage).pop()||null}attachmentListComponent(){return this.hook.call("workPackageAttachmentListComponent",this.workPackage).pop()||null}attachmentUploadComponent(){return this.hook.call("workPackageAttachmentUploadComponent",this.workPackage).pop()||null}get idLabel(){return`#${this.workPackage.id}`}get projectContextText(){let e=this.workPackage.project.idFromLink,t=`
                       <a href="${this.PathHelper.projectPath(e)}">
                        ${this.workPackage.project.name}
                        <a>
                         `;return this.I18n.t("js.project.work_package_belongs_to",{projectname:t})}get enableTwoColumnLayout(){return this.workPackage.isNew&amp;&amp;!this.browserDetector.isEdge}rebuildGroupedFields(e,t){return t?t.map(t=&gt;{let i=this.getAttributesGroupId(t);return"WorkPackageFormAttributeGroup"===t._type?{name:t.name,id:i||Object(f.a)(16),members:this.getFields(e,t.attributes),type:t._type,isolated:!1}:{name:t.name,id:i||Object(f.a)(16),query:this.halResourceService.createHalResourceOfClass(p.a,t._embedded.query),relationType:t.relationType,members:[t._embedded.query],type:t._type,isolated:!0}}):[]}getFields(e,t){const i=[];return t.forEach(t=&gt;{if("date"===t)return void i.push(this.getDateField(e));if(!e.schema[t])return void Object(o.a)("Unknown field for current schema",t);const n=this.displayField(e,t);i.push({name:t,label:n.label,multiple:!1,spanAll:n.isFormattable,field:n})}),i}getDateField(e){let t={name:"date",label:this.I18n.t("js.work_packages.properties.date"),multiple:!1};return e.schema.hasOwnProperty("date")?t.field=this.displayField(e,"date"):(t.fields=[this.displayField(e,"startDate"),this.displayField(e,"dueDate")],t.multiple=!0),t}contextFrom(e){let t=e.schema,i=e.projectedResource,n=null,s=i.project&amp;&amp;i.project.hrefreturn n=t.baseSchema?t.baseSchema.href:t.href,{isNew:i.isNew,schema:n,project:s}}displayField(e,t){return this.displayFieldService.getField(e,t,e.schema[t],{container:"single-view",injector:this.injector,options:{}})}getAttributesGroupId(e){let t=this.$element.find("[data-group-name='"+e.name+"']").data("overflowingIdentifier");return t?t.replace(".__overflowing_",""):""}}J.\u0275fac=function(e){return new(e||J)(k.hc(n.a),k.hc(c.a),k.hc(s.a),k.hc(l.a),k.hc(d.a),k.hc(w.a),k.hc(h.a),k.hc(u.a),k.hc(m.a),k.hc(k.A),k.hc(k.i),k.hc(k.q),k.hc(v.a),k.hc(b.a))},J.\u0275cmp=k.bc({type:J,selectors:[["wp-single-view"]],inputs:{workPackage:"workPackage",showProject:"showProject"},features:[k.Sb([v.a]),k.Qb],decls:2,vars:2,consts:[["class","work-package--single-view",3,"ngClass",4,"ngIf"],["class","work-packages--attachments attributes-group",4,"ngIf"],[1,"work-package--single-view",3,"ngClass"],["class","wp-new--subject-wrapper",4,"ngIf"],[1,"wp-info-wrapper"],[3,"workPackage",4,"ngIf"],[3,"attribute","attributeScope",4,"ngIf"],["class","work-packages--info-row",4,"ngIf"],[1,"custom-actions",3,"workPackage"],["class","attributes-group -project-context __overflowing_element_container __overflowing_project_context","data-overflowing-identifier",".__overflowing_project_context",4,"ngIf"],["class","attributes-group -project-context hide-when-print",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"attributes-group","description-group"],[1,"attributes-group--header"],[1,"attributes-group--header-container"],[1,"attributes-group--header-text",3,"textContent"],[1,"single-attribute","work-packages--details--description"],[3,"fieldName","resource","isDropTarget","wrapperClasses"],["class","attributes-group __overflowing_element_container",3,"hidden","ngClass",4,"ngFor","ngForOf","ngForTrackBy"],[1,"wp-new--subject-wrapper"],[3,"resource","wrapperClasses","fieldName"],[3,"workPackage"],[3,"attribute","attributeScope"],[1,"work-packages--info-row"],[3,"textContent"],[1,"user-link",3,"user"],[3,"dateTimeValue"],["data-overflowing-identifier",".__overflowing_project_context",1,"attributes-group","-project-context","__overflowing_element_container","__overflowing_project_context"],[1,"wp-project-context--warning",3,"textContent"],["class","attributes-key-value",3,"ngClass",4,"ngFor","ngForOf","ngForTrackBy"],[1,"attributes-key-value",3,"ngClass"],[1,"attributes-key-value--key"],[3,"fieldName"],["class","required",4,"ngIf"],[1,"attributes-key-value--value-container"],[3,"resource","fieldName"],[1,"required"],[1,"attributes-group","-project-context","hide-when-print"],[3,"innerHTML"],[1,"project-context--switch-link",3,"textContent"],[3,"ndcDynamicComponent","ndcDynamicInputs"],[1,"attributes-group","__overflowing_element_container",3,"hidden","ngClass"],["wp-isolated-query-space","",4,"ngIf"],[4,"ngIf"],["wp-isolated-query-space",""],[3,"ndcDynamicComponent","ndcDynamicInjector","ndcDynamicInputs"],[1,"work-packages--attachments","attributes-group"],[1,"work-packages--attachments-container"]],template:function(e,t){1&amp;e&amp;&amp;(k.ad(0,G,17,18,"div",0),k.ad(1,Z,7,9,"div",1)),2&amp;e&amp;&amp;(k.Dc("ngIf",t.workPackage),k.Tb(1),k.Dc("ngIf",t.workPackage.canAddAttachments||t.workPackage.hasAttachments))},directives:[C.q,C.n,x.a,C.p,j.a,S.a,T.a,P.a,I.a,O.a,D.c,D.d,R.a],encapsulation:2,changeDetection:0})},buKu:function(e,t,i){"use strict";i.r(t);i("yLV6");i("tG68"),i("E+lO"),i("vPHx"),i("vqYl"),i("SU55")},buwf:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("ofXK"),s=i("fXoL");class a{constructor(e){this.documentElement=e}get isMobile(){return this.hasBodyClass("-browser-mobile")}get isEdge(){return this.hasBodyClass("-browser-edge")}hasBodyClass(e){return this.documentElement.body.classList.contains(e)}}a.\u0275fac=function(e){return new(e||a)(s.rc(n.d))},a.\u0275prov=s.dc({token:a,factory:a.\u0275fac,providedIn:"root"})},byj5:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i("wZYP"),s=i("l08T"),a=i("F5Dh"),r=i("fbLK"),o=i("fXoL"),c=i("ofXK"),l=i("70hh");function d(e,t){if(1&amp;e){const e=o.oc();o.nc(0,"query-filters",1),o.vc("filtersChanged",(function(t){return o.Sc(e),o.xc().filters=t})),o.mc()}if(2&amp;e){const e=o.xc();o.Dc("filters",e.filters)}}class u{constructor(e,t,i,n,s){this.injector=e,this.I18n=t,this.wpTableFilters=i,this.wpFiltersService=n,this.bannerService=s,this.filters=[],this.eeShowBanners=!1,this.text={columnsLabel:this.I18n.t("js.label_columns"),selectedColumns:this.I18n.t("js.description_selected_columns"),multiSelectLabel:this.I18n.t("js.work_packages.label_column_multiselect"),upsaleRelationColumns:this.I18n.t("js.modals.upsale_relation_columns"),upsaleRelationColumnsLink:this.I18n.t("js.modals.upsale_relation_columns_link")}}ngOnInit(){this.eeShowBanners=this.bannerService.eeShowBanners,this.wpTableFilters.onReady().then(()=&gt;this.filters=this.wpTableFilters.current)}onSave(){this.filters&amp;&amp;this.wpTableFilters.replaceIfComplete(this.filters)}}u.\u0275fac=function(e){return new(e||u)(o.hc(o.A),o.hc(n.a),o.hc(a.a),o.hc(s.a),o.hc(r.a))},u.\u0275cmp=o.bc({type:u,selectors:[["wp-table-config-filters-tab"]],decls:1,vars:1,consts:[[3,"filters","filtersChanged",4,"ngIf"],[3,"filters","filtersChanged"]],template:function(e,t){1&amp;e&amp;&amp;o.ad(0,d,1,1,"query-filters",0),2&amp;e&amp;&amp;o.Dc("ngIf",!!t.filters)},directives:[c.q,l.a],encapsulation:2})},cJ7v:function(e,t,i){"use strict";i.d(t,"a",(function(){return y}));var n=i("wZYP"),s=i("d/TE"),a=i("fXoL"),r=i("ofXK"),o=i("N5AO"),c=i("lmKF"),l=i("/Rze");function d(e,t){if(1&amp;e){const e=a.oc();a.nc(0,"a",7),a.vc("click",(function(t){return a.Sc(e),a.xc().executeTarget(t)})),a.mc()}if(2&amp;e){const e=a.xc();a.Dc("textContent",e.notification.link.text)}}function u(e,t){if(1&amp;e){const e=a.oc();a.nc(0,"div"),a.nc(1,"a",11),a.vc("click",(function(){return a.Sc(e),a.xc(2).show=!0})),a.ic(2,"op-icon",12),a.mc(),a.nc(3,"a",11),a.vc("click",(function(){return a.Sc(e),a.xc(2).show=!1})),a.ic(4,"op-icon",13),a.mc(),a.ic(5,"span",2),a.mc()}if(2&amp;e){const e=a.xc(2);a.Tb(1),a.Dc("hidden",e.show),a.Tb(2),a.Dc("hidden",!e.show),a.Tb(2),a.Dc("textContent",e.uploadText)}}function h(e,t){if(1&amp;e){const e=a.oc();a.nc(0,"notifications-upload-progress",16),a.vc("onSuccess",(function(){return a.Sc(e),a.xc(3).onUploadSuccess()}))("onError",(function(t){return a.Sc(e),a.xc(3).onUploadError(t)})),a.mc()}if(2&amp;e){const e=t.$implicit;a.Dc("upload",e)}}function p(e,t){if(1&amp;e&amp;&amp;(a.nc(0,"ul",14),a.ad(1,h,1,1,"notifications-upload-progress",15),a.mc()),2&amp;e){const e=a.xc(2);a.Tb(1),a.Dc("ngForOf",e.data)}}const m=function(e){return{"-hidden":e}};function g(e,t){if(1&amp;e&amp;&amp;(a.nc(0,"div"),a.ad(1,u,6,3,"div",8),a.nc(2,"div",9),a.ad(3,p,2,1,"ul",10),a.mc(),a.mc()),2&amp;e){const e=a.xc();a.Tb(1),a.Dc("ngIf",e.canBeHidden()),a.Tb(1),a.Dc("ngClass",a.Ic(3,m,!e.show&amp;&amp;e.canBeHidden())),a.Tb(1),a.Dc("ngIf",e.data&amp;&amp;e.data.length&gt;0)}}function f(e,t){1&amp;e&amp;&amp;a.ic(0,"div")}function b(e,t){if(1&amp;e&amp;&amp;a.ic(0,"li",2),2&amp;e){const e=t.$implicit;a.Dc("textContent",e)}}function v(e,t){if(1&amp;e&amp;&amp;(a.nc(0,"div"),a.nc(1,"ul",17),a.ad(2,b,1,1,"li",18),a.mc(),a.mc()),2&amp;e){const e=a.xc();a.Tb(2),a.Dc("ngForOf",e.data)}}function w(e,t){if(1&amp;e){const e=a.oc();a.nc(0,"accessible-by-keyboard",19),a.vc("execute",(function(){return a.Sc(e),a.xc().remove()})),a.mc()}if(2&amp;e){const e=a.xc();a.Dc("linkTitle",e.text.close_popup)}}class y{constructor(e,t){this.I18n=e,this.notificationsService=t,this.text={close_popup:this.I18n.t("js.close_popup_title")},this.uploadCount=0,this.show=!1}ngOnInit(){this.type=this.notification.type}get data(){return this.notification.data}canBeHidden(){return this.data&amp;&amp;this.data.length&gt;5}removable(){return"upload"!==this.notification.type}remove(){this.notificationsService.remove(this.notification)}executeTarget(){this.notification.link&amp;&amp;(this.notification.link.target(),this.remove())}onUploadError(e){this.remove()}onUploadSuccess(){this.uploadCount+=1}get uploadText(){return this.I18n.t("js.label_upload_counter",{done:this.uploadCount,count:this.data.length})}}y.\u0275fac=function(e){return new(e||y)(a.hc(n.a),a.hc(s.a))},y.\u0275cmp=a.bc({type:y,selectors:[["notification"]],inputs:{notification:"notification"},decls:11,vars:11,consts:[["tabindex","0"],["role","alert","aria-atomic","true",1,"notification-box--content"],[3,"textContent"],["class","notification-box--target-link",3,"textContent","click",4,"ngIf"],[3,"ngSwitch"],[4,"ngSwitchCase"],["linkClass","notification-box--close icon-context icon-close",3,"linkTitle","execute",4,"ngIf"],[1,"notification-box--target-link",3,"textContent","click"],[4,"ngIf"],[3,"ngClass"],["class","notification-box--uploads",4,"ngIf"],[3,"hidden","click"],["icon-classes","icon-arrow-right2"],["icon-classes","icon-arrow-down1"],[1,"notification-box--uploads"],[3,"upload","onSuccess","onError",4,"ngFor","ngForOf"],[3,"upload","onSuccess","onError"],[1,"notification-box--errors"],[3,"textContent",4,"ngFor","ngForOf"],["linkClass","notification-box--close icon-context icon-close",3,"linkTitle","execute"]],template:function(e,t){1&amp;e&amp;&amp;(a.nc(0,"div",0),a.nc(1,"div",1),a.nc(2,"p"),a.ic(3,"span",2),a.ic(4,"span",2),a.ad(5,d,1,1,"a",3),a.mc(),a.nc(6,"div",4),a.ad(7,g,4,5,"div",5),a.ad(8,f,1,0,"div",5),a.ad(9,v,3,1,"div",5),a.mc(),a.mc(),a.ad(10,w,1,1,"accessible-by-keyboard",6),a.mc()),2&amp;e&amp;&amp;(a.Wb("notification-box -",t.type,""),a.Tb(3),a.Dc("textContent",t.notification.message),a.Tb(1),a.Dc("textContent"," "),a.Tb(1),a.Dc("ngIf",t.notification.link),a.Tb(1),a.Dc("ngSwitch",t.type),a.Tb(1),a.Dc("ngSwitchCase","upload"),a.Tb(1),a.Dc("ngSwitchCase","success"),a.Tb(1),a.Dc("ngSwitchCase","error"),a.Tb(1),a.Dc("ngIf",t.removable()))},directives:[r.q,r.u,r.v,r.n,o.a,r.p,c.a,l.a],encapsulation:2,changeDetection:0})},cK71:function(e,t,i){e.exports=global.I18n=i("eFC/")},"cd/7":function(e,t,i){"use strict";i.d(t,"c",(function(){return n})),i.d(t,"b",(function(){return s})),i.d(t,"a",(function(){return a}));const n="__ui-state-link",s="-checked";class a{constructor(e,t){this.$state=e,this.keepTab=t}linkToDetails(e,t,i){return this.build(e,"currentDetailsState",t,i)}linkToShow(e,t,i){return this.build(e,"currentShowState",t,i)}build(e,t,i,s){let a=document.createElement("a");return a.href=this.$state.href(this.keepTab[t],{workPackageId:e}),a.classList.add(n),a.dataset.workPackageId=e,a.dataset.wpState=t,a.setAttribute("title",i),a.textContent=s,a}}},ciXH:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));i("YW04");var n=i("kTsZ"),s=i("Jui0"),a=i("RhL0"),r=i("fXoL");class o{constructor(e,t){this.halResourceService=e,this.pathHelper=t}list(e){return this.listRequest(this.listUrl(),e)}one(e){return this.halResourceService.get(this.oneUrl(e).toString()).toPromise()}listRequest(e,t){return this.halResourceService.get(e+this.listParamsString(t)).toPromise()}listParamsString(e){let t=[];if(e&amp;&amp;e.sortBy&amp;&amp;t.push(`sortBy=${JSON.stringify(e.sortBy)}`),e&amp;&amp;void 0!==e.pageSize&amp;&amp;t.push(`pageSize=${e.pageSize}`),e&amp;&amp;e.filters){let i=new a.a;e.filters.forEach(e=&gt;{i.add(...e)}),t.push(i.toParams())}let i="";return t.length&amp;&amp;(i=`?${t.join("&amp;")}`),i}}o.\u0275fac=function(e){return new(e||o)(r.rc(n.a),r.rc(s.a))},o.\u0275prov=r.dc({token:o,factory:o.\u0275fac})},crnd:function(e,t){function i(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}i.keys=function(){return[]},i.resolve=i,e.exports=i,i.id="crnd"},"d/TE":function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("8zkO"),s=i("FnNU"),a=i("fXoL");class r{constructor(e){this.configurationService=e,this.stack=Object(s.f)([]),jQuery(window).on("op:notifications:add",(e,t)=&gt;{this.add(t)})}get current(){return this.stack}add(e,t=5e3){return jQuery(".flash.notice").remove(),this.stack.doModify(t=&gt;{let i=[e].concat(t);return _.remove(i,(e,t)=&gt;t&gt;0&amp;&amp;("success"===e.type||"error"===e.type)),i}),"success"===e.type&amp;&amp;this.configurationService.autoHidePopups()&amp;&amp;setTimeout(()=&gt;this.remove(e),t),e}addError(e,t=[]){Array.isArray(t)||(t=[t]);let i=this.createNotification(e,"error");return i.data=t,this.add(i)}addWarning(e){return this.add(this.createNotification(e,"warning"))}addSuccess(e){return this.add(this.createNotification(e,"success"))}addNotice(e){return this.add(this.createNotification(e,"info"))}addAttachmentUpload(e,t){return this.add(this.createAttachmentUploadNotification(e,t))}remove(e){this.stack.doModify(t=&gt;(_.remove(t,t=&gt;t===e),t))}clear(){this.stack.putValue([])}createNotification(e,t){return"string"==typeof e?{message:e,type:t}:(e.type=t,e)}createAttachmentUploadNotification(e,t){if(!t.length)throw new Error("Cannot create an upload notification without uploads!");let i=this.createNotification(e,"upload");return i.data=t,i}}r.\u0275fac=function(e){return new(e||r)(a.rc(n.a))},r.\u0275prov=a.dc({token:r,factory:r.\u0275fac,providedIn:"root"})},d4d5:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("Mo6U");class s extends n.a{get id(){return this.$source.id||this.idFromLink}set id(e){this.$source.id=e}}},dMmB:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("iMRi"),s=i("kTsZ"),a=i("fXoL");class r{constructor(e,t){this.states=e,this.halResourceService=t}ensureLoaded(e){const t=this.state(e);return t.hasValue()?Promise.resolve(t.value):this.load(e).valuesPromise()}state(e){const t=e.$links.schema;if(!t)throw`Resource ${e} has no schema!`;return this.states.schemas.get(t.href)}load(e,t=!1){const i=this.state(e);return t&amp;&amp;i.clear(),i.putFromPromiseIfPristine(()=&gt;this.halResourceService.createLinkedResource(e,"schema",e.$links.schema.$link).$load()),i}}r.\u0275fac=function(e){return new(e||r)(a.rc(n.a),a.rc(s.a))},r.\u0275prov=a.dc({token:r,factory:r.\u0275fac})},"dfy/":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("fXoL"),s=i("jhN1");class a{constructor(e){this.titleService=e}get current(){return this.titleService.getTitle()}get titleParts(){return this.current.split(" | ")}setFirstPart(e){let t=this.titleParts;t[0]=e,this.titleService.setTitle(t.join(" | "))}}a.\u0275fac=function(e){return new(e||a)(n.rc(s.e))},a.\u0275prov=n.dc({token:a,factory:a.\u0275fac,providedIn:"root"})},e6KS:function(e,t,i){"use strict";i.d(t,"c",(function(){return d})),i.d(t,"b",(function(){return u})),i.d(t,"a",(function(){return h}));var n=i("mrSG"),s=i("XZsv"),a=i("iMRi"),r=i("SKFm"),o=i("/C7M"),c=i("POAS"),l=i("r0MM");const d="inline-edit--active-field",u="inline-edit--field";class h{constructor(e){this.injector=e,this.activeFields={},this.errorsPerAttribute={},this.editMode=!1}onSaved(e,t){const i=e?"created":"updated";this.halEvents.push(t,{eventType:i})}hasActiveFields(){return!_.isEmpty(this.activeFields)}get change(){return this.halEditing.changeFor(this.resource)}activate(e,t=!1){return this.loadFieldSchema(e,t).then(i=&gt;i.writable||t?this.renderField(e,i):(this.halNotification.showEditingBlockedError(i.name||e),Promise.reject()))}activateWhenNeeded(e){return this.activeFields[e]?Promise.resolve():this.requireVisible(e).then(()=&gt;this.activate(e,!0))}activateMissingFields(){this.change.getForm().then(e=&gt;{_.each(e.validationErrors,(e,t)=&gt;{"id"!==t&amp;&amp;this.activateWhenNeeded(t)})})}submit(){return Object(n.b)(this,void 0,void 0,(function*(){if(this.change.isEmpty()&amp;&amp;!this.resource.isNew)return this.closeEditFields(),Promise.resolve(this.resource);this.change.inFlight=!0,this.errorsPerAttribute={};const e=_.keys(this.activeFields);return yield Promise.all(_.map(this.activeFields,e=&gt;e.onSubmit())),new Promise((t,i)=&gt;{this.halEditing.save(this.change).then(i=&gt;{this.closeEditFields(e),t(i.resource),this.halNotification.showSave(i.resource,i.wasNew),this.editMode=!1,this.onSaved(i.wasNew,i.resource),this.change.inFlight=!1}).catch(e=&gt;{this.halNotification.handleRawError(e,this.resource),e instanceof s.a&amp;&amp;(this.handleSubmissionErrors(e),i()),this.change.inFlight=!1})})}))}destroy(){this.subscription&amp;&amp;this.subscription.unsubscribe(),_.each(this.activeFields,e=&gt;{e&amp;&amp;e.deactivate(!1)})}closeEditFields(e){e||(e=_.keys(this.activeFields)),e.forEach(e=&gt;{const t=this.activeFields[e];t&amp;&amp;t.deactivate(!1),this.change.reset(e)})}handleSubmissionErrors(e){this.handleErroneousAttributes(e)}handleErroneousAttributes(e){const t=e.getInvolvedAttributes();if(this.errorsPerAttribute=e.getMessagesPerAttribute(),0!==t.length)return this.setErrorsForFields(t)}setErrorsForFields(e){let t=e.map(e=&gt;this.requireVisible(e).then(()=&gt;(this.activeFields[e]&amp;&amp;this.activeFields[e].setErrors(this.errorsPerAttribute[e]||[]),this.activateWhenNeeded(e))));Promise.all(t).then(()=&gt;{setTimeout(()=&gt;this.focusOnFirstError())}).catch(()=&gt;{console.error("Failed to activate all erroneous fields.")})}loadFieldSchema(e,t=!1){const i=this.change.getSchemaName(e);return new Promise((e,n)=&gt;{this.loadFormAndCheck(i,t);const s=this.change.schema[i];if(!s)throw new Error;e(s)})}loadFormAndCheck(e,t=!1){const i=this.change.getSchemaName(e);this.change.getForm().then(n=&gt;{const s=n.schema[i];s.writable||t||(this.halNotification.showEditingBlockedError(s.name||e),this.closeEditFields([e]))}).catch(t=&gt;{console.error("Failed to build edit field: %o",t),this.halNotification.handleRawError(t,this.resource),this.closeEditFields([e])})}renderField(e,t){return this.activateField(this,t,e,this.errorsPerAttribute[e]||[]).then(t=&gt;(this.activeFields[e]=t,t)).catch(e=&gt;{console.error("Failed to render edit field:"+e),this.halNotification.handleRawError(e)})}}Object(n.c)([Object(l.a)(),Object(n.e)("design:type",a.a)],h.prototype,"states",void 0),Object(n.c)([Object(l.a)(),Object(n.e)("design:type",r.a)],h.prototype,"halEditing",void 0),Object(n.c)([Object(l.a)(),Object(n.e)("design:type",c.a)],h.prototype,"halNotification",void 0),Object(n.c)([Object(l.a)(),Object(n.e)("design:type",o.a)],h.prototype,"halEvents",void 0)},"eFC/":function(e,t,i){var n,s;s=this,void 0===(n=(function(){return function(e){"use strict";var t=e&amp;&amp;e.I18n||{},i=Array.prototype.slice,n=function(e){return("0"+e.toString()).substr(-2)},s=function(e){var t=typeof e;return"function"===t||"object"===t},a=function(e){return"function"==typeof e},r=function(e){return null!=e},o=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},c=function(e){return"string"==typeof value||"[object String]"===Object.prototype.toString.call(e)},l=function(e){return!0===e||!1===e},d=function(e,t,i){return void 0===i||0==+i?Math[e](t):(t=+t,i=+i,isNaN(t)||"number"!=typeof i||i%1!=0?NaN:(t=t.toString().split("e"),+((t=(t=Math[e](+(t[0]+"e"+(t[1]?+t[1]-i:-i)))).toString().split("e"))[0]+"e"+(t[1]?+t[1]+i:i))))},u=function(e,t){return a(e)?e(t):e},h=function(e,t){var i,n,s;for(i in t)t.hasOwnProperty(i)&amp;&amp;(n=t[i],c(n)||"number"==typeof(s=n)||"[object Number]"===Object.prototype.toString.call(s)||l(n)||o(n)?e[i]=n:(null==e[i]&amp;&amp;(e[i]={}),h(e[i],n)));return e},p={day_names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbr_day_names:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],month_names:[null,"January","February","March","April","May","June","July","August","September","October","November","December"],abbr_month_names:[null,"Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],meridian:["AM","PM"]},m={precision:3,separator:".",delimiter:",",strip_insignificant_zeros:!1},g={unit:"$",precision:2,format:"%u%n",sign_first:!0,delimiter:",",separator:"."},f={unit:"%",precision:3,format:"%n%u",separator:".",delimiter:""},b=[null,"kb","mb","gb","tb"],v={defaultLocale:"en",locale:"en",defaultSeparator:".",placeholder:/(?:\{\{|%\{)(.*?)(?:\}\}?)/gm,fallbacks:!1,translations:{},missingBehaviour:"message",missingTranslationPrefix:""};return t.reset=function(){var e;for(e in v)this[e]=v[e]},t.initializeOptions=function(){var e;for(e in v)r(this[e])||(this[e]=v[e])},t.initializeOptions(),t.locales={},t.locales.get=function(e){var i=this[e]||this[t.locale]||this.default;return a(i)&amp;&amp;(i=i(e)),!1===o(i)&amp;&amp;(i=[i]),i},t.locales.default=function(e){var i=[],n=[];return e&amp;&amp;i.push(e),!e&amp;&amp;t.locale&amp;&amp;i.push(t.locale),t.fallbacks&amp;&amp;t.defaultLocale&amp;&amp;i.push(t.defaultLocale),i.forEach((function(e){var i=e.split("-"),s=null,a=null;3===i.length?(s=[i[0],i[1]].join("-"),a=i[0]):2===i.length&amp;&amp;(s=i[0]),-1===n.indexOf(e)&amp;&amp;n.push(e),t.fallbacks&amp;&amp;[s,a].forEach((function(t){null!=t&amp;&amp;t!==e&amp;&amp;-1===n.indexOf(t)&amp;&amp;n.push(t)}))})),i.length||i.push("en"),n},t.pluralization={},t.pluralization.get=function(e){return this[e]||this[t.locale]||this.default},t.pluralization.default=function(e){switch(e){case 0:return["zero","other"];case 1:return["one"];default:return["other"]}},t.currentLocale=function(){return this.locale||this.defaultLocale},t.isSet=r,t.lookup=function(e,t){t=t||{};var i,n,s,a,o=this.locales.get(t.locale).slice();for(o[0],s=this.getFullScope(e,t);o.length;)if(i=o.shift(),n=s.split(this.defaultSeparator),a=this.translations[i]){for(;n.length&amp;&amp;null!=(a=a[n.shift()]););if(null!=a)return a}if(r(t.defaultValue))return u(t.defaultValue,e)},t.pluralizationLookupWithoutFallback=function(e,t,i){var n,a,o=this.pluralization.get(t)(e);if(s(i))for(;o.length;)if(n=o.shift(),r(i[n])){a=i[n];break}return a},t.pluralizationLookup=function(e,t,i){i=i||{};var n,a,o,c,l=this.locales.get(i.locale).slice();for(l[0],t=this.getFullScope(t,i);l.length;)if(n=l.shift(),a=t.split(this.defaultSeparator),o=this.translations[n]){for(;a.length&amp;&amp;(o=o[a.shift()],s(o));)0==a.length&amp;&amp;(c=this.pluralizationLookupWithoutFallback(e,n,o));if(null!=c&amp;&amp;null!=c)break}return null!=c&amp;&amp;null!=c||r(i.defaultValue)&amp;&amp;(c=s(i.defaultValue)?this.pluralizationLookupWithoutFallback(e,i.locale,i.defaultValue):i.defaultValue,o=i.defaultValue),{message:c,translations:o}},t.meridian=function(){var e=this.lookup("time"),t=this.lookup("date");return e&amp;&amp;e.am&amp;&amp;e.pm?[e.am,e.pm]:t&amp;&amp;t.meridian?t.meridian:p.meridian},t.prepareOptions=function(){for(var e,t=i.call(arguments),n={};t.length;)if("object"==typeof(e=t.shift()))for(var s in e)e.hasOwnProperty(s)&amp;&amp;(r(n[s])||(n[s]=e[s]));return n},t.createTranslationOptions=function(e,t){var i=[{scope:e}];return r(t.defaults)&amp;&amp;(i=i.concat(t.defaults)),r(t.defaultValue)&amp;&amp;i.push({message:t.defaultValue}),i},t.translate=function(e,t){t=t||{};var i,n=this.createTranslationOptions(e,t),a=this.prepareOptions(t);return delete a.defaultValue,n.some((function(t){if(r(t.scope)?i=this.lookup(t.scope,a):r(t.message)&amp;&amp;(i=u(t.message,e)),null!=i)return!0}),this)?("string"==typeof i?i=this.interpolate(i,t):s(i)&amp;&amp;r(t.count)&amp;&amp;(i=this.pluralize(t.count,e,t)),i):this.missingTranslation(e,t)},t.interpolate=function(e,t){t=t||{};var i,n,s,a,o=e.match(this.placeholder);if(!o)return e;for(;o.length;)n=(i=o.shift()).replace(this.placeholder,"$1"),a=r(t[n])?t[n].toString().replace(/\$/gm,"_#$#_"):n in t?this.nullPlaceholder(i,e,t):this.missingPlaceholder(i,e,t),s=new RegExp(i.replace(/\{/gm,"\\{").replace(/\}/gm,"\\}")),e=e.replace(s,a);return e.replace(/_#\$#_/g,"$")},t.pluralize=function(e,t,i){var n,s;return i=this.prepareOptions({count:String(e)},i),null==(s=this.pluralizationLookup(e,t,i)).translations||null==s.translations?this.missingTranslation(t,i):null!=s.message&amp;&amp;null!=s.message?this.interpolate(s.message,i):(n=this.pluralization.get(i.locale),this.missingTranslation(t+"."+n(e)[0],i))},t.missingTranslation=function(e,t){if("guess"==this.missingBehaviour){var i=e.split(".").slice(-1)[0];return(this.missingTranslationPrefix.length&gt;0?this.missingTranslationPrefix:"")+i.replace("_"," ").replace(/([a-z])([A-Z])/g,(function(e,t,i){return t+" "+i.toLowerCase()}))}return'[missing "'+[null!=t&amp;&amp;null!=t.locale?t.locale:this.currentLocale(),this.getFullScope(e,t)].join(this.defaultSeparator)+'" translation]'},t.missingPlaceholder=function(e,t,i){return"[missing "+e+" value]"},t.nullPlaceholder=function(){return t.missingPlaceholder.apply(t,arguments)},t.toNumber=function(e,t){t=this.prepareOptions(t,this.lookup("number.format"),m);var i,n,s=e&lt;0,a=function(e,t){return d("round",e,-t).toFixed(t)}(Math.abs(e),t.precision).toString().split("."),r=[],o=t.format||"%n",c=s?"-":"";for(e=a[0],i=a[1];e.length&gt;0;)r.unshift(e.substr(Math.max(0,e.length-3),3)),e=e.substr(0,e.length-3);return n=r.join(t.delimiter),t.strip_insignificant_zeros&amp;&amp;i&amp;&amp;(i=i.replace(/0+$/,"")),t.precision&gt;0&amp;&amp;i&amp;&amp;(n+=t.separator+i),n=(o=t.sign_first?"%s"+o:o.replace("%n","%s%n")).replace("%u",t.unit).replace("%n",n).replace("%s",c)},t.toCurrency=function(e,t){return t=this.prepareOptions(t,this.lookup("number.currency.format"),this.lookup("number.format"),g),this.toNumber(e,t)},t.localize=function(e,t,i){switch(i||(i={}),e){case"currency":return this.toCurrency(t);case"number":return e=this.lookup("number.format"),this.toNumber(t,e);case"percentage":return this.toPercentage(t);default:var n;return n=e.match(/^(date|time)/)?this.toTime(e,t):t.toString(),this.interpolate(n,i)}},t.parseDate=function(e){var t,i,n;if("object"==typeof e)return e;if(t=e.toString().match(/(\d{4})-(\d{2})-(\d{2})(?:[ T](\d{2}):(\d{2}):(\d{2})([\.,]\d{1,3})?)?(Z|\+00:?00)?/)){for(var s=1;s&lt;=6;s++)t[s]=parseInt(t[s],10)||0;t[2]-=1,n=t[7]?1e3*("0"+t[7]):null,i=t[8]?new Date(Date.UTC(t[1],t[2],t[3],t[4],t[5],t[6],n)):new Date(t[1],t[2],t[3],t[4],t[5],t[6],n)}else"number"==typeof e?(i=new Date).setTime(e):e.match(/([A-Z][a-z]{2}) ([A-Z][a-z]{2}) (\d+) (\d+:\d+:\d+) ([+-]\d+) (\d+)/)?(i=new Date).setTime(Date.parse([RegExp.$1,RegExp.$2,RegExp.$3,RegExp.$6,RegExp.$4,RegExp.$5].join(" "))):(e.match(/\d+ \d+:\d+:\d+ [+-]\d+ \d+/),(i=new Date).setTime(Date.parse(e)));return i},t.strftime=function(e,i){var s=this.lookup("date"),a=t.meridian();if(s||(s={}),s=this.prepareOptions(s,p),isNaN(e.getTime()))throw new Error("I18n.strftime() requires a valid date object, but received an invalid date.");var r=e.getDay(),o=e.getDate(),c=e.getFullYear(),l=e.getMonth()+1,d=e.getHours(),u=d,h=d&gt;11?1:0,m=e.getSeconds(),g=e.getMinutes(),f=e.getTimezoneOffset(),b=Math.floor(Math.abs(f/60)),v=Math.abs(f)-60*b,w=(f&gt;0?"-":"+")+(b.toString().length&lt;2?"0"+b:b)+(v.toString().length&lt;2?"0"+v:v);return u&gt;12?u-=12:0===u&amp;&amp;(u=12),i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=i.replace("%a",s.abbr_day_names[r])).replace("%A",s.day_names[r])).replace("%b",s.abbr_month_names[l])).replace("%B",s.month_names[l])).replace("%d",n(o))).replace("%e",o)).replace("%-d",o)).replace("%H",n(d))).replace("%-H",d)).replace("%I",n(u))).replace("%-I",u)).replace("%m",n(l))).replace("%-m",l)).replace("%M",n(g))).replace("%-M",g)).replace("%p",a[h])).replace("%S",n(m))).replace("%-S",m)).replace("%w",r)).replace("%y",n(c))).replace("%-y",n(c).replace(/^0+/,""))).replace("%Y",c)).replace("%z",w)},t.toTime=function(e,t){var i=this.parseDate(t),n=this.lookup(e);return i.toString().match(/invalid/i)?i.toString():n?this.strftime(i,n):i.toString()},t.toPercentage=function(e,t){return t=this.prepareOptions(t,this.lookup("number.percentage.format"),this.lookup("number.format"),f),this.toNumber(e,t)},t.toHumanSize=function(e,t){for(var i,n,s=e,a=0;s&gt;=1024&amp;&amp;a&lt;4;)s/=1024,a+=1;return 0===a?(i=this.t("number.human.storage_units.units.byte",{count:s}),n=0):(i=this.t("number.human.storage_units.units."+b[a]),n=s-Math.floor(s)==0?0:1),t=this.prepareOptions(t,{unit:i,precision:n,format:"%n%u",delimiter:""}),this.toNumber(s,t)},t.getFullScope=function(e,t){return t=t||{},o(e)&amp;&amp;(e=e.join(this.defaultSeparator)),t.scope&amp;&amp;(e=[t.scope,e].join(this.defaultSeparator)),e},t.extend=function(e,t){return void 0===e&amp;&amp;void 0===t?{}:h(e,t)},t.t=t.translate,t.l=t.localize,t.p=t.pluralize,t}(s)}).call(t,i,t,e))||(e.exports=n)},eJFM:function(e,t,i){"use strict";i.d(t,"a",(function(){return f}));var n=i("2Qcm"),s=i("6yP5"),a=i("1G5W"),r=i("/uUt"),o=i("E2tj"),c=i("tmNb"),l=i("87fy"),d=i("DhiE"),u=(i("U1xf"),i("fXoL")),h=i("hvpr"),p=i("ofXK"),m=i("f24R");function g(e,t){if(1&amp;e&amp;&amp;(u.nc(0,"div",2),u.ic(1,"wp-resizer",3),u.mc()),2&amp;e){const e=u.xc();u.Tb(1),u.Dc("elementClass",e.resizerClass)("localStorageKey",e.resizerStorageKey)}}class f{constructor(e,t,i,n,s){this.wpTableHighlight=e,this.wpTableSortBy=t,this.wpList=i,this.querySpace=n,this.cdRef=s,this.showResizer=!1,this.resizerClass="",this.resizerStorageKey="",this.gridOrientation="horizontal",this.highlightingMode="none"}ngOnInit(){this.dragInto=this.configuration.dragAndDropEnabled,this.canDragOutOf=()=&gt;this.configuration.dragAndDropEnabled,this.wpTableHighlight.updates$().pipe(Object(a.a)(this.querySpace.stopAllSubscriptions),Object(r.a)()).subscribe(()=&gt;{this.highlightingMode=this.wpTableHighlight.current.mode,this.cdRef.detectChanges()})}switchToManualSorting(){let e=this.querySpace.query.value;e&amp;&amp;this.wpTableSortBy.switchToManualSorting(e)&amp;&amp;this.wpList.save(e)}}f.\u0275fac=function(e){return new(e||f)(u.hc(n.a),u.hc(s.a),u.hc(d.a),u.hc(o.a),u.hc(u.i))},f.\u0275cmp=u.bc({type:f,selectors:[["wp-grid"]],inputs:{configuration:"configuration",showResizer:"showResizer",resizerClass:"resizerClass",resizerStorageKey:"resizerStorageKey"},features:[u.Sb([c.a,l.a])],decls:2,vars:10,consts:[[3,"dragOutOfHandler","dragInto","cardsRemovable","highlightingMode","showStatusButton","orientation","showEmptyResultsBox","showInfoButton","shrinkOnMobile","onMoved"],["class","hidden-for-mobile hide-when-print",4,"ngIf"],[1,"hidden-for-mobile","hide-when-print"],[3,"elementClass","localStorageKey"]],template:function(e,t){1&amp;e&amp;&amp;(u.nc(0,"wp-card-view",0),u.vc("onMoved",(function(){return t.switchToManualSorting()})),u.mc(),u.ad(1,g,2,2,"div",1)),2&amp;e&amp;&amp;(u.Dc("dragOutOfHandler",t.canDragOutOf)("dragInto",t.dragInto)("cardsRemovable",!1)("highlightingMode",t.highlightingMode)("showStatusButton",!0)("orientation",t.gridOrientation)("showEmptyResultsBox",!0)("showInfoButton",!0)("shrinkOnMobile",!0),u.Tb(1),u.Dc("ngIf",t.showResizer))},directives:[h.a,p.q,m.a],encapsulation:2,changeDetection:0})},eaMR:function(e,t,i){"use strict";i.d(t,"a",(function(){return g}));var n=i("F5Dh"),s=i("l08T"),a=i("Y41n"),r=i("AEvm"),o=i("Hg4z"),c=i("fXoL"),l=i("ofXK"),d=i("70hh");function u(e,t){if(1&amp;e){const e=c.oc();c.nc(0,"button",3),c.vc("click",(function(){return c.Sc(e),c.xc().wpFiltersService.toggleVisibility()})),c.yc(1,"async"),c.ic(2,"i",4),c.ic(3,"span",5),c.mc()}if(2&amp;e){const e=c.xc();c.Yb("-active",c.zc(1,3,e.visible$)),c.Tb(3),c.Dc("textContent",e.filterButtonText)}}function h(e,t){if(1&amp;e){const e=c.oc();c.nc(0,"query-filters",8),c.vc("filtersChanged",(function(t){return c.Sc(e),c.xc(2).replaceIfComplete(t)})),c.mc()}if(2&amp;e){const e=c.xc(2);c.Dc("filters",e.filters)("showCloseFilter",!0)}}function p(e,t){if(1&amp;e&amp;&amp;(c.nc(0,"div",6),c.ad(1,h,1,2,"query-filters",7),c.mc()),2&amp;e){const e=c.xc();c.Tb(1),c.Dc("ngIf",!!e.filters)}}const m=function(e){return{"-loaded":e}};class g extends r.a{constructor(e,t,i){super(),this.wpTableFilters=e,this.cdRef=t,this.wpFiltersService=i,this.showFilterButton=!1,this.filterButtonText=I18n.t("js.button_filter"),this.filtersChanged=new a.a(Object(o.b)(this)),this.filters=this.wpTableFilters.current,this.loaded=!1,this.visible$=this.wpFiltersService.observeUntil(Object(o.b)(this))}ngOnInit(){this.wpTableFilters.pristine$().pipe(this.untilDestroyed()).subscribe(()=&gt;{this.filters=this.wpTableFilters.current,this.loaded=!0,this.cdRef.detectChanges()})}replaceIfComplete(e){this.wpTableFilters.replaceIfComplete(e),this.filtersChanged.emit(this.filters)}}g.\u0275fac=function(e){return new(e||g)(c.hc(n.a),c.hc(c.i),c.hc(s.a))},g.\u0275cmp=c.bc({type:g,selectors:[["filter-container"]],inputs:{showFilterButton:"showFilterButton",filterButtonText:"filterButtonText"},outputs:{filtersChanged:"filtersChanged"},features:[c.Qb],decls:4,vars:7,consts:[["class","button -small advanced-filters--toggle",3,"-active","click",4,"ngIf"],[1,"work-packages--filters-optional-container",3,"ngClass"],["id","query_form_content","class","hide-when-print",4,"ngIf"],[1,"button","-small","advanced-filters--toggle",3,"click"],[1,"button--icon","icon-filter"],[1,"button--text",3,"textContent"],["id","query_form_content",1,"hide-when-print"],[3,"filters","showCloseFilter","filtersChanged",4,"ngIf"],[3,"filters","showCloseFilter","filtersChanged"]],template:function(e,t){1&amp;e&amp;&amp;(c.ad(0,u,4,5,"button",0),c.nc(1,"div",1),c.ad(2,p,2,1,"div",2),c.yc(3,"async"),c.mc()),2&amp;e&amp;&amp;(c.Dc("ngIf",t.showFilterButton),c.Tb(1),c.Dc("ngClass",c.Ic(5,m,t.loaded)),c.Tb(1),c.Dc("ngIf",c.zc(3,3,t.visible$)))},directives:[l.q,l.n,d.a],pipes:[l.a],encapsulation:2,changeDetection:0})},ecJW:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("fXoL"),s=i("8zkO");class a{constructor(e,t,i,n,s){this.ConfigurationService=e,this.timezoneService=t,this.datepickerElem=i,this.date=n,this.options=s,this.datepickerFormat="yy-mm-dd",this.datepickerCont=jQuery(this.datepickerElem),this.datepickerInstance=null,this.initialize(s)}initialize(e){const t=this.ConfigurationService.startOfWeekPresent()?this.ConfigurationService.startOfWeek():jQuery.datepicker._defaults.firstDay;var i=_.extend({},e,{firstDay:t,showWeeks:!0,changeMonth:!0,changeYear:!0,closeText:I18n.t("js.button_confirm"),dateFormat:this.datepickerFormat,defaultDate:this.timezoneService.formattedISODate(this.date),showButtonPanel:!0});this.datepickerInstance=this.datepickerCont.datepicker(i),this.datepickerCont.attr("autocomplete","off")}clear(){this.datepickerInstance.datepicker("setDate",null)}destroy(){this.hide(),this.datepickerInstance.datepicker("destroy")}hide(){this.datepickerInstance.datepicker("hide"),this.datepickerCont.scrollParent().off("scroll")}show(){this.datepickerInstance.datepicker("show"),this.hideDuringScroll()}reshow(){this.datepickerInstance.datepicker("show")}hideDuringScroll(){let e=null;this.datepickerCont.scrollParent().scroll(()=&gt;{this.datepickerInstance.datepicker("hide"),e&amp;&amp;clearTimeout(e),e=setTimeout(()=&gt;{this.visibleAndActive()&amp;&amp;this.datepickerInstance.datepicker("show")},50)})}visibleAndActive(){var e=this.datepickerCont;try{return document.elementFromPoint(e.offset().left,e.offset().top)===e[0]&amp;&amp;document.activeElement===e[0]}catch(t){return console.error("Failed to test visibleAndActive "+t),!1}}}var r=i("juWA");class o{constructor(e,t,i){this.elementRef=e,this.ConfigurationService=t,this.timezoneService=i,this.onChange=new n.s,this.onInputChange=new n.s,this.onClose=new n.s}ngOnInit(){this.$element=jQuery(this.elementRef.nativeElement),this.input=this.$element.find("input"),this.input.on("change",()=&gt;this.onInputChange.emit(this.currentValue())),this.setup()}ngOnDestroy(){this.datePickerInstance&amp;&amp;this.datePickerInstance.destroy()}setup(){this.input.focus(()=&gt;this.showDatePicker()),this.input.keydown(e=&gt;{this.isEmpty()&amp;&amp;this.datePickerInstance.clear()})}isEmpty(){return""===this.currentValue().trim()}currentValue(){return this.input.val()}showDatePicker(){let e,t={onSelect:e=&gt;{this.datePickerInstance.hide();let t=e;this.isEmpty()&amp;&amp;(t=null),this.input.val(t),this.input.trigger("change"),this.onChange.emit(t)},onClose:()=&gt;this.onClose.emit()};e=this.isEmpty&amp;&amp;this.initialDate?this.timezoneService.parseISODate(this.initialDate).toDate():this.currentValue(),this.datePickerInstance=new a(this.ConfigurationService,this.timezoneService,this.input,e,t),this.datePickerInstance.show()}}o.\u0275fac=function(e){return new(e||o)(n.hc(n.q),n.hc(s.a),n.hc(r.a))},o.\u0275cmp=n.bc({type:o,selectors:[["op-date-picker"]],inputs:{initialDate:"initialDate"},outputs:{onChange:"onChange",onInputChange:"onInputChange",onClose:"onClose"},ngContentSelectors:["*"],decls:2,vars:0,template:function(e,t){1&amp;e&amp;&amp;(n.Cc(),n.nc(0,"div"),n.Bc(1),n.mc())},encapsulation:2})},eyhC:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("FnNU"),s=i("E2tj"),a=i("ug4p"),r=i("iMRi"),o=i("4lR/"),c=i("fXoL");class l{constructor(e,t,i,s){this.querySpace=e,this.states=t,this.wpCacheService=i,this.opContextMenu=s,this.selectionState=Object(n.f)(),this.reset()}ngOnDestroy(){Mousetrap.unbind(["command+d","ctrl+d"]),Mousetrap.unbind(["command+a","ctrl+a"])}isSelected(e){return this.currentState.selected[e]}selectAll(e){const t=this._emptyState;e.forEach(e=&gt;{e.workPackageId&amp;&amp;(t.selected[e.workPackageId]=!0)}),this.selectionState.putValue(t)}getSelectedWorkPackages(){let e=this.states.workPackages;return this.getSelectedWorkPackageIds().map(t=&gt;e.get(t).value)}getSelectedWorkPackageIds(){let e=[];return _.each(this.currentState.selected,(t,i)=&gt;{t&amp;&amp;e.push(i)}),e}reset(){this.selectionState.putValue(this._emptyState)}selection$(){return this.selectionState.values$()}get currentState(){return this.selectionState.value}get isEmpty(){return 0===this.selectionCount}get selectionCount(){return _.size(this.currentState.selected)}toggleRow(e){let t=this.currentState.selected[e];this.setRowState(e,!t)}setRowState(e,t){let i=this.currentState;i.selected[e]=t,this.selectionState.putValue(i)}setSelection(e,t){let i={selected:{},activeRowIndex:t};i.selected[e]=!0,this.selectionState.putValue(i)}setMultiSelectionFrom(e,t,i){let n=this.currentState;if(0===this.selectionCount||null===n.activeRowIndex)n.selected[t]=!0,n.activeRowIndex=i;else{let t=Math.min(i,n.activeRowIndex),s=Math.max(i,n.activeRowIndex);e.forEach((e,i)=&gt;{e.workPackageId&amp;&amp;(n.selected[e.workPackageId]=i&gt;=t&amp;&amp;i&lt;=s)})}this.selectionState.putValue(n)}registerSelectAllListener(e){Mousetrap.bind(["command+a","ctrl+a"],t=&gt;(this.selectAll(e()),t.preventDefault(),this.opContextMenu.close(),!1))}registerDeselectAllListener(){Mousetrap.bind(["command+d","ctrl+d"],e=&gt;(this.reset(),e.preventDefault(),this.opContextMenu.close(),!1))}get _emptyState(){return{selected:{},activeRowIndex:null}}}l.\u0275fac=function(e){return new(e||l)(c.rc(s.a),c.rc(r.a),c.rc(a.a),c.rc(o.a))},l.\u0275prov=c.dc({token:l,factory:l.\u0275fac})},f24R:function(e,t,i){"use strict";i.d(t,"a",(function(){return h}));var n=i("/uUt"),s=i("Kj3r"),a=i("iB+3"),r=i("Sulb"),o=i("buwf"),c=i("AEvm"),l=i("xgIS"),d=i("fXoL"),u=i("v9+U");class h extends c.a{constructor(e,t,i,n){super(),this.toggleService=e,this.elementRef=t,this.$transitions=i,this.browserDetector=n,this.resizeStyle="flexBasis",this.elementMinWidth=530,this.moving=!1,this.resizerClass="work-packages--resizer icon-resizer-vertical-lines"}ngOnInit(){this.resizingElement=document.getElementsByClassName(this.elementClass)[0];let e=this.parseLocalStorageValue();this.elementWidth=e||(this.resizingElement.offsetWidth
                         <this.elementminwidth?this.elementminwidth:this.resizingelement.offsetwidth),0===this.elementwidth&&this.resizingelement.parentelement&&(this.elementwidth=this.resizingelement.parentelement.offsetwidth 2),this.resizingelement.style[this.resizestyle]='this.elementWidth+"px",this.element=this.elementRef.nativeElement,this.toggleService.changeData$.pipe(Object(n.a)(),this.untilDestroyed()).subscribe(e='>
                          {this.toggleFullscreenColumns()}),Object(l.a)(window,"resize",{passive:!0}).pipe(this.untilDestroyed(),Object(s.a)(250)).subscribe(()=&gt;this.toggleFullscreenColumns())}ngAfterViewInit(){this.resizer=this.elementRef.nativeElement.getElementsByClassName(this.resizerClass)[0],this.applyColumnLayout(this.resizingElement,this.elementWidth)}ngOnDestroy(){super.ngOnDestroy(),this.resizingElement.style[this.resizeStyle]=""}resizeStart(){let e=this.parseLocalStorageValue(),t=this.resizingElement.offsetWidth;e&amp;&amp;e&gt;t&amp;&amp;(this.elementWidth=t)}resizeEnd(){let e=this.parseLocalStorageValue();e&amp;&amp;(this.elementWidth=e);const t=new Event(this.resizeEvent);window.dispatchEvent(t),this.manageErrorClass(!1)}resizeMove(e){let t;this.elementWidth=this.elementWidth-e.relative.x,this.elementWidth
                          <this.elementminwidth?(t=this.elementminwidth,this.manageerrorclass(!0)):(t=this.elementwidth,this.manageerrorclass(!1)),window.openproject.guardedlocalstorage(this.localstoragekey,`${t}`),this.applycolumnlayout(this.resizingelement,t),this.resizingelement.style[this.resizestyle]=t+"px"}parselocalstoragevalue(){let e='window.OpenProject.guardedLocalStorage(this.localStorageKey),t=parseInt(e||"",10);if("number"==typeof' t&&nan!="t)return" t}applycolumnlayout(e,t){e='jQuery(".work-packages-full-view--split-right")[0]?this.toggleFullscreenColumns():this.toggleColumns(e,700)}toggleColumns(e,t=750){e&amp;&amp;!this.browserDetector.isEdge&amp;&amp;jQuery(e).toggleClass("-can-have-columns",e.offsetWidth'>
                           t)}toggleFullscreenColumns(){let e=jQuery(".work-packages-full-view--split-left")[0];this.toggleColumns(e)}manageErrorClass(e){e&amp;&amp;!this.resizer.classList.contains("-error-font")&amp;&amp;this.resizer.classList.add("-error-font"),!e&amp;&amp;this.resizer.classList.contains("-error-font")&amp;&amp;this.resizer.classList.remove("-error-font")}}h.\u0275fac=function(e){return new(e||h)(d.hc(r.a),d.hc(d.q),d.hc(a.O),d.hc(o.a))},h.\u0275cmp=d.bc({type:h,selectors:[["wp-resizer"]],inputs:{elementClass:"elementClass",resizeEvent:"resizeEvent",localStorageKey:"localStorageKey",resizeStyle:"resizeStyle"},features:[d.Qb],decls:1,vars:2,consts:[["cursorClass","col-resize",3,"customHandler","resizerClass","end","start","move"]],template:function(e,t){1&amp;e&amp;&amp;(d.nc(0,"resizer",0),d.vc("end",(function(){return t.resizeEnd()}))("start",(function(){return t.resizeStart()}))("move",(function(e){return t.resizeMove(e)})),d.mc()),2&amp;e&amp;&amp;d.Dc("customHandler",!1)("resizerClass",t.resizerClass)},directives:[u.a],encapsulation:2,changeDetection:0})},f9kS:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("VgZ9"),s=i("FDFi"),a=i("i95X"),r=i("fXoL");class o extends s.a{constructor(e,t){super(e),this.injector=e,this.wpRelationsHierarchyService=t,this.referenceComponentClass=a.a,this.relationType="children",this.referenceTarget=null,this.buttonTexts={reference:this.I18n.t("js.relation_buttons.add_existing_child"),create:this.I18n.t("js.relation_buttons.add_new_child")}}add(e,t){return this.wpRelationsHierarchyService.addExistingChildWp(e,t)}remove(e,t){return this.wpRelationsHierarchyService.removeChild(t)}get canAdd(){return!!(this.referenceTarget&amp;&amp;this.canCreateWorkPackages&amp;&amp;this.canAddChild)}get canReference(){return!(!this.referenceTarget||!this.canAddChild)}get canAddChild(){const e=this.referenceTarget;return e&amp;&amp;!e.isMilestone&amp;&amp;e.changeParent}}o.\u0275fac=function(e){return new(e||o)(r.rc(r.A),r.rc(n.a))},o.\u0275prov=r.dc({token:o,factory:o.\u0275fac})},fMMW:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i("mrSG"),s=i("Mo6U"),a=i("vK8y"),r=i("kTsZ"),o=i("4EDS"),c=i("r0MM"),l=o.a.compareByHrefOrString;class d{constructor(e,t,i,n=[]){this.injector=e,this.change=t,this.filters=i,this.excluded=n}applyDefaultsFromFilters(){_.each(this.filters,e=&gt;{if("="!==e.operator.id)return;if(-1!==this.excluded.indexOf(e.id))return;if(this.filterAlreadyApplied(e))return;let t=e.values[0];t&amp;&amp;this.setValueFor(e.id,t)})}setValueFor(e,t){let i=this.findSpecialValue(t,e)||t;i&amp;&amp;(this.change.projectedResource[e]=i)}findSpecialValue(e,t){return"parent"===t?e:e instanceof s.a&amp;&amp;"/api/v3/users/me"===e.$href&amp;&amp;this.currentUser.isLoggedIn?this.halResourceService.fromSelfLink(`/api/v3/users/${this.currentUser.userId}`):void 0}filterAlreadyApplied(e){if(e.values.length&lt;=1)return!1;const t=this.change.projectedResource[e.id];for(let i=0;i
                           <e.values.length;i++)if(l(t,e.values[i]))return!0;return!1}}object(n.c)([object(c.a)(),object(n.e)("design:type",a.a)],d.prototype,"currentuser",void 0),object(n.c)([object(c.a)(),object(n.e)("design:type",r.a)],d.prototype,"halresourceservice",void="" 0)},fblk:function(e,t,i){"use="" a{constructor(e){this.documentelement='e,this._banners=!0,this._banners=e.body.classList.contains("ee-banners-visible")}get' a}));var="" c='function(e){return{"-with-resizer":e}};function' e='g.xc();g.Dc("ngClass",g.Ic(3,C,e.showResizerInCardView())),g.Tb(1),g.Dc("configuration",e.wpTableConfiguration)("showResizer",e.showResizerInCardView())}}function' eeshowbanners(){return="" extends="" j(e,t){1&e&&(g.nc(0,"div",8),g.ic(1,"wp-table-pagination"),g.mc())}class="" k(e,t){if(1&e&&g.ic(0,"wp-table",5),2&e){const="" m.a{constructor(e,t,i,n,s,a,r,o){super(),this.i18n='e,this.injector=t,this.querySpace=i,this.wpViewFilters=n,this.deviceService=s,this.CurrentProject=a,this.wpDisplayRepresentation=r,this.cdRef=o,this.text={jump_to_pagination:this.I18n.t("js.work_packages.jump_marks.pagination"),text_jump_to_pagination:this.I18n.t("js.work_packages.jump_marks.label_pagination"),button_settings:this.I18n.t("js.button_settings")},this.showListView=!0,this.tableInformationLoaded=!1,this.showResultOverlay$=this.wpViewFilters.incomplete$,this.wpTableConfiguration={dragAndDropEnabled:!0}}ngOnInit(){this.setupInformationLoadedListener(),this.querySpace.query.values$().pipe(this.untilDestroyed()).subscribe(e=' n='i("IzEk"),s=i("x5It"),a=i("tmNb"),r=i("Va5K"),o=i("POAS"),c=i("qc15"),l=i("wZYP"),d=i("E2tj"),u=i("K247"),h=i("sjKJ"),p=i("F5Dh"),m=i("AEvm"),g=i("fXoL"),f=i("ofXK"),b=i("9hh2"),v=i("eJFM"),w=i("lmDM");function' new(e||a)(s.rc(n.d))},a.\u0275prov='s.dc({token:a,factory:a.\u0275fac,providedIn:"root"})},fdeW:function(e,t,i){"use' s="" strict";i.d(t,"a",(function(){return="" s}));var="" this._banners}conditional(e,t){this._banners?this.callmaybe(e):this.callmaybe(t)}callmaybe(e){e&&e()}}a.\u0275fac="function(e){return" x(e,t){if(1&e&&(g.nc(0,"div",6),g.ic(1,"wp-grid",7),g.mc()),2&e){const="" y(e,t){1&e&&g.ic(0,"div",4)}function="">
                            {this.updateViewRepresentation(e),this.cdRef.detectChanges()})}setupInformationLoadedListener(){this.querySpace.initialized.values$().pipe(Object(n.a)(1)).subscribe(()=&gt;{this.tableInformationLoaded=!0,this.cdRef.detectChanges()})}showResizerInCardView(){return!1}updateViewRepresentation(e){this.showListView=!(this.deviceService.isMobile||this.wpDisplayRepresentation.valueFromQuery(e)===r.b)}}S.\u0275fac=function(e){return new(e||S)(g.hc(l.a),g.hc(g.A),g.hc(d.a),g.hc(p.a),g.hc(u.a),g.hc(h.a),g.hc(r.a),g.hc(g.i))},S.\u0275cmp=g.bc({type:S,selectors:[["wp-list-view"]],hostAttrs:[1,"work-packages-split-view--tabletimeline-side"],features:[g.Sb([{provide:o.a,useClass:c.a},a.a,s.a]),g.Qb],decls:5,vars:6,consts:[["class","result-overlay",4,"ngIf"],["class","work-packages-split-view--tabletimeline-content",3,"projectIdentifier","configuration",4,"ngIf"],["class","work-packages--card-view-container",3,"ngClass",4,"ngIf"],["class","work-packages-split-view--tabletimeline-footer hide-when-print",4,"ngIf"],[1,"result-overlay"],[1,"work-packages-split-view--tabletimeline-content",3,"projectIdentifier","configuration"],[1,"work-packages--card-view-container",3,"ngClass"],["resizerClass","work-packages-partitioned-page--content-right","resizerStorageKey","openProject-splitViewFlexBasis",3,"configuration","showResizer"],[1,"work-packages-split-view--tabletimeline-footer","hide-when-print"]],template:function(e,t){1&amp;e&amp;&amp;(g.ad(0,y,1,0,"div",0),g.yc(1,"async"),g.ad(2,k,1,2,"wp-table",1),g.ad(3,x,2,5,"div",2),g.ad(4,j,2,0,"div",3)),2&amp;e&amp;&amp;(g.Dc("ngIf",g.zc(1,4,t.showResultOverlay$)&amp;&amp;t.showListView),g.Tb(2),g.Dc("ngIf",t.tableInformationLoaded&amp;&amp;t.showListView),g.Tb(1),g.Dc("ngIf",!t.showListView),g.Tb(1),g.Dc("ngIf",t.tableInformationLoaded))},directives:[f.q,b.a,f.n,v.a,w.a],pipes:[f.a],styles:[".cdk-drag-preview[_ngcontent-%COMP%]{box-shadow:0 0 10px 5px rgba(0,0,0,.1);z-index:10000!important}.result-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;z-index:900;background-color:#fff;opacity:.5}.work-packages--card-view-container[_ngcontent-%COMP%]{width:100%;overflow:auto;padding-bottom:5px;scrollbar-color:transparent transparent;scrollbar-width:thin}.work-packages--card-view-container[_ngcontent-%COMP%]::-webkit-scrollbar{height:10px;width:10px}.work-packages--card-view-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.work-packages--card-view-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ddd;visibility:hidden}.work-packages--card-view-container[_ngcontent-%COMP%]:hover{scrollbar-color:#ddd transparent}.work-packages--card-view-container[_ngcontent-%COMP%]:hover::-webkit-scrollbar-thumb{visibility:visible}@media screen and (min-width:679px){.work-packages--card-view-container.-with-resizer[_ngcontent-%COMP%]{padding-left:10px}}@media screen and (max-width:679px){.work-packages--card-view-container[_ngcontent-%COMP%]{min-width:calc(100vw + 10px)}}"],changeDetection:0})},feia:function(e,t,i){"use strict";i.d(t,"b",(function(){return v})),i.d(t,"a",(function(){return w}));var n=i("8zkO"),s=i("Jui0"),a=i("kTsZ"),r=i("iMRi"),o=i("1G5W"),c=i("pLZG"),l=i("d/TE"),d=i("wZYP"),u=i("k8lp"),h=i("Hg4z"),p=i("AEvm"),m=i("fXoL"),g=i("ofXK"),f=i("jEcX");function b(e,t){if(1&amp;e&amp;&amp;(m.lc(0),m.ic(1,"attachments",3),m.kc()),2&amp;e){const e=m.xc();m.Tb(1),m.Dc("resource",e.resource)}}const v="ckeditor-augmented-textarea";class w extends p.a{constructor(e,t,i,n,s,a,r){super(),this.elementRef=e,this.pathHelper=t,this.halResourceService=i,this.Notifications=n,this.I18n=s,this.states=a,this.ConfigurationService=r,this.changed=!1,this.inFlight=!1,this.isEditing=!1}ngOnInit(){this.$element=jQuery(this.elementRef.nativeElement),this.textareaSelector=this.$element.attr("textarea-selector"),this.previewContext=this.$element.attr("preview-context"),this.macros="false"!==this.$element.attr("macros"),this.editorType=this.$element.attr("editor-type")||"full";const e=this.$element.data("resource");this.resource=e?this.halResourceService.createHalResource(e,!0):void 0,this.formElement=this.$element.closest("form"),this.wrappedTextArea=this.formElement.find(this.textareaSelector),this.wrappedTextArea.removeAttr("required").hide(),this.initialContent=this.wrappedTextArea.val(),this.$attachmentsElement=this.formElement.find("#attachments_fields"),this.context={resource:this.resource,previewContext:this.previewContext},this.macros||(this.context.macros="none")}ngOnDestroy(){super.ngOnDestroy(),this.formElement.off("submit.ckeditor")}markEdited(){window.OpenProject.pageWasEdited=!0}setup(e){return this.$element.data("editor",e),this.resource&amp;&amp;this.resource.attachments&amp;&amp;(this.setupAttachmentAddedCallback(e),this.setupAttachmentRemovalSignal(e)),this.formElement.on("submit.ckeditor change.ckeditor",()=&gt;{try{this.wrappedTextArea.val(this.ckEditorInstance.getRawData())}catch(e){return console.error(`Failed to save CKEditor body to textarea: ${e}.`),this.Notifications.addError(e||this.I18n.t("js.error.internal")),!1}return this.addUploadedAttachmentsToForm(),!0}),this.setLabel(),e}setupAttachmentAddedCallback(e){e.model.on("op:attachment-added",()=&gt;{this.states.forResource(this.resource).putValue(this.resource)})}setupAttachmentRemovalSignal(e){this.attachments=_.clone(this.resource.attachments.elements),this.states.forResource(this.resource).changes$().pipe(Object(o.a)(Object(h.b)(this)),Object(c.a)(e=&gt;!!e)).subscribe(t=&gt;{let i=_.differenceBy(this.attachments,t.attachments.elements,e=&gt;e.id).map(e=&gt;e.downloadLocation.$href);i.length&amp;&amp;e.model.fire("op:attachment-removed",i),this.attachments=_.clone(t.attachments.elements)})}setLabel(){let e=this.textareaSelector.substring(1),t=jQuery(`label[for=${e}]`),i=this.$element.find(".ck-content");i.attr("aria-label",null),i.attr("aria-labelledby",e),t.click(()=&gt;{i.focus()})}addUploadedAttachmentsToForm(){if(!this.resource||!this.resource.attachments||this.resource.id)return;const e=this.$attachmentsElement.find("input[type='file']").map((e,t)=&gt;{let i=(t.getAttribute("name")||"").match(/attachments\[(\d+)\]\[(?:file|id)\]/);return i?parseInt(i[1]):0}).toArray().sort().pop()||0;let t=this.resource.attachments.elements||[];jQuery.each(t,(t,i)=&gt;{this.$attachmentsElement.append(`
                            <input name="attachments[${e+t+1}][id]" type="hidden" value="${i.id}"/>
                            `)})}}w.\u0275fac=function(e){return new(e||w)(m.hc(m.q),m.hc(s.a),m.hc(a.a),m.hc(l.a),m.hc(d.a),m.hc(r.a),m.hc(n.a))},w.\u0275cmp=m.bc({type:w,selectors:[["ckeditor-augmented-textarea"]],viewQuery:function(e,t){var i;(1&amp;e&amp;&amp;m.Yc(u.a,!0),2&amp;e)&amp;&amp;(m.Pc(i=m.wc())&amp;&amp;(t.ckEditorInstance=i.first))},features:[m.Qb],decls:4,vars:4,consts:[[1,"op-ckeditor--wrapper"],[3,"context","content","ckEditorType","onInitialized","onContentChange"],[4,"ngIf"],["data-allow-uploading","true","data-destroy-immediately","false",3,"resource"]],template:function(e,t){1&amp;e&amp;&amp;(m.lc(0),m.nc(1,"div",0),m.nc(2,"op-ckeditor",1),m.vc("onInitialized",(function(e){return t.setup(e)}))("onContentChange",(function(){return t.markEdited()})),m.mc(),m.mc(),m.ad(3,b,2,1,"ng-container",2),m.kc()),2&amp;e&amp;&amp;(m.Tb(2),m.Dc("context",t.context)("content",t.initialContent)("ckEditorType",t.editorType),m.Tb(1),m.Dc("ngIf",t.resource&amp;&amp;t.resource.attachments))},directives:[u.a,g.q,f.a],encapsulation:2})},g1AQ:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");class s{constructor(){this.hooks={}}register(e,t){t&amp;&amp;(this.hooks[e]||(this.hooks[e]=[]),this.hooks[e].push(t))}call(e,...t){let i=[];if(this.hooks[e])for(let n=0;n
                            <this.hooks[e].length;n++){let ")}}function="" ",e,"="" d(e,t){if(1&e&&(s.nc(0,"div",5),s.cd(1),s.mc()),2&e){const="" e='o.xc();o.Tb(3),o.Dc("textContent",e.tabName),o.Tb(1),o.Dc("workPackage",e.workPackage)}}class' extends="" h='s.pc(u)},gvAf:function(e,t,i){"use' h(e,t){if(1&e&&(o.nc(0,"div",3),o.nc(1,"div",4),o.nc(2,"div",5),o.ic(3,"h3",6),o.mc(),o.mc(),o.ic(4,"newest-activity-on-overview",2),o.mc()),2&e){const="" h(e||u)},u.\u0275cmp='s.bc({type:u,selectors:[["wp-autocompleter"]],features:[s.Qb],decls:4,vars:13,consts:[["bindLabel","name",3,"ngModel","items","ngClass","addTag","virtualScroll","required","clearable","disabled","typeahead","clearOnBackspace","appendTo","hideSelected","id","ngModelChange","change","open","close","keydown"],["ngSelectComponent",""],["ng-tag-tmp",""],["ng-option-tmp",""],[3,"textContent"],[1,"ng-option-label","ellipsis",3,"ngOptionHighlight"]],template:function(e,t){1&amp;e&amp;&amp;(s.nc(0,"ng-select",0,1),s.vc("ngModelChange",(function(e){return' i}}s.\u0275fac="function(e){return" l(e,t){if(1&e&&(s.ic(0,"b",4),s.cd(1)),2&e){const="" n='i("iB+3"),s=i("ug4p"),a=i("wZYP"),r=i("AEvm"),o=i("fXoL"),c=i("ofXK"),l=i("aveh"),d=i("4Obc");function' n.a{}u.\u0275fac="function(e){return" new(e||s)},s.\u0275prov='n.dc({token:s,factory:s.\u0275fac})},gh2L:function(e,t,i){"use' p="" p}));var="" r.a{constructor(e,t,i){super(),this.i18n='e,this.$state=t,this.wpCacheService=i,this.tabName=this.I18n.t("js.label_latest_activity"),this.workPackageId=this.$state.params.workPackageId,i.loadWorkPackage(this.workPackageId).values$().pipe(this.untilDestroyed()).subscribe(e=' s="this.hooks[e][n](...t);s&amp;&amp;i.push(s)}return" strict";i.d(t,"a",(function(){return="" t.changemodel(e)}))("open",(function(){return="" t.closed()}))("keydown",(function(e){return="" t.keypressed(e)})),s.ad(2,l,2,2,"ng-template",2),s.ad(3,d,2,2,"ng-template",3),s.mc()),2&e&&s.dc("ngmodel",t.model)("items",t.availablevalues)("ngclass",t.classes)("addtag",t.createallowed)("virtualscroll",!0)("required",t.required)("clearable",!t.required)("disabled",t.disabled)("typeahead",t.typeahead)("clearonbackspace",!1)("appendto",t.appendto)("hideselected",t.hideselected)("id",t.id)},directives:[a.a,r.m,r.p,o.n,r.x,a.l,a.c,c.a],encapsulation:2});const="" t.model='e}))("change",(function(e){return' t.opened()}))("close",(function(){return="" u="" u(e,t){if(1&e&&o.ic(0,"wp-single-view",2),2&e){const="" u}));var="">
                             this.workPackage=e)}}p.\u0275fac=function(e){return new(e||p)(o.hc(a.a),o.hc(n.G),o.hc(s.a))},p.\u0275cmp=o.bc({type:p,selectors:[["wp-overview-tab"]],features:[o.Qb],decls:2,vars:2,consts:[[3,"workPackage",4,"ngIf"],["class","attributes-group",4,"ngIf"],[3,"workPackage"],[1,"attributes-group"],[1,"attributes-group--header"],[1,"attributes-group--header-container"],[1,"attributes-group--header-text",3,"textContent"]],template:function(e,t){1&amp;e&amp;&amp;(o.ad(0,u,1,1,"wp-single-view",0),o.ad(1,h,5,2,"div",1)),2&amp;e&amp;&amp;(o.Dc("ngIf",t.workPackage),o.Tb(1),o.Dc("ngIf",t.workPackage))},directives:[c.q,l.a,d.a],encapsulation:2})},hgso:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("FnNU"),s=i("IzEk");class a{constructor(){this.cacheDurationInSeconds=120,this.cache={id:null,state:Object(n.f)()}}require(e,t=!1){const i=e.id,n=this.cache.state;return(t||this.cache.id!==i)&amp;&amp;n.clear(),this.isCached(i)?Promise.resolve(n.value):(this.cache.id=i,this.cache.state.putFromPromiseIfPristine(()=&gt;this.load(e)),this.cache.state.values$().pipe(Object(s.a)(1)).toPromise())}clear(e){this.cache.id===e&amp;&amp;this.cache.state.clear()}isCached(e){const t=this.cache.state;return this.cache.id===e&amp;&amp;t.hasValue()&amp;&amp;!t.isValueOlderThan(1e3*this.cacheDurationInSeconds)}}},hj8t:function(e,t,i){"use strict";i.d(t,"a",(function(){return m}));var n=i("wZYP"),s=i("PtkW"),a=i("JY8V"),r=i("4jc8"),o=i("fXoL"),c=i("3Pt+"),l=i("ofXK");function d(e,t){if(1&amp;e&amp;&amp;o.ic(0,"option",15),2&amp;e){const e=t.$implicit,i=o.xc(2);o.Dc("textContent",i.text.zoom[e])("value",e)("selected",i.zoomLevel===e)}}function u(e,t){if(1&amp;e&amp;&amp;o.ic(0,"option",15),2&amp;e){const e=t.$implicit,i=o.xc().$implicit,n=o.xc(2);o.Dc("textContent",e.name)("value",e.id)("selected",n.labels[i]===e.id)}}function h(e,t){if(1&amp;e){const e=o.oc();o.nc(0,"div",16),o.nc(1,"div",1),o.nc(2,"label",17),o.cd(3),o.mc(),o.nc(4,"div",3),o.nc(5,"div",18),o.nc(6,"select",19),o.vc("change",(function(i){o.Sc(e);const n=t.$implicit;return o.xc(2).updateLabels(n,i.target.value)})),o.ad(7,u,1,3,"option",13),o.mc(),o.mc(),o.mc(),o.mc(),o.mc()}if(2&amp;e){const e=t.$implicit,i=o.xc(2);o.Tb(2),o.Fc("for","modal-timelines-label-",e,""),o.Tb(1),o.ed(" ",i.text.labels[e]," "),o.Tb(3),o.Fc("id","modal-timelines-label-",e,""),o.Tb(1),o.Dc("ngForOf",i.availableAttributes)}}function p(e,t){if(1&amp;e){const e=o.oc();o.lc(0),o.nc(1,"fieldset",8),o.ic(2,"legend",9),o.ic(3,"p",10),o.nc(4,"div",1),o.nc(5,"div",3),o.nc(6,"div",11),o.nc(7,"select",12),o.vc("change",(function(t){return o.Sc(e),o.xc().zoomLevel=t.target.value})),o.ad(8,d,1,3,"option",13),o.mc(),o.mc(),o.mc(),o.mc(),o.mc(),o.nc(9,"fieldset",8),o.ic(10,"legend",9),o.ic(11,"p",10),o.ad(12,h,8,4,"div",14),o.mc(),o.kc()}if(2&amp;e){const e=o.xc();o.Tb(2),o.Dc("textContent",e.text.zoom.level),o.Tb(1),o.Dc("textContent",e.text.zoom.description),o.Tb(4),o.Ub("disabled",!0===e.autoZoom?"disabled":void 0),o.Tb(1),o.Dc("ngForOf",e.availableZoomLevels),o.Tb(2),o.Dc("textContent",e.text.labels.title),o.Tb(1),o.Dc("textContent",e.text.labels.description),o.Tb(1),o.Dc("ngForOf",e.availableLabels)}}class m{constructor(e,t,i,n){this.injector=e,this.I18n=t,this.wpTableTimeline=i,this.wpTableColumns=n,this.timelineVisible=!1,this.availableZoomLevels=["auto",...r.n],this.text={title:this.I18n.t("js.timelines.gantt_chart"),display_timelines:this.I18n.t("js.timelines.button_activate"),display_timelines_hint:this.I18n.t("js.work_packages.table_configuration.show_timeline_hint"),zoom:{level:this.I18n.t("js.tl_toolbar.zooms"),description:this.I18n.t("js.timelines.zoom.description"),days:this.I18n.t("js.timelines.zoom.days"),weeks:this.I18n.t("js.timelines.zoom.weeks"),months:this.I18n.t("js.timelines.zoom.months"),quarters:this.I18n.t("js.timelines.zoom.quarters"),years:this.I18n.t("js.timelines.zoom.years"),auto:this.I18n.t("js.timelines.zoom.auto")},labels:{title:this.I18n.t("js.timelines.labels.title"),description:this.I18n.t("js.timelines.labels.description"),bar:this.I18n.t("js.timelines.labels.bar"),none:this.I18n.t("js.timelines.filter.noneSelection"),left:this.I18n.t("js.timelines.labels.left"),right:this.I18n.t("js.timelines.labels.right"),farRight:this.I18n.t("js.timelines.labels.farRight")}}}onSave(){this.wpTableTimeline.update(Object.assign(Object.assign({},this.wpTableTimeline.current),{visible:this.timelineVisible,labels:this.labels,zoomLevel:this.zoomLevel}))}updateLabels(e,t){""===t&amp;&amp;(t=null),this.labels[e]=t}ngOnInit(){this.timelineVisible=this.wpTableTimeline.isVisible,this.zoomLevel=this.wpTableTimeline.zoomLevel;const e=this.wpTableTimeline.labels;this.labels=_.clone(e),this.availableLabels=Object.keys(this.labels);const t=this.wpTableColumns.allPropertyColumns.sort((e,t)=&gt;e.name.localeCompare(t.name));this.availableAttributes=[{id:"",name:this.text.labels.none}].concat(t)}}m.\u0275fac=function(e){return new(e||m)(o.hc(o.A),o.hc(n.a),o.hc(s.a),o.hc(a.a))},m.\u0275cmp=o.bc({type:m,selectors:[["ng-component"]],decls:9,vars:4,consts:[[1,"form"],[1,"form--field"],["for","display_timelines_switch",1,"form--label",3,"textContent"],[1,"form--field-container"],[1,"form--check-box-container"],["type","checkbox","id","display_timelines_switch","name","display_timelines_switch",3,"checked","change"],[1,"form--field-instructions",3,"textContent"],[4,"ngIf"],[1,"form--fieldset"],[1,"form--fieldset-legend",3,"textContent"],[3,"textContent"],[1,"form--text-select-container","-slim"],["id","modal-timelines-zoomlevel",1,"form--select",3,"change"],[3,"textContent","value","selected",4,"ngFor","ngForOf"],["class","form--row",4,"ngFor","ngForOf"],[3,"textContent","value","selected"],[1,"form--row"],[1,"form--label",3,"for"],[1,"form--select-container"],[1,"form--select",3,"id","change"]],template:function(e,t){1&amp;e&amp;&amp;(o.nc(0,"div"),o.nc(1,"form",0),o.nc(2,"div",1),o.ic(3,"label",2),o.nc(4,"div",3),o.nc(5,"div",4),o.nc(6,"input",5),o.vc("change",(function(){return t.timelineVisible=!t.timelineVisible})),o.mc(),o.mc(),o.mc(),o.ic(7,"p",6),o.mc(),o.ad(8,p,13,7,"ng-container",7),o.mc(),o.mc()),2&amp;e&amp;&amp;(o.Tb(3),o.Dc("textContent",t.text.display_timelines),o.Tb(3),o.Dc("checked",t.timelineVisible),o.Tb(1),o.Dc("textContent",t.text.display_timelines_hint),o.Tb(1),o.Dc("ngIf",t.timelineVisible))},directives:[c.C,c.n,c.o,l.q,l.p,c.r,c.B],encapsulation:2})},ho3E:function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return s}));const n=new(i("fXoL").z)("OpQueryConfigurationLocalsToken"),s="op:queryconfiguration:trigger"},hvpr:function(e,t,i){"use strict";i.d(t,"a",(function(){return R}));var n=i("mrSG"),s=i("fXoL"),a=i("E2tj"),r=i("wZYP"),o=i("FDFi"),c=i("4n9w"),l=i("4EDS"),d=i("Kg8T"),u=i("iB+3"),h=i("iMRi"),p=i("Uyc6"),m=i("Jui0"),g=i("zp1y"),f=i("pLZG"),b=i("x5It"),v=i("eyhC"),w=i("Wcm6"),y=i("WW/2"),k=i("87fy"),C=i("qc15"),x=i("K247"),j=i("WUI6"),S=i("AEvm"),T=i("Hg4z");const P=["container"];function I(e,t){if(1&amp;e&amp;&amp;(s.nc(0,"div",5),s.ic(1,"ndc-dynamic",6),s.mc()),2&amp;e){const e=s.xc();s.Tb(1),s.Dc("ndcDynamicComponent",e.referenceClass)("ndcDynamicInjector",e.injector)("ndcDynamicOutputs",e.referenceOutputs)}}function _(e,t){1&amp;e&amp;&amp;s.ic(0,"hr",9)}function O(e,t){if(1&amp;e){const e=s.oc();s.lc(0),s.nc(1,"wp-single-card",7),s.vc("onRemove",(function(){s.Sc(e);const i=t.$implicit;return s.xc().removeCard(i)})),s.mc(),s.ad(2,_,1,0,"hr",8),s.kc()}if(2&amp;e){const e=t.$implicit,i=s.xc();s.Tb(1),s.Dc("workPackage",e)("showInfoButton",i.showInfoButton)("showStatusButton",i.showStatusButton)("showRemoveButton",i.cardsRemovable)("highlightingMode",i.highlightingMode)("draggable",i.canDragOutOf(e))("orientation",i.orientation)("shrinkOnMobile",i.shrinkOnMobile),s.Ub("data-is-new",e.isNew||void 0)("data-work-package-id",e.id)("data-class-identifier",i.cardView.classIdentifier(e)),s.Tb(1),s.Dc("ngIf",i.shrinkOnMobile)}}function D(e,t){if(1&amp;e&amp;&amp;(s.nc(0,"div"),s.ic(1,"no-results",10),s.mc()),2&amp;e){const e=s.xc();s.Tb(1),s.Dc("title",e.text.noResults.title)("description",e.text.noResults.description)}}class R extends S.a{constructor(e,t,i,n,a,r,o,c,d,u,h,p,m,g,f,b,v){super(),this.querySpace=e,this.states=t,this.injector=i,this.$state=n,this.I18n=a,this.wpCreate=r,this.wpInlineCreate=o,this.notificationService=c,this.authorisationService=d,this.causedUpdates=u,this.cdRef=h,this.pathHelper=p,this.wpTableSelection=m,this.wpViewOrder=g,this.cardView=f,this.cardDragDrop=b,this.deviceService=v,this.showStatusButton=!0,this.showInfoButton=!1,this.orientation="vertical",this.cardsRemovable=!1,this.showEmptyResultsBox=!1,this.shrinkOnMobile=!1,this.onMoved=new s.s,this.trackByHref=l.a.trackByHrefAndProperty("lockVersion"),this.isResultEmpty=!1,this.text={removeCard:this.I18n.t("js.card.remove_from_list"),addNewCard:this.I18n.t("js.card.add_new"),noResults:{title:this.I18n.t("js.work_packages.no_results.title"),description:this.I18n.t("js.work_packages.no_results.description")}},this.canAdd=!1,this.canReference=!1,this.inReference=!1,this.referenceClass=this.wpInlineCreate.referenceComponentClass,this.referenceOutputs={onCancel:()=&gt;this.setReferenceMode(!1),onReferenced:e=&gt;this.cardDragDrop.addWorkPackageToQuery(e,0)}}ngOnInit(){this.registerCreationCallback(),this.authorisationService.observeUntil(Object(T.b)(this)).subscribe(()=&gt;{this.canAdd=this.wpInlineCreate.canAdd,this.canReference=this.wpInlineCreate.canReference,this.cdRef.detectChanges()}),this.querySpace.results.values$().pipe(Object(g.a)(this.querySpace.query.values$()),this.untilDestroyed(),Object(f.a)(([e,t])=&gt;e&amp;&amp;!this.causedUpdates.includes(t))).subscribe(([e,t])=&gt;{this.query=t,this.workPackages=this.wpViewOrder.orderedWorkPackages(),this.cardView.updateRenderedCardsValues(this.workPackages),this.isResultEmpty=0===this.workPackages.length,this.cdRef.detectChanges()})}ngAfterViewInit(){this.cardDragDrop.init(this),this.deviceService.isMobile||this.cardDragDrop.registerDragAndDrop(),new(this.injector.get(j.b,w.a))(this.injector).attachTo(this),this.wpTableSelection.registerSelectAllListener(()=&gt;this.cardView.renderedCards),this.wpTableSelection.registerDeselectAllListener()}ngOnDestroy(){super.ngOnDestroy(),this.cardDragDrop.destroy()}get workPackages(){return this.cardDragDrop.workPackages}set workPackages(e){this.cardDragDrop.workPackages=e}setReferenceMode(e){this.inReference=e,this.cdRef.detectChanges()}addNewCard(){this.cardDragDrop.addNewCard()}removeCard(e){this.cardDragDrop.removeCard(e)}onCardSaved(e){return Object(n.b)(this,void 0,void 0,(function*(){yield this.cardDragDrop.onCardSaved(e)}))}classes(){let e="wp-cards-container ";return e+="-"+this.orientation,e+=this.shrinkOnMobile?" -shrink":"",e}registerCreationCallback(){this.wpCreate.onNewWorkPackage().pipe(this.untilDestroyed()).subscribe(e=&gt;Object(n.b)(this,void 0,void 0,(function*(){this.onCardSaved(e)})))}}R.\u0275fac=function(e){return new(e||R)(s.hc(a.a),s.hc(h.a),s.hc(s.A),s.hc(u.G),s.hc(r.a),s.hc(c.a),s.hc(o.a),s.hc(C.a),s.hc(d.a),s.hc(b.a),s.hc(s.i),s.hc(m.a),s.hc(v.a),s.hc(p.a),s.hc(y.a),s.hc(k.a),s.hc(x.a))},R.\u0275cmp=s.bc({type:R,selectors:[["wp-card-view"]],viewQuery:function(e,t){var i;(1&amp;e&amp;&amp;s.Yc(P,!0),2&amp;e)&amp;&amp;(s.Pc(i=s.wc())&amp;&amp;(t.container=i.first))},inputs:{canDragOutOf:["dragOutOfHandler","canDragOutOf"],dragInto:"dragInto",highlightingMode:"highlightingMode",workPackageAddedHandler:"workPackageAddedHandler",showStatusButton:"showStatusButton",showInfoButton:"showInfoButton",orientation:"orientation",cardsRemovable:"cardsRemovable",showEmptyResultsBox:"showEmptyResultsBox",shrinkOnMobile:"shrinkOnMobile"},outputs:{onMoved:"onMoved"},features:[s.Qb],decls:5,vars:5,consts:[[3,"ngClass"],["container",""],["class","wp-inline-create--reference-container",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[1,"wp-inline-create--reference-container"],[3,"ndcDynamicComponent","ndcDynamicInjector","ndcDynamicOutputs"],[3,"workPackage","showInfoButton","showStatusButton","showRemoveButton","highlightingMode","draggable","orientation","shrinkOnMobile","onRemove"],["class","form--separator hidden-for-desktop",4,"ngIf"],[1,"form--separator","hidden-for-desktop"],[3,"title","description"]],template:function(e,t){1&amp;e&amp;&amp;(s.nc(0,"div",0,1),s.ad(2,I,2,3,"div",2),s.ad(3,O,3,12,"ng-container",3),s.mc(),s.ad(4,D,2,2,"div",4)),2&amp;e&amp;&amp;(s.Dc("ngClass",t.classes()),s.Tb(2),s.Dc("ngIf",t.inReference),s.Tb(1),s.Dc("ngForOf",t.workPackages)("ngForTrackBy",t.trackByHref),s.Tb(1),s.Dc("ngIf",t.showEmptyResultsBox&amp;&amp;t.isResultEmpty))},styles:[".wp-inline-create-button[_ngcontent-%COMP%]{font-size:.9rem;padding-top:1rem;text-align:center}.wp-inline-create--reference-container[_ngcontent-%COMP%]{margin-bottom:3rem;margin-top:10px}",".wp-cards-container.-horizontal[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));grid-column-gap:10px;grid-row-gap:10px;margin-right:5px}@media only screen and (max-width:679px){.wp-cards-container.-horizontal.-shrink[_ngcontent-%COMP%]{grid-template-columns:1fr;grid-row-gap:0;margin-right:0}.wp-cards-container.-horizontal.-shrink[_ngcontent-%COMP%]   .form--separator[_ngcontent-%COMP%]{margin-bottom:0}}",".cdk-drag-preview[_ngcontent-%COMP%]{box-shadow:0 0 10px 5px rgba(0,0,0,.1);z-index:10000!important}.wp-cards-container.-vertical[_ngcontent-%COMP%]{height:100%;padding:0 15px;border-radius:2px;overflow-y:scroll;scrollbar-color:transparent transparent;scrollbar-width:thin}.wp-cards-container.-vertical[_ngcontent-%COMP%]::-webkit-scrollbar{height:10px;width:10px}.wp-cards-container.-vertical[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.wp-cards-container.-vertical[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ddd;visibility:hidden}.wp-cards-container.-vertical[_ngcontent-%COMP%]:hover{scrollbar-color:#ddd transparent}.wp-cards-container.-vertical[_ngcontent-%COMP%]:hover::-webkit-scrollbar-thumb{visibility:visible}"],changeDetection:0})},hxxE:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("Mo6U");class s extends n.a{updateElements(){return this.$href?this.$load().then(e=&gt;this.elements=e.elements):Promise.resolve()}}},hxzR:function(e,t,i){"use strict";i.d(t,"a",(function(){return S}));var n=i("IzEk"),s=i("POAS"),a=i("qc15"),r=i("E05v"),o=i("ahVz"),c=i("2TbE"),l=i("p5fp"),d=i("XlgE"),u=i("BjK6"),h=i("ul8C"),p=i("qvi4"),m=i("EzE4"),g=i("LRne"),f=i("fXoL"),b=i("ofXK"),v=i("CV67"),w=i("eaMR"),y=i("0loS"),k=i("CS/5");function C(e,t){if(1&amp;e&amp;&amp;(f.nc(0,"li",11),f.ic(1,"ndc-dynamic",12),f.mc()),2&amp;e){const e=f.xc().$implicit,t=f.xc(2);f.Dc("ngClass",e.containerClasses),f.Tb(1),f.Dc("ndcDynamicComponent",e.component)("ndcDynamicInputs",e.inputs)("ndcDynamicInjector",t.injector)("ndcDynamicOutputs",e.outputs)}}function x(e,t){if(1&amp;e&amp;&amp;(f.lc(0),f.ad(1,C,2,5,"li",10),f.kc()),2&amp;e){const e=t.$implicit;f.Tb(1),f.Dc("ngIf",!e.show||e.show())}}function j(e,t){if(1&amp;e&amp;&amp;(f.nc(0,"ul",8),f.ad(1,x,2,1,"ng-container",9),f.mc()),2&amp;e){const e=f.xc();f.Tb(1),f.Dc("ngForOf",e.toolbarButtonComponents)}}class S extends o.a{constructor(){super(...arguments),this.toolbarButtonComponents=[{component:c.a,inputs:{stateName$:Object(g.a)("work-packages.partitioned.list.new"),allowed:["work_packages.createWorkPackage"]}},{component:l.a},{component:d.a,containerClasses:"hidden-for-mobile"},{component:u.a,containerClasses:"hidden-for-mobile"},{component:h.a,containerClasses:"hidden-for-mobile -no-spacing"},{component:p.a,containerClasses:"hidden-for-mobile"},{component:m.a}]}ngOnInit(){super.ngOnInit(),this.text.button_settings=this.I18n.t("js.button_settings")}additionalLoadingTime(){return this.wpTableTimeline.isVisible?this.querySpace.timelineRendered.pipe(Object(n.a)(1)).toPromise():this.querySpace.tableRendered.valuesPromise()}shouldUpdateHtmlTitle(){return"work-packages.partitioned.list"===this.$state.current.name}}S.\u0275fac=function(e){return T(e||S)},S.\u0275cmp=f.bc({type:S,selectors:[["wp-view-page"]],features:[f.Sb([{provide:s.a,useClass:a.a},r.a]),f.Qb],decls:9,vars:6,consts:[[1,"work-packages-partitioned-query-space--container",3,"ngClass"],[1,"toolbar-container","-editable"],[1,"toolbar"],[3,"title","inFlight","showSaveCondition","editable","onSave","onEmptySubmit"],["class","toolbar-items hide-when-print",4,"ngIf"],[1,"work-packages-partitioned-page--content-container"],["data-indicator-name","table","ui-view","content-left",1,"work-packages-partitioned-page--content-left","loading-indicator--location"],["ui-view","content-right",1,"work-packages-partitioned-page--content-right"],[1,"toolbar-items","hide-when-print"],[4,"ngFor","ngForOf"],["class","toolbar-item",3,"ngClass",4,"ngIf"],[1,"toolbar-item",3,"ngClass"],[3,"ndcDynamicComponent","ndcDynamicInputs","ndcDynamicInjector","ndcDynamicOutputs"]],template:function(e,t){1&amp;e&amp;&amp;(f.nc(0,"div",0),f.nc(1,"div",1),f.nc(2,"div",2),f.nc(3,"editable-toolbar-title",3),f.vc("onSave",(function(e){return t.saveQueryFromTitle(e)}))("onEmptySubmit",(function(){return t.updateQueryName("")})),f.mc(),f.ad(4,j,2,1,"ul",4),f.mc(),f.mc(),f.ic(5,"filter-container"),f.nc(6,"div",5),f.ic(7,"div",6),f.ic(8,"div",7),f.mc(),f.mc()),2&amp;e&amp;&amp;(f.Dc("ngClass",t.currentPartition),f.Tb(3),f.Dc("title",t.selectedTitle)("inFlight",t.querySaving)("showSaveCondition",t.hasQueryProps)("editable",t.titleEditingEnabled),f.Tb(1),f.Dc("ngIf",t.tableInformationLoaded))},directives:[b.n,v.a,b.q,w.a,y.UIView,b.p,k.c,k.d],styles:[".cdk-drag-preview[_ngcontent-%COMP%]{box-shadow:0 0 10px 5px rgba(0,0,0,.1);z-index:10000!important}.work-packages-partitioned-query-space--container[_ngcontent-%COMP%]{height:100%;overflow:hidden;display:grid;grid-template-columns:1fr;grid-template-rows:auto auto minmax(200px,1fr)}.work-packages-partitioned-query-space--container.-left-only[_ngcontent-%COMP%]   .work-packages-partitioned-page--content-right[_ngcontent-%COMP%], .work-packages-partitioned-query-space--container.-right-only[_ngcontent-%COMP%]   .work-packages-partitioned-page--content-left[_ngcontent-%COMP%]{display:none}.work-packages-partitioned-query-space--container[_ngcontent-%COMP%]   .work-packages-partitioned-page--content-container[_ngcontent-%COMP%]{display:flex;overflow:auto;scrollbar-color:transparent transparent;scrollbar-width:thin}.work-packages-partitioned-query-space--container[_ngcontent-%COMP%]   .work-packages-partitioned-page--content-container[_ngcontent-%COMP%]::-webkit-scrollbar{height:10px;width:10px}.work-packages-partitioned-query-space--container[_ngcontent-%COMP%]   .work-packages-partitioned-page--content-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.work-packages-partitioned-query-space--container[_ngcontent-%COMP%]   .work-packages-partitioned-page--content-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ddd;visibility:hidden}.work-packages-partitioned-query-space--container[_ngcontent-%COMP%]   .work-packages-partitioned-page--content-container[_ngcontent-%COMP%]:hover{scrollbar-color:#ddd transparent}.work-packages-partitioned-query-space--container[_ngcontent-%COMP%]   .work-packages-partitioned-page--content-container[_ngcontent-%COMP%]:hover::-webkit-scrollbar-thumb{visibility:visible}.work-packages-partitioned-query-space--container[_ngcontent-%COMP%]   .work-packages-partitioned-page--content-left[_ngcontent-%COMP%], .work-packages-partitioned-query-space--container[_ngcontent-%COMP%]   .work-packages-partitioned-page--content-right[_ngcontent-%COMP%]{position:relative}.work-packages-partitioned-query-space--container[_ngcontent-%COMP%]   .work-packages-partitioned-page--content-left[_ngcontent-%COMP%]{flex:1}@media only screen and (max-width:679px){.work-packages-partitioned-query-space--container[_ngcontent-%COMP%]   .work-packages-partitioned-page--content-left[_ngcontent-%COMP%], .work-packages-partitioned-query-space--container[_ngcontent-%COMP%]   .work-packages-partitioned-page--content-right[_ngcontent-%COMP%]{min-width:0;max-width:100vw;max-height:100%}}"],changeDetection:0});const T=f.pc(S)},i95X:function(e,t,i){"use strict";i.d(t,"a",(function(){return b}));var n=i("wZYP"),s=i("FDFi"),a=i("6p3c"),r=i("uSJ+"),o=i("ug4p"),c=i("E2tj"),l=i("pL6k"),d=i("NawS"),u=i("/C7M"),h=i("qc15"),p=i("fXoL"),m=i("MIK2"),g=i("/Rze"),f=i("N5AO");class b{constructor(e,t,i,n,s,a,r,o,c){this.parent=e,this.wpInlineCreate=t,this.wpCacheService=i,this.wpRelations=n,this.notificationService=s,this.halEvents=a,this.urlParamsHelper=r,this.querySpace=o,this.I18n=c,this.isDisabled=!1,this.queryFilters=this.buildQueryFilters(),this.text={abort:this.I18n.t("js.relation_buttons.abort")}}addExisting(){if(_.isNil(this.selectedWpId))return;const e=this.selectedWpId;this.isDisabled=!0,this.wpInlineCreate.add(this.workPackage,e).then(()=&gt;{this.wpCacheService.loadWorkPackage(this.workPackage.id,!0),this.halEvents.push(this.workPackage,{eventType:"association",relatedWorkPackage:e,relationType:this.relationType}),this.isDisabled=!1,this.wpInlineCreate.newInlineWorkPackageReferenced.next(e),this.cancel()}).catch(e=&gt;{this.notificationService.handleRawError(e,this.workPackage),this.isDisabled=!1,this.cancel()})}onSelected(e){e&amp;&amp;(this.selectedWpId=e.id,this.addExisting())}get relationType(){return this.wpInlineCreate.relationType}get workPackage(){return this.wpInlineCreate.referenceTarget}cancel(){this.parent.resetRow()}buildQueryFilters(){const e=this.querySpace.query.value;if(!e)return[];const t=d.a.RELATION_TYPES(!0);let i=e.filters.filter(e=&gt;{let i=this.urlParamsHelper.buildV3GetFilterIdFromFilter(e);return-1===t.indexOf(i)});return this.urlParamsHelper.buildV3GetFilters(i)}}b.\u0275fac=function(e){return new(e||b)(p.hc(a.a),p.hc(s.a),p.hc(o.a),p.hc(r.a),p.hc(h.a),p.hc(u.a),p.hc(l.a),p.hc(c.a),p.hc(n.a))},b.\u0275cmp=p.bc({type:b,selectors:[["ng-component"]],decls:7,vars:4,consts:[["data-indicator-name","relationAddChild",1,"loading-indicator--location"],[1,"wp-relations-create--form","wp-relations--add-form"],[1,"wp-relations-input-section"],["hiddenOverflowContainer",".work-packages-full-view--split-left",3,"workPackage","additionalFilters","filterCandidatesFor","onSelected"],[1,"wp-relations-controls-section","relation-row"],["linkClass","wp-create-relation--cancel","aria-hidden","false",3,"execute"],["icon-classes","icon-remove",3,"icon-title"]],template:function(e,t){1&amp;e&amp;&amp;(p.nc(0,"div",0),p.nc(1,"div",1),p.nc(2,"div",2),p.nc(3,"wp-relations-autocomplete",3),p.vc("onSelected",(function(e){return t.onSelected(e)})),p.mc(),p.mc(),p.nc(4,"div",4),p.nc(5,"accessible-by-keyboard",5),p.vc("execute",(function(){return t.cancel()})),p.ic(6,"op-icon",6),p.mc(),p.mc(),p.mc(),p.mc()),2&amp;e&amp;&amp;(p.Tb(3),p.Dc("workPackage",t.workPackage)("additionalFilters",t.queryFilters)("filterCandidatesFor",t.relationType),p.Tb(3),p.Dc("icon-title",t.text.abort))},directives:[m.a,g.a,f.a],encapsulation:2})},iHm1:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");class s{constructor(){this.config={user:"name",project:"name"}}sort(e,t){if(0===e.length)return e;const i=t||e[0]._type;if(!i)return e;const n=this.sortingProperty(i);return n?_.sortBy(e,e=&gt;e[n].toLowerCase()):e}sortingProperty(e){return e=e.toLowerCase().replace(/^\[\]/,""),this.config[e]}hasSortingProperty(e){return void 0!==this.sortingProperty(e)}}s.\u0275fac=function(e){return new(e||s)},s.\u0275prov=n.dc({token:s,factory:s.\u0275fac,providedIn:"root"})},iMRi:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("FnNU"),s=i("XNiG");class a extends n.a{constructor(){super(...arguments),this.name="MainStore",this.projects=Object(n.g)(),this.workPackages=Object(n.g)(),this.posts=Object(n.g)(),this.schemas=Object(n.g)(),this.types=Object(n.g)(),this.statuses=Object(n.g)(),this.timeEntries=Object(n.g)(),this.versions=Object(n.g)(),this.users=Object(n.g)(),this.queries=new o,this.changes=new r,this.additional={}}forResource(e){const t=_.camelCase(e._type)+"s";let i=this[t]||this.additional[t];return i||(i=this.additional[t]=Object(n.g)()),i&amp;&amp;i.get(e.id)}add(e,t){this.additional[e]=t}}class r{constructor(){this.queries=new s.a}}class o{constructor(){this.columns=Object(n.f)(),this.sortBy=Object(n.f)(),this.groupBy=Object(n.f)(),this.filters=Object(n.f)(),this.displayRepresentation=Object(n.f)()}}},"ii2/":function(e,t,i){"use strict";i.d(t,"a",(function(){return w}));var n=i("mrSG"),s=i("Mo6U"),a=i("wZYP"),r=i("/8SZ"),o=i("ZsX/"),c=i("iMRi"),l=i("ug4p"),d=i("dMmB"),u=i("Jui0"),h=i("d/TE"),p=i("LrpJ"),m=i("5JuZ"),g=i("mMv8"),f=i("qc15"),b=i("r0MM");class v extends s.a{constructor(){super(...arguments),this.overriddenSchema=void 0,this.attachmentsBackend=!0}get ancestorIds(){return this.ancestors.map(e=&gt;e.id)}get isReadonly(){return this.status&amp;&amp;this.status.isReadonly}subjectWithType(e=40){return`${this.type?`${this.type.name}: `:""}${this.subjectWithId(e)}`}subjectWithId(e=40){const t=this.isNew?"":` (#${this.id})`;return`${_.truncate(this.subject,{length:e})}${t}`}get isMilestone(){return this.schema.hasOwnProperty("date")}get isLeaf(){var e=this.$links.children;return!(e&amp;&amp;e.length&gt;0)}get isEditable(){return this.isNew||!!this.$links.update}previewPath(){return this.isNew?super.previewPath():this.pathHelper.api.v3.work_packages.id(this.id).path}getEditorTypeFor(e){return"description"===e?"full":"constrained"}isAttributeEditable(e){const t=this.schema[e];return this.isEditable&amp;&amp;t&amp;&amp;t.writable&amp;&amp;(!this.isReadonly||"status"===e)}performUpload(e){let t="";return t=this.isNew?this.pathHelper.api.v3.attachments.path:this.attachments.$href,this.opFileUpload.uploadAndMapResponse(t,e)}getSchemaName(e){return!this.isMilestone||"startDate"!==e&amp;&amp;"dueDate"!==e?e:"date"}isParentOf(e){return e.parent.$links.self.$link.href===this.$links.self.$link.href}updateLinkedResources(...e){const t={};e.forEach(e=&gt;{const i=this[e];t[e]=i?i.$update():Promise.reject(void 0)});const i=Promise.all(_.values(t));return i.then(()=&gt;{this.wpCacheService.touch(this.id)}),i}initializeNewResource(e){this.overriddenSchema=e.schema,this.$source.id="new",this._type="WorkPackage",this.__initialized_at=Date.now(),this.update=this.$links.update=e.$links.self,this.updateImmediately=this.$links.updateImmediately=e=&gt;this.workPackageDmService.createWorkPackage(e)}$initialize(e){super.$initialize(e);let t=this.attachments||{$source:{},elements:[]};this.attachments=new r.a(this.injector,_.get(t,"$source",t),!1,this.halInitializer,"HalResource")}$linkableKeys(){return _.without(super.$linkableKeys(),"schema")}get schema(){if(this.hasOverriddenSchema)return this.overriddenSchema;const e=this.schemaCacheService.state(this);if(!e.hasValue())throw`Accessing schema of ${this.id} without it being loaded.`;return e.value}get state(){return this.states.workPackages.get(this.id)}push(e){this.wpActivity.clear(e.id),e.parent&amp;&amp;this.wpCacheService.require(e.parent.id,!0),this.wpCacheService.updateWorkPackage(e)}get hasOverriddenSchema(){return null!=this.overriddenSchema}}Object(n.c)([Object(b.a)(),Object(n.e)("design:type",a.a)],v.prototype,"I18n",void 0),Object(n.c)([Object(b.a)(),Object(n.e)("design:type",c.a)],v.prototype,"tates",void 0),Object(n.c)([Object(b.a)(),Object(n.e)("design:type",g.a)],v.prototype,"wpActivity",void 0),Object(n.c)([Object(b.a)(),Object(n.e)("design:type",m.a)],v.prototype,"workPackageDmService",void 0),Object(n.c)([Object(b.a)(),Object(n.e)("design:type",l.a)],v.prototype,"wpCacheService",void 0),Object(n.c)([Object(b.a)(),Object(n.e)("design:type",d.a)],v.prototype,"schemaCacheService",void 0),Object(n.c)([Object(b.a)(),Object(n.e)("design:type",h.a)],v.prototype,"NotificationsService",void 0),Object(n.c)([Object(b.a)(),Object(n.e)("design:type",f.a)],v.prototype,"workPackageNotificationService",void 0),Object(n.c)([Object(b.a)(),Object(n.e)("design:type",u.a)],v.prototype,"pathHelper",void 0),Object(n.c)([Object(b.a)(),Object(n.e)("design:type",o.a)],v.prototype,"opFileUpload",void 0);const w=Object(p.a)(v)},iuLl:function(e,t,i){"use strict";i.d(t,"a",(function(){return f}));var n=i("fXoL"),s=i("gh2L"),a=i("wZYP"),r=i("sjKJ"),o=i("Jui0"),c=i("ZOsW"),l=i("3Pt+"),d=i("ofXK"),u=i("ximh");const h=function(e){return{selected:e}};function p(e,t){if(1&amp;e){const e=n.oc();n.nc(0,"div",5),n.nc(1,"ul",6),n.nc(2,"li",7),n.vc("click",(function(){return n.Sc(e),n.xc().setMode("all")})),n.ic(3,"a",8),n.mc(),n.nc(4,"li",7),n.vc("click",(function(){return n.Sc(e),n.xc().setMode("recent")})),n.ic(5,"a",8),n.mc(),n.mc(),n.mc()}if(2&amp;e){const e=n.xc();n.Tb(2),n.Dc("ngClass",n.Ic(4,h,"all"===e.mode)),n.Tb(1),n.Dc("textContent",e.text.all),n.Tb(1),n.Dc("ngClass",n.Ic(6,h,"recent"===e.mode)),n.Tb(1),n.Dc("textContent",e.text.recent)}}function m(e,t){if(1&amp;e&amp;&amp;(n.ic(0,"b",9),n.cd(1)),2&amp;e){const e=t.searchTerm,i=n.xc();n.Dc("textContent",i.text.add_new_action),n.Tb(1),n.ed(": ",e," ")}}function g(e,t){if(1&amp;e&amp;&amp;(n.nc(0,"div",10),n.cd(1),n.mc()),2&amp;e){const e=t.item,i=t.searchTerm;n.Dc("ngOptionHighlight",i),n.Tb(1),n.dd(e.name)}}class f extends s.a{constructor(e,t,i,s){super(e,t,i,s),this.I18n=e,this.cdRef=t,this.currentProject=i,this.pathHelper=s,this.modeSwitch=new n.s,this.loading=!1,this.mode="all",this.text.all=this.I18n.t("js.label_all"),this.text.recent=this.I18n.t("js.label_recent")}setMode(e){e!==this.mode&amp;&amp;this.modeSwitch.emit(e),this.mode=e}}f.\u0275fac=function(e){return new(e||f)(n.hc(a.a),n.hc(n.i),n.hc(r.a),n.hc(o.a))},f.\u0275cmp=n.bc({type:f,selectors:[["te-work-package-autocompleter"]],outputs:{modeSwitch:"modeSwitch"},features:[n.Qb],decls:6,vars:16,consts:[["bindLabel","name",3,"ngModel","items","ngClass","addTag","virtualScroll","required","clearable","disabled","typeahead","clearOnBackspace","appendTo","hideSelected","loading","id","ngModelChange","change","open","close","keydown"],["ngSelectComponent",""],["ng-header-tmp",""],["ng-tag-tmp",""],["ng-option-tmp",""],[1,"scrollable-tabs","-narrow"],[1,"tabrow"],[3,"ngClass","click"],["href","#",3,"textContent"],[3,"textContent"],[1,"ng-option-label","ellipsis",3,"ngOptionHighlight"]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"ng-select",0,1),n.vc("ngModelChange",(function(e){return t.model=e}))("change",(function(e){return t.changeModel(e)}))("open",(function(){return t.opened()}))("close",(function(){return t.closed()}))("keydown",(function(e){return t.keyPressed(e)})),n.yc(2,"async"),n.ad(3,p,6,8,"ng-template",2),n.ad(4,m,2,2,"ng-template",3),n.ad(5,g,2,2,"ng-template",4),n.mc()),2&amp;e&amp;&amp;n.Dc("ngModel",t.model)("items",t.availableValues)("ngClass",t.classes)("addTag",t.createAllowed)("virtualScroll",!0)("required",t.required)("clearable",!t.required)("disabled",t.disabled)("typeahead",t.typeahead)("clearOnBackspace",!1)("appendTo",t.appendTo)("hideSelected",t.hideSelected)("loading",n.zc(2,14,t.finishedLoading))("id",t.id)},directives:[c.a,l.m,l.p,d.n,l.x,c.g,c.l,c.c,u.a],pipes:[d.a],styles:[".ng-dropdown-panel .ng-dropdown-header{padding-bottom:0}"],encapsulation:2})},iuWW:function(e,t,i){"use strict";i.d(t,"b",(function(){return h})),i.d(t,"a",(function(){return p}));var n=i("XNiG"),s=i("GyhO"),a=i("LRne"),r=i("/uUt"),o=i("Kj3r"),c=i("vkgz"),l=i("eIep"),d=i("JIr8"),u=i("1G5W");function h(e){return t=&gt;e.handleRawError(t)}class p{constructor(e,t,i=250){this.requestHandler=e,this.errorHandler=t,this.debounceMs=i,this.input$=new n.a,this.loading$=new n.a,this.lastResult=[],this.output$=Object(s.a)(Object(a.a)([]),this.input$.pipe(Object(r.a)(),Object(o.a)(i),Object(c.a)(e=&gt;{this.lastRequestedValue=e,this.lastResult=[],this.loading$.next(!0)}),Object(l.a)(e=&gt;this.requestHandler(e).pipe(Object(d.a)(e=&gt;(this.errorHandler(e),Object(a.a)([]))),Object(c.a)(e=&gt;{this.loading$.next(!1),this.lastResult=e})))))}request(e){this.input$.next(e)}get hasResults(){return this.lastResult.length&gt;0}observe(e){return this.output$.pipe(Object(u.a)(e))}}},"j/Ak":function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("ciXH"),s=i("Mo6U"),a=i("kTsZ"),r=i("Jui0"),o=i("6x6j"),c=i("fXoL");class l extends n.a{constructor(e,t,i){super(e,t),this.halResourceService=e,this.pathHelper=t,this.payloadDm=i}listUrl(){return this.pathHelper.api.v3.time_entries.toString()}oneUrl(e){return this.pathHelper.api.v3.time_entries.id(e).toString()}update(e,t=null){let i=this.extractPayload(e,t);return this.halResourceService.patch(e.updateImmediately.$link.href,i).toPromise()}updateForm(e,t=null){let i=this.extractPayload(e,t);return this.halResourceService.post(this.pathHelper.api.v3.time_entries.id(e.idFromLink).form.toString(),i).toPromise()}createForm(e){return this.halResourceService.post(this.pathHelper.api.v3.time_entries.form.toString(),e).toPromise()}create(e){return this.halResourceService.post(this.pathHelper.api.v3.time_entries.path,e).toPromise()}extractPayload(e=null,t=null){return e&amp;&amp;t?this.payloadDm.extract(e,t):e instanceof s.a?{}:e}}l.\u0275fac=function(e){return new(e||l)(c.rc(a.a),c.rc(r.a),c.rc(o.a))},l.\u0275prov=c.dc({token:l,factory:l.\u0275fac})},jEcX:function(e,t,i){"use strict";i.d(t,"b",(function(){return g})),i.d(t,"a",(function(){return f}));i("Mo6U");var n=i("kTsZ"),s=i("wZYP"),a=i("iMRi"),r=i("pLZG"),o=i("AEvm"),c=i("fXoL"),l=i("ofXK"),d=i("5mBr"),u=i("2yvi");function h(e,t){if(1&amp;e&amp;&amp;c.ic(0,"attachment-list",6),2&amp;e){const e=c.xc(2);c.Dc("resource",e.resource)("destroyImmediately",e.destroyImmediately)}}function p(e,t){if(1&amp;e&amp;&amp;c.ic(0,"attachments-upload",7),2&amp;e){const e=c.xc(2);c.Dc("resource",e.resource)}}function m(e,t){if(1&amp;e&amp;&amp;(c.nc(0,"fieldset",1),c.nc(1,"legend",2),c.cd(2),c.mc(),c.nc(3,"div",3),c.ad(4,h,1,2,"attachment-list",4),c.ad(5,p,1,1,"attachments-upload",5),c.mc(),c.mc()),2&amp;e){const e=c.xc();c.Tb(2),c.ed(" ",e.text.attachments," "),c.Tb(2),c.Dc("ngIf",e.resource.attachments),c.Tb(1),c.Dc("ngIf",e.allowUploading)}}const g="attachments";class f extends o.a{constructor(e,t,i,n){super(),this.elementRef=e,this.I18n=t,this.states=i,this.halResourceService=n,this.text={attachments:this.I18n.t("js.label_attachments")}}ngOnInit(){if(this.$element=jQuery(this.elementRef.nativeElement),!this.resource){const e=this.$element.data("resource");this.resource=this.halResourceService.createHalResource(e,!0)}this.allowUploading=this.$element.data("allow-uploading"),void 0!==this.$element.data("destroy-immediately")?this.destroyImmediately=this.$element.data("destroy-immediately"):this.destroyImmediately=!0,this.setupResourceUpdateListener()}setupResourceUpdateListener(){this.states.forResource(this.resource).changes$().pipe(this.untilDestroyed(),Object(r.a)(e=&gt;!!e)).subscribe(e=&gt;{this.resource=e||this.resource})}showAttachments(){return this.allowUploading||_.get(this.resource,"attachments.count",0)&gt;0}}f.\u0275fac=function(e){return new(e||f)(c.hc(c.q),c.hc(s.a),c.hc(a.a),c.hc(n.a))},f.\u0275cmp=c.bc({type:f,selectors:[["attachments"]],inputs:{resource:"resource"},features:[c.Qb],decls:1,vars:1,consts:[["class","form--fieldset",4,"ngIf"],[1,"form--fieldset"],[1,"form--fieldset-legend"],["id","attachments_fields"],[3,"resource","destroyImmediately",4,"ngIf"],["class","hide-when-print",3,"resource",4,"ngIf"],[3,"resource","destroyImmediately"],[1,"hide-when-print",3,"resource"]],template:function(e,t){1&amp;e&amp;&amp;c.ad(0,m,6,3,"fieldset",0),2&amp;e&amp;&amp;c.Dc("ngIf",t.showAttachments())},directives:[l.q,d.a,u.a],encapsulation:2})},jQQo:function(e,t,i){"use strict";i.d(t,"a",(function(){return m}));var n=i("fXoL"),s=i("wZYP"),a=i("OW6k"),r=i("AEvm"),o=i("VRyK"),c=i("8OyR"),l=i("9Ejp"),d=i("ofXK"),u=i("ZOsW");const h=["ngSelectComponent"];function p(e,t){if(1&amp;e){const e=n.oc();n.nc(0,"div",5),n.ic(1,"span",6),n.nc(2,"a",7),n.vc("click",(function(){n.Sc(e);const i=t.$implicit;return n.xc().remove(i)})),n.mc(),n.mc()}if(2&amp;e){const e=t.$implicit;n.Tb(1),n.Dc("textContent",e.name)}}class m extends r.a{constructor(e,t){super(),this.I18n=e,this.dragula=t,this.autofocus=!0,this._selected=[],this.onChange=new n.s,this.availableOptions=[],this.text={placeholder:this.I18n.t("js.label_add_columns")}}ngOnInit(){this.updateAvailableOptions(),this.columnsGroup=this.dragula.createGroup("columns",{}),this.dragula.drag("columns").pipe(this.untilDestroyed()).subscribe(()=&gt;c.a.setBodyCursor("move","important")),Object(o.a)(this.dragula.drop("columns"),this.dragula.cancel("columns")).pipe(this.untilDestroyed()).subscribe(()=&gt;c.a.setBodyCursor("auto"));const e=this;this.autoscroll=new a.a([document.getElementById("content-wrapper")],{margin:25,maxSpeed:10,scrollWhenOutside:!0,autoScroll:function(){return this.down&amp;&amp;e.columnsGroup.drake.dragging}})}ngAfterViewInit(){this.autofocus&amp;&amp;this.ngSelectComponent.focus()}ngOnDestroy(){super.ngOnDestroy(),this.dragula.destroy("columns")}select(e){e&amp;&amp;(this.selected=[...this.selected,e],this.ngSelectComponent.clearModel())}remove(e){this.selected=this.selected.filter(t=&gt;t.id!==e.id)}get selected(){return this._selected}set selected(e){this._selected=e,this.updateAvailableOptions(),this.onChange.emit(this.selected)}opened(){setTimeout(()=&gt;{const e=this.ngSelectComponent;e&amp;&amp;e.dropdownPanel&amp;&amp;e.dropdownPanel._updatePosition()},25)}updateAvailableOptions(){this.availableOptions=this.options.filter(e=&gt;!this.selected.find(t=&gt;t.id===e.id))}}m.\u0275fac=function(e){return new(e||m)(n.hc(s.a),n.hc(l.c))},m.\u0275cmp=n.bc({type:m,selectors:[["draggable-autocompleter"]],viewQuery:function(e,t){var i;(1&amp;e&amp;&amp;n.hd(h,!0),2&amp;e)&amp;&amp;(n.Pc(i=n.wc())&amp;&amp;(t.ngSelectComponent=i.first))},inputs:{options:"options",autofocus:"autofocus",_selected:["selected","_selected"]},outputs:{onChange:"onChange"},features:[n.Qb],decls:5,vars:8,consts:[[1,"draggable-autocomplete--container"],["dragula","columns",1,"draggable-autocomplete--selected",3,"dragulaModel","dragulaModelChange"],["class","draggable-autocomplete--item",4,"ngFor","ngForOf"],["ngClass","draggable-autocomplete--input","bindLabel","name","appendTo","body",3,"items","multiple","virtualScroll","placeholder","clearSearchOnAdd","closeOnSelect","open","change"],["ngSelectComponent",""],[1,"draggable-autocomplete--item"],[1,"draggable-autocomplete--item-text",3,"textContent"],[1,"draggable-autocomplete--remove-item","icon-remove",3,"click"]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"div",0),n.nc(1,"div",1),n.vc("dragulaModelChange",(function(e){return t.selected=e})),n.ad(2,p,3,1,"div",2),n.mc(),n.nc(3,"ng-select",3,4),n.vc("open",(function(){return t.opened()}))("change",(function(e){return t.select(e)})),n.mc(),n.mc()),2&amp;e&amp;&amp;(n.Tb(1),n.Dc("dragulaModel",t.selected),n.Tb(1),n.Dc("ngForOf",t.selected),n.Tb(1),n.Dc("items",t.availableOptions)("multiple",!1)("virtualScroll",!0)("placeholder",t.text.placeholder)("clearSearchOnAdd",!0)("closeOnSelect",!0))},directives:[l.a,d.p,u.a,d.n],styles:[".draggable-autocomplete--selected[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;padding-bottom:1rem}.draggable-autocomplete--item[_ngcontent-%COMP%]{padding:5px;margin-right:5px;margin-bottom:5px;min-width:50px;border:1px solid #ddd;background:#f8f8f8;cursor:move;font-size:14px;display:flex;align-items:center;justify-content:space-between}.draggable-autocomplete--item[_ngcontent-%COMP%]   .draggable-autocomplete--remove-item[_ngcontent-%COMP%]{font-size:8px;color:#999;padding-left:5px}"],changeDetection:0})},jW2i:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i("zcj1");class s{constructor(e={}){this._dataDir=e.dataDir||""}getProjects(e,t){e({projects:window.gon.ifc_models.projects})}getProject(e,t,i){t({id:e[0].id,name:e[0].name,models:window.gon.ifc_models.models,viewerContent:{modelsLoaded:window.gon.ifc_models.shown_models},viewerConfigs:{saoEnabled:!0}})}getMetadata(e,t,i,s){const a=window.gon.ifc_models.metadata_attachment_ids[t];console.log(`Loading model metadata for: ${a}`),n.a.loadJSON(this.attachmentUrl(a),i,s)}getGeometry(e,t,i,s){const a=window.gon.ifc_models.xkt_attachment_ids[t];console.log(`Loading model geometry for: ${a}`),n.a.loadArraybuffer(this.attachmentUrl(a),i,s)}attachmentUrl(e){return"/api/v3/attachments/"+e+"/content"}}var a=i("lfyH"),r=i("XNiG"),o=i("fXoL");class c extends a.a{constructor(){super(...arguments),this.$loaded=new r.a}newViewer(e,t){Promise.all([i.e(1),i.e(16)]).then(i.bind(null,"/vtK")).then(i=&gt;{let n=new s,a=new i.BIMViewer(n,e);a.on("queryPicked",e=&gt;{alert(`IFC Name = "${e.objectName}"\nIFC class = "${e.objectType}"\nIFC GUID = ${e.objectId}`)}),a.on("modelLoaded",()=&gt;this.$loaded.complete()),a.loadProject(t[0].id),this.viewer=a})}destroy(){this.$loaded.complete(),this.viewer&amp;&amp;(this.viewer.destroy(),this.viewer=void 0)}get viewer(){return this._viewer}set viewer(e){this._viewer=e}setKeyboardEnabled(e){this.viewer.setKeyboardEnabled(e)}getViewpoint(){const e=this.viewer.saveBCFViewpoint({spacesVisible:!0});return delete e.bitmaps,Promise.resolve(e)}showViewpoint(e){this.viewer.loadBCFViewpoint(e,{})}viewerVisible(){return!!this.viewer}onLoad$(){return this.$loaded}}c.\u0275fac=function(e){return l(e||c)},c.\u0275prov=o.dc({token:c,factory:c.\u0275fac});const l=o.pc(c)},juWA:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("8zkO"),s=i("wZYP"),a=i("f0Wu"),r=i("fXoL");class o{constructor(e,t){this.ConfigurationService=e,this.I18n=t,this.setupLocale()}setupLocale(){a.locale(I18n.locale)}parseDatetime(e,t){var i=a.utc(e,t);return this.ConfigurationService.isTimezoneSet()&amp;&amp;(i.local(),i.tz(this.ConfigurationService.timezone())),i}parseDate(e,t){return a(e,t)}parseLocalDateTime(e,t){var i;return t=t||this.getTimeFormat(),(i=this.ConfigurationService.isTimezoneSet()?a.tz(e,t,this.ConfigurationService.timezone()):a(e,t)).utc(),i}parseISODatetime(e){return this.parseDatetime(e,"YYYY-MM-DDTHH:mm:ssZ")}parseISODate(e){return this.parseDate(e,"YYYY-MM-DD")}formattedDate(e){return this.parseDate(e).format(this.getDateFormat())}inThePast(e){return this.daysFromToday(e)&lt;=-1}daysFromToday(e){const t=this.parseDate(e),i=a().startOf("day");return t.diff(i,"days")}formattedTime(e){return this.parseDatetime(e).format(this.getTimeFormat())}formattedDatetime(e){var t=this.formattedDatetimeComponents(e);return t[0]+" "+t[1]}formattedDatetimeComponents(e){var t=this.parseDatetime(e);return[t.format(this.getDateFormat()),t.format(this.getTimeFormat())]}toHours(e){return Number(a.duration(e).asHours().toFixed(2))}formattedDuration(e){return this.I18n.t("js.units.hour",{count:this.toHours(e)})}formattedISODate(e){return this.parseDate(e).format("YYYY-MM-DD")}formattedISODateTime(e){return e.format()}isValidISODate(e){return this.isValid(e,"YYYY-MM-DD")}isValidISODateTime(e){return this.isValid(e,"YYYY-MM-DDTHH:mm:ssZ")}isValid(e,t){var i=t||this.getDateFormat();return a(e,[i],!0).isValid()}getDateFormat(){return this.ConfigurationService.dateFormatPresent()?this.ConfigurationService.dateFormat():"L"}getTimeFormat(){return this.ConfigurationService.timeFormatPresent()?this.ConfigurationService.timeFormat():"LT"}}o.\u0275fac=function(e){return new(e||o)(r.rc(n.a),r.rc(s.a))},o.\u0275prov=r.dc({token:o,factory:o.\u0275fac,providedIn:"root"})},k1Xe:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("iMRi"),s=i("Kg8T"),a=i("fXoL"),r=i("wZYP"),o=i("E2tj"),c=i("3Pt+");class l{constructor(e,t,i,n){this.states=e,this.querySpace=t,this.authorisationService=i,this.I18n=n,this.onChange=new a.s,this.text={showInMenu:this.I18n.t("js.label_star_query"),visibleForOthers:this.I18n.t("js.label_public_query"),showInMenuText:this.I18n.t("js.work_packages.query.star_text"),visibleForOthersText:this.I18n.t("js.work_packages.query.public_text")}}get canStar(){return this.isSave||this.authorisationService.can("query","star")||this.authorisationService.can("query","unstar")}get canPublish(){const e=this.querySpace.queryForm.value;return this.authorisationService.can("query","updateImmediately")&amp;&amp;e.schema.public.writable}updateStarred(e){this.isStarred=e,this.changed()}updatePublic(e){this.isPublic=e,this.changed()}changed(){this.onChange.emit({isStarred:!!this.isStarred,isPublic:!!this.isPublic})}}l.\u0275fac=function(e){return new(e||l)(a.hc(n.a),a.hc(o.a),a.hc(s.a),a.hc(r.a))},l.\u0275cmp=a.bc({type:l,selectors:[["query-sharing-form"]],inputs:{isSave:"isSave",isStarred:"isStarred",isPublic:"isPublic"},outputs:{onChange:"onChange"},decls:14,vars:8,consts:[[1,"form--field"],[1,"form--field-container","-vertical"],[1,"form--label-with-check-box"],[1,"form--check-box-container"],["type","checkbox","name","is_public","id","show-public",1,"form--check-box",3,"ngModel","disabled","ngModelChange"],[1,"form--field-instructions","-no-margin",3,"textContent"],["type","checkbox","name","show_in_menu","id","show-in-menu",1,"form--check-box",3,"ngModel","disabled","ngModelChange"]],template:function(e,t){1&amp;e&amp;&amp;(a.nc(0,"div",0),a.nc(1,"div",1),a.nc(2,"label",2),a.nc(3,"div",3),a.nc(4,"input",4),a.vc("ngModelChange",(function(e){return t.updatePublic(e)})),a.mc(),a.mc(),a.cd(5),a.mc(),a.ic(6,"div",5),a.mc(),a.mc(),a.nc(7,"div",0),a.nc(8,"div",1),a.nc(9,"label",2),a.nc(10,"div",3),a.nc(11,"input",6),a.vc("ngModelChange",(function(e){return t.updateStarred(e)})),a.mc(),a.mc(),a.cd(12),a.mc(),a.ic(13,"div",5),a.mc(),a.mc()),2&amp;e&amp;&amp;(a.Tb(4),a.Dc("ngModel",t.isPublic)("disabled",!t.canPublish),a.Tb(1),a.ed(" ",t.text.visibleForOthers," "),a.Tb(1),a.Dc("textContent",t.text.visibleForOthersText),a.Tb(5),a.Dc("ngModel",t.isStarred)("disabled",!t.canStar),a.Tb(1),a.ed(" ",t.text.showInMenu," "),a.Tb(1),a.Dc("textContent",t.text.showInMenuText))},directives:[c.a,c.m,c.p],encapsulation:2})},k8lp:function(e,t,i){"use strict";i.d(t,"a",(function(){return h}));var n=i("fXoL"),s=i("5Mgc"),a=i("d/TE"),r=i("wZYP"),o=i("8zkO"),c=i("ofXK");const l=["opCkeditorReplacementContainer"],d=["codeMirrorPane"];function u(e,t){if(1&amp;e&amp;&amp;(n.nc(0,"div",6),n.nc(1,"div",7),n.nc(2,"p"),n.ic(3,"strong",8),n.ic(4,"br"),n.ic(5,"span",8),n.mc(),n.mc(),n.mc()),2&amp;e){const e=n.xc();n.Tb(3),n.Dc("textContent",e.text.errorTitle),n.Tb(2),n.Dc("textContent",e.error)}}class h{constructor(e,t,i,s,a){this.elementRef=e,this.Notifications=t,this.I18n=i,this.configurationService=s,this.ckEditorSetup=a,this.ckEditorType="full",this.onInitialized=new n.s,this.onContentChange=new n.s,this.onInitializationFailed=new n.s,this.error=null,this.allowManualMode=!1,this.manualMode=!1,this.text={errorTitle:this.I18n.t("js.editor.error_initialization_failed")},this.debouncedEmitter=_.debounce(()=&gt;{this.getTransformedContent(!1).then(e=&gt;{this.onContentChange.emit(e)})},1e3,{leading:!0})}getRawData(){return this.manualMode?this._content=this.codeMirrorInstance.getValue():this._content=this.ckEditorInstance.getData({trim:!1})}getTransformedContent(e=!0){if(!this.initialized)throw"Tried to access CKEditor instance before initialization.";return new Promise((t,i)=&gt;{try{t(this.getRawData())}catch(n){console.error(`Failed to save CKEditor content: ${n}.`);let t=this.I18n.t("js.editor.error_saving_failed",{error:n||this.I18n.t("js.error.internal")});e&amp;&amp;this.Notifications.addError(t),i(t)}})}set content(e){if(!this.initialized)throw"Tried to access CKEditor instance before initialization.";this._content=e,this.ckEditorInstance.setData(e)}get content(){return this._content}get initialized(){return void 0!==this.ckEditorInstance}ngOnInit(){try{this.initializeEditor()}catch(e){console.error(`Failed to setup CKEditor instance: ${e}`),this.error=e,this.onInitializationFailed.emit(e)}}initializeEditor(){this.$element=jQuery(this.elementRef.nativeElement);const e=this.ckEditorSetup.create(this.ckEditorType,this.opCkeditorReplacementContainer.nativeElement,this.context,this.content).catch(e=&gt;{throw e}).then(e=&gt;(this.ckEditorInstance=e,e.model.document.on("change",this.debouncedEmitter),e.on("op:source-code-enabled",()=&gt;this.enableManualMode()),e.on("op:source-code-disabled",()=&gt;this.disableManualMode()),this.onInitialized.emit(e),e));this.$element.data("editor",e)}disableManualMode(){const e=this.getRawData();this.ckEditorInstance.setData(e),this.codeMirrorInstance=null,this.manualMode=!1}enableManualMode(){const e=this.getRawData();Promise.all([i.e(0).then(i.t.bind(null,"VrN/",7)),i("TKcc")("./gfm/gfm.js")]).then(t=&gt;{const i=t[0].default;this.codeMirrorInstance=i(this.$element.find(".ck-editor__source")[0],{lineNumbers:!0,smartIndent:!0,value:e,mode:""}),this.codeMirrorInstance.on("change",this.debouncedEmitter),setTimeout(()=&gt;this.codeMirrorInstance.refresh(),100),this.manualMode=!0})}}h.\u0275fac=function(e){return new(e||h)(n.hc(n.q),n.hc(a.a),n.hc(r.a),n.hc(o.a),n.hc(s.a))},h.\u0275cmp=n.bc({type:h,selectors:[["op-ckeditor"]],viewQuery:function(e,t){var i;(1&amp;e&amp;&amp;(n.Yc(l,!0),n.hd(d,!0)),2&amp;e)&amp;&amp;(n.Pc(i=n.wc())&amp;&amp;(t.opCkeditorReplacementContainer=i.first),n.Pc(i=n.wc())&amp;&amp;(t.codeMirrorPane=i.first))},inputs:{ckEditorType:"ckEditorType",context:"context",_content:["content","_content"]},outputs:{onInitialized:"onInitialized",onContentChange:"onContentChange",onInitializationFailed:"onInitializationFailed"},decls:7,vars:1,consts:[["class","notification-box -error",4,"ngIf"],[1,"op-ckeditor-source-element","document-editor"],["opCkeditorReplacementContainer",""],[1,"document-editor__toolbar"],[1,"document-editor__editable-container"],[1,"document-editor__editable"],[1,"notification-box","-error"],[1,"notification-box--content"],[3,"textContent"]],template:function(e,t){1&amp;e&amp;&amp;(n.lc(0),n.ad(1,u,6,2,"div",0),n.nc(2,"div",1,2),n.ic(4,"div",3),n.nc(5,"div",4),n.ic(6,"div",5),n.mc(),n.mc(),n.kc()),2&amp;e&amp;&amp;(n.Tb(1),n.Dc("ngIf",t.error))},directives:[c.q],styles:[".op-ckeditor--mode-switch[_ngcontent-%COMP%]{text-align:right}.op-ckeditor--mode-switch[_ngcontent-%COMP%]   button.button[_ngcontent-%COMP%]{margin:0 0 5px}"]})},kTg4:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("wZYP"),s=i("Jui0"),a=i("sjKJ"),r=i("iB+3"),o=i("vK8y"),c=i("fXoL");class l{constructor(e,t,i,n,s){this.I18n=e,this.$state=t,this.CurrentProject=i,this.PathHelper=n,this.CurrentUserService=s,this.text={assignee:this.I18n.t("js.work_packages.properties.assignee"),author:this.I18n.t("js.work_packages.properties.author"),created_at:this.I18n.t("js.work_packages.properties.createdAt"),updated_at:this.I18n.t("js.work_packages.properties.updatedAt"),status:this.I18n.t("js.work_packages.properties.status"),work_packages:this.I18n.t("js.label_work_package_plural"),gantt:this.I18n.t("js.timelines.gantt_chart"),latest_activity:this.I18n.t("js.work_packages.default_queries.latest_activity"),created_by_me:this.I18n.t("js.work_packages.default_queries.created_by_me"),assigned_to_me:this.I18n.t("js.work_packages.default_queries.assigned_to_me"),recently_created:this.I18n.t("js.work_packages.default_queries.recently_created"),all_open:this.I18n.t("js.work_packages.default_queries.all_open"),summary:this.I18n.t("js.work_packages.default_queries.summary")}}get all(){let e=[{identifier:"all_open",label:this.text.all_open,query_props:null},{identifier:"latest_activity",label:this.text.latest_activity,query_props:'{"c":["id","subject","type","status","assignee","updatedAt"],"hi":false,"g":"","t":"updatedAt:desc","f":[{"n":"status","o":"o","v":[]}]}'},{identifier:"gantt",label:this.text.gantt,query_props:'{"c":["id","subject","startDate","dueDate"],"tv":true,"tzl":"years","hi":true,"g":"","t":"id:asc","t":"startDate:asc","f":[{"n":"status","o":"o","v":[]}]}'},{identifier:"recently_created",label:this.text.recently_created,query_props:'{"c":["id","subject","type","status","assignee","createdAt"],"hi":false,"g":"","t":"createdAt:desc","f":[{"n":"status","o":"o","v":[]}]}'}];const t=this.CurrentProject.identifier;return t&amp;&amp;e.push({identifier:"summary",label:this.text.summary,static_link:this.PathHelper.projectWorkPackagesPath(t)+"/report"}),this.CurrentUserService.isLoggedIn&amp;&amp;(e=e.concat([{identifier:"created_by_me",label:this.text.created_by_me,query_props:'{"c":["id","subject","type","status","assignee","updatedAt"],"hi":false,"g":"","t":"updatedAt:desc,id:asc","f":[{"n":"status","o":"o","v":[]},{"n":"author","o":"=","v":["me"]}]}'},{identifier:"assigned_to_me",label:this.text.assigned_to_me,query_props:'{"c":["id","subject","type","status","author","updatedAt"],"hi":false,"g":"","t":"updatedAt:desc,id:asc","f":[{"n":"status","o":"o","v":[]},{"n":"assigneeOrGroup","o":"=","v":["me"]}]}'}])),e}getStaticName(e){if(this.$state.params.query_props){let e=JSON.parse(this.$state.params.query_props);delete e.pp,delete e.pa;const t=_.find(this.all,t=&gt;t.query_props&amp;&amp;t.query_props===JSON.stringify(e));if(t)return t.label}return 1===e.filters.length&amp;&amp;"status"===e.filters[0].id&amp;&amp;"o"===e.filters[0].operator.id?this.text.all_open:this.text.work_packages}}l.\u0275fac=function(e){return new(e||l)(c.rc(n.a),c.rc(r.G),c.rc(a.a),c.rc(s.a),c.rc(o.a))},l.\u0275prov=c.dc({token:l,factory:l.\u0275fac})},kTsZ:function(e,t,i){"use strict";i.d(t,"a",(function(){return g}));var n=i("mrSG"),s=i("tk/3"),a=i("vLqr"),r=i("lJxs"),o=i("JIr8"),c=i("Mo6U"),l=i("BtrP"),d=i("PZVJ"),u=i("Ng29"),h=i("16wW"),p=i("qHU1"),m=i("fXoL");class g{constructor(e,t){this.injector=e,this.http=t,this.config={}}request(e,t,i,n={}){if("get"===e)return this.get(t,i,n);const s={body:i||{},headers:n,withCredentials:!0,responseType:"json"};return this._request(e,t,s)}_request(e,t,i){return this.http.request(e,t,i).pipe(Object(r.a)(e=&gt;this.createHalResource(e)),Object(o.a)(i=&gt;{Object(p.c)(()=&gt;console.error(`Failed to ${e} ${t}: ${i.name}`));const n=this.createHalResource(i.error);return n.httpError=i,Object(a.throwError)(n)}))}get(e,t,i){const n={headers:i,params:new s.f({encoder:new u.a,fromObject:t}),withCredentials:!0,responseType:"json"};return this._request("get",e,n)}getAllPaginated(e,t,i={},s={}){return Object(n.b)(this,void 0,void 0,(function*(){let n=0,a=1;const r=[];for(i.pageSize=t;n
                             <t;){i.offset=a;const but="" c.a}createhalresource(e,t="!0){_.isNil(e)&amp;&amp;(e=c.a.getEmptyResource());const" defaultclass(){return="" expected="" for="" i='e._type||"HalResource";return' more="" more.";r.push(o),n+="o.count,a+=1}return" new(this.getresourceclassoftype(e))(this.injector,t,i,e="" query,="" results="" r}))}put(e,t,i){return="" t='this.request("get",e,this.toEprops(i),s).toPromise(),o=yield' t;if(0='o.count)throw"No' this="" this.createhalresourceoftype(i,e,t)}createhalresourceoftype(e,t,i="!1){return" this.request("delete",e,t,i)}registerresource(e,t){this.config[e]="t}get" this.request("patch",e,t,i)}delete(e,t,i){return="" this.request("post",e,t,i)}patch(e,t,i){return="" this.request("put",e,t,i)}post(e,t,i){return="">
                              Object(d.b)(this,e),e)}createHalResourceOfClass(e,t,i=!1){const n=t._type||"HalResource";return new e(this.injector,t,i,e=&gt;Object(d.b)(this,e),n)}fromLink(e){const t=c.a.getEmptyResource(l.a.fromObject(this,e));return this.createHalResource(t,!1)}fromSelfLink(e){const t={_links:{self:{href:e}}};return this.createHalResource(t)}createLinkedResource(e,t,i){const n=c.a.getEmptyResource(),s=e.$halType,a=this.getResourceClassOfAttribute(s,t)||"HalResource";return n._links.self=i,this.createHalResourceOfType(a,n,!1)}getResourceClassOfType(e){const t=this.config[e];return t&amp;&amp;t.cls?t.cls:this.defaultClass}getResourceClassOfAttribute(e,t){const i=this.config[e];return(i&amp;&amp;i.attrTypes||{})[t]}toEprops(e){let t=h.deflate(JSON.stringify(e),{to:"string"});return{eprops:btoa(t)}}}g.\u0275fac=function(e){return new(e||g)(m.rc(m.A),m.rc(s.b))},g.\u0275prov=m.dc({token:g,factory:g.\u0275fac,providedIn:"root"})},"kY/U":function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));i("ii2/");var n=i("ug4p"),s=i("kTsZ"),a=(i("RWlv"),i("mMv8")),r=i("SKFm"),o=i("dMmB"),c=i("/C7M"),l=i("qc15"),d=i("fXoL");class u{constructor(e,t,i,n,s,a,r){this.halResourceService=e,this.wpCacheService=t,this.wpSchemaCacheService=i,this.wpActivity=n,this.notificationService=s,this.halEditing=a,this.halEvents=r}fetchAction(){this.halResourceService.get(this.action.href).toPromise().then(e=&gt;{this.action=e})}update(){let e={lockVersion:this.workPackage.lockVersion,_links:{workPackage:{href:this.workPackage.href}}};this.halResourceService.post(this.action.href+"/execute",e).toPromise().then(e=&gt;{this.notificationService.showSave(e,!1),this.workPackage=e,this.wpActivity.clear(this.workPackage.id),this.wpSchemaCacheService.ensureLoaded(e).then(()=&gt;{this.wpCacheService.updateWorkPackage(e,!0),this.halEditing.stopEditing(e),this.halEvents.push(e,{eventType:"updated"})})}).catch(e=&gt;{this.notificationService.handleRawError(e,this.workPackage)})}onMouseEnter(){this.fetchAction()}}u.\u0275fac=function(e){return new(e||u)(d.hc(s.a),d.hc(n.a),d.hc(o.a),d.hc(a.a),d.hc(l.a),d.hc(r.a),d.hc(c.a))},u.\u0275cmp=d.bc({type:u,selectors:[["wp-custom-action"]],hostBindings:function(e,t){1&amp;e&amp;&amp;d.vc("mouseenter",(function(){return t.onMouseEnter()}))},inputs:{workPackage:"workPackage",action:"action"},decls:2,vars:2,consts:[[1,"custom-action--button","button","-narrow","hide-when-print",3,"title","click"]],template:function(e,t){1&amp;e&amp;&amp;(d.nc(0,"button",0),d.vc("click",(function(){return t.update()})),d.cd(1),d.mc()),2&amp;e&amp;&amp;(d.Ec("title",t.action.description?t.action.description:t.action.name),d.Tb(1),d.ed(" ",t.action.name,"\n"))},encapsulation:2})},kZPr:function(e,t,i){"use strict";i.d(t,"a",(function(){return m}));var n=i("zOhy"),s=i("fXoL"),a=i("ofXK"),r=i("711n"),o=i("XZlt"),c=i("qvi4"),l=i("1zMF"),d=i("aveh"),u=i("2bW2");const h=function(){return["status","type"]};function p(e,t){if(1&amp;e){const e=s.oc();s.nc(0,"div",1),s.nc(1,"edit-form",2),s.vc("onSaved",(function(t){return s.Sc(e),s.xc().onSaved(t)})),s.nc(2,"div",3),s.nc(3,"div",4),s.ic(4,"wp-type-status",5),s.mc(),s.nc(5,"ul",6),s.nc(6,"li",7),s.ic(7,"zen-mode-toggle-button"),s.mc(),s.nc(8,"li",7),s.nc(9,"button",8),s.ic(10,"i",9),s.mc(),s.mc(),s.mc(),s.mc(),s.ic(11,"wp-single-view",10),s.nc(12,"wp-edit-actions-bar",11),s.vc("onCancel",(function(){return s.Sc(e),s.xc().cancelAndBackToList()})),s.mc(),s.mc(),s.mc()}if(2&amp;e){const e=s.xc();s.Tb(1),s.Dc("resource",e.newWorkPackage)("skippedFields",s.Hc(7,h))("inEditMode",!0),s.Tb(3),s.Dc("workPackage",e.newWorkPackage),s.Tb(5),s.Ub("title",e.text.button_settings),s.Tb(2),s.Dc("workPackage",e.newWorkPackage)("showProject",e.copying)}}class m extends n.a{constructor(){super(...arguments),this.successState="work-packages.show"}}m.\u0275fac=function(e){return g(e||m)},m.\u0275cmp=s.bc({type:m,selectors:[["wp-new-full-view"]],hostAttrs:[1,"work-packages-page--ui-view"],features:[s.Qb],decls:1,vars:1,consts:[["class","work-package--new-state work-packages--new work-packages--show-view toolbar-container",4,"ngIf"],[1,"work-package--new-state","work-packages--new","work-packages--show-view","toolbar-container"],[3,"resource","skippedFields","inEditMode","onSaved"],[1,"toolbar"],[1,"title-container"],[3,"workPackage"],[1,"toolbar-items","hide-when-print"],[1,"toolbar-item","hidden-for-mobile"],["id","create-wp-menu-button","wpCreateSettingsMenu","",1,"button","last","work-packages-settings-button","toolbar-icon"],[1,"button--icon","icon-show-more"],[3,"workPackage","showProject"],[3,"onCancel"]],template:function(e,t){1&amp;e&amp;&amp;s.ad(0,p,13,8,"div",0),2&amp;e&amp;&amp;s.Dc("ngIf",t.newWorkPackage)},directives:[a.q,r.a,o.a,c.a,l.a,d.a,u.a],encapsulation:2,changeDetection:0});const g=s.pc(m)},kgyZ:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("XNiG"),s=i("AEvm");class a extends s.a{constructor(){super(...arguments),this.onDestroy=new n.a,this._onSubmitHandlers=[]}onSubmit(){return Promise.all(this._onSubmitHandlers.map(e=&gt;e()))}registerOnSubmit(e){this._onSubmitHandlers.push(e)}previewContext(e){}}},kl08:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i("6eua"),s=i("fXoL"),a=i("ofXK"),r=i("u8Ab");function o(e,t){1&amp;e&amp;&amp;(s.nc(0,"span"),s.cd(1,", "),s.mc())}const c=function(e){return{"-multi-line":e}};function l(e,t){if(1&amp;e&amp;&amp;(s.nc(0,"span",1),s.ic(1,"user-avatar",2),s.ic(2,"span",3),s.ad(3,o,2,0,"span",4),s.mc()),2&amp;e){const e=t.$implicit,i=t.last,n=s.xc();s.Dc("ngClass",s.Ic(4,c,n.multiLines)),s.Tb(1),s.Dc("user",e),s.Tb(1),s.Dc("textContent",e.name),s.Tb(1),s.Dc("ngIf",!n.multiLines&amp;&amp;!i)}}class d{constructor(e,t,i){this.injector=e,this.cdRef=t,this.elementRef=i,this.users=this.injector.get(n.b),this.multiLines=this.injector.get(n.a)}ngAfterViewInit(){this.cdRef.detach()}}d.\u0275fac=function(e){return new(e||d)(s.hc(s.A),s.hc(s.i),s.hc(s.q))},d.\u0275cmp=s.bc({type:d,selectors:[["user-field-portal"]],inputs:{userResources:"userResources",multiLines:"multiLines"},decls:1,vars:1,consts:[[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],["data-class-list","avatar-medium",3,"user"],[3,"textContent"],[4,"ngIf"]],template:function(e,t){1&amp;e&amp;&amp;s.ad(0,l,4,6,"span",0),2&amp;e&amp;&amp;s.Dc("ngForOf",t.users)},directives:[a.p,a.n,r.a,a.q],styles:[".-multi-line[_ngcontent-%COMP%]{display:block;margin-bottom:2px}user-avatar[_ngcontent-%COMP%]{margin-right:5px}"],changeDetection:0})},kor4:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("fXoL"),s=i("E5Dd");class a{constructor(){this.stopEventPropagation=!0,this.onClick=new n.s}handleClick(e){"click"!==e.type&amp;&amp;e.which!==s.a.ENTER&amp;&amp;e.which!==s.a.SPACE||(this.stopEventPropagation&amp;&amp;(e.preventDefault(),e.stopPropagation()),this.onClick.emit(e))}}a.\u0275fac=function(e){return new(e||a)},a.\u0275dir=n.cc({type:a,selectors:[["","accessibleClick",""]],hostBindings:function(e,t){1&amp;e&amp;&amp;n.vc("click",(function(e){return t.handleClick(e)}))("keydown",(function(e){return t.handleClick(e)}))},inputs:{stopEventPropagation:["accessibleClickStopEvent","stopEventPropagation"]},outputs:{onClick:"accessibleClick"}})},kt6C:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("8zkO"),s=i("fXoL");const a=6,r=1;class o{constructor(e){this.configuration=e,this.loadPaginationOptions()}getCachedPerPage(e){var t,i;const n=this.localStoragePerPage,s=(null===(t=e)||void 0===t?void 0:t.length)||0;return null!==n&amp;&amp;n&gt;0&amp;&amp;(0===s||-1!==(null===(i=e)||void 0===i?void 0:i.indexOf(n)))?n:s&gt;0?e[0]:20}get localStoragePerPage(){const e=window.OpenProject.guardedLocalStorage("pagination.perPage");return void 0!==e?parseInt(e,10):null}getPaginationOptions(){return this.paginationOptions}get isPerPageKnown(){return!(!this.localStoragePerPage&amp;&amp;!this.paginationOptions)}getPerPage(){return this.localStoragePerPage||this.paginationOptions.perPage}getMaxVisiblePageOptions(){return _.get(this.paginationOptions,"maxVisiblePageOptions",a)}getOptionsTruncationSize(){return _.get(this.paginationOptions,"optionsTruncationSize",r)}setPerPage(e){window.OpenProject.guardedLocalStorage("pagination.perPage",e.toString()),this.paginationOptions.perPage=e}getPerPageOptions(){return this.paginationOptions.perPageOptions}setPerPageOptions(e){this.paginationOptions.perPageOptions=e}loadPaginationOptions(){return this.configuration.initialized.then(()=&gt;(this.paginationOptions={perPage:this.getCachedPerPage(this.configuration.perPageOptions),perPageOptions:this.configuration.perPageOptions,maxVisiblePageOptions:a,optionsTruncationSize:r},this.paginationOptions))}}o.\u0275fac=function(e){return new(e||o)(s.rc(n.a))},o.\u0275prov=s.dc({token:o,factory:o.\u0275fac})},l08T:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("FnNU"),s=i("1G5W"),a=i("fXoL");class r{constructor(){this.state=Object(n.f)(!1)}get visible(){return this.state.getValueOr(!1)}set visible(e){this.state.putValue(e)}observeUntil(e){return this.state.values$().pipe(Object(s.a)(e))}toggleVisibility(){this.state.doModify(e=&gt;!e)}}r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=a.dc({token:r,factory:r.\u0275fac})},"l4W+":function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("kTsZ"),s=i("OGNV"),a=i("fXoL");class r{constructor(e,t){this.halResourceService=e,this.queryFormDm=t}restoreQuery(e,t){let i=this.queryFormDm.buildQueryResource(t);this.restoreFilters(e,i,t.schema),this.restoreColumns(e,i,t.schema),this.restoreSortBy(e,i,t.schema),this.restoreGroupBy(e,i,t.schema),this.restoreOtherProperties(e,i)}restoreFilters(e,t,i){let n=_.map(t.filters,e=&gt;{let t=_.find(i.filtersSchemas.elements,t=&gt;t.filter.allowedValues[0].$href===e.filter.$href);if(!t)return null;let n=t.getFilter(),s=_.find(t.operator.allowedValues,t=&gt;t.$href===e.operator.$href);return s&amp;&amp;(n.operator=s),n.values.length=0,_.each(e.values,e=&gt;n.values.push(e)),n});n=_.compact(n),e.filters.length=0,_.each(n,t=&gt;e.filters.push(t))}restoreColumns(e,t,i){let n=_.map(t.columns,e=&gt;_.find(i.columns.allowedValues,t=&gt;t.$href===e.$href));n=_.compact(n),e.columns.length=0,_.each(n,t=&gt;e.columns.push(t))}restoreSortBy(e,t,i){let n=_.map(t.sortBy,e=&gt;_.find(i.sortBy.allowedValues,t=&gt;t.$href===e.$href));n=_.compact(n),e.sortBy.length=0,_.each(n,t=&gt;e.sortBy.push(t))}restoreGroupBy(e,t,i){let n=_.find(i.groupBy.allowedValues,e=&gt;t.groupBy&amp;&amp;t.groupBy.$href===e.$href);e.groupBy=n}restoreOtherProperties(e,t){_.without(Object.keys(t.$source),"_links","filters").forEach(i=&gt;{e[i]=t[i]}),_.without(Object.keys(t.$source._links),"columns","groupBy","sortBy").forEach(i=&gt;{e[i]=t[i]})}}r.\u0275fac=function(e){return new(e||r)(a.rc(n.a),a.rc(s.a))},r.\u0275prov=a.dc({token:r,factory:r.\u0275fac})},lJGx:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));i("ii2/");var n=i("fXoL"),s=i("ofXK"),a=i("kY/U");function r(e,t){if(1&amp;e&amp;&amp;n.ic(0,"wp-custom-action",1),2&amp;e){const e=t.$implicit,i=n.xc();n.Dc("workPackage",i.workPackage)("action",e)}}class o{get actions(){return this.workPackage.customActions}}o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=n.bc({type:o,selectors:[["wp-custom-actions"]],inputs:{workPackage:"workPackage"},decls:1,vars:1,consts:[["class","custom-action",3,"workPackage","action",4,"ngFor","ngForOf"],[1,"custom-action",3,"workPackage","action"]],template:function(e,t){1&amp;e&amp;&amp;n.ad(0,r,1,2,"wp-custom-action",0),2&amp;e&amp;&amp;n.Dc("ngForOf",t.actions)},directives:[s.p,a.a],encapsulation:2})},lJrL:function(e,t,i){"use strict";function n(...e){let t=document.createElement("i");return t.setAttribute("aria-hidden","true"),t.classList.add(...e),t}i.d(t,"a",(function(){return n}))},lfQJ:function(e,t,i){"use strict";i.d(t,"a",(function(){return g}));var n=i("0lDN"),s=i("fXoL"),a=i("ofXK"),r=i("kor4"),o=i("N5AO");function c(e,t){1&amp;e&amp;&amp;s.ic(0,"li",5)}function l(e,t){if(1&amp;e&amp;&amp;s.ic(0,"op-icon",10),2&amp;e){const e=s.xc(2).$implicit;s.Fc("icon-classes","icon-action-menu ",e.icon,"")}}function d(e,t){if(1&amp;e&amp;&amp;s.ic(0,"op-icon",11),2&amp;e){const e=s.xc(2).$implicit;s.Fc("icon-classes","icon-action-menu-post ",e.postIcon,""),s.Dc("icon-title",e.postIconTitle||"")}}const u=function(e){return{inactive:e}};function h(e,t){if(1&amp;e){const e=s.oc();s.nc(0,"li"),s.nc(1,"a",6),s.vc("accessibleClick",(function(t){s.Sc(e);const i=s.xc().$implicit;return s.xc().handleClick(i,t)})),s.ad(2,l,1,1,"op-icon",7),s.ic(3,"span",8),s.ad(4,d,1,2,"op-icon",9),s.mc(),s.mc()}if(2&amp;e){const e=s.xc().$implicit;s.Tb(1),s.Wb("menu-item ",e.class,""),s.Dc("ngClass",s.Ic(11,u,e.disabled))("accessibleClickStopEvent",!1),s.Ub("href",e.href||"",s.Vc)("aria-disabled",e.disabled)("aria-label",e.ariaLabel||e.linkText),s.Tb(1),s.Dc("ngIf",e.icon),s.Tb(1),s.Dc("textContent",e.linkText),s.Tb(1),s.Dc("ngIf",e.postIcon)}}function p(e,t){if(1&amp;e&amp;&amp;(s.lc(0),s.ad(1,c,1,0,"li",3),s.ad(2,h,5,13,"li",4),s.kc()),2&amp;e){const e=t.$implicit;s.Tb(1),s.Dc("ngIf",e.divider&amp;&amp;!e.hidden),s.Tb(1),s.Dc("ngIf",!e.divider&amp;&amp;!e.hidden)}}const m=function(e){return{"-empty":e}};class g{constructor(e){this.locals=e,this.items=this.locals.items,this.service=this.locals.service}handleClick(e,t){return!e.disabled&amp;&amp;!e.divider&amp;&amp;(!e.onClick(t)||(this.locals.service.close(),t.preventDefault(),t.stopPropagation(),!1))}}g.\u0275fac=function(e){return new(e||g)(s.hc(n.a))},g.\u0275cmp=s.bc({type:g,selectors:[["ng-component"]],decls:3,vars:5,consts:[["ng-class","{'dropdown-anchor-right': locals.showAnchorRight}",1,"dropdown-relative","dropdown","-overflow-in-view"],["role","menu",1,"dropdown-menu",3,"ngClass"],[4,"ngFor","ngForOf"],["class","dropdown-divider",4,"ngIf"],[4,"ngIf"],[1,"dropdown-divider"],["tabindex","0",3,"ngClass","accessibleClickStopEvent","accessibleClick"],[3,"icon-classes",4,"ngIf"],[3,"textContent"],[3,"icon-title","icon-classes",4,"ngIf"],[3,"icon-classes"],[3,"icon-title","icon-classes"]],template:function(e,t){1&amp;e&amp;&amp;(s.nc(0,"div",0),s.nc(1,"ul",1),s.ad(2,p,3,2,"ng-container",2),s.mc(),s.mc()),2&amp;e&amp;&amp;(s.Ub("id",t.locals.contextMenuId),s.Tb(1),s.Dc("ngClass",s.Ic(3,m,0===t.items.length)),s.Tb(1),s.Dc("ngForOf",t.items))},directives:[a.n,a.p,a.q,r.a,o.a],encapsulation:2})},lfyH:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));class n{}},lmDM:function(e,t,i){"use strict";i.d(t,"a",(function(){return D}));var n=i("mRSd"),s=i("wZYP"),a=i("kt6C"),r=i("Zq3F"),o=i("6yP5"),c=i("E2tj"),l=i("itXk"),d=i("fXoL"),u=i("ofXK"),h=i("kor4"),p=i("N5AO");function m(e,t){if(1&amp;e){const e=d.oc();d.nc(0,"li",15),d.nc(1,"a",16),d.vc("accessibleClick",(function(){d.Sc(e);const i=t.$implicit;return d.xc(3).showPage(i)})),d.mc(),d.mc()}if(2&amp;e){const e=t.$implicit;d.Tb(1),d.Dc("textContent",e)}}function g(e,t){if(1&amp;e&amp;&amp;(d.lc(0),d.ad(1,m,2,1,"li",13),d.nc(2,"li",14),d.cd(3,"\u2026"),d.mc(),d.kc()),2&amp;e){const e=d.xc(2);d.Tb(1),d.Dc("ngForOf",e.prePageNumbers)}}function f(e,t){if(1&amp;e&amp;&amp;(d.nc(0,"em"),d.cd(1),d.mc()),2&amp;e){const e=d.xc().$implicit;d.Tb(1),d.dd(e)}}function b(e,t){if(1&amp;e){const e=d.oc();d.nc(0,"a",16),d.vc("accessibleClick",(function(){d.Sc(e);const t=d.xc().$implicit;return d.xc(3).showPage(t)})),d.mc()}if(2&amp;e){const e=d.xc().$implicit;d.Dc("textContent",e)}}const v=function(e){return{"-current":e}};function w(e,t){if(1&amp;e&amp;&amp;(d.nc(0,"li",19),d.ad(1,f,2,1,"em",6),d.ad(2,b,1,1,"a",20),d.mc()),2&amp;e){const e=t.$implicit,i=d.xc(3);d.Dc("ngClass",d.Ic(3,v,e==i.pagination.page)),d.Tb(1),d.Dc("ngIf",e==i.pagination.page),d.Tb(1),d.Dc("ngIf",e!=i.pagination.page)}}function y(e,t){1&amp;e&amp;&amp;(d.nc(0,"li",14),d.cd(1,"\u2026"),d.mc())}function k(e,t){if(1&amp;e&amp;&amp;(d.lc(0),d.ad(1,w,3,5,"li",17),d.ad(2,y,2,0,"li",18),d.kc()),2&amp;e){const e=d.xc(2);d.Tb(1),d.Dc("ngForOf",e.pageNumbers),d.Tb(1),d.Dc("ngIf",e.postPageNumbers.length)}}function C(e,t){if(1&amp;e){const e=d.oc();d.nc(0,"li",22),d.nc(1,"a",16),d.vc("accessibleClick",(function(){d.Sc(e);const i=t.$implicit;return d.xc(3).showPage(i)})),d.mc(),d.mc()}if(2&amp;e){const e=t.$implicit;d.Tb(1),d.Dc("textContent",e)}}function x(e,t){if(1&amp;e&amp;&amp;(d.lc(0),d.ad(1,C,2,1,"li",21),d.kc()),2&amp;e){const e=d.xc(2);d.Tb(1),d.Dc("ngForOf",e.postPageNumbers)}}function j(e,t){if(1&amp;e&amp;&amp;d.ic(0,"span",23),2&amp;e){const e=d.xc(2);d.Dc("textContent",e.text.no_other_page)}}function S(e,t){if(1&amp;e&amp;&amp;(d.nc(0,"li",24),d.ic(1,"op-icon",25),d.ic(2,"span",9),d.mc()),2&amp;e){const e=d.xc(2);d.Tb(2),d.Dc("textContent",e.infoText)}}function T(e,t){if(1&amp;e){const e=d.oc();d.nc(0,"span"),d.nc(1,"a",30),d.vc("accessibleClick",(function(){d.Sc(e);const t=d.xc().$implicit;return d.xc(3).selectPerPage(t)})),d.mc(),d.mc()}if(2&amp;e){const e=d.xc().$implicit;d.Tb(1),d.Dc("textContent",e)}}function P(e,t){if(1&amp;e&amp;&amp;(d.nc(0,"span"),d.cd(1),d.mc()),2&amp;e){const e=d.xc().$implicit;d.Tb(1),d.dd(e)}}function I(e,t){if(1&amp;e&amp;&amp;(d.nc(0,"li",29),d.ad(1,T,2,1,"span",6),d.ad(2,P,2,1,"span",6),d.mc()),2&amp;e){const e=t.$implicit,i=d.xc(3);d.Dc("ngClass",d.Ic(3,v,e==i.pagination.perPage)),d.Tb(1),d.Dc("ngIf",e!=i.pagination.perPage),d.Tb(1),d.Dc("ngIf",e==i.pagination.perPage)}}function _(e,t){if(1&amp;e&amp;&amp;(d.nc(0,"div",26),d.nc(1,"ul",3),d.ic(2,"li",27),d.ad(3,I,3,5,"li",28),d.mc(),d.mc()),2&amp;e){const e=d.xc(2);d.Tb(2),d.Ec("title",e.text.per_page),d.Dc("textContent",e.text.per_page),d.Tb(1),d.Dc("ngForOf",e.perPageOptions)}}function O(e,t){if(1&amp;e){const e=d.oc();d.nc(0,"div",1),d.nc(1,"nav",2),d.nc(2,"ul",3),d.nc(3,"li",4),d.nc(4,"a",5),d.vc("accessibleClick",(function(){d.Sc(e);const t=d.xc();return t.showPage(t.pagination.page-1)})),d.cd(5,"&lt;"),d.mc(),d.mc(),d.ad(6,g,4,1,"ng-container",6),d.ad(7,k,3,2,"ng-container",6),d.ad(8,x,2,1,"ng-container",6),d.nc(9,"li",4),d.nc(10,"a",7),d.vc("accessibleClick",(function(){d.Sc(e);const t=d.xc();return t.showPage(t.pagination.page+1)})),d.cd(11,"&gt;"),d.mc(),d.mc(),d.nc(12,"li",8),d.ic(13,"span",9),d.ad(14,j,1,1,"span",10),d.mc(),d.ad(15,S,3,1,"li",11),d.mc(),d.mc(),d.ad(16,_,4,3,"div",12),d.mc()}if(2&amp;e){const e=d.xc();d.Tb(3),d.Dc("hidden",1==e.pagination.page||!e.showPageSelections),d.Tb(1),d.Ub("aria-label",e.text.label_previous),d.Tb(2),d.Dc("ngIf",e.prePageNumbers.length&gt;0),d.Tb(1),d.Dc("ngIf",e.pageNumbers.length&gt;1),d.Tb(1),d.Dc("ngIf",e.postPageNumbers.length),d.Tb(1),d.Dc("hidden",!(e.pagination.total&amp;&amp;e.pagination.page
                              <e.pagenumbers[e.pagenumbers.length-1])),d.tb(1),d.ub("aria-label",e.text.label_next),d.tb(3),d.dc("textcontent",e.currentrange),d.tb(1),d.dc("ngif",1===e.pagenumbers.length),d.tb(1),d.dc("ngif",e.infotext),d.tb(1),d.dc("ngif",e.showperpageoptions())}}class d="" extends="" n.a{constructor(e,t,i,n,s,a){super(e,t,a),this.paginationservice="e,this.cdRef=t,this.wpTablePagination=i,this.querySpace=n,this.wpTableSortBy=s,this.I18n=a}ngOnInit(){this.paginationService.loadPaginationOptions().then(e=">
                               {this.perPageOptions=e.perPageOptions,this.cdRef.detectChanges()}),this.wpTablePagination.live$().pipe(this.untilDestroyed()).subscribe(e=&gt;{this.pagination=e.current,this.update()}),Object(l.a)([this.querySpace.query.values$(),this.wpTableSortBy.live$()]).pipe(this.untilDestroyed()).subscribe(([e,t])=&gt;{this.showPerPage=this.showPageSelections=!this.isManualSortingMode,this.infoText=this.paginationInfoText(e.results),this.update()})}selectPerPage(e){this.paginationService.setPerPage(e),this.wpTablePagination.updateFromObject({page:1,perPage:e})}showPage(e){this.wpTablePagination.updateFromObject({page:e})}get isManualSortingMode(){return this.wpTableSortBy.isManualSortingMode}paginationInfoText(e){return this.isManualSortingMode&amp;&amp;e.count
                               <e.total?i18n.t("js.work_packages.limited_results",{count:e.count}):void 0}}d.\u0275fac="function(e){return" d(e,t){1&e&&n.ic(0,"op-icon",6)}function="" e='n.xc();n.Tb(1),n.Dc("ngIf",e.error),n.Tb(1),n.Dc("ngIf",e.completed)}}class' extends="" h(e,t){if(1&e&&(n.nc(0,"span",3),n.ad(1,d,1,0,"op-icon",4),n.ad(2,u,1,0,"op-icon",5),n.mc()),2&e){const="" icon-context"],[1,"pagination--options"],[1,"pagination--label",3,"textcontent","title"],["class","pagination--item",3,"ngclass",4,"ngfor","ngforof"],[1,"pagination--item",3,"ngclass"],["role","link","href","",3,"textcontent","accessibleclick"]],template:function(e,t){1&e&&d.ad(0,o,17,11,"div",0),2&e&&d.dc("ngif",t.pagination&&t.isvisible&&t.pagination.total)},directives:[u.q,h.a,u.p,u.n,p.a],encapsulation:2,changedetection:0})},lmkf:function(e,t,i){"use="" n='i("fXoL"),s=i("tk/3"),a=i("wZYP"),r=i("qHU1"),o=i("AEvm"),c=i("ofXK"),l=i("N5AO");function' n.s,this.onsuccess="new" n.s,this.value="0,this.error=!1,this.completed=!1}ngOnInit(){this.file=this.upload[0],this.upload[1].pipe(this.untilDestroyed()).subscribe(e=" new(e||d)(d.hc(a.a),d.hc(d.i),d.hc(r.a),d.hc(c.a),d.hc(o.a),d.hc(s.a))},d.\u0275cmp='d.bc({type:D,selectors:[["wp-table-pagination"]],features:[d.Qb],decls:1,vars:1,consts:[["class","pagination",4,"ngIf"],[1,"pagination"],[1,"pagination--pages"],[1,"pagination--items"],[1,"pagination--item",3,"hidden"],["rel","prev' o.a{constructor(e){super(),this.i18n="e,this.onError=new" p="" pagination-number",3,"ngclass",4,"ngfor","ngforof"],["class","pagination--space",4,"ngif"],[1,"pagination--item","pagination-number",3,"ngclass"],["rel","next","role","link","href","",3,"textcontent","accessibleclick",4,"ngif"],["class","pagination--item="" pagination-number",4,"ngfor","ngforof"],[1,"pagination--item","pagination-number"],["id","pagination-empty-text","tabindex","0",1,"hidden-for-sighted",3,"textcontent"],[1,"pagination--info"],["icon-classes","icon-info1="" p}));var="" start","id","pagination--prev-link","role","link","href","",3,"accessibleclick"],[4,"ngif"],["rel","next","id","pagination--next-link","role","link","href","",1,"pagination--next-link",3,"accessibleclick"],[1,"pagination--range"],[3,"textcontent"],["id","pagination-empty-text","tabindex","0","class","hidden-for-sighted",3,"textcontent",4,"ngif"],["class","pagination--info",4,"ngif"],["class","pagination--options",4,"ngif"],["class","pagination--item",4,"ngfor","ngforof"],[1,"pagination--space"],[1,"pagination--item"],["rel","next","role","link","href","",3,"textcontent","accessibleclick"],["class","pagination--item="" strict";i.d(t,"a",(function(){return="" u(e,t){1&e&&n.ic(0,"op-icon",7)}function="">
                                {switch(e.type){case s.e.Sent:return this.value=5,Object(r.a)(`Uploading file "${this.file.name}" of size ${this.file.size}.`);case s.e.UploadProgress:return this.updateProgress(e);case s.e.Response:return Object(r.a)(`File ${this.fileName} was fully uploaded.`),this.value=100,this.completed=!0,this.onSuccess.emit();default:return}},e=&gt;this.handleError(e))}get fileName(){return this.file&amp;&amp;this.file.name}updateProgress(e){e.total?this.value=Math.round(e.loaded/e.total*100):this.value=10}handleError(e){this.error=!0,this.onError.emit(e)}}p.\u0275fac=function(e){return new(e||p)(n.hc(a.a))},p.\u0275cmp=n.bc({type:p,selectors:[["notifications-upload-progress"]],inputs:{upload:"upload"},outputs:{onError:"onError",onSuccess:"onSuccess"},features:[n.Qb],decls:5,vars:5,consts:[[1,"filename",3,"textContent"],["max","100",3,"hidden","value"],["class","upload-completed",4,"ngIf"],[1,"upload-completed"],["icon-classes","icon-close",4,"ngIf"],["icon-classes","icon-checkmark",4,"ngIf"],["icon-classes","icon-close"],["icon-classes","icon-checkmark"]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"li"),n.ic(1,"span",0),n.nc(2,"progress",1),n.cd(3),n.mc(),n.ad(4,h,3,2,"span",2),n.mc()),2&amp;e&amp;&amp;(n.Tb(1),n.Dc("textContent",t.fileName),n.Tb(1),n.Dc("hidden",t.completed)("value",t.value),n.Tb(1),n.ed("",t.value,"%"),n.Tb(1),n.Dc("ngIf",t.completed||t.error))},directives:[c.q,l.a],encapsulation:2})},m0WY:function(e,t,i){"use strict";i.d(t,"a",(function(){return w}));var n=i("wZYP"),s=(i("ii2/"),i("1uah")),a=i("1G5W"),r=i("IzEk"),o=i("ug4p"),c=i("uSJ+"),l=i("AEvm"),d=i("Hg4z"),u=i("fXoL"),h=i("ofXK"),p=i("4fzr"),m=i("BV52"),g=i("60np");function f(e,t){if(1&amp;e&amp;&amp;(u.nc(0,"div",5),u.nc(1,"div",6),u.nc(2,"div",7),u.ic(3,"h3",8),u.mc(),u.mc(),u.mc()),2&amp;e){const e=u.xc();u.Tb(3),u.Dc("textContent",e.text.relations_header)}}function b(e,t){if(1&amp;e){const e=u.oc();u.nc(0,"div"),u.nc(1,"wp-relations-group",9),u.vc("onToggleGroupBy",(function(){return u.Sc(e),u.xc().toggleGroupBy()})),u.mc(),u.mc()}if(2&amp;e){const e=t.$implicit,i=t.first,n=u.xc();u.Tb(1),u.Dc("header",e)("groupByWorkPackageType",n.groupByWorkPackageType)("firstGroup",i)("relatedWorkPackages",n.relationGroups[e])("workPackage",n.workPackage)}}function v(e,t){if(1&amp;e&amp;&amp;u.ic(0,"wp-relations-create",4),2&amp;e){const e=u.xc();u.Dc("workPackage",e.workPackage)}}class w extends l.a{constructor(e,t,i,n){super(),this.I18n=e,this.wpRelations=t,this.cdRef=i,this.wpCacheService=n,this.relationGroups={},this.relationGroupKeys=[],this.relationsPresent=!1,this.groupByWorkPackageType=!1,this.text={relations_header:this.I18n.t("js.work_packages.tabs.relations")},this.currentRelations=[]}ngOnInit(){this.canAddRelation=!!this.workPackage.addRelation,this.wpRelations.state(this.workPackage.id).values$().pipe(Object(a.a)(Object(d.b)(this))).subscribe(e=&gt;{this.loadedRelations(e)}),this.wpRelations.require(this.workPackage.id),this.wpCacheService.loadWorkPackage(this.workPackage.id).values$().pipe(Object(a.a)(Object(d.b)(this))).subscribe(e=&gt;{this.workPackage=e})}getRelatedWorkPackages(e){let t=e.map(e=&gt;this.wpCacheService.loadWorkPackage(e).values$());return Object(s.a)(...t)}getRelatedWorkPackageId(e){const t=e.ids;return e.to.href===this.workPackage.href?t.from:t.to}toggleGroupBy(){this.groupByWorkPackageType=!this.groupByWorkPackageType,this.buildRelationGroups()}buildRelationGroups(){_.isNil(this.currentRelations)||(this.relationGroups=_.groupBy(this.currentRelations,e=&gt;{if(this.groupByWorkPackageType)return e.type.name;var t=e.relatedBy.normalizedType(this.workPackage);return this.I18n.t("js.relation_labels."+t)}),this.relationGroupKeys=_.keys(this.relationGroups),this.relationsPresent=_.size(this.relationGroups)&gt;0,this.cdRef.detectChanges())}loadedRelations(e){var t=[],i=[];if(0===_.size(e))return this.currentRelations=[],this.buildRelationGroups();_.each(e,e=&gt;{const n=this.getRelatedWorkPackageId(e);t.push(n),i[n]=e}),this.getRelatedWorkPackages(t).pipe(Object(r.a)(1)).subscribe(e=&gt;{this.currentRelations=e.map(e=&gt;(e.relatedBy=i[e.id],e)),this.buildRelationGroups()})}}w.\u0275fac=function(e){return new(e||w)(u.hc(n.a),u.hc(c.a),u.hc(u.i),u.hc(o.a))},w.\u0275cmp=u.bc({type:w,selectors:[["wp-relations"]],inputs:{workPackage:"workPackage"},features:[u.Qb],decls:5,vars:4,consts:[["data-indicator-name","relation-groups",1,"loading-indicator--location"],["class","wp-relations-hierarchy-section",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"workPackage",4,"ngIf"],[3,"workPackage"],[1,"wp-relations-hierarchy-section"],[1,"attributes-group--header"],[1,"attributes-group--header-container"],[1,"attributes-group--header-text",3,"textContent"],[3,"header","groupByWorkPackageType","firstGroup","relatedWorkPackages","workPackage","onToggleGroupBy"]],template:function(e,t){1&amp;e&amp;&amp;(u.nc(0,"div",0),u.ad(1,f,4,1,"div",1),u.ad(2,b,2,5,"div",2),u.ad(3,v,1,1,"wp-relations-create",3),u.ic(4,"wp-relations-hierarchy",4),u.mc()),2&amp;e&amp;&amp;(u.Tb(1),u.Dc("ngIf",!t.relationsPresent),u.Tb(1),u.Dc("ngForOf",t.relationGroupKeys),u.Tb(1),u.Dc("ngIf",t.canAddRelation),u.Tb(1),u.Dc("workPackage",t.workPackage))},directives:[h.q,h.p,p.a,m.a,g.a],encapsulation:2,changeDetection:0})},m3nR:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("SKFm"),s=i("wZYP"),a=(i("ii2/"),i("fXoL")),r=i("8+xT"),o=i("P7xQ"),c=i("N5AO");class l{constructor(e,t){this.I18n=e,this.halEditing=t,this.text={button_more:this.I18n.t("js.button_more")}}}l.\u0275fac=function(e){return new(e||l)(a.hc(s.a),a.hc(n.a))},l.\u0275cmp=a.bc({type:l,selectors:[["wp-details-toolbar"]],inputs:{workPackage:"workPackage"},decls:5,vars:5,consts:[[1,"work-packages--details-toolbar"],[3,"workPackage","showText"],["wpSingleContextMenu","",1,"button","dropdown-relative",3,"wpSingleContextMenu-workPackage"],[1,"button--text",3,"textContent"],["icon-classes","button--dropdown-indicator"]],template:function(e,t){1&amp;e&amp;&amp;(a.nc(0,"div",0),a.ic(1,"wp-watcher-button",1),a.nc(2,"button",2),a.ic(3,"span",3),a.ic(4,"op-icon",4),a.mc(),a.mc()),2&amp;e&amp;&amp;(a.Tb(1),a.Dc("workPackage",t.workPackage)("showText",!0),a.Tb(1),a.Dc("wpSingleContextMenu-workPackage",t.workPackage),a.Ub("accesskey",7),a.Tb(1),a.Dc("textContent",t.text.button_more))},directives:[r.a,o.a,c.a],encapsulation:2})},mMv8:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));class n{constructor(e,t,i,n,s){this.timezoneService=e,this.isReversed=t,this.activities=i,this.activity=n,this.index=s}number(e=!1){return this.orderedIndex(this.index,e)}get date(){return this.activityDate(this.activity)}get dateOfPrevious(){if(this.index&gt;0)return this.activityDate(this.activities[this.index-1])}get href(){return this.activity.href}get version(){return this.activity.version}get isNextDate(){return this.date!==this.dateOfPrevious}isInitial(e=!1){var t=this.number(e);if(0!==this.activity._type.indexOf("Activity"))return!1;if(1===t)return!0;for(;--t&gt;0;){var i=this.orderedIndex(t,e)-1,n=this.activities[i];if(!_.isNil(n)&amp;&amp;0===n._type.indexOf("Activity"))return!1}return!0}activityDate(e){return moment(e.createdAt).format("LL")}orderedIndex(e,t=!1){return t||this.isReversed?this.activities.length-e:e+1}}var s=i("8zkO"),a=i("hgso"),r=i("juWA"),o=i("fXoL");class c extends a.a{constructor(e,t){super(),this.ConfigurationService=e,this.timezoneService=t}get order(){return this.isReversed?"desc":"asc"}get isReversed(){return this.ConfigurationService.commentsSortedInDescendingOrder()}load(e){var t=[],i=[],n=function(e){t.push(e.elements)};return i.push(e.activities.$update().then(n)),e.revisions&amp;&amp;i.push(e.revisions.$update().then(n)),Promise.all(i).then(()=&gt;this.sortedActivityList(t))}sortedActivityList(e,t="createdAt"){let i=_.sortBy(_.flatten(e),t);return this.isReversed?i.reverse():i}info(e,t,i){return new n(this.timezoneService,this.isReversed,e,t,i)}}c.\u0275fac=function(e){return new(e||c)(o.rc(s.a),o.rc(r.a))},c.\u0275prov=o.dc({token:c,factory:c.\u0275fac})},mRSd:function(e,t,i){"use strict";i.d(t,"a",(function(){return I}));var n=i("kt6C"),s=i("U/vl"),a=i("fXoL"),r=i("wZYP"),o=i("AEvm"),c=i("ofXK"),l=i("kor4"),d=i("N5AO");function u(e,t){if(1&amp;e){const e=a.oc();a.nc(0,"li",15),a.nc(1,"a",16),a.vc("accessibleClick",(function(){a.Sc(e);const i=t.$implicit;return a.xc(3).showPage(i)})),a.mc(),a.mc()}if(2&amp;e){const e=t.$implicit;a.Tb(1),a.Dc("textContent",e)}}function h(e,t){if(1&amp;e&amp;&amp;(a.lc(0),a.ad(1,u,2,1,"li",13),a.nc(2,"li",14),a.cd(3,"\u2026"),a.mc(),a.kc()),2&amp;e){const e=a.xc(2);a.Tb(1),a.Dc("ngForOf",e.prePageNumbers)}}function p(e,t){if(1&amp;e&amp;&amp;(a.nc(0,"em"),a.cd(1),a.mc()),2&amp;e){const e=a.xc().$implicit;a.Tb(1),a.dd(e)}}function m(e,t){if(1&amp;e){const e=a.oc();a.nc(0,"a",16),a.vc("accessibleClick",(function(){a.Sc(e);const t=a.xc().$implicit;return a.xc(3).showPage(t)})),a.mc()}if(2&amp;e){const e=a.xc().$implicit;a.Dc("textContent",e)}}const g=function(e){return{"-current":e}};function f(e,t){if(1&amp;e&amp;&amp;(a.nc(0,"li",19),a.ad(1,p,2,1,"em",6),a.ad(2,m,1,1,"a",20),a.mc()),2&amp;e){const e=t.$implicit,i=a.xc(3);a.Dc("ngClass",a.Ic(3,g,e==i.pagination.page)),a.Tb(1),a.Dc("ngIf",e==i.pagination.page),a.Tb(1),a.Dc("ngIf",e!=i.pagination.page)}}function b(e,t){1&amp;e&amp;&amp;(a.nc(0,"li",14),a.cd(1,"\u2026"),a.mc())}function v(e,t){if(1&amp;e&amp;&amp;(a.lc(0),a.ad(1,f,3,5,"li",17),a.ad(2,b,2,0,"li",18),a.kc()),2&amp;e){const e=a.xc(2);a.Tb(1),a.Dc("ngForOf",e.pageNumbers),a.Tb(1),a.Dc("ngIf",e.postPageNumbers.length)}}function w(e,t){if(1&amp;e){const e=a.oc();a.nc(0,"li",22),a.nc(1,"a",16),a.vc("accessibleClick",(function(){a.Sc(e);const i=t.$implicit;return a.xc(3).showPage(i)})),a.mc(),a.mc()}if(2&amp;e){const e=t.$implicit;a.Tb(1),a.Dc("textContent",e)}}function y(e,t){if(1&amp;e&amp;&amp;(a.lc(0),a.ad(1,w,2,1,"li",21),a.kc()),2&amp;e){const e=a.xc(2);a.Tb(1),a.Dc("ngForOf",e.postPageNumbers)}}function k(e,t){if(1&amp;e&amp;&amp;a.ic(0,"span",23),2&amp;e){const e=a.xc(2);a.Dc("textContent",e.text.no_other_page)}}function C(e,t){if(1&amp;e&amp;&amp;(a.nc(0,"li",24),a.ic(1,"op-icon",25),a.ic(2,"span",9),a.mc()),2&amp;e){const e=a.xc(2);a.Tb(2),a.Dc("textContent",e.infoText)}}function x(e,t){if(1&amp;e){const e=a.oc();a.nc(0,"span"),a.nc(1,"a",30),a.vc("accessibleClick",(function(){a.Sc(e);const t=a.xc().$implicit;return a.xc(3).selectPerPage(t)})),a.mc(),a.mc()}if(2&amp;e){const e=a.xc().$implicit;a.Tb(1),a.Dc("textContent",e)}}function j(e,t){if(1&amp;e&amp;&amp;(a.nc(0,"span"),a.cd(1),a.mc()),2&amp;e){const e=a.xc().$implicit;a.Tb(1),a.dd(e)}}function S(e,t){if(1&amp;e&amp;&amp;(a.nc(0,"li",29),a.ad(1,x,2,1,"span",6),a.ad(2,j,2,1,"span",6),a.mc()),2&amp;e){const e=t.$implicit,i=a.xc(3);a.Dc("ngClass",a.Ic(3,g,e==i.pagination.perPage)),a.Tb(1),a.Dc("ngIf",e!=i.pagination.perPage),a.Tb(1),a.Dc("ngIf",e==i.pagination.perPage)}}function T(e,t){if(1&amp;e&amp;&amp;(a.nc(0,"div",26),a.nc(1,"ul",3),a.ic(2,"li",27),a.ad(3,S,3,5,"li",28),a.mc(),a.mc()),2&amp;e){const e=a.xc(2);a.Tb(2),a.Ec("title",e.text.per_page),a.Dc("textContent",e.text.per_page),a.Tb(1),a.Dc("ngForOf",e.perPageOptions)}}function P(e,t){if(1&amp;e){const e=a.oc();a.nc(0,"div",1),a.nc(1,"nav",2),a.nc(2,"ul",3),a.nc(3,"li",4),a.nc(4,"a",5),a.vc("accessibleClick",(function(){a.Sc(e);const t=a.xc();return t.showPage(t.pagination.page-1)})),a.cd(5,"&lt;"),a.mc(),a.mc(),a.ad(6,h,4,1,"ng-container",6),a.ad(7,v,3,2,"ng-container",6),a.ad(8,y,2,1,"ng-container",6),a.nc(9,"li",4),a.nc(10,"a",7),a.vc("accessibleClick",(function(){a.Sc(e);const t=a.xc();return t.showPage(t.pagination.page+1)})),a.cd(11,"&gt;"),a.mc(),a.mc(),a.nc(12,"li",8),a.ic(13,"span",9),a.ad(14,k,1,1,"span",10),a.mc(),a.ad(15,C,3,1,"li",11),a.mc(),a.mc(),a.ad(16,T,4,3,"div",12),a.mc()}if(2&amp;e){const e=a.xc();a.Tb(3),a.Dc("hidden",1==e.pagination.page||!e.showPageSelections),a.Tb(1),a.Ub("aria-label",e.text.label_previous),a.Tb(2),a.Dc("ngIf",e.prePageNumbers.length&gt;0),a.Tb(1),a.Dc("ngIf",e.pageNumbers.length&gt;1),a.Tb(1),a.Dc("ngIf",e.postPageNumbers.length),a.Tb(1),a.Dc("hidden",!(e.pagination.total&amp;&amp;e.pagination.page
                                <e.pagenumbers[e.pagenumbers.length-1])),a.tb(1),a.ub("aria-label",e.text.label_next),a.tb(3),a.dc("textcontent",e.currentrange),a.tb(1),a.dc("ngif",1===e.pagenumbers.length),a.tb(1),a.dc("ngif",e.infotext),a.tb(1),a.dc("ngif",e.showperpageoptions())}}class a.s,this.text='{label_previous:this.I18n.t("js.pagination.pages.previous"),label_next:this.I18n.t("js.pagination.pages.next"),per_page:this.I18n.t("js.label_per_page"),no_other_page:this.I18n.t("js.pagination.no_other_page")},this.currentRange="",this.pageNumbers=[],this.postPageNumbers=[],this.prePageNumbers=[],this.perPageOptions=[]}ngOnInit(){this.paginationService.loadPaginationOptions().then(e=' extends="" i="" o.a{constructor(e,t,i){super(),this.paginationservice="e,this.cdRef=t,this.I18n=i,this.hideForSinglePageResults=!1,this.showPerPage=!0,this.showPageSelections=!0,this.updateResults=new">
                                 {this.perPageOptions=e.perPageOptions,this.pagination=new s.a(1,parseInt(this.totalEntries),e.perPage),this.cdRef.detectChanges()})}update(){this.updateCurrentRangeLabel(),this.updatePageNumbers(),this.cdRef.detectChanges()}selectPerPage(e){this.pagination.perPage=e,this.paginationService.setPerPage(e),this.showPage(1)}showPage(e){this.pagination.page=e,this.updateCurrentRangeLabel(),this.updatePageNumbers(),this.onUpdatedPage(),this.cdRef.detectChanges()}onUpdatedPage(){this.updateResults.emit(this.pagination)}get isVisible(){return!this.hideForSinglePageResults||this.pagination.total&gt;this.pagination.perPage}updateCurrentRangeLabel(){if(this.pagination.total){let e=this.pagination.total,t=this.pagination.getLowerPageBound(),i=this.pagination.getUpperPageBound(this.pagination.total);this.currentRange="("+t+"\xa0-\xa0"+i+"/"+e+")"}else this.currentRange="(0 - 0/0)"}updatePageNumbers(){if(!this.showPageSelections)return this.pageNumbers=[],void(this.postPageNumbers=[]);var e=this.paginationService.getMaxVisiblePageOptions(),t=this.paginationService.getOptionsTruncationSize(),i=[];const n=this.pagination.perPage,s=this.pagination.page;if(n){for(var a=1;a&lt;=Math.ceil(this.pagination.total/n);a++)i.push(a);var r=s-2*t;0&lt;=r&amp;&amp;r&lt;=1?this.postPageNumbers=this.truncatePageNums(i,i.length&gt;=e+2*t,e+t,i.length,0):(this.prePageNumbers=this.truncatePageNums(i,s&gt;=e,0,Math.min(s-Math.ceil(e/2),i.length-e),t),this.postPageNumbers=this.truncatePageNums(i,i.length&gt;=e+2*t,e,i.length,0))}this.pageNumbers=i}showPerPageOptions(){return this.showPerPage&amp;&amp;this.perPageOptions.length&gt;0&amp;&amp;this.pagination.total&gt;this.perPageOptions[0]}truncatePageNums(e,t,i,n,s){if(t){var a=this.paginationService.getOptionsTruncationSize(),r=e.splice(i,n);return r.length&gt;=2*a&amp;&amp;r.splice(s,r.length-a),r}return[]}}I.\u0275fac=function(e){return new(e||I)(a.hc(n.a),a.hc(a.i),a.hc(r.a))},I.\u0275cmp=a.bc({type:I,selectors:[["","tablePagination",""]],inputs:{totalEntries:"totalEntries",hideForSinglePageResults:"hideForSinglePageResults",showPerPage:"showPerPage",showPageSelections:"showPageSelections",infoText:"infoText"},outputs:{updateResults:"updateResults"},features:[a.Qb],attrs:["tablePagination",""],decls:1,vars:1,consts:[["class","pagination",4,"ngIf"],[1,"pagination"],[1,"pagination--pages"],[1,"pagination--items"],[1,"pagination--item",3,"hidden"],["rel","prev start","id","pagination--prev-link","role","link","href","",3,"accessibleClick"],[4,"ngIf"],["rel","next","id","pagination--next-link","role","link","href","",1,"pagination--next-link",3,"accessibleClick"],[1,"pagination--range"],[3,"textContent"],["id","pagination-empty-text","tabindex","0","class","hidden-for-sighted",3,"textContent",4,"ngIf"],["class","pagination--info",4,"ngIf"],["class","pagination--options",4,"ngIf"],["class","pagination--item",4,"ngFor","ngForOf"],[1,"pagination--space"],[1,"pagination--item"],["rel","next","role","link","href","",3,"textContent","accessibleClick"],["class","pagination--item pagination-number",3,"ngClass",4,"ngFor","ngForOf"],["class","pagination--space",4,"ngIf"],[1,"pagination--item","pagination-number",3,"ngClass"],["rel","next","role","link","href","",3,"textContent","accessibleClick",4,"ngIf"],["class","pagination--item pagination-number",4,"ngFor","ngForOf"],[1,"pagination--item","pagination-number"],["id","pagination-empty-text","tabindex","0",1,"hidden-for-sighted",3,"textContent"],[1,"pagination--info"],["icon-classes","icon-info1 icon-context"],[1,"pagination--options"],[1,"pagination--label",3,"textContent","title"],["class","pagination--item",3,"ngClass",4,"ngFor","ngForOf"],[1,"pagination--item",3,"ngClass"],["role","link","href","",3,"textContent","accessibleClick"]],template:function(e,t){1&amp;e&amp;&amp;a.ad(0,P,17,11,"div",0),2&amp;e&amp;&amp;a.Dc("ngIf",t.pagination&amp;&amp;t.isVisible&amp;&amp;t.pagination.total)},directives:[c.q,l.a,c.p,c.n,d.a],encapsulation:2,changeDetection:0})},mg4W:function(e,t,i){"use strict";i.d(t,"a",(function(){return f}));var n=i("fXoL"),s=i("VQC/"),a=i("sjKJ"),r=i("Jui0"),o=i("t8SH"),c=i("wZYP"),l=i("POAS"),d=i("ZOsW"),u=i("3Pt+"),h=i("ofXK"),p=i("ximh");function m(e,t){if(1&amp;e&amp;&amp;(n.ic(0,"b",4),n.cd(1)),2&amp;e){const e=t.searchTerm,i=n.xc();n.Dc("textContent",i.text.add_new_action),n.Tb(1),n.ed(": ",e," ")}}function g(e,t){if(1&amp;e&amp;&amp;(n.nc(0,"div",5),n.cd(1),n.mc()),2&amp;e){const e=t.item,i=t.searchTerm;n.Dc("ngOptionHighlight",i),n.Tb(1),n.dd(e.name)}}class f extends o.a{constructor(e,t,i,s,a,r){super(e,i,t,s),this.I18n=e,this.currentProject=t,this.cdRef=i,this.pathHelper=s,this.versionDm=a,this.halNotification=r,this.openDirectly=!1,this.onCreate=new n.s}ngAfterViewInit(){super.ngAfterViewInit(),this.canCreateNewActionElements().then(e=&gt;{e&amp;&amp;(this.createAllowed=e=&gt;this.createNewVersion(e),this.cdRef.detectChanges())})}canCreateNewActionElements(){return this.currentProject.id?this.versionDm.canCreateVersionInProject(this.currentProject.id).catch(()=&gt;!1):Promise.resolve(!1)}createNewVersion(e){this.versionDm.createVersion(this.getVersionPayload(e)).then(e=&gt;{this.onCreate.emit(e)}).catch(e=&gt;{this.closeSelect(),this.halNotification.handleRawError(e)})}getVersionPayload(e){let t={};return t.name=e,t._links={definingProject:{href:this.pathHelper.api.v3.projects.id(this.currentProject.id).path}},t}}f.\u0275fac=function(e){return new(e||f)(n.hc(c.a),n.hc(a.a),n.hc(n.i),n.hc(r.a),n.hc(s.a),n.hc(l.a))},f.\u0275cmp=n.bc({type:f,selectors:[["version-autocompleter"]],inputs:{openDirectly:"openDirectly"},outputs:{onCreate:"onCreate"},features:[n.Qb],decls:4,vars:13,consts:[["bindLabel","name",3,"ngModel","items","ngClass","addTag","virtualScroll","required","clearable","disabled","typeahead","clearOnBackspace","appendTo","hideSelected","id","ngModelChange","change","open","close","keydown"],["ngSelectComponent",""],["ng-tag-tmp",""],["ng-option-tmp",""],[3,"textContent"],[1,"ng-option-label","ellipsis",3,"ngOptionHighlight"]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"ng-select",0,1),n.vc("ngModelChange",(function(e){return t.model=e}))("change",(function(e){return t.changeModel(e)}))("open",(function(){return t.opened()}))("close",(function(){return t.closed()}))("keydown",(function(e){return t.keyPressed(e)})),n.ad(2,m,2,2,"ng-template",2),n.ad(3,g,2,2,"ng-template",3),n.mc()),2&amp;e&amp;&amp;n.Dc("ngModel",t.model)("items",t.availableValues)("ngClass",t.classes)("addTag",t.createAllowed)("virtualScroll",!0)("required",t.required)("clearable",!t.required)("disabled",t.disabled)("typeahead",t.typeahead)("clearOnBackspace",!1)("appendTo",t.appendTo)("hideSelected",t.hideSelected)("id",t.id)},directives:[d.a,u.m,u.p,h.n,u.x,d.l,d.c,p.a],encapsulation:2})},n9mQ:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("kTsZ"),s=i("Jui0"),a=i("6x6j"),r=i("Mo6U"),o=i("ciXH"),c=i("fXoL");class l extends o.a{constructor(e,t,i){super(e,t),this.halResourceService=e,this.pathHelper=t,this.payloadDm=i}createForm(e=null,t=null){let i=this.extractPayload(e,t);return this.halResourceService.post(this.pathHelper.api.v3.grids.form().toString(),i).toPromise()}create(e,t=null){let i=this.extractPayload(e,t);return this.halResourceService.post(this.pathHelper.api.v3.grids.path,i).toPromise()}update(e,t=null){let i=this.extractPayload(e,t);return this.halResourceService.patch(this.pathHelper.api.v3.grids.id(e.id).toString(),i).toPromise()}updateForm(e,t=null){let i=this.extractPayload(e,t);return this.halResourceService.post(this.pathHelper.api.v3.grids.id(e.idFromLink).form.toString(),i).toPromise()}extractPayload(e=null,t=null){if(e&amp;&amp;t){let i=this.payloadDm.extract(e,t);return i.widgets&amp;&amp;(i.widgets=e.widgets.map(e=&gt;({id:e.id,startRow:e.startRow,endRow:e.endRow,startColumn:e.startColumn,endColumn:e.endColumn,identifier:e.identifier,options:e.options}))),i}return e instanceof r.a?{}:e}listUrl(){return this.pathHelper.api.v3.grids.toString()}oneUrl(e){return this.pathHelper.api.v3.grids.id(e).toString()}}l.\u0275fac=function(e){return new(e||l)(c.rc(n.a),c.rc(s.a),c.rc(a.a))},l.\u0275prov=c.dc({token:l,factory:l.\u0275fac})},nbRO:function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"a",(function(){return s}));const n="wp-table--group-header",s="-collapsed"},nckM:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("UD+K"),s=i("TTfU"),a=i("iMRi"),r=i("fXoL");class o extends n.a{constructor(e,t){super(),this.states=e,this.userDmService=t}load(e){return this.userDmService.load(e)}loadAll(e){const t=e.map(e=&gt;this.load(e));return Promise.all(t).then(()=&gt;{})}get multiState(){return this.states.users}}o.\u0275fac=function(e){return new(e||o)(r.rc(a.a),r.rc(s.a))},o.\u0275prov=r.dc({token:o,factory:o.\u0275fac,providedIn:"root"})},nfBx:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("FnNU"),s=i("Ul5t"),a=i("fXoL");class r{constructor(e){this.helpTextDm=e,this.helpTexts=Object(n.f)()}require(e,t){return this.helpTexts.putFromPromiseIfPristine(()=&gt;this.helpTextDm.loadAll().then(e=&gt;e.elements)),new Promise((i,n)=&gt;{this.helpTexts.valuesPromise().then(()=&gt;i(this.find(e,t)))})}find(e,t){const i=this.helpTexts.getValueOr([]);return _.find(i,i=&gt;i.scope===t&amp;&amp;i.attribute===e)}}r.\u0275fac=function(e){return new(e||r)(a.rc(s.a))},r.\u0275prov=a.dc({token:r,factory:r.\u0275fac,providedIn:"root"})},"oJ+N":function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("+rOU"),s=i("iB+3"),a=i("7ond"),r=i("WgCp"),o=i("ho3E"),c=i("fXoL");class l{constructor(e,t,i,n,s){this.componentFactoryResolver=e,this.FocusHelper=t,this.appRef=i,this.$transitions=n,this.injector=s}setupListener(){jQuery(window).on(o.b,(e,t,i)=&gt;(this.show(t,i),!1))}get bodyPortalHost(){if(!this._portalHostElement){const e=this._portalHostElement=document.createElement("div");e.classList.add("op-external-query-configuration--container"),document.body.appendChild(e),this._bodyPortalHost=new n.d(e,this.componentFactoryResolver,this.appRef,this.injector)}return this._bodyPortalHost}show(e,t,i={}){this.detach();const s=new n.c(this.externalQueryConfigurationComponent(),null,this.injectorFor({callback:t,currentQuery:e,disabledTabs:i}));this.bodyPortalHost.attach(s),this._portalHostElement.style.display="block"}detach(){this.bodyPortalHost.hasAttached()&amp;&amp;(this.bodyPortalHost.detach(),this._portalHostElement.style.display="none")}injectorFor(e){const t=new WeakMap;return e.service=this,t.set(o.a,e),new n.f(this.injector,t)}externalQueryConfigurationComponent(){return r.a}}l.\u0275fac=function(e){return new(e||l)(c.rc(c.l),c.rc(a.a),c.rc(c.f),c.rc(s.O),c.rc(c.A))},l.\u0275prov=c.dc({token:l,factory:l.\u0275fac})},oLh2:function(e,t,i){"use strict";i.d(t,"a",(function(){return g}));i("ii2/");var n=i("nckM"),s=i("juWA"),a=i("wZYP"),r=i("fXoL"),o=i("ofXK"),c=i("0XIV"),l=i("u8Ab");function d(e,t){if(1&amp;e&amp;&amp;r.ic(0,"user-avatar",10),2&amp;e){const e=r.xc(2);r.Ub("data-user-name",e.userName)("data-user-id",e.userId)}}function u(e,t){if(1&amp;e&amp;&amp;r.ic(0,"user-avatar",10),2&amp;e){const e=r.xc(2);r.Ub("data-user-name",e.userName)("data-use-fallback",!0)}}function h(e,t){if(1&amp;e&amp;&amp;(r.nc(0,"span",11),r.ic(1,"a",12),r.mc()),2&amp;e){const e=r.xc(2);r.Tb(1),r.Dc("textContent",e.userName),r.Ub("href",e.userPath,r.Vc)("aria-label",e.userLabel)}}function p(e,t){if(1&amp;e&amp;&amp;r.ic(0,"span",13),2&amp;e){const e=r.xc(2);r.Dc("textContent",e.userName)}}function m(e,t){if(1&amp;e&amp;&amp;(r.nc(0,"div",1),r.nc(1,"div",2),r.ic(2,"activity-link",3),r.mc(),r.ad(3,d,1,2,"user-avatar",4),r.ad(4,u,1,2,"user-avatar",4),r.ad(5,h,2,3,"span",5),r.ad(6,p,1,1,"span",6),r.ic(7,"span",7),r.nc(8,"span",8),r.ic(9,"span",9),r.mc(),r.mc()),2&amp;e){const e=r.xc();r.Tb(2),r.Dc("workPackage",e.workPackage)("activityNo",e.activityNo),r.Tb(1),r.Dc("ngIf",e.activity.author&amp;&amp;e.userName),r.Tb(1),r.Dc("ngIf",!e.activity.author&amp;&amp;e.userName),r.Tb(1),r.Dc("ngIf",e.userActive),r.Tb(1),r.Dc("ngIf",!e.userActive),r.Tb(1),r.Dc("innerHtml",e.revisionLink,r.Tc),r.Tb(2),r.Dc("innerHtml",e.message,r.Tc)}}class g{constructor(e,t,i,n){this.I18n=e,this.timezoneService=t,this.cdRef=i,this.userCacheService=n}ngOnInit(){this.loadAuthor(),this.project=this.workPackage.project,this.revision=this.activity.identifier,this.message=this.activity.message.html;const e=this.activity.showRevision.$link.href,t=this.activity.formattedIdentifier,i=document.createElement("a");i.href=e,i.title=this.revision,i.textContent=this.I18n.t("js.label_committed_link",{revision_identifier:t}),this.revisionLink=this.I18n.t("js.label_committed_at",{committed_revision_link:i.outerHTML,date:this.timezoneService.formattedDatetime(this.activity.createdAt)})}loadAuthor(){void 0===this.activity.author?this.userName=this.activity.authorName:this.userCacheService.require(this.activity.author.idFromLink).then(e=&gt;{this.userId=e.id,this.userName=e.name,this.userActive=e.isActive,this.userAvatar=e.avatar,this.userPath=e.showUser.href,this.userLabel=this.I18n.t("js.label_author",{user:this.userName}),this.cdRef.detectChanges()})}}g.\u0275fac=function(e){return new(e||g)(r.hc(a.a),r.hc(s.a),r.hc(r.i),r.hc(n.a))},g.\u0275cmp=r.bc({type:g,selectors:[["revision-activity"]],inputs:{workPackage:"workPackage",activity:"activity",activityNo:"activityNo"},decls:1,vars:1,consts:[["class","work-package-details-activities-activity-contents",4,"ngIf"],[1,"work-package-details-activities-activity-contents"],[1,"comments-number"],[3,"workPackage","activityNo"],["data-class-list","avatar",4,"ngIf"],["class","user",4,"ngIf"],["class","user",3,"textContent",4,"ngIf"],[1,"revision-activity--revision-link","date",3,"innerHtml"],[1,"user-comment","wiki"],[1,"message",3,"innerHtml"],["data-class-list","avatar"],[1,"user"],[3,"textContent"],[1,"user",3,"textContent"]],template:function(e,t){1&amp;e&amp;&amp;r.ad(0,m,10,8,"div",0),2&amp;e&amp;&amp;r.Dc("ngIf",t.workPackage)},directives:[o.q,c.a,l.a],encapsulation:2,changeDetection:0})},oT5z:function(e,t,i){"use strict";i.d(t,"a",(function(){return et}));var n=i("fXoL"),s=i("5btT"),a=i("J30J"),r=i("V4eP"),o=i("3Pt+"),c=i("oUDv");class l extends r.a{constructor(){super(...arguments),this.shouldFocus="subject"===this.name}}l.\u0275fac=function(e){return d(e||l)},l.\u0275cmp=n.bc({type:l,selectors:[["ng-component"]],features:[n.Qb],decls:1,vars:6,consts:[["type","text",1,"inline-edit--field",3,"focus","disabled","ngModel","id","ngModelChange","keydown","focusout"]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"input",0),n.vc("ngModelChange",(function(e){return t.value=e}))("keydown",(function(e){return t.handler.handleUserKeydown(e)}))("focusout",(function(){return t.handler.onFocusOut()})),n.mc()),2&amp;e&amp;&amp;(n.Dc("focus",t.shouldFocus)("disabled",t.inFlight)("ngModel",t.value)("id",t.handler.htmlId),n.Ub("aria-required",t.required)("required",t.required))},directives:[o.c,c.a,o.x,o.m,o.p],encapsulation:2});const d=n.pc(l);class u extends r.a{constructor(){super(...arguments),this.locale=I18n.locale}}u.\u0275fac=function(e){return h(e||u)},u.\u0275cmp=n.bc({type:u,selectors:[["ng-component"]],features:[n.Qb],decls:1,vars:6,consts:[["type","number",1,"inline-edit--field",3,"disabled","ngModel","id","ngModelChange","keydown","focusout"]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"input",0),n.vc("ngModelChange",(function(e){return t.value=e}))("keydown",(function(e){return t.handler.handleUserKeydown(e)}))("focusout",(function(){return t.handler.onFocusOut()})),n.mc()),2&amp;e&amp;&amp;(n.Dc("disabled",t.inFlight)("ngModel",t.value)("id",t.handler.htmlId),n.Ub("aria-required",t.required)("required",t.required)("lang",t.locale))},directives:[o.s,o.c,o.x,o.m,o.p],encapsulation:2});const h=n.pc(u);var p=i("mrSG"),m=i("juWA"),g=i("wd/R"),f=i("r0MM");class b extends r.a{parser(e){if(!isNaN(e)){let t=parseFloat(e);return g.duration(t,"hours")}return e}formatter(e){return Number(g.duration(e).asHours().toFixed(2))}parseValue(e){if(null===e)return e;let t;return t=e.isValid()?e.toISOString():this.resource[this.name],t}}b.\u0275fac=function(e){return v(e||b)},b.\u0275cmp=n.bc({type:b,selectors:[["ng-component"]],features:[n.Qb],decls:1,vars:5,consts:[["type","number","step","0.01",1,"inline-edit--field",3,"ngModel","disabled","id","ngModelChange","keydown"]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"input",0),n.vc("ngModelChange",(function(e){return t.value=t.parser(e)}))("keydown",(function(e){return t.handler.handleUserKeydown(e)})),n.mc()),2&amp;e&amp;&amp;(n.Dc("ngModel",t.formatter(t.value))("disabled",t.inFlight)("id",t.handler.htmlId),n.Ub("aria-required",t.required)("required",t.required))},directives:[o.s,o.c,o.m,o.p,o.x],encapsulation:2}),Object(p.c)([Object(f.a)(),Object(p.e)("design:type",m.a)],b.prototype,"TimezoneService",void 0);const v=n.pc(b);var w=i("iHm1"),y=i("t8SH");class k{constructor(){this._fields=[]}register(e,t){this._fields.push({attribute:t,component:e})}getAutocompleterOfAttribute(e){let t=_.find(this._fields,t=&gt;t.attribute===e);return t?t.component:void 0}}k.\u0275fac=function(e){return new(e||k)},k.\u0275prov=n.dc({token:k,factory:k.\u0275fac,providedIn:"root"});var C=i("Cfvw"),x=i("vkgz"),j=i("lJxs"),S=i("POAS"),T=i("CS/5");const P=function(e,t,i,n,s,a,r){return{availableValues:e,appendTo:t,model:i,required:n,disabled:s,id:a,finishedLoading:!0,classes:r}};class I extends r.a{constructor(){super(...arguments),this.valuesLoaded=!1,this.appendTo=null,this.hiddenOverflowContainer=".__hidden_overflow_container",this.referenceOutputs={onCreate:e=&gt;this.onCreate(e),onChange:e=&gt;this.onChange(e),onKeydown:e=&gt;this.handler.handleUserKeydown(e,!0),onOpen:()=&gt;this.onOpen(),onClose:()=&gt;this.onClose(),onAfterViewInit:e=&gt;this._autocompleterComponent=e}}initialize(){this.text={requiredPlaceholder:this.I18n.t("js.placeholders.selection"),placeholder:this.I18n.t("js.placeholders.default")},this.valuesLoadingPromise=this.change.getForm().then(()=&gt;this.initialValueLoading())}initialValueLoading(){return this.valuesLoaded=!1,this.loadValues().toPromise()}autocompleterComponent(){let e=this.schema.type;return this.selectAutocompleterRegister.getAutocompleterOfAttribute(e)||y.a}ngOnInit(){super.ngOnInit(),this.appendTo=this.overflowingSelector,this.handler.$onUserActivate.pipe(this.untilDestroyed()).subscribe(()=&gt;{this.valuesLoadingPromise.then(()=&gt;{this._autocompleterComponent.openDirectly=!0})})}get selectedOption(){const e=this.value?this.value.$href:null;return _.find(this.valueOptions,t=&gt;t.$href===e)}set selectedOption(e){let t=_.find(this.availableOptions,t=&gt;t.$href===e.$href);t&amp;&amp;""===t.$href&amp;&amp;(t.$href=null),this.value=t}setValues(e){this.availableOptions=this.sortValues(e),this.addEmptyOption(),this.valueOptions=this.availableOptions.map(e=&gt;this.mapAllowedValue(e))}loadValues(e){let t=this.schema.allowedValues;if(Array.isArray(t))this.setValues(t),this.valuesLoaded=!0;else{if(t&amp;&amp;!this.valuesLoaded)return this.loadValuesFromBackend(e);this.setValues([])}return Object(C.a)(Promise.resolve(this.valueOptions))}loadValuesFromBackend(e){return Object(C.a)(this.allowedValuesFetch(e)).pipe(Object(x.a)(t=&gt;{(void 0===t.count||void 0===t.total||!e&amp;&amp;t.total===t.count)&amp;&amp;(this.valuesLoaded=!0)}),Object(j.a)(t=&gt;void 0===t.count||void 0===t.total||!e&amp;&amp;t.total===t.count||!this.value?t.elements:t.elements.concat([this.value])),Object(x.a)(e=&gt;this.setValues(e)),Object(j.a)(()=&gt;this.valueOptions))}allowedValuesFetch(e){return this.schema.allowedValues.$link.$fetch(this.allowedValuesFilter(e))}addValue(e){this.availableOptions.push(e),this.valueOptions.push({name:e.name,$href:e.$href})}get currentValueInvalid(){return!!(this.value&amp;&amp;!_.some(this.availableOptions,e=&gt;e.$href===this.value.$href)||!this.value&amp;&amp;this.schema.required)}onCreate(e){this.addValue(e),this.selectedOption={name:e.name,$href:e.$href},this.handler.handleUserSubmit()}onOpen(){jQuery(this.hiddenOverflowContainer).one("scroll",()=&gt;{this._autocompleterComponent.closeSelect()})}onClose(){}onChange(e){if(void 0!==e)return this.selectedOption={name:e.name,$href:e.$href},void this.handler.handleUserSubmit();const t=this.getEmptyOption();t&amp;&amp;(this.selectedOption=t,this.handler.handleUserSubmit())}addEmptyOption(){if(this.isRequired())return;void 0===this.getEmptyOption()&amp;&amp;this.availableOptions.unshift({name:this.text.placeholder,$href:""})}isRequired(){return this.schema.required}sortValues(e){return this.halSorting.sort(e)}mapAllowedValue(e){return{name:e.name,$href:e.$href}}allowedValuesFilter(e){return{}}getEmptyOption(){return _.find(this.availableOptions,e=&gt;e.name===this.text.placeholder)}}I.\u0275fac=function(e){return O(e||I)},I.\u0275cmp=n.bc({type:I,selectors:[["ng-component"]],features:[n.Qb],decls:1,vars:11,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs","ndcDynamicOutputs"]],template:function(e,t){1&amp;e&amp;&amp;n.ic(0,"ndc-dynamic",0),2&amp;e&amp;&amp;n.Dc("ndcDynamicComponent",t.autocompleterComponent())("ndcDynamicInputs",n.Nc(3,P,t.valueOptions,t.appendTo,t.selectedOption?t.selectedOption:"",t.required,t.inFlight,t.handler.htmlId,"inline-edit--field "+t.handler.fieldName))("ndcDynamicOutputs",t.referenceOutputs)},directives:[T.c,T.d],encapsulation:2}),Object(p.c)([Object(f.a)(),Object(p.e)("design:type",k)],I.prototype,"selectAutocompleterRegister",void 0),Object(p.c)([Object(f.a)(),Object(p.e)("design:type",S.a)],I.prototype,"halNotification",void 0),Object(p.c)([Object(f.a)(),Object(p.e)("design:type",w.a)],I.prototype,"halSorting",void 0);const O=n.pc(I);var D=i("wZYP"),R=i("ZOsW"),E=i("ofXK"),F=i("32V0");function M(e,t){if(1&amp;e){const e=n.oc();n.nc(0,"edit-field-controls",3),n.vc("onSave",(function(){return n.Sc(e),n.xc().handler.handleUserSubmit()}))("onCancel",(function(){return n.Sc(e),n.xc().handler.handleUserCancel()})),n.mc()}if(2&amp;e){const e=n.xc();n.Dc("fieldController",e.self)("saveTitle",e.text.save)("cancelTitle",e.text.cancel)}}class A extends r.a{constructor(){super(...arguments),this.availableOptions=[],this.text={requiredPlaceholder:this.I18n.t("js.placeholders.selection"),placeholder:this.I18n.t("js.placeholders.default"),save:this.I18n.t("js.inplace.button_save",{attribute:this.schema.name}),cancel:this.I18n.t("js.inplace.button_cancel",{attribute:this.schema.name})},this.appendTo=null,this.hiddenOverflowContainer=".__hidden_overflow_container",this.currentValueInvalid=!1,this.requestFocus=!1}ngOnInit(){this.nullOption={name:this.text.placeholder,$href:null},this.handler.$onUserActivate.pipe(this.untilDestroyed()).subscribe(()=&gt;{this.requestFocus=0===this.availableOptions.length,this.requestFocus||this.openAutocompleteSelectField()}),super.ngOnInit(),this.appendTo=this.overflowingSelector}get value(){const e=this.resource[this.name];return e?e[0]:e}buildSelectedOption(){const e=this.resource[this.name];return e?e.map(e=&gt;this.findValueOption(e)):[]}get selectedOption(){return this._selectedOption}set selectedOption(e){this._selectedOption=e;let t=e=&gt;{let t=_.find(this.availableOptions,t=&gt;t.$href===e.$href)||this.nullOption;return t&amp;&amp;""===t.$href&amp;&amp;(t.$href=null),t};this.resource[this.name]=_.castArray(e).map(e=&gt;t(e))}onOpen(){jQuery(this.hiddenOverflowContainer).one("scroll",()=&gt;{this.ngSelectComponent.close()})}onClose(){}repositionDropdown(){this.ngSelectComponent&amp;&amp;this.ngSelectComponent.dropdownPanel&amp;&amp;setTimeout(()=&gt;this.ngSelectComponent.dropdownPanel.adjustPosition(),0)}openAutocompleteSelectField(){let e=this;window.setTimeout((function(){e.ngSelectComponent.open()}),0)}findValueOption(e){let t;return e&amp;&amp;(t=_.find(this.valueOptions,t=&gt;t.$href===e.$href)),t||this.nullOption}setValues(e,t=!1){t&amp;&amp;e.sort((function(e,t){let i=e.name.toLowerCase(),n=t.name.toLowerCase();return i
                                 <n?-1:i>
                                  n?1:0})),this.availableOptions=e||[],this.valueOptions=this.availableOptions.map(e=&gt;({name:e.name,$href:e.$href})),this._selectedOption=this.buildSelectedOption(),this.checkCurrentValueValidity(),this.availableOptions.length&gt;0&amp;&amp;this.requestFocus&amp;&amp;(this.openAutocompleteSelectField(),this.requestFocus=!1)}initialize(){super.initialize(),this.loadValues()}loadValues(){let e=this.schema.allowedValues;if(Array.isArray(e))this.setValues(e);else{if(this.schema.allowedValues)return this.schema.allowedValues.$load().then(e=&gt;{e.count&gt;0&amp;&amp;"Project"===e.elements[0]._type?this.setValues(e.elements,!0):this.setValues(e.elements)});this.setValues([])}return Promise.resolve()}checkCurrentValueValidity(){this.value?this.currentValueInvalid=!_.some(this.value,e=&gt;_.some(this.availableOptions,t=&gt;t.$href===e.$href)):this.currentValueInvalid=!!this.schema.required}}A.\u0275fac=function(e){return L(e||A)},A.\u0275cmp=n.bc({type:A,selectors:[["ng-component"]],viewQuery:function(e,t){var i;(1&amp;e&amp;&amp;n.Yc(R.a,!0),2&amp;e)&amp;&amp;(n.Pc(i=n.wc())&amp;&amp;(t.ngSelectComponent=i.first))},features:[n.Qb],decls:3,vars:15,consts:[[1,"textarea-wrapper"],["bindLabel","name",3,"ngModel","ngClass","required","clearable","disabled","id","items","virtualScroll","clearSearchOnAdd","multiple","closeOnSelect","appendTo","dropdownPosition","hideSelected","ngModelChange","keydown","open","close","add","remove"],[3,"fieldController","saveTitle","cancelTitle","onSave","onCancel",4,"ngIf"],[3,"fieldController","saveTitle","cancelTitle","onSave","onCancel"]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"div",0),n.nc(1,"ng-select",1),n.vc("ngModelChange",(function(e){return t.selectedOption=e}))("keydown",(function(e){return t.handler.handleUserKeydown(e,!0)}))("open",(function(){return t.onOpen()}))("close",(function(){return t.onClose()}))("add",(function(){return t.repositionDropdown()}))("remove",(function(){return t.repositionDropdown()})),n.mc(),n.ad(2,M,1,3,"edit-field-controls",2),n.mc()),2&amp;e&amp;&amp;(n.Tb(1),n.Dc("ngModel",t.selectedOption)("ngClass","inline-edit--field -multi-select")("required",t.required)("clearable",!t.required)("disabled",t.inFlight)("id",t.handler.htmlId)("items",t.valueOptions)("virtualScroll",!0)("clearSearchOnAdd",!0)("multiple",!0)("closeOnSelect",!1)("appendTo",t.appendTo)("dropdownPosition","top")("hideSelected",!0),n.Tb(1),n.Dc("ngIf",!t.handler.inEditMode))},directives:[R.a,o.m,o.p,E.n,o.x,E.q,F.a],encapsulation:2}),Object(p.c)([Object(f.a)(),Object(p.e)("design:type",D.a)],A.prototype,"I18n",void 0);const L=n.pc(A);class q extends r.a{constructor(){super(...arguments),this.locale=I18n.locale}}q.\u0275fac=function(e){return $(e||q)},q.\u0275cmp=n.bc({type:q,selectors:[["ng-component"]],features:[n.Qb],decls:1,vars:6,consts:[["type","number","step","any",1,"inline-edit--field",3,"disabled","ngModel","id","ngModelChange","keydown","focusout"]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"input",0),n.vc("ngModelChange",(function(e){return t.value=e}))("keydown",(function(e){return t.handler.handleUserKeydown(e)}))("focusout",(function(){return t.handler.onFocusOut()})),n.mc()),2&amp;e&amp;&amp;(n.Dc("disabled",t.inFlight)("ngModel",t.value)("id",t.handler.htmlId),n.Ub("aria-required",t.required)("required",t.required)("lang",t.locale))},directives:[o.s,o.c,o.x,o.m,o.p],encapsulation:2});const $=n.pc(q);class V extends r.a{updateValue(e){this.value=e,this.handler.handleUserSubmit()}}V.\u0275fac=function(e){return N(e||V)},V.\u0275cmp=n.bc({type:V,selectors:[["ng-component"]],features:[n.Qb],decls:1,vars:4,consts:[["type","checkbox",1,"inline-edit--field","inline-edit--boolean-field",3,"checked","disabled","id","change","keydown"]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"input",0),n.vc("change",(function(){return t.updateValue(!t.value)}))("keydown",(function(e){return t.handler.handleUserKeydown(e)})),n.mc()),2&amp;e&amp;&amp;(n.Dc("checked",t.value)("disabled",t.inFlight)("id",t.handler.htmlId),n.Ub("aria-required",t.required))},encapsulation:2});const N=n.pc(V);var H=i("RhL0"),z=i("iuWW"),B=i("IzEk");const Q=function(e,t,i,n,s,a,r,o,c){return{availableValues:e,appendTo:t,model:i,required:n,disabled:s,typeahead:a,id:r,finishedLoading:o,hideSelected:!0,classes:c}};class W extends I{constructor(){super(...arguments),this.requests=new z.a(e=&gt;this.loadValues(e),Object(z.b)(this.halNotification))}initialValueLoading(){return this.valuesLoaded=!1,new Promise(e=&gt;{this.requests.output$.pipe(Object(B.a)(1)).subscribe(t=&gt;{e(t)}),this.requests.input$.next("")})}get typeahead(){return!this.valuesLoaded&amp;&amp;this.requests.input$}allowedValuesFilter(e){let t=super.allowedValuesFilter(e);if(e){let i=new H.a;i.add("subjectOrId","**",[e]),t={filters:i.toJson()}}return t}mapAllowedValue(e){if(e.id){let t=e.type?`${e.type.name} `:"",i=e.subject||e.name;return{name:`${t}#${e.id} ${i}`,$href:e.$href}}return e}}W.\u0275fac=function(e){return U(e||W)},W.\u0275cmp=n.bc({type:W,selectors:[["ng-component"]],features:[n.Qb],decls:2,vars:15,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs","ndcDynamicOutputs"]],template:function(e,t){1&amp;e&amp;&amp;(n.ic(0,"ndc-dynamic",0),n.yc(1,"async")),2&amp;e&amp;&amp;n.Dc("ndcDynamicComponent",t.autocompleterComponent())("ndcDynamicInputs",n.Oc(5,Q,[n.zc(1,3,t.requests.output$),t.appendTo,t.selectedOption?t.selectedOption:"",t.required,t.inFlight,t.typeahead,t.handler.htmlId,t.requests.loading$,"inline-edit--field "+t.handler.fieldName]))("ndcDynamicOutputs",t.referenceOutputs)},directives:[T.c,T.d],pipes:[E.a],encapsulation:2});const U=n.pc(W);var X=i("ecJW");class Y extends r.a{onValueSelected(e){this.value=this.parser(e)}parser(e){return g(e,"YYYY-MM-DD",!0).isValid()?e:null}formatter(e){if(g(e,"YYYY-MM-DD",!0).isValid()){var t=this.timezoneService.parseDate(e);return this.timezoneService.formattedISODate(t)}return null}get defaultDate(){return"dueDate"===this.name?this.resource.startDate:""}}Y.\u0275fac=function(e){return G(e||Y)},Y.\u0275cmp=n.bc({type:Y,selectors:[["ng-component"]],features:[n.Qb],decls:2,vars:6,consts:[["tabindex","-1",3,"initialDate","onChange","onClose"],["type","text",1,"inline-edit--field",3,"ngModel","disabled","id","ngModelChange","keydown"]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"op-date-picker",0),n.vc("onChange",(function(e){return t.onValueSelected(e)}))("onClose",(function(){return t.handler.handleUserSubmit()})),n.nc(1,"input",1),n.vc("ngModelChange",(function(e){return t.value=t.parser(e)}))("keydown",(function(e){return t.handler.handleUserKeydown(e)})),n.mc(),n.mc()),2&amp;e&amp;&amp;(n.Dc("initialDate",t.defaultDate),n.Tb(1),n.Dc("ngModel",t.formatter(t.value))("disabled",t.inFlight)("id",t.handler.htmlId),n.Ub("required",t.required)("placeholder",t.placeholder))},directives:[X.a,o.c,o.m,o.p,o.x],encapsulation:2}),Object(p.c)([Object(f.a)(),Object(p.e)("design:type",m.a)],Y.prototype,"timezoneService",void 0);const G=n.pc(Y);var K=i("VNOR"),Z=i("9oW/"),J=i("mg4W");function ee(e){return"-"+(e=ie(e)).replace(" ","-")}function te(e,t){return e=ie(e),t.t("js.grid.widgets.project_status."+e.replace(" ","_"))}function ie(e){return e||"not set"}function ne(e,t){if(1&amp;e&amp;&amp;(n.ic(0,"span",3),n.nc(1,"span",4),n.cd(2),n.mc()),2&amp;e){const e=t.item;n.Dc("ngClass",e.colorClass),n.Tb(1),n.Dc("ngClass",e.colorClass),n.Tb(1),n.dd(e.name)}}function se(e,t){if(1&amp;e&amp;&amp;(n.ic(0,"span",3),n.nc(1,"span",4),n.cd(2),n.mc()),2&amp;e){const e=t.item;n.Dc("ngClass",e.colorClass),n.Tb(1),n.Dc("ngClass",e.colorClass),n.Tb(1),n.dd(e.name)}}class ae extends r.a{constructor(){super(...arguments),this._availableStatusCodes=["not set","off track","at risk","on track"],this.currentStatusCode="not set",this.availableStatuses=this._availableStatusCodes.map(e=&gt;({code:e,name:te(e,this.I18n),colorClass:ee(e)})),this.hiddenOverflowContainer="#content-wrapper",this.appendToContainer="body"}ngOnInit(){this.currentStatusCode=null===this.resource.status?"not set":this.resource.status;let e=this;window.setTimeout((function(){e.ngSelectComponent.open()}),0)}onChange(){this.resource.status="not set"===this.currentStatusCode?null:this.currentStatusCode,this.handler.handleUserSubmit()}onOpen(){setTimeout(()=&gt;{const e=this.ngSelectComponent;e&amp;&amp;e.dropdownPanel&amp;&amp;e.dropdownPanel._updatePosition(),jQuery(this.hiddenOverflowContainer).one("scroll.autocompleteContainer",()=&gt;{this.ngSelectComponent.close()})},25)}onClose(){jQuery(this.hiddenOverflowContainer).off("scroll.autocompleteContainer")}}ae.\u0275fac=function(e){return re(e||ae)},ae.\u0275cmp=n.bc({type:ae,selectors:[["ng-component"]],viewQuery:function(e,t){var i;(1&amp;e&amp;&amp;n.Yc(R.a,!0),2&amp;e)&amp;&amp;(n.Pc(i=n.wc())&amp;&amp;(t.ngSelectComponent=i.first))},features:[n.Qb],decls:3,vars:5,consts:[["bindLabel","name","bindValue","code",1,"project-status",3,"items","ngModel","appendTo","hideSelected","disabled","ngModelChange","open","close","change"],["ng-label-tmp",""],["ng-option-tmp",""],[1,"project-status--bulb",3,"ngClass"],[1,"project-status--name",3,"ngClass"]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"ng-select",0),n.vc("ngModelChange",(function(e){return t.currentStatusCode=e}))("open",(function(){return t.onOpen()}))("close",(function(){return t.onClose()}))("change",(function(){return t.onChange()})),n.ad(1,ne,3,3,"ng-template",1),n.ad(2,se,3,3,"ng-template",2),n.mc()),2&amp;e&amp;&amp;n.Dc("items",t.availableStatuses)("ngModel",t.currentStatusCode)("appendTo",t.appendToContainer)("hideSelected",!0)("disabled",t.inFlight)},directives:[R.a,o.m,o.p,R.e,R.c,E.n],styles:[""]}),Object(p.c)([Object(f.a)(),Object(p.e)("design:type",D.a)],ae.prototype,"I18n",void 0);const re=n.pc(ae);class oe extends r.a{constructor(){super(...arguments),this.shouldFocus=!1}get value(){if(!this.schema)return"";const e=this.resource[this.name];return e&amp;&amp;e.raw||""}set value(e){this.resource[this.name]={raw:e}}}oe.\u0275fac=function(e){return ce(e||oe)},oe.\u0275cmp=n.bc({type:oe,selectors:[["ng-component"]],features:[n.Qb],decls:1,vars:6,consts:[["type","text",1,"inline-edit--field",3,"focus","disabled","ngModel","id","ngModelChange","keydown","focusout"]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"input",0),n.vc("ngModelChange",(function(e){return t.value=e}))("keydown",(function(e){return t.handler.handleUserKeydown(e)}))("focusout",(function(){return t.handler.onFocusOut()})),n.mc()),2&amp;e&amp;&amp;(n.Dc("focus",t.shouldFocus)("disabled",t.inFlight)("ngModel",t.value)("id",t.handler.htmlId),n.Ub("aria-required",t.required)("required",t.required))},directives:[o.c,c.a,o.x,o.m,o.p],encapsulation:2});const ce=n.pc(oe);var le=i("gh2L"),de=i("j/Ak"),ue=i("iuLl");const he=function(e,t,i,n,s,a,r,o,c){return{availableValues:e,appendTo:t,model:i,required:n,disabled:s,typeahead:a,id:r,finishedLoading:o,hideSelected:!0,classes:c}};class pe extends W{initialize(){super.initialize(),this.referenceOutputs&amp;&amp;(this.referenceOutputs.modeSwitch=e=&gt;{this.valuesLoaded=!1;let t=this.requests.lastRequestedValue;this.requests.input$.next('_/&amp;"()____'),this.requests.input$.next(t)})}autocompleterComponent(){return ue.a}isRequired(){return!0}allowedValuesFetch(e){return this.recentWorkPackageIds?super.allowedValuesFetch(e):this.timeEntryDm.list({filters:[["user_id","=",["me"]]],sortBy:[["updated_on","desc"]],pageSize:30}).then(t=&gt;(this.recentWorkPackageIds=t.elements.map(e=&gt;e.workPackage.idFromLink).filter((e,t,i)=&gt;i.indexOf(e)===t),super.allowedValuesFetch(e)))}allowedValuesFilter(e){let t=new H.a;return"recent"===this._autocompleterComponent.mode&amp;&amp;t.add("id","=",this.recentWorkPackageIds),e&amp;&amp;t.add("subjectOrId","**",[e]),{filters:t.toJson()}}sortValues(e){return"recent"===this._autocompleterComponent.mode?this.sortValuesByRecentIds(e):super.sortValues(e)}sortValuesByRecentIds(e){return e.sort((e,t)=&gt;this.recentWorkPackageIds.indexOf(e.id)-this.recentWorkPackageIds.indexOf(t.id))}}pe.\u0275fac=function(e){return me(e||pe)},pe.\u0275cmp=n.bc({type:pe,selectors:[["ng-component"]],features:[n.Qb],decls:2,vars:15,consts:[[3,"ndcDynamicComponent","ndcDynamicInputs","ndcDynamicOutputs"]],template:function(e,t){1&amp;e&amp;&amp;(n.ic(0,"ndc-dynamic",0),n.yc(1,"async")),2&amp;e&amp;&amp;n.Dc("ndcDynamicComponent",t.autocompleterComponent())("ndcDynamicInputs",n.Oc(5,he,[n.zc(1,3,t.requests.output$),t.appendTo,t.selectedOption?t.selectedOption:"",t.required,t.inFlight,t.typeahead,t.handler.htmlId,t.requests.loading$,"inline-edit--field "+t.handler.fieldName]))("ndcDynamicOutputs",t.referenceOutputs)},directives:[T.c,T.d],pipes:[E.a],encapsulation:2}),Object(p.c)([Object(f.a)(),Object(p.e)("design:type",de.a)],pe.prototype,"timeEntryDm",void 0);const me=n.pc(pe);var ge=i("4rda");class fe extends ge.a{}class be extends ge.a{get valueString(){return null==this.value?"":this.value.toLocaleString(this.I18n.locale,{useGrouping:!0,maximumFractionDigits:20})}}class ve extends ge.a{get value(){return parseInt(this.resource[this.name])}isEmpty(){return isNaN(this.value)}}class we extends ge.a{get value(){return this.schema?this.attribute&amp;&amp;this.attribute.name:null}}var ye=i("Q2x2");var ke=i("E+lO");class Ce extends ge.a{render(e,t,i={}){let n=document.createElement("div");n.classList.add("read-value--html","wiki","highlight","-multiline"),i.rtl&amp;&amp;n.classList.add("-rtl"),n.innerHTML=t,e.innerHTML="",e.appendChild(n),ke.DynamicBootstrapper.bootstrapOptionalEmbeddable(this.appRef,n)}get isFormattable(){return!0}get value(){if(!this.schema)return null;const e=this.resource[this.name];return e&amp;&amp;e.html?this.unescape(e.html):""}unescape(e){return e?class{static get UNESCAPED_EXPRESSION(){return"{{"}static get ESCAPED_EXPRESSION(){return"{{ \\$root\\.DOUBLE_LEFT_CURLY_BRACE }}"}static escape(e){return e.replace(new RegExp(this.UNESCAPED_EXPRESSION,"g"),this.ESCAPED_EXPRESSION)}static unescape(e){return e.replace(new RegExp(this.ESCAPED_EXPRESSION,"g"),this.UNESCAPED_EXPRESSION)}}.unescape(e):""}}Object(p.c)([Object(f.a)(),Object(p.e)("design:type",n.f)],Ce.prototype,"appRef",void 0);class xe extends ge.a{constructor(){super(...arguments),this.derivedText=this.I18n.t("js.label_value_derived_from_children")}get valueString(){return this.timezoneService.formattedDuration(this.value)}get derivedPropertyName(){return"derived"+this.name.charAt(0).toUpperCase()+this.name.slice(1)}get derivedValue(){return this.resource[this.derivedPropertyName]}get derivedValueString(){const e=this.derivedValue;return e?this.timezoneService.formattedDuration(e):this.placeholder}render(e,t){if(this.isEmpty())return void(e.textContent=this.placeholder);e.classList.add("split-time-field");let i=this.value,n=i&amp;&amp;this.timezoneService.toHours(i)||0;0!==n&amp;&amp;this.renderActual(e,t);let s=this.derivedValue;s&amp;&amp;0!==this.timezoneService.toHours(s)&amp;&amp;this.renderDerived(e,this.derivedValueString,0!==n)}renderActual(e,t){const i=document.createElement("span");i.textContent=t,i.title=this.valueString,i.classList.add("-actual-value"),e.appendChild(i)}renderDerived(e,t,i){const n=document.createElement("span");n.setAttribute("title",this.texts.empty),n.textContent="("+(i?"+":"")+t+")",n.title=`${this.derivedValueString} ${this.derivedText}`,n.classList.add("-derived-value"),i&amp;&amp;n.classList.add("-with-actual-value"),e.appendChild(n)}get title(){return null}isEmpty(){const e=this.value,t=this.derivedValue,i=!e||0===this.timezoneService.toHours(e),n=!t||0===this.timezoneService.toHours(t);return i&amp;&amp;n}}Object(p.c)([Object(f.a)(),Object(p.e)("design:type",m.a)],xe.prototype,"timezoneService",void 0);var je=i("RGDJ"),Se=i("2Qcm");class Te extends ge.a{get shouldHighlight(){if(!1===this.context.options.colorize)return!1;const e=!!this.viewHighlighting&amp;&amp;this.viewHighlighting.shouldHighlightInline(this.name);return"table"!==this.context.container||e}}Object(p.c)([Object(f.a)(Se.a,null),Object(p.e)("design:type",Se.a)],Te.prototype,"viewHighlighting",void 0);class Pe extends Te{render(e,t){if(super.render(e,t),this.shouldHighlight&amp;&amp;this.canOverdue){const t=this.timezoneService.daysFromToday(this.value);e.classList.add(je.a.overdueDate(t))}}get canOverdue(){return-1!==["dueDate","date"].indexOf(this.name)}get valueString(){return this.value?this.timezoneService.formattedDate(this.value):""}}Object(p.c)([Object(f.a)(),Object(p.e)("design:type",m.a)],Pe.prototype,"timezoneService",void 0);class Ie extends ge.a{get valueString(){return this.value?this.timezoneService.formattedDatetime(this.value):""}}Object(p.c)([Object(f.a)(),Object(p.e)("design:type",m.a)],Ie.prototype,"timezoneService",void 0);class _e extends ge.a{get valueString(){return this.translatedValue()}get placeholder(){return this.translatedValue()}translatedValue(){return this.value?this.I18n.t("js.general_text_yes"):this.I18n.t("js.general_text_no")}isEmpty(){return!1}}var Oe=i("Nvnm");class De extends ge.a{constructor(){super(...arguments),this.text={none:this.I18n.t("js.filter.noneElement")}}get value(){return this.resource[this.name]}get title(){return this.isEmpty()?this.text.none:this.value.name}get wpId(){return this.isEmpty()?null:this.value.$loaded?this.value.id:this.value.href.match(/(\d+)$/)[0]}get valueString(){return`#${this.wpId} ${this.title}`}isEmpty(){return!this.value}get unknownAttribute(){return!1}}var Re=i("Jui0"),Ee=i("NNMa"),Fe=i("yQm5");class Me extends xe{constructor(){super(...arguments),this.text={linkTitle:this.I18n.t("js.work_packages.message_view_spent_time")}}render(e,t){if(!this.value)return;const i=document.createElement("a");if(i.textContent=t,i.setAttribute("title",this.text.linkTitle),this.resource.project){const e=this.resource.id.toString();this.projectCacheService.require(this.resource.project.idFromLink).then(t=&gt;{const n=Fe(this.PathHelper.projectTimeEntriesPath(t.identifier)).search({work_package_id:e}).toString();i.href=n})}e.innerHTML="",e.appendChild(i)}}Object(p.c)([Object(f.a)(),Object(p.e)("design:type",Re.a)],Me.prototype,"PathHelper",void 0),Object(p.c)([Object(f.a)(),Object(p.e)("design:type",Ee.a)],Me.prototype,"projectCacheService",void 0);class Ae extends ge.a{constructor(){super(...arguments),this.text={linkTitle:this.I18n.t("js.work_packages.message_successful_show_in_fullscreen")}}get value(){return this.resource.isNew?null:this.resource[this.name]}render(e,t){this.value&amp;&amp;(e.textContent=t)}isEmpty(){return!1}}var Le=i("Mo6U");class qe extends Te{render(e,t){super.render(e,t),this.shouldHighlight&amp;&amp;this.addHighlight(e)}get value(){return this.schema?this.attribute&amp;&amp;this.attribute.name:null}addHighlight(e){if(this.attribute instanceof Le.a){const t=je.a.inlineClass(this.name,this.attribute.id);e.classList.add(t)}}}class $e extends qe{get shouldHighlight(){return!0}}var Ve=i("2dSq"),Ne=i("ouar");class He extends ge.a{get value(){return this.schema?this.attribute&amp;&amp;this.attribute.name:null}render(e,t){this.placeholder===t?this.renderEmpty(e):(this.outlet=this.userDisplayPortal.create(e,[this.attribute]),this.portalCleanup.add(()=&gt;this.outlet.dispose()))}}Object(p.c)([Object(f.a)(),Object(p.e)("design:type",Ve.a)],He.prototype,"userDisplayPortal",void 0),Object(p.c)([Object(f.a)(),Object(p.e)("design:type",Ne.a)],He.prototype,"portalCleanup",void 0);class ze extends ye.a{render(e,t){const i=this.value;e.innerHTML="",e.setAttribute("title",i.join(", ")),0===i.length?this.renderEmpty(e):this.renderValues(this.attribute,e)}renderValues(e,t){const i=document.createDocumentFragment();if(this.renderAbridgedValues(t,e),e.length&gt;2){const t=document.createElement("span");t.innerHTML="... ",i.appendChild(t);const n=this.optionDiv(e.length.toString(),"badge","-secondary");i.appendChild(n)}t.appendChild(i)}renderAbridgedValues(e,t){const i=_.take(t,2);this.outlet=this.userDisplayPortal.create(e,i),this.portalCleanup.add(()=&gt;this.outlet.dispose())}}Object(p.c)([Object(f.a)(),Object(p.e)("design:type",Ve.a)],ze.prototype,"userDisplayPortal",void 0),Object(p.c)([Object(f.a)(),Object(p.e)("design:type",Ne.a)],ze.prototype,"portalCleanup",void 0);var Be=i("PkGb"),Qe=i("iB+3"),We=i("cd/7");class Ue extends Ae{constructor(){super(...arguments),this.uiStateBuilder=new We.a(this.$state,this.keepTab)}render(e,t){if(!this.value)return;let i=this.uiStateBuilder.linkToShow(this.value,t,this.value);e.appendChild(i)}}Object(p.c)([Object(f.a)(),Object(p.e)("design:type",Qe.G)],Ue.prototype,"$state",void 0),Object(p.c)([Object(f.a)(),Object(p.e)("design:type",Be.a)],Ue.prototype,"keepTab",void 0);class Xe extends ge.a{render(e,t){const i=this.value;e.innerHTML=`\n
                                  <span class="project-status--bulb ${ee(i)}">
                                  </span>
                                  \n
                                  <span class="project-status--name ${ee(i)}">
                                   ${te(i,this.I18n)}
                                  </span>
                                  \n
                                  <span class="project-status--pulldown-icon icon icon-pulldown">
                                  </span>
                                  \n    `}}class Ye extends ge.a{get value(){if(!this.schema)return null;const e=this.resource[this.name];return e&amp;&amp;e.raw||""}}class Ge extends De{constructor(){super(...arguments),this.text={linkTitle:this.I18n.t("js.work_packages.message_successful_show_in_fullscreen"),none:this.I18n.t("js.filter.noneElement")},this.uiStateBuilder=new We.a(this.$state,this.keepTab)}render(e,t){if(this.isEmpty())return void(e.innerText=this.placeholder);let i=this.uiStateBuilder.linkToShow(this.wpId,this.text.linkTitle,this.valueString);e.innerHTML="",e.appendChild(i)}get writable(){return!1}get valueString(){return"#"+this.wpId}}Object(p.c)([Object(f.a)(),Object(p.e)("design:type",Qe.G)],Ge.prototype,"$state",void 0),Object(p.c)([Object(f.a)(),Object(p.e)("design:type",Be.a)],Ge.prototype,"keepTab",void 0);var Ke=i("u4T9"),Ze=i("8ggW"),Je=i("Xmgp");class et{}et.\u0275mod=n.fc({type:et}),et.\u0275inj=n.ec({factory:function(e){return new(e||et)},providers:[Ne.a,{provide:n.c,useFactory:function(e,t){return()=&gt;{e.defaultFieldType="text",e.addFieldType(l,"text",["String"]).addFieldType(u,"integer",["Integer"]).addFieldType(b,"duration",["Duration"]).addFieldType(I,"select",["Priority","Status","Type","User","Version","TimeEntriesActivity","Category","CustomOption","Project"]).addFieldType(A,"multi-select",["[]CustomOption","[]User"]).addFieldType(q,"float",["Float"]).addFieldType(W,"workPackage",["WorkPackage"]).addFieldType(V,"boolean",["Boolean"]).addFieldType(Y,"date",["Date"]).addFieldType(K.a,"wiki-textarea",["Formattable"]).addFieldType(ae,"project_status",["ProjectStatus"]).addFieldType(Z.a,"_comment",["comment"]),e.addSpecificFieldType("TimeEntry",oe,"comment",["comment"]).addSpecificFieldType("TimeEntry",pe,"workPackage",["WorkPackage"]),t.register(J.a,"Version"),t.register(le.a,"WorkPackage")}},deps:[s.a,k],multi:!0},{provide:n.c,useFactory:function(e){return()=&gt;{e.defaultFieldType="text",e.addFieldType(fe,"text",["String"]).addFieldType(be,"float",["Float"]).addFieldType(ve,"integer",["Integer"]).addFieldType(qe,"highlight",["Status","Priority"]).addFieldType($e,"type",["Type"]).addFieldType(we,"resource",["Project","TimeEntriesActivity","Version","Category","CustomOption"]).addFieldType(ye.a,"resources",["[]CustomOption"]).addFieldType(ze,"users",["[]User"]).addFieldType(Ce,"formattable",["Formattable"]).addFieldType(xe,"duration",["Duration"]).addFieldType(Pe,"date",["Date"]).addFieldType(Ie,"datetime",["DateTime"]).addFieldType(_e,"boolean",["Boolean"]).addFieldType(Oe.a,"progress",["percentageDone"]).addFieldType(Ge,"work_package",["WorkPackage"]).addFieldType(Ae,"id",["id"]).addFieldType(Xe,"project_status",["ProjectStatus"]).addFieldType(He,"user",["User"]),e.addSpecificFieldType("WorkPackage",Ue,"id",["id"]).addSpecificFieldType("WorkPackage",Me,"spentTime",["spentTime"]).addSpecificFieldType("TimeEntry",Ye,"comment",["comment"]).addSpecificFieldType("TimeEntry",De,"work_package",["workPackage"])}},deps:[a.a],multi:!0}],imports:[[Ke.a,Ze.a,Je.a]]})},oUDv:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("7ond"),s=i("fXoL");class a{constructor(e,t){this.FocusHelper=e,this.elementRef=t,this.priority=0}ngAfterViewInit(){this.updateFocus()}updateFocus(){if(this.condition){const e=jQuery(this.elementRef.nativeElement);this.FocusHelper.focusElement(e,this.priority)}}}a.\u0275fac=function(e){return new(e||a)(s.hc(n.a),s.hc(s.q))},a.\u0275dir=s.cc({type:a,selectors:[["","focus",""]],inputs:{condition:["focus","condition"],priority:["focusPriority","priority"]}})},ooSb:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i("/cHX"),s=i("lJrL"),a=i("PkGb"),r=i("cd/7"),o=i("iB+3");class c extends n.a{constructor(){super(...arguments),this.identifier="open-details-action",this.uiStatebuilder=new r.a(this.injector.get(o.G),this.injector.get(a.a)),this.text={button:this.I18n.t("js.button_open_details")}}buildElement(){let e=this.uiStatebuilder.linkToDetails(this.workPackage.id,this.text.button,"");return e.classList.add("wp-table--details-link",n.b,"hidden-for-mobile"),e.appendChild(Object(s.a)("icon","icon-info2")),e}}class l extends n.a{constructor(){super(...arguments),this.identifier="open-context-menu-action",this.text={linkTitle:this.I18n.t("js.label_open_context_menu")}}buildElement(){let e=document.createElement("a");return e.href="#",e.classList.add(n.c,n.b),e.title=this.text.linkTitle,e.appendChild(Object(s.a)("icon","icon-show-more-horizontal")),e}}var d=i("fXoL");class u{constructor(e){this.injector=e,this.actions=[(e,t)=&gt;new c(e,t),(e,t)=&gt;new l(e,t)]}setActions(...e){this.actions=e}render(e){let t=this.actions.map(t=&gt;t(this.injector,e).buildElement());return _.compact(t)}}u.\u0275fac=function(e){return new(e||u)(d.rc(d.A))},u.\u0275prov=d.dc({token:u,factory:u.\u0275fac})},oqKi:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");class s{constructor(){}get isEmpty(){return!this.name}setIfFirst(e,t){this.isEmpty&amp;&amp;e&amp;&amp;(this.name=e,this.params=t)}}s.\u0275fac=function(e){return new(e||s)},s.\u0275prov=n.dc({token:s,factory:s.\u0275fac})},ouar:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");class s{constructor(){this.portalCallbacks=[]}add(e){this.portalCallbacks.push(e)}clear(){this.portalCallbacks.forEach(e=&gt;e()),this.portalCallbacks=[]}}s.\u0275fac=function(e){return new(e||s)},s.\u0275prov=n.dc({token:s,factory:s.\u0275fac})},p5fp:function(e,t,i){"use strict";i.d(t,"a",(function(){return p}));var n=i("xLNn"),s=i("wZYP"),a=i("l08T"),r=i("F5Dh"),o=i("Hg4z"),c=i("fXoL"),l=i("ofXK"),d=i("N5AO");function u(e,t){if(1&amp;e&amp;&amp;c.ic(0,"span",4),2&amp;e){const e=c.xc();c.Dc("textContent",e.filterCount)}}const h=function(e){return{"-active":e}};class p extends n.a{constructor(e,t,i,n){super(e),this.I18n=e,this.cdRef=t,this.wpFiltersService=i,this.wpTableFilters=n,this.initialized=!1,this.buttonId="work-packages-filter-toggle-button",this.iconClass="icon-filter"}ngOnInit(){this.setupObserver()}get labelKey(){return"js.button_filter"}get textKey(){return"js.toolbar.filter"}get label(){return this.prefix+this.text.label}get filterCount(){return this.count}performAction(e){this.toggleVisibility()}toggleVisibility(){this.wpFiltersService.toggleVisibility()}setupObserver(){this.wpTableFilters.live$().pipe(this.untilDestroyed()).subscribe(()=&gt;{this.count=this.wpTableFilters.currentlyVisibleFilters.length,this.initialized=!0,this.cdRef.detectChanges()}),this.wpFiltersService.observeUntil(Object(o.b)(this)).subscribe(()=&gt;{this.isActive=this.wpFiltersService.visible,this.cdRef.detectChanges()})}}p.\u0275fac=function(e){return new(e||p)(c.hc(s.a),c.hc(c.i),c.hc(a.a),c.hc(r.a))},p.\u0275cmp=c.bc({type:p,selectors:[["wp-filter-button"]],features:[c.Qb],decls:5,vars:11,consts:[[1,"button",3,"disabled","ngClass","click"],[3,"icon-classes"],[1,"button--text"],["class","badge -secondary",3,"textContent",4,"ngIf"],[1,"badge","-secondary",3,"textContent"]],template:function(e,t){1&amp;e&amp;&amp;(c.nc(0,"button",0),c.vc("click",(function(e){return t.performAction(e)})),c.ic(1,"op-icon",1),c.nc(2,"span",2),c.cd(3),c.ad(4,u,1,1,"span",3),c.mc(),c.mc()),2&amp;e&amp;&amp;(c.Dc("disabled",t.disabled)("ngClass",c.Ic(9,h,t.isActive)),c.Ub("id",t.buttonId)("accesskey",t.accessKey)("title",t.label)("aria-label",t.label),c.Tb(1),c.Fc("icon-classes","",t.iconClass," button--icon"),c.Tb(2),c.ed(" ",t.buttonText," "),c.Tb(1),c.Dc("ngIf",t.initialized))},directives:[l.n,d.a,l.q],encapsulation:2,changeDetection:0})},pL6k:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("kt6C"),s=i("fXoL");class a{constructor(e){this.paginationService=e}buildQueryString(e){if(!e)return;let t=[];return _.each(e,(e,i)=&gt;{e&amp;&amp;(Array.isArray(e)||(e=[e]),_.each(e,e=&gt;{null!==e&amp;&amp;"object"==typeof e&amp;&amp;(e=JSON.stringify(e)),t.push(encodeURIComponent(i)+"="+encodeURIComponent(e))}))}),t.join("&amp;")}encodeQueryJsonParams(e,t={}){let i={};return i=this.encodeColumns(i,e),i=this.encodeSums(i,e),i=this.encodeTimelineVisible(i,e),i=this.encodeHighlightingMode(i,e),i=this.encodeHighlightedAttributes(i,e),i.hi=!!e.showHierarchies,i.g=_.get(e.groupBy,"id",""),i=this.encodeSortBy(i,e),i=this.encodeFilters(i,e.filters),i.pa=t.page,i.pp=t.perPage,i.dr=e.displayRepresentation,JSON.stringify(i)}encodeColumns(e,t){return e.c=t.columns.map((function(e){return e.id})),e}encodeSums(e,t){return t.sums&amp;&amp;(e.s=t.sums),e}encodeHighlightingMode(e,t){return t.highlightingMode&amp;&amp;(t.persisted||"inline"!==t.highlightingMode)&amp;&amp;(e.hl=t.highlightingMode),e}encodeHighlightedAttributes(e,t){return"inline"===t.highlightingMode&amp;&amp;Array.isArray(t.highlightedAttributes)&amp;&amp;t.highlightedAttributes.length&gt;0&amp;&amp;(e.hla=t.highlightedAttributes.map(e=&gt;e.id)),e}encodeSortBy(e,t){return t.sortBy&amp;&amp;(e.t=t.sortBy.map((function(e){return e.id.replace("-",":")})).join()),e}encodeFilters(e,t){return t&amp;&amp;t.length&gt;0?e.f=t.map(e=&gt;({n:e.id,o:e.operator.id,v:_.map(e.values,e=&gt;this.queryFilterValueToParam(e))})):e.f=[],e}encodeTimelineVisible(e,t){return t.timelineVisible?(e.tv=t.timelineVisible,_.isEmpty(t.timelineLabels)||(e.tll=JSON.stringify(t.timelineLabels)),e.tzl=t.timelineZoomLevel):e.tv=!1,e}buildV3GetQueryFromJsonParams(e){var t={pageSize:this.paginationService.getPerPage()};if(!e)return t;var i=JSON.parse(e);if(i.c&amp;&amp;(t["columns[]"]=i.c.map(e=&gt;e)),i.s&amp;&amp;(t.showSums=i.s),t.timelineVisible=i.tv,i.tv&amp;&amp;(i.tll&amp;&amp;(t.timelineLabels=i.tll),i.tzl&amp;&amp;(t.timelineZoomLevel=i.tzl)),i.dr&amp;&amp;(t.displayRepresentation=i.dr),i.hl&amp;&amp;(t.highlightingMode=i.hl),i.hla&amp;&amp;(t["highlightedAttributes[]"]=i.hla.map(e=&gt;e)),!1!==i.hi&amp;&amp;!0!==i.hi||(t.showHierarchies=i.hi),t.groupBy=_.get(i,"g",""),i.f){var n=i.f.map((function(e){var t={operator:decodeURIComponent(e.o)};if(e.v){var i=Array.isArray(e.v)?e.v:[e.v];_.extend(t,{values:i})}const n={};return n[e.n]=t,n}));t.filters=JSON.stringify(n)}return i.t&amp;&amp;(t.sortBy=JSON.stringify(i.t.split(",").map(e=&gt;e.split(":")))),i.pa&amp;&amp;(t.offset=i.pa),i.pp&amp;&amp;(t.pageSize=i.pp),t}buildV3GetQueryFromQueryResource(e,t={},i={}){var n={};return n["columns[]"]=this.buildV3GetColumnsFromQueryResource(e),n.showSums=e.sums,n.timelineVisible=!!e.timelineVisible,e.timelineVisible&amp;&amp;(n.timelineZoomLevel=e.timelineZoomLevel,n.timelineLabels=JSON.stringify(e.timelineLabels)),e.highlightingMode&amp;&amp;(n.highlightingMode=e.highlightingMode),e.highlightedAttributes&amp;&amp;"inline"===e.highlightingMode&amp;&amp;(n["highlightedAttributes[]"]=e.highlightedAttributes.map(e=&gt;e.href)),e.displayRepresentation&amp;&amp;(n.displayRepresentation=e.displayRepresentation),n.showHierarchies=!!e.showHierarchies,n.groupBy=_.get(e.groupBy,"id",""),n.filters=this.buildV3GetFiltersAsJson(e.filters,i),n.sortBy=this.buildV3GetSortByFromQuery(e),_.extend(t,n)}queryFilterValueToParam(e){return"boolean"==typeof e?e?"t":"f":e?e.id?e.id.toString():e.$href&amp;&amp;e.$href.match(/^\/api\/v3\/string_objects/i)?e.$href.match(/value=([^&amp;]+)/)[1].toString():e.$href?e.$href.split("/").pop().toString():e.toString():""}buildV3GetColumnsFromQueryResource(e){return e.columns?e.columns.map(e=&gt;e.id||e.idFromLink):e._links.columns?e._links.columns.map(e=&gt;{let t=e.href;return this.idFromHref(t)}):void 0}buildV3GetFilters(e,t={}){return e.map(e=&gt;{let i=this.buildV3GetFilterIdFromFilter(e),n=this.buildV3GetOperatorIdFromFilter(e),s=this.buildV3GetValuesFromFilter(e).map(e=&gt;(_.each(t,(t,i)=&gt;{e=e.replace(`{${i}}`,t)}),e));const a={};return a[i]={operator:n,values:s},a})}buildV3GetFiltersAsJson(e,t={}){return JSON.stringify(this.buildV3GetFilters(e,t))}buildV3GetFilterIdFromFilter(e){let t=e.filter?e.filter.$href:e._links.filter.href;return this.idFromHref(t)}buildV3GetOperatorIdFromFilter(e){if(e.operator)return e.operator.id||e.operator.idFromLink;{let t=e._links.operator.href;return this.idFromHref(t)}}buildV3GetValuesFromFilter(e){return e.values?_.map(e.values,e=&gt;this.queryFilterValueToParam(e)):_.map(e._links.values,e=&gt;this.idFromHref(e.href))}buildV3GetSortByFromQuery(e){let t=(e.sortBy?e.sortBy:e._links.sortBy).map(e=&gt;{if(e.id)return e.id;{let t=e.href;return this.idFromHref(t)}});return JSON.stringify(t.map(e=&gt;e.split("-")))}idFromHref(e){let t=e.substring(e.lastIndexOf("/")+1,e.length);return decodeURIComponent(t)}}a.\u0275fac=function(e){return new(e||a)(s.rc(n.a))},a.\u0275prov=s.dc({token:a,factory:a.\u0275fac,providedIn:"root"})},pQre:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i("mrSG"),s=i("iB+3"),a=i("PkGb"),r=i("r0MM"),o=i("fXoL");class c{constructor(e){this.injector=e}goBack(e=!1){const t=this.$state.current.data.baseRoute||"work-packages.partitioned.list";!this.backRoute||this.backRoute.name.includes("new")?this.$state.go(t,this.$state.params):this.keepTab.isDetailsState(this.backRoute.parent)?e?this.$state.go(t,this.$state.params):this.$state.go(this.keepTab.currentDetailsState,this.$state.params):this.$state.go(this.backRoute.name,this.backRoute.params)}goToBaseState(){const e=this.$state.current.data.baseRoute||"work-packages.partitioned.list";this.$state.go(e,this.$state.params)}sync(e){const t=e.from(),i=e.to();if(t.name&amp;&amp;t.data&amp;&amp;i.data&amp;&amp;t.data.parent!==i.data.parent){const i=Object.assign({},e.params("from"));this.backRoute={name:t.name,params:i,parent:t.data.parent}}}set backRoute(e){this._backRoute=e}get backRoute(){return this._backRoute}}c.\u0275fac=function(e){return new(e||c)(o.rc(o.A))},c.\u0275prov=o.dc({token:c,factory:c.\u0275fac,providedIn:"root"}),Object(n.c)([Object(r.a)(),Object(n.e)("design:type",s.G)],c.prototype,"$state",void 0),Object(n.c)([Object(r.a)(),Object(n.e)("design:type",a.a)],c.prototype,"keepTab",void 0)},pSHE:function(e,t,i){"use strict";i.d(t,"a",(function(){return k}));var n=i("E2tj");class s{constructor(e,t){this.querySpace=e,this.injector=t}get applies(){return!0}onNewOrder(e){}canPickup(e){return!0}handleDrop(e,t){return Promise.resolve(void 0)}changeShadowElement(e,t=!1){return t?e.classList.remove("-dragged"):e.classList.add("-dragged"),!0}}var a=i("mrSG"),r=i("wyKs"),o=i("VgZ9"),c=i("CBsm"),l=i("ug4p"),d=i("5+Sy"),u=i("r0MM");class h extends s{get applies(){return this.wpTableHierarchies.isEnabled}canPickup(e){return!!e.changeParent}handleDrop(e,t){return this.determineParent(t).then(t=&gt;this.relationHierarchyService.changeParent(e,t))}determineParent(e){let t=e.previousElementSibling;var i=null;if(null!==t&amp;&amp;!this.isFlatList(t)){if(t.className.indexOf(Object(d.d)())&gt;=0){let e=this.findRelationRowRoot(t);if(null==e)return Promise.resolve(null);t=e}let e=t.dataset.workPackageId;i=this.isHiearchyRoot(t,e)?e:this.loadParentOfWP(e)}return Promise.resolve(i)}findRelationRowRoot(e){let t=e.previousElementSibling;for(;null!==t;){if(t.className.indexOf(Object(d.d)())&lt;0)return t;t=t.previousElementSibling}return null}isFlatList(e){const t=e.className.indexOf(Object(c.c)(""))&gt;=0,i=e.className.indexOf(Object(c.d)(""))&gt;=0;return!(t||i)}isHiearchyRoot(e,t){return e.classList.contains(Object(c.d)(t))}loadParentOfWP(e){return this.wpCacheService.require(e).then(e=&gt;Promise.resolve(e.parent.id))}}Object(a.c)([Object(u.a)(),Object(a.e)("design:type",r.a)],h.prototype,"wpTableHierarchies",void 0),Object(a.c)([Object(u.a)(),Object(a.e)("design:type",o.a)],h.prototype,"relationHierarchyService",void 0),Object(a.c)([Object(u.a)(),Object(a.e)("design:type",l.a)],h.prototype,"wpCacheService",void 0);var p=i("AeZM"),m=i("SKFm"),g=i("nbRO"),f=i("T9ri"),b=i("POAS"),v=i("/C7M");class w extends s{get applies(){return this.wpTableGroupBy.isEnabled}canPickup(e){const t=this.groupedAttribute;return null!==t&amp;&amp;e.isAttributeEditable(t)}handleDrop(e,t){const i=this.halEditing.changeFor(e),n=this.getValueForGroup(t);return i.projectedResource[this.groupedAttribute]=n,this.halEditing.save(i).then(e=&gt;this.halEvents.push(e.resource,{eventType:"updated"})).catch(t=&gt;this.halNotification.handleRawError(t,e))}getValueForGroup(e){const t=Object(d.a)(e,`.${g.b}`),i=this.groups.find(e=&gt;Object(f.b)(e)===t.dataset.groupIdentifier);if(!i)return null;if(i._links&amp;&amp;i._links.valueLink){const e=i._links.valueLink;return 1===e.length?e[0]:e}return i.value}get groupedAttribute(){const e=this.wpTableGroupBy.current;return e?e.id:null}get groups(){return this.querySpace.groups.value||[]}}Object(a.c)([Object(u.a)(),Object(a.e)("design:type",p.a)],w.prototype,"wpTableGroupBy",void 0),Object(a.c)([Object(u.a)(),Object(a.e)("design:type",m.a)],w.prototype,"halEditing",void 0),Object(a.c)([Object(u.a)(),Object(a.e)("design:type",v.a)],w.prototype,"halEvents",void 0),Object(a.c)([Object(u.a)(),Object(a.e)("design:type",b.a)],w.prototype,"halNotification",void 0);var y=i("fXoL");class k{constructor(){this.register=[h,w]}add(e){this.register.push(e)}get(e){const t=e.get(n.a);return this.register.map(i=&gt;new i(t,e)).find(e=&gt;e.applies)||new s(t,e)}}k.\u0275fac=function(e){return new(e||k)},k.\u0275prov=y.dc({token:k,factory:k.\u0275fac})},pXZk:function(e,t,i){"use strict";i.d(t,"c",(function(){return s})),i.d(t,"b",(function(){return a})),i.d(t,"a",(function(){return r}));var n=i("Ncnr");const s="wp-table--cell-td",a="wp-table--cell-container";class r{constructor(e){this.injector=e,this.fieldRenderer=new n.a(this.injector,"table")}build(e,t){const i=document.createElement("td"),r=t.id;i.classList.add(s,r),"subject"===r&amp;&amp;i.classList.add("-max");const o=e.schema[r];o&amp;&amp;"User"===o.type&amp;&amp;i.classList.add("-contains-avatar");const c=document.createElement("span");c.classList.add(a,n.c,r);const l=this.fieldRenderer.render(e,r,null);return c.appendChild(l),i.appendChild(c),i}refresh(e,t,i){const n=this.fieldRenderer.render(t,i,null);e.innerHTML="",e.appendChild(n)}}},"q/QC":function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i("wZYP"),s=(i("AA01"),i("Y41n")),a=i("AEvm"),r=i("Hg4z"),o=i("fXoL"),c=i("3Pt+"),l=i("oUDv");class d extends a.a{constructor(e){super(),this.I18n=e,this.shouldFocus=!1,this.filterChanged=new s.a(Object(r.b)(this)),this.text={enter_text:this.I18n.t("js.work_packages.description_enter_text")}}get value(){return this.filter.values[0]}set value(e){e.length?this.filter.values[0]=e:this.filter.values.length=0,this.filterChanged.emit(this.filter)}}d.\u0275fac=function(e){return new(e||d)(o.hc(n.a))},d.\u0275cmp=o.bc({type:d,selectors:[["filter-string-value"]],inputs:{shouldFocus:"shouldFocus",filter:"filter"},outputs:{filterChanged:"filterChanged"},features:[o.Qb],decls:3,vars:7,consts:[[3,"id"],["requried","true","type","text",1,"advanced-filters--text-field",3,"ngModel","focus","id","name","ngModelChange"],[1,"hidden-for-sighted",3,"for","textContent"]],template:function(e,t){1&amp;e&amp;&amp;(o.nc(0,"div",0),o.nc(1,"input",1),o.vc("ngModelChange",(function(e){return t.value=e})),o.mc(),o.ic(2,"label",2),o.mc()),2&amp;e&amp;&amp;(o.Fc("id","div-values-",t.filter.name,""),o.Tb(1),o.Fc("id","values-",t.filter.name,""),o.Fc("name","v[",t.filter.name,"]"),o.Dc("ngModel",t.value)("focus",t.shouldFocus),o.Tb(1),o.Fc("for","values-",t.filter.name,""),o.Dc("textContent",t.text.enter_text))},directives:[c.c,c.m,c.p,l.a],encapsulation:2})},qHU1:function(e,t,i){"use strict";i.d(t,"c",(function(){return s})),i.d(t,"a",(function(){return a})),i.d(t,"b",(function(){return r}));var n=i("AytR");function s(e){n.a.production||e()}function a(e,...t){s(()=&gt;console.log(`[DEBUG] ${e}`,...t))}function r(e,t){if(n.a.production)return t();var i=performance.now(),s=t(),a=performance.now();return console.log(`%c${e} completed in ${a-i} milliseconds.`,"color:#00A093;"),s}},qc15:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("POAS"),s=i("ug4p"),a=i("fXoL");class r extends n.a{constructor(e,t){super(e),this.injector=e,this.wpCacheService=t}showSave(e,t=!1){let i={message:this.I18n.t("js.notice_successful_"+(t?"create":"update"))};this.addWorkPackageFullscreenLink(i,e),this.NotificationsService.addSuccess(i)}showCustomError(e,t){return"urn:openproject-org:api:v3:errors:UpdateConflict"===e.errorIdentifier?(this.NotificationsService.addError({message:e.message,type:"error",link:{text:this.I18n.t("js.hal.error.update_conflict_refresh"),target:()=&gt;this.wpCacheService.require(t.id,!0)}}),!0):super.showCustomError(e,t)}addWorkPackageFullscreenLink(e,t){this.$state.includes("work-packages.show")||(e.link={target:()=&gt;this.$state.go("work-packages.show.activity",{workPackageId:t.id}),text:this.I18n.t("js.work_packages.message_successful_show_in_fullscreen")})}}r.\u0275fac=function(e){return new(e||r)(a.rc(a.A),a.rc(s.a))},r.\u0275prov=a.dc({token:r,factory:r.\u0275fac})},qg8y:function(e,t,i){"use strict";i.d(t,"a",(function(){return s})),i.d(t,"b",(function(){return a}));var n=i("Mo6U");const s="urn:openproject-org:api:v3:queries:directions:asc",a="urn:openproject-org:api:v3:queries:directions:desc";n.a;n.a},qs3h:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i("iB+3"),s=i("ug4p"),a=i("wZYP"),r=i("AEvm"),o=i("fXoL"),c=i("ofXK"),l=i("m0WY");function d(e,t){if(1&amp;e&amp;&amp;(o.nc(0,"div",1),o.nc(1,"div",2),o.ic(2,"wp-relations",3),o.mc(),o.mc()),2&amp;e){const e=o.xc();o.Tb(2),o.Dc("workPackage",e.workPackage)}}class u extends r.a{constructor(e,t,i){super(),this.I18n=e,this.$transition=t,this.wpCacheService=i}ngOnInit(){const e=this.workPackageId||this.$transition.params("to").workPackageId;this.wpCacheService.loadWorkPackage(e).values$().pipe(this.untilDestroyed()).subscribe(e=&gt;{this.workPackageId=e.id,this.workPackage=e})}}u.\u0275fac=function(e){return new(e||u)(o.hc(a.a),o.hc(n.J),o.hc(s.a))},u.\u0275cmp=o.bc({type:u,selectors:[["wp-relations-tab"]],inputs:{workPackageId:"workPackageId"},features:[o.Qb],decls:1,vars:1,consts:[["class","detail-panel-description detail-panel--relations detail-panel--autocomplete-target",4,"ngIf"],[1,"detail-panel-description","detail-panel--relations","detail-panel--autocomplete-target"],[1,"detail-panel-description-content"],[3,"workPackage"]],template:function(e,t){1&amp;e&amp;&amp;o.ad(0,d,3,1,"div",0),2&amp;e&amp;&amp;o.Dc("ngIf",t.workPackage)},directives:[c.q,l.a],encapsulation:2})},qtzK:function(e,t,i){"use strict";i.d(t,"a",(function(){return f}));var n=i("mrSG"),s=i("Q6HB"),a=i("iMRi"),r=i("VgZ9"),o=i("eyhC"),c=i("13ri"),l=i("9+6k"),d=i("4lR/"),u=i("TM9v"),h=i("IaZ+"),p=i("UUNb"),m=i("iB+3"),g=i("r0MM");class f extends l.a{constructor(e,t,i,n={},s=!0){super(e.get(d.a)),this.injector=e,this.workPackageId=t,this.$element=i,this.additionalPositionArgs=n,this.allowSplitScreenActions=s,this.workPackage=this.states.workPackages.get(this.workPackageId).value,this.selectedWorkPackages=this.getSelectedWorkPackages(),this.permittedActions=this.WorkPackageContextMenuHelper.getPermittedActions(this.selectedWorkPackages,u.a,this.allowSplitScreenActions),this.baseRoute=this.$state.current.data.baseRoute||this.$state.current.name,this.items=this.buildItems()}get locals(){return{contextMenuId:"work-package-context-menu",items:this.items}}positionArgs(e){let t=super.positionArgs(e);return _.assign(t,this.additionalPositionArgs),t}triggerContextMenuAction(e){const t=e.link;switch(e.key){case"delete":this.deleteSelectedWorkPackages();break;case"edit":this.editSelectedWorkPackages(t);break;case"copy":this.copySelectedWorkPackages(t);break;case"relation-new-child":this.wpRelationsHierarchyService.addNewChildWp(this.baseRoute,this.workPackage);break;default:window.location.href=t}}deleteSelectedWorkPackages(){let e=this.getSelectedWorkPackages();this.opModalService.show(p.a,this.injector,{workPackages:e})}editSelectedWorkPackages(e){this.getSelectedWorkPackages().length&gt;1&amp;&amp;(window.location.href=e)}copySelectedWorkPackages(e){let t=this.getSelectedWorkPackages();if(t.length&gt;1)return void(window.location.href=e);let i={copiedFromWorkPackageId:t[0].id};this.$state.go(this.baseRoute+".copy",i)}getSelectedWorkPackages(){let e=this.wpTableSelection.getSelectedWorkPackages();return 0===e.length?[this.workPackage]:(-1===e.indexOf(this.workPackage)&amp;&amp;e.push(this.workPackage),e)}buildItems(){let e=this.permittedActions.map(e=&gt;({class:void 0,disabled:!1,linkText:e.text,href:e.href,icon:null!=e.icon?e.icon:`icon-${e.key}`,onClick:t=&gt;(!e.href||!c.a.isClickedWithModifier(t))&amp;&amp;(this.triggerContextMenuAction(e),!0)}));return this.workPackage.isNew||(e.unshift({disabled:!1,icon:"icon-view-fullscreen",class:"openFullScreenView",href:this.$state.href("work-packages.show",{workPackageId:this.workPackageId}),linkText:I18n.t("js.button_open_fullscreen"),onClick:e=&gt;!c.a.isClickedWithModifier(e)&amp;&amp;(this.$state.go("work-packages.show",{workPackageId:this.workPackageId}),!0)}),this.allowSplitScreenActions&amp;&amp;e.unshift({disabled:!1,icon:"icon-view-split",class:"detailsViewMenuItem",href:this.$state.href(this.baseRoute+".details.overview",{workPackageId:this.workPackageId}),linkText:I18n.t("js.button_open_details"),onClick:e=&gt;!c.a.isClickedWithModifier(e)&amp;&amp;(this.$state.go(this.baseRoute+".details.overview",{workPackageId:this.workPackageId}),!0)})),e}}Object(n.c)([Object(g.a)(),Object(n.e)("design:type",a.a)],f.prototype,"states",void 0),Object(n.c)([Object(g.a)(),Object(n.e)("design:type",r.a)],f.prototype,"wpRelationsHierarchyService",void 0),Object(n.c)([Object(g.a)(),Object(n.e)("design:type",h.b)],f.prototype,"opModalService",void 0),Object(n.c)([Object(g.a)(),Object(n.e)("design:type",m.G)],f.prototype,"$state",void 0),Object(n.c)([Object(g.a)(),Object(n.e)("design:type",o.a)],f.prototype,"wpTableSelection",void 0),Object(n.c)([Object(g.a)(),Object(n.e)("design:type",s.a)],f.prototype,"WorkPackageContextMenuHelper",void 0)},qvi4:function(e,t,i){"use strict";i.d(t,"b",(function(){return u})),i.d(t,"a",(function(){return h}));var n=i("xLNn"),s=i("wZYP"),a=i("fXoL"),r=i("ofXK"),o=i("kor4"),c=i("N5AO");const l=function(e){return{"-active":e}},d=i("k7+O"),u="zen-mode-toggle-button";class h extends n.a{constructor(e,t){super(e),this.I18n=e,this.cdRef=t,this.buttonId="work-packages-zen-mode-toggle-button",this.buttonClass="toolbar-icon",this.iconClass="icon-zen-mode",this.activateLabel=e.t("js.zen_mode.button_activate"),this.deactivateLabel=e.t("js.zen_mode.button_deactivate");let i=this;d.enabled&amp;&amp;d.onchange((function(){d.isFullscreen||i.deactivateZenMode()}))}get label(){return this.isActive?this.deactivateLabel:this.activateLabel}isToggle(){return!0}deactivateZenMode(){this.isActive=h.inZenMode=!1,jQuery("body").removeClass("zen-mode"),this.disabled=!1,d.enabled&amp;&amp;d.isFullscreen&amp;&amp;d.exit(),this.cdRef.detectChanges()}activateZenMode(){this.isActive=h.inZenMode=!0,jQuery("body").addClass("zen-mode"),d.enabled&amp;&amp;d.request(),this.cdRef.detectChanges()}performAction(e){return h.inZenMode?this.deactivateZenMode():this.activateZenMode(),e.preventDefault(),!1}}h.inZenMode=!1,h.\u0275fac=function(e){return new(e||h)(a.hc(s.a),a.hc(a.i))},h.\u0275cmp=a.bc({type:h,selectors:[["zen-mode-toggle-button"]],features:[a.Qb],decls:2,vars:11,consts:[["type","button",3,"ngClass","disabled","accessibleClick"],[3,"icon-classes"]],template:function(e,t){1&amp;e&amp;&amp;(a.nc(0,"button",0),a.vc("accessibleClick",(function(e){return t.performAction(e)})),a.ic(1,"op-icon",1),a.mc()),2&amp;e&amp;&amp;(a.Wb("button ",t.buttonClass,""),a.Dc("ngClass",a.Ic(9,l,t.isActive))("disabled",t.disabled||!t.isToggle()&amp;&amp;t.isActive),a.Ub("id",t.buttonId)("title",t.label)("accesskey",t.accessKey),a.Tb(1),a.Fc("icon-classes","",t.iconClass," button--icon"))},directives:[r.n,o.a,c.a],encapsulation:2,changeDetection:0})},qvol:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("mrSG"),s=i("Mo6U"),a=i("dMmB"),r=i("r0MM");class o extends s.a{constructor(){super(...arguments),this.overriddenSchema=void 0}get schema(){if(this.hasOverriddenSchema)return this.overriddenSchema;const e=this.schemaCacheService.state(this);if(!e.hasValue())throw`Accessing schema of ${this.id} without it being loaded.`;return e.value}get hasOverriddenSchema(){return null!=this.overriddenSchema}get state(){return this.states.timeEntries.get(this.id)}$linkableKeys(){return _.without(super.$linkableKeys(),"schema")}}Object(n.c)([Object(r.a)(),Object(n.e)("design:type",a.a)],o.prototype,"schemaCacheService",void 0)},r0MM:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));i("mNvP");var n=i("qHU1");function s(e,t=null){return(i,s)=&gt;{delete i[s]&amp;&amp;Object.defineProperty(i,s,{get:function(){if(e)return this.injector.get(e,t);{const e=Reflect.getMetadata("design:type",i,s);return this.injector.get(e)}},set:function(e){Object(n.a)("Trying to set InjectField property "+s)}})}}},r76g:function(e,t,i){"use strict";i.d(t,"a",(function(){return h}));var n=i("wZYP"),s=i("8zkO"),a=i("JY8V"),r=i("fbLK"),o=i("fXoL"),c=i("jQQo"),l=i("ofXK"),d=i("xFOf");function u(e,t){if(1&amp;e&amp;&amp;o.ic(0,"enterprise-banner",5),2&amp;e){const e=o.xc();o.Dc("linkMessage",e.text.upsaleCheckOutLink)("textMessage",e.text.upsaleRelationColumns)}}class h{constructor(e,t,i,n,s){this.injector=e,this.I18n=t,this.wpTableColumns=i,this.ConfigurationService=n,this.bannerService=s,this.availableColumnsOptions=this.wpTableColumns.all.map(e=&gt;this.column2Like(e)),this.availableColumns=this.wpTableColumns.all,this.availableColumnsMap=_.keyBy(this.availableColumns,e=&gt;e.id),this.selectedColumns=this.wpTableColumns.getColumns().map(e=&gt;this.column2Like(e)),this.selectedColumnMap={},this.eeShowBanners=!1,this.text={columnsHelp:this.I18n.t("js.work_packages.table_configuration.columns_help_text"),columnsLabel:this.I18n.t("js.label_columns"),selectedColumns:this.I18n.t("js.description_selected_columns"),multiSelectLabel:this.I18n.t("js.work_packages.label_column_multiselect"),upsaleRelationColumns:this.I18n.t("js.work_packages.table_configuration.upsale.relation_columns"),upsaleCheckOutLink:this.I18n.t("js.work_packages.table_configuration.upsale.check_out_link")}}onSave(){this.wpTableColumns.setColumnsById(this.selectedColumns.map(e=&gt;e.id))}ngOnInit(){this.eeShowBanners=this.bannerService.eeShowBanners,this.selectedColumns.forEach(e=&gt;{this.selectedColumnMap[e.id]=!0})}column2Like(e){return{id:e.id,name:e.name}}updateSelected(e){this.selectedColumns=e}}h.\u0275fac=function(e){return new(e||h)(o.hc(o.A),o.hc(n.a),o.hc(a.a),o.hc(s.a),o.hc(r.a))},h.\u0275cmp=o.bc({type:h,selectors:[["ng-component"]],decls:5,vars:5,consts:[[1,"columns-modal--content"],[1,"hidden-for-sighted",3,"textContent"],[3,"options","selected","onChange"],[1,"form--inline-instructions",3,"textContent"],["class","ee-relation-columns-upsale","opReferrer","wp-list-columns#relations",3,"linkMessage","textMessage",4,"ngIf"],["opReferrer","wp-list-columns#relations",1,"ee-relation-columns-upsale",3,"linkMessage","textMessage"]],template:function(e,t){1&amp;e&amp;&amp;(o.nc(0,"div",0),o.ic(1,"label",1),o.nc(2,"draggable-autocompleter",2),o.vc("onChange",(function(e){return t.updateSelected(e)})),o.mc(),o.ic(3,"p",3),o.mc(),o.ad(4,u,1,2,"enterprise-banner",4)),2&amp;e&amp;&amp;(o.Tb(1),o.Dc("textContent",t.text.selectedColumns),o.Tb(1),o.Dc("options",t.availableColumnsOptions)("selected",t.selectedColumns),o.Tb(1),o.Dc("textContent",t.text.columnsHelp),o.Tb(1),o.Dc("ngIf",t.eeShowBanners))},directives:[c.a,l.q,d.a],encapsulation:2})},rJ6b:function(e,t,i){"use strict";i.d(t,"a",(function(){return D}));var n=i("iB+3"),s=i("eyhC"),a=i("rOco"),r=i("LRne"),o=i("POAS"),c=i("qc15"),l=i("fXoL"),d=i("ofXK"),u=i("711n"),h=i("2orT"),p=i("DLfB"),m=i("ZAVI"),g=i("2TbE"),f=i("qvi4"),b=i("P7xQ"),v=i("N5AO"),w=i("aveh"),y=i("oUDv"),k=i("0loS"),C=i("S2zE"),x=i("f24R"),j=i("8+xT"),S=i("9pt+");function T(e,t){if(1&amp;e&amp;&amp;(l.nc(0,"li",30),l.ic(1,"wp-watcher-button",31),l.mc()),2&amp;e){const e=l.xc(2);l.Tb(1),l.Dc("workPackage",e.workPackage)("showText",!1)}}const P=function(e){return{workPackageId:e}};function I(e,t){if(1&amp;e&amp;&amp;(l.nc(0,"li",32),l.ic(1,"a",23),l.ic(2,"wp-watchers-count",25),l.mc()),2&amp;e){const e=l.xc(2);l.Dc("uiParams",l.Ic(3,P,e.workPackage.id)),l.Tb(1),l.Dc("textContent",e.text.tabs.watchers),l.Tb(1),l.Dc("wpId",e.workPackage.id)}}const _=function(){return["work_package.addChild","work_package.copy"]};function O(e,t){if(1&amp;e&amp;&amp;(l.nc(0,"div",1),l.ic(1,"wp-breadcrumb",2),l.nc(2,"div",3),l.nc(3,"div",4),l.nc(4,"div",5),l.ic(5,"back-button",6),l.nc(6,"div",7),l.ic(7,"wp-subject"),l.mc(),l.mc(),l.nc(8,"ul",8),l.nc(9,"li",9),l.ic(10,"wp-create-button",10),l.mc(),l.ad(11,T,2,2,"li",11),l.nc(12,"li",9),l.ic(13,"zen-mode-toggle-button"),l.mc(),l.nc(14,"li",12),l.nc(15,"button",13),l.ic(16,"op-icon",14),l.mc(),l.mc(),l.mc(),l.mc(),l.mc(),l.nc(17,"div",15),l.nc(18,"div",16),l.nc(19,"div",17),l.ic(20,"wp-single-view",2),l.mc(),l.mc(),l.nc(21,"div",18),l.nc(22,"div",17),l.ic(23,"span",19),l.nc(24,"div",20),l.nc(25,"ul",21),l.nc(26,"li",22),l.ic(27,"a",23),l.mc(),l.nc(28,"li",24),l.ic(29,"a",23),l.ic(30,"wp-relations-count",25),l.mc(),l.ad(31,I,3,5,"li",26),l.mc(),l.mc(),l.ic(32,"div",27),l.mc(),l.nc(33,"div",28),l.ic(34,"wp-resizer",29),l.mc(),l.mc(),l.mc(),l.mc()),2&amp;e){const e=l.xc();l.Dc("resource",e.workPackage),l.Tb(1),l.Dc("workPackage",e.workPackage),l.Tb(9),l.Dc("allowed",l.Hc(17,_))("stateName$",e.stateName$),l.Tb(1),l.Dc("ngIf",e.displayWatchButton),l.Tb(4),l.Dc("wpSingleContextMenu-workPackage",e.workPackage),l.Ub("title",e.text.full_view.button_more),l.Tb(5),l.Dc("workPackage",e.workPackage),l.Tb(3),l.Dc("textContent",e.focusAnchorLabel),l.Tb(3),l.Dc("uiParams",l.Ic(18,P,e.workPackage.id)),l.Tb(1),l.Dc("textContent",e.text.tabs.activity),l.Tb(1),l.Dc("uiParams",l.Ic(20,P,e.workPackage.id)),l.Tb(1),l.Dc("textContent",e.text.tabs.relations),l.Tb(1),l.Dc("wpId",e.workPackage.id),l.Tb(1),l.Dc("ngIf",e.canViewWorkPackageWatchers()),l.Tb(3),l.Dc("elementClass","work-packages-full-view--split-right")("localStorageKey","openProject-fullViewFlexBasis")}}class D extends a.a{constructor(e,t,i){super(e,i.params.workPackageId),this.injector=e,this.wpTableSelection=t,this.$state=i,this.stateName$=Object(r.a)("work-packages.new")}ngOnInit(){this.observeWorkPackage()}initializeTexts(){super.initializeTexts(),this.text.full_view={button_more:this.I18n.t("js.button_more")}}init(){super.init(),this.wpTableFocus.updateFocus(this.workPackage.id),this.setWorkPackageScopeProperties(this.workPackage)}setWorkPackageScopeProperties(e){this.isWatched=e.hasOwnProperty("unwatch"),this.displayWatchButton=e.hasOwnProperty("unwatch")||e.hasOwnProperty("watch"),e.watchers&amp;&amp;(this.watchers=e.watchers.elements)}}D.\u0275fac=function(e){return new(e||D)(l.hc(l.A),l.hc(s.a),l.hc(n.G))},D.\u0275cmp=l.bc({type:D,selectors:[["wp-full-view-entry"]],hostAttrs:[1,"work-packages-page--ui-view"],features:[l.Sb([{provide:o.a,useExisting:c.a}]),l.Qb],decls:1,vars:1,consts:[["edit-form","","class","work-packages--show-view",3,"resource",4,"ngIf"],["edit-form","",1,"work-packages--show-view",3,"resource"],[3,"workPackage"],[1,"toolbar-container"],["id","toolbar"],[1,"wp-show--header-container"],["linkClass","work-packages-back-button"],[1,"subject-header"],["id","toolbar-items",1,"toolbar-items","hide-when-print"],[1,"toolbar-item","hidden-for-mobile"],[3,"allowed","stateName$"],["class","toolbar-item",4,"ngIf"],["id","action-show-more-dropdown-menu",1,"toolbar-item","action_menu_main"],["wpSingleContextMenu","",1,"button","dropdown-relative","toolbar-icon",3,"wpSingleContextMenu-workPackage"],["icon-classes","button--icon icon-show-more"],[1,"work-packages-full-view--split-container"],[1,"work-packages-full-view--split-left"],[1,"work-packages--panel-inner"],[1,"work-packages-full-view--split-right","work-packages-tab-view--overflow"],["tabindex","-1","focus","",1,"hidden-for-sighted",3,"textContent"],["id","tabs"],[1,"tabrow"],["uiSref","work-packages.show.activity","uiSrefActive","selected",3,"uiParams"],["href","",3,"textContent"],["uiSref","work-packages.show.relations","uiSrefActive","selected",3,"uiParams"],[3,"wpId"],["uiSref","work-packages.show.watchers","uiSrefActive","selected",3,"uiParams",4,"ngIf"],["ui-view","",1,"tabcontent"],[1,"work-packages-full-view--resizer","hidden-for-mobile","hide-when-print"],[3,"elementClass","localStorageKey"],[1,"toolbar-item"],[3,"workPackage","showText"],["uiSref","work-packages.show.watchers","uiSrefActive","selected",3,"uiParams"]],template:function(e,t){1&amp;e&amp;&amp;l.ad(0,O,35,22,"div",0),2&amp;e&amp;&amp;l.Dc("ngIf",t.workPackage)},directives:[d.q,u.a,h.a,p.a,m.a,g.a,f.a,b.a,v.a,w.a,y.a,k.UISref,k.UISrefActive,k.UISrefStatus,C.a,k.UIView,x.a,j.a,S.a],encapsulation:2})},rOco:function(e,t,i){"use strict";i.d(t,"a",(function(){return v}));var n=i("mrSG"),s=i("fXoL"),a=i("wZYP"),r=i("Jui0"),o=i("Y/CA"),c=i("NNMa"),l=i("dfy/"),d=i("Kg8T"),u=i("ug4p"),h=i("iMRi"),p=i("PkGb"),m=i("SKFm"),g=i("qc15"),f=i("r0MM"),b=i("AEvm");class v extends b.a{constructor(e,t){super(),this.injector=e,this.workPackageId=t,this.text={},this.initializeTexts()}observeWorkPackage(){this.wpCacheService.require(this.workPackageId).catch(e=&gt;this.notificationService.handleRawError(e)),this.wpCacheService.state(this.workPackageId).values$().pipe(this.untilDestroyed()).subscribe(e=&gt;{this.workPackage=e,this.init(),this.cdRef.detectChanges()})}initializeTexts(){this.text.tabs={},["overview","activity","relations","watchers"].forEach(e=&gt;{this.text.tabs[e]=this.I18n.t("js.work_packages.tabs."+e)})}init(){this.projectCacheService.require(this.workPackage.project.idFromLink).then(()=&gt;{this.projectIdentifier=this.workPackage.project.identifier}),this.authorisationService.initModelAuth("work_package",this.workPackage.$links),this.titleService.setFirstPart(this.workPackage.subjectWithType(20)),this.showStaticPagePath=this.PathHelper.workPackagePath(this.workPackageId),this.keepTab.observable.pipe(this.untilDestroyed()).subscribe(e=&gt;{this.updateFocusAnchorLabel(e.active)})}updateFocusAnchorLabel(e){const t=this.I18n.t("js.label_work_package_details_you_are_here",{tab:this.I18n.t("js.work_packages.tabs."+e),type:this.workPackage.type.name,subject:this.workPackage.subject});return this.focusAnchorLabel=t}canViewWorkPackageWatchers(){return!(!this.workPackage||!this.workPackage.watchers)}get isEditable(){return this.workPackage.isEditable}}Object(n.c)([Object(f.a)(),Object(n.e)("design:type",u.a)],v.prototype,"wpCacheService",void 0),Object(n.c)([Object(f.a)(),Object(n.e)("design:type",h.a)],v.prototype,"states",void 0),Object(n.c)([Object(f.a)(),Object(n.e)("design:type",a.a)],v.prototype,"I18n",void 0),Object(n.c)([Object(f.a)(),Object(n.e)("design:type",p.a)],v.prototype,"keepTab",void 0),Object(n.c)([Object(f.a)(),Object(n.e)("design:type",r.a)],v.prototype,"PathHelper",void 0),Object(n.c)([Object(f.a)(),Object(n.e)("design:type",m.a)],v.prototype,"halEditing",void 0),Object(n.c)([Object(f.a)(),Object(n.e)("design:type",o.a)],v.prototype,"wpTableFocus",void 0),Object(n.c)([Object(f.a)(),Object(n.e)("design:type",g.a)],v.prototype,"notificationService",void 0),Object(n.c)([Object(f.a)(),Object(n.e)("design:type",c.a)],v.prototype,"projectCacheService",void 0),Object(n.c)([Object(f.a)(),Object(n.e)("design:type",d.a)],v.prototype,"authorisationService",void 0),Object(n.c)([Object(f.a)(),Object(n.e)("design:type",s.i)],v.prototype,"cdRef",void 0),Object(n.c)([Object(f.a)(),Object(n.e)("design:type",l.a)],v.prototype,"titleService",void 0)},"s/U8":function(e,t,i){"use strict";i.d(t,"a",(function(){return V}));var n=i("ug4p"),s=(i("ii2/"),i("uSJ+")),a=i("Jui0"),r=i("NawS"),o=i("wZYP"),c=i("/C7M"),l=i("qc15"),d=i("AEvm"),u=i("fXoL"),h=i("ofXK"),p=i("th4C"),m=i("/Rze"),g=i("N5AO"),f=i("kor4"),b=i("3Pt+"),v=i("oUDv"),w=i("0loS"),y=i("711n"),k=i("80WE"),C=i("32V0");const x=["relationDescriptionTextarea"];function j(e,t){if(1&amp;e&amp;&amp;u.ic(0,"span",17),2&amp;e){const e=u.xc(3);u.Dc("textContent",e.normalizedRelationType)}}function S(e,t){if(1&amp;e&amp;&amp;u.ic(0,"span",17),2&amp;e){const e=u.xc(3);u.Dc("textContent",e.relatedWorkPackage.type.name)}}function T(e,t){if(1&amp;e){const e=u.oc();u.nc(0,"span",14),u.vc("accessibleClick",(function(){return u.Sc(e),u.xc(2).activateRelationTypeEdit()})),u.ad(1,j,1,1,"span",15),u.ad(2,S,1,1,"span",15),u.ic(3,"span",16),u.mc()}if(2&amp;e){const e=u.xc(2);u.Tb(1),u.Dc("ngIf",e.groupByWorkPackageType),u.Tb(1),u.Dc("ngIf",!e.groupByWorkPackageType),u.Tb(1),u.Dc("textContent",e.text.updateRelation)}}function P(e,t){if(1&amp;e&amp;&amp;u.ic(0,"option",21),2&amp;e){const e=t.$implicit;u.Dc("textContent",e.label)("ngValue",e)}}function I(e,t){if(1&amp;e){const e=u.oc();u.nc(0,"div",18),u.nc(1,"select",19),u.vc("ngModelChange",(function(t){return u.Sc(e),u.xc(2).selectedRelationType=t}))("change",(function(){return u.Sc(e),u.xc(2).saveRelationType()}))("keydown.escape",(function(t){return u.Sc(e),u.xc(2).cancelRelationTypeEditOnEscape(t)})),u.ad(2,P,1,2,"option",20),u.mc(),u.mc()}if(2&amp;e){const e=u.xc(2);u.Tb(1),u.Dc("ngModel",e.selectedRelationType),u.Tb(1),u.Dc("ngForOf",e.availableRelationTypes)}}const O=function(e){return{workPackageId:e}};function D(e,t){if(1&amp;e&amp;&amp;(u.nc(0,"div",22),u.ic(1,"a",23),u.mc()),2&amp;e){const e=u.xc(2);u.Tb(1),u.Dc("uiParams",u.Ic(3,O,e.relatedWorkPackage.id))("textContent",e.relatedWorkPackage.subjectWithId()),u.Ub("aria-label",e.normalizedRelationType+" "+e.relatedWorkPackage.subjectWithId())}}function R(e,t){if(1&amp;e&amp;&amp;(u.nc(0,"edit-form",24),u.ic(1,"editable-attribute-field",25),u.mc()),2&amp;e){const e=u.xc(2);u.Dc("resource",e.relatedWorkPackage),u.Tb(1),u.Dc("resource",e.relatedWorkPackage)}}function E(e,t){if(1&amp;e){const e=u.oc();u.nc(0,"accessible-by-keyboard",26),u.vc("execute",(function(){u.Sc(e);const t=u.xc(2);return t.removeRelation(t.relation)})),u.ic(1,"op-icon",27),u.mc()}if(2&amp;e){const e=u.xc(2);u.Dc("linkAriaLabel",e.text.removeButton)("linkTitle",e.text.removeButton),u.Tb(1),u.Dc("icon-title",e.text.removeButton)}}const F=function(e){return{"-placeholder":e}};function M(e,t){if(1&amp;e){const e=u.oc();u.nc(0,"div",31),u.vc("accessibleClick",(function(){return u.Sc(e),u.xc(3).startDescriptionEdit()})),u.mc()}if(2&amp;e){const e=u.xc(3);u.Dc("ngClass",u.Ic(2,F,!e.relation.description))("textContent",e.relation.description||e.text.placeholder.description)}}function A(e,t){if(1&amp;e){const e=u.oc();u.nc(0,"div",32),u.nc(1,"textarea",33,34),u.vc("keyup",(function(t){return u.Sc(e),u.xc(3).handleDescriptionKey(t)}))("ngModelChange",(function(t){return u.Sc(e),u.xc(3).userInputs.newRelationText=t})),u.mc(),u.nc(3,"edit-field-controls",35),u.vc("onSave",(function(){return u.Sc(e),u.xc(3).saveDescription()}))("onCancel",(function(){return u.Sc(e),u.xc(3).cancelDescriptionEdit()})),u.mc(),u.mc()}if(2&amp;e){const e=u.xc(3);u.Tb(1),u.Dc("ngModel",e.userInputs.newRelationText),u.Tb(2),u.Dc("fieldController",e.fieldController)("saveTitle",e.text.save)("cancelTitle",e.text.cancel)}}function L(e,t){if(1&amp;e&amp;&amp;(u.nc(0,"div",28),u.ad(1,M,1,4,"div",29),u.ad(2,A,4,4,"div",30),u.mc()),2&amp;e){const e=u.xc(2);u.Tb(1),u.Dc("ngIf",!e.userInputs.showDescriptionEditForm),u.Tb(1),u.Dc("ngIf",e.userInputs.showDescriptionEditForm)}}const q=function(e){return{"-visible":e}};function $(e,t){if(1&amp;e){const e=u.oc();u.nc(0,"div",1),u.nc(1,"div",2),u.nc(2,"div",3),u.ad(3,T,4,3,"span",4),u.ad(4,I,3,2,"div",5),u.mc(),u.ad(5,D,2,5,"div",6),u.nc(6,"div",7),u.ad(7,R,2,2,"edit-form",8),u.mc(),u.nc(8,"div",9),u.nc(9,"accessible-by-keyboard",10),u.vc("execute",(function(){u.Sc(e);const t=u.xc();return t.userInputs.showRelationInfo=!t.userInputs.showRelationInfo})),u.ic(10,"op-icon",11),u.mc(),u.ad(11,E,2,3,"accessible-by-keyboard",12),u.mc(),u.mc(),u.ad(12,L,3,2,"div",13),u.mc()}if(2&amp;e){const e=u.xc();u.Wb("relation-row relation-row-",e.relatedWorkPackage.id,""),u.Tb(3),u.Dc("ngIf",!e.userInputs.showRelationTypesForm),u.Tb(1),u.Dc("ngIf",e.userInputs.showRelationTypesForm),u.Tb(1),u.Dc("ngIf",e.relatedWorkPackage),u.Tb(2),u.Dc("ngIf",e.relatedWorkPackage),u.Tb(2),u.Dc("linkAriaLabel",e.text.description_label)("linkTitle",e.text.description_label)("ngClass",u.Ic(12,q,e.showDescriptionInfo)),u.Tb(2),u.Dc("ngIf",e.relation.delete),u.Tb(1),u.Dc("ngIf",e.userInputs.showRelationInfo)}}class V extends d.a{constructor(e,t,i,n,s,a,r){super(),this.wpCacheService=e,this.notificationService=t,this.wpRelations=i,this.halEvents=n,this.I18n=s,this.cdRef=a,this.PathHelper=r,this.showRelationInfo=!1,this.showEditForm=!1,this.userInputs={newRelationText:"",showDescriptionEditForm:!1,showRelationTypesForm:!1,showRelationInfo:!1},this.fieldController={handler:{active:!0},required:!1},this.text={cancel:this.I18n.t("js.button_cancel"),save:this.I18n.t("js.button_save"),removeButton:this.I18n.t("js.relation_buttons.remove"),description_label:this.I18n.t("js.relation_buttons.update_description"),toggleDescription:this.I18n.t("js.relation_buttons.toggle_description"),updateRelation:this.I18n.t("js.relation_buttons.update_relation"),placeholder:{description:this.I18n.t("js.placeholders.relation_description")}}}ngOnInit(){this.relation=this.relatedWorkPackage.relatedBy,this.userInputs.newRelationText=this.relation.description||"",this.availableRelationTypes=r.a.LOCALIZED_RELATION_TYPES(!1),this.selectedRelationType=_.find(this.availableRelationTypes,{name:this.relation.normalizedType(this.workPackage)}),this.wpCacheService.observe(this.relatedWorkPackage.id).pipe(this.untilDestroyed()).subscribe(e=&gt;{this.relatedWorkPackage=e})}get normalizedRelationType(){var e=this.relation.normalizedType(this.workPackage);return this.I18n.t("js.relation_labels."+e)}get relationReady(){return this.relatedWorkPackage&amp;&amp;this.relatedWorkPackage.$loaded}startDescriptionEdit(){this.userInputs.showDescriptionEditForm=!0,setTimeout(()=&gt;{const e=jQuery(this.relationDescriptionTextarea.nativeElement),t=e.val().length;e.focus(),e.prop("selectionStart",t),e.prop("selectionEnd",t)})}handleDescriptionKey(e){27===e.which&amp;&amp;this.cancelDescriptionEdit()}cancelDescriptionEdit(){this.userInputs.showDescriptionEditForm=!1,this.userInputs.newRelationText=this.relation.description||""}saveDescription(){this.wpRelations.updateRelation(this.relation,{description:this.userInputs.newRelationText}).then(e=&gt;{this.relation=e,this.relatedWorkPackage.relatedBy=e,this.userInputs.showDescriptionEditForm=!1,this.notificationService.showSave(this.relatedWorkPackage),this.cdRef.detectChanges()})}get showDescriptionInfo(){return this.userInputs.showRelationInfo||this.relation.description}activateRelationTypeEdit(){this.groupByWorkPackageType&amp;&amp;(this.userInputs.showRelationTypesForm=!0)}cancelRelationTypeEditOnEscape(e){this.userInputs.showRelationTypesForm=!1}saveRelationType(){this.wpRelations.updateRelationType(this.workPackage,this.relatedWorkPackage,this.relation,this.selectedRelationType.name).then(e=&gt;{this.notificationService.showSave(this.relatedWorkPackage),this.relatedWorkPackage.relatedBy=e,this.relation=e,this.userInputs.showRelationTypesForm=!1,this.cdRef.detectChanges()}).catch(e=&gt;this.notificationService.handleRawError(e,this.workPackage))}toggleUserDescriptionForm(){this.userInputs.showDescriptionEditForm=!this.userInputs.showDescriptionEditForm}removeRelation(){this.wpRelations.removeRelation(this.relation).then(()=&gt;{this.halEvents.push(this.workPackage,{eventType:"association",relatedWorkPackage:null,relationType:this.relation.normalizedType(this.workPackage)}),this.wpCacheService.updateWorkPackage(this.relatedWorkPackage),this.notificationService.showSave(this.relatedWorkPackage)}).catch(e=&gt;this.notificationService.handleRawError(e,this.relatedWorkPackage))}}V.\u0275fac=function(e){return new(e||V)(u.hc(n.a),u.hc(l.a),u.hc(s.a),u.hc(c.a),u.hc(o.a),u.hc(u.i),u.hc(a.a))},V.\u0275cmp=u.bc({type:V,selectors:[["wp-relation-row"]],viewQuery:function(e,t){var i;(1&amp;e&amp;&amp;u.hd(x,!0),2&amp;e)&amp;&amp;(u.Pc(i=u.wc())&amp;&amp;(t.relationDescriptionTextarea=i.first))},inputs:{workPackage:"workPackage",relatedWorkPackage:"relatedWorkPackage",groupByWorkPackageType:"groupByWorkPackageType"},features:[u.Qb],decls:1,vars:1,consts:[["focus-within","'.wp-relations-controls-section accessible-by-keyboard'",3,"class",4,"ngIf"],["focus-within","'.wp-relations-controls-section accessible-by-keyboard'"],[1,"grid-block","hierarchy-item"],[1,"grid-content","medium-2","collapse"],["class","relation-row--type","tabindex","0",3,"accessibleClick",4,"ngIf"],["class","inline-edit--container inplace-edit",4,"ngIf"],["class","grid-content medium-5 collapse",4,"ngIf"],[1,"grid-content","medium-3","collapse","wp-relations-status-field"],[3,"resource",4,"ngIf"],["ng-class","{'-expanded': userInputs.showRelationInfo }",1,"grid-content","medium-2","collapse","wp-relations-controls-section"],["linkClass","wp-relations--description-btn",3,"linkAriaLabel","linkTitle","ngClass","execute"],["icon-classes","icon-info1 -padded wp-relations--icon wp-relations--description-icon","icon-title","text.toggleDescription"],["aria-hidden","false","linkClass","relation-row--remove-btn",3,"linkAriaLabel","linkTitle","execute",4,"ngIf"],["class","grid-block hierarchy-item description-container",4,"ngIf"],["tabindex","0",1,"relation-row--type",3,"accessibleClick"],[3,"textContent",4,"ngIf"],[1,"hidden-for-sighted",3,"textContent"],[3,"textContent"],[1,"inline-edit--container","inplace-edit"],["role","listbox","focus","",1,"inline-edit--field","form--select",3,"ngModel","ngModelChange","change","keydown.escape"],[3,"textContent","ngValue",4,"ngFor","ngForOf"],[3,"textContent","ngValue"],[1,"grid-content","medium-5","collapse"],["uiSref","work-packages.show.relations",1,"wp-relations--subject-field",3,"uiParams","textContent"],[3,"resource"],["fieldName","status",3,"resource"],["aria-hidden","false","linkClass","relation-row--remove-btn",3,"linkAriaLabel","linkTitle","execute"],["icon-classes","icon-remove -padded wp-relations--icon",3,"icon-title"],[1,"grid-block","hierarchy-item","description-container"],["class","wp-relation--description-read-value",3,"ngClass","textContent","accessibleClick",4,"ngIf"],["class","wp-relation--description-wrapper textarea-wrapper",4,"ngIf"],[1,"wp-relation--description-read-value",3,"ngClass","textContent","accessibleClick"],[1,"wp-relation--description-wrapper","textarea-wrapper"],["autofocus","","name","description",1,"wp-relation--description-textarea",3,"ngModel","keyup","ngModelChange"],["relationDescriptionTextarea",""],[3,"fieldController","saveTitle","cancelTitle","onSave","onCancel"]],template:function(e,t){1&amp;e&amp;&amp;u.ad(0,$,13,14,"div",0),2&amp;e&amp;&amp;u.Dc("ngIf",t.workPackage&amp;&amp;t.relatedWorkPackage)},directives:[h.q,p.a,m.a,h.n,g.a,f.a,b.y,v.a,b.m,b.p,h.p,b.r,b.B,w.AnchorUISref,w.UISref,y.a,k.a,b.c,C.a],encapsulation:2})},sBdf:function(e,t,i){"use strict";i.d(t,"a",(function(){return p}));var n=i("mrSG"),s=i("sjKJ"),a=i("OGNV"),r=i("Jui0"),o=i("0bag"),c=i("PHo6"),l=i("kTsZ"),d=i("wZYP"),u=i("d/TE"),h=i("fXoL");class p{constructor(e,t,i,n,s,a,r){this.CurrentProject=e,this.pathHelper=t,this.QueryDm=i,this.halResourceService=n,this.QueryFormDm=s,this.notifications=a,this.I18n=r,this.v3=this.pathHelper.api.v3}create(e,t){let i=JSON.stringify(t);return this.QueryFormDm.loadWithParams({pageSize:0,filters:i},void 0,this.CurrentProject.identifier,this.buildQueryRequest(e)).then(e=&gt;{if(e.schema.public.writable){const t=this.QueryFormDm.buildQueryResource(e);return this.QueryDm.create(t,e)}throw new Error(this.I18n.t("js.boards.error_permission_missing"))})}addFreeQuery(e,t){const i=this.freeBoardQueryFilter();return this.addQuery(e,t,[i])}addQuery(e,t,i){return Object(n.b)(this,void 0,void 0,(function*(){const n=e.queries.length;try{let s={_type:"GridWidget",identifier:"work_package_query",startRow:1,endRow:2,startColumn:n+1,endColumn:n+2,options:{queryId:(yield this.create(t,i)).id,filters:i}},a=this.halResourceService.createHalResourceOfClass(c.a,s);e.addQuery(a)}catch(s){this.notifications.addError(s),console.error(s)}return e}))}buildQueryRequest(e){return Object.assign({hidden:!0,public:!0,_links:{sortBy:[{href:this.v3.resource("/queries/sort_bys/manualSorting-asc")},{href:this.v3.resource("/queries/sort_bys/id-asc")}]}},e)}freeBoardQueryFilter(){return{manualSort:{operator:"ow",values:[]}}}}p.\u0275fac=function(e){return new(e||p)(h.rc(s.a),h.rc(r.a),h.rc(o.a),h.rc(l.a),h.rc(a.a),h.rc(u.a),h.rc(d.a))},p.\u0275prov=h.dc({token:p,factory:p.\u0275fac,providedIn:"root"})},saRB:function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"a",(function(){return r}));var n=i("fXoL"),s=i("CVKj");const a="macro.embedded-table";class r{constructor(e){this.elementRef=e,this.configuration={actionsColumnEnabled:!1,columnMenuEnabled:!1,contextMenuEnabled:!1}}ngOnInit(){const e=this.elementRef.nativeElement;this.queryProps=JSON.parse(e.dataset.queryProps)}}r.\u0275fac=function(e){return new(e||r)(n.hc(n.q))},r.\u0275cmp=n.bc({type:r,selectors:[["macro",8,"embedded-table"]],attrs:["class","embedded-table"],decls:1,vars:2,consts:[[3,"queryProps","configuration"]],template:function(e,t){1&amp;e&amp;&amp;n.ic(0,"wp-embedded-table-entry",0),2&amp;e&amp;&amp;n.Dc("queryProps",t.queryProps)("configuration",t.configuration)},directives:[s.a],encapsulation:2})},sjKJ:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("Jui0"),s=i("fXoL");class a{constructor(e){this.PathHelper=e,this.detect()}get inProjectContext(){return void 0!==this.current}get path(){return this.current?this.PathHelper.projectPath(this.current.identifier):null}get apiv3Path(){return this.current?this.PathHelper.api.v3.projects.id(this.current.id).toString():null}get id(){return this.getCurrent("id")}get name(){return this.getCurrent("name")}get identifier(){return this.getCurrent("identifier")}getCurrent(e){return this.current&amp;&amp;this.current[e]?this.current[e].toString():null}detect(){const e=document.querySelector("meta[name=current_project]");e&amp;&amp;(this.current={id:e.dataset.projectId,name:e.dataset.projectName,identifier:e.dataset.projectIdentifier})}}a.\u0275fac=function(e){return new(e||a)(s.rc(n.a))},a.\u0275prov=s.dc({token:a,factory:a.\u0275fac,providedIn:"root"})},sl7t:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("/cHX"),s=i("lJrL");class a extends n.a{constructor(e,t,i,n,s,a){super(e,t),this.injector=e,this.workPackage=t,this.identifier=i,this.title=n,this.applicable=s,this.onClick=a}static factoryFor(e,t,i,n=(()=&gt;!0)){return(s,r)=&gt;new a(s,r,e,t,n,i)}buildElement(){if(!this.applicable(this.workPackage))return null;let e=document.createElement("a");return e.title=this.title,e.href="#",e.classList.add(n.b,"wp-table-action--unlink"),e.dataset.workPackageId=this.workPackage.id,e.appendChild(Object(s.a)("icon","icon-close")),jQuery(e).click(e=&gt;{e.preventDefault(),this.onClick(this.workPackage)}),e}}},sngl:function(e,t,i){"use strict";i.d(t,"b",(function(){return S})),i.d(t,"a",(function(){return T}));var n=i("fXoL"),s=i("8zkO"),a=i("JY8V"),r=i("SqdZ"),o=i("tN7n"),c=i("H3ou"),l=i("OGNV"),d=i("+oAL"),u=i("E2tj"),h=i("Y0Nk"),p=i("wZYP"),m=i("IaZ+"),g=i("qc15"),f=i("ofXK"),b=i("CS/5");const v=["tabContentOutlet"];function w(e,t){1&amp;e&amp;&amp;n.jc(0)}function y(e,t){if(1&amp;e&amp;&amp;(n.lc(0),n.ad(1,w,1,0,"ng-container",13),n.kc()),2&amp;e){const e=n.xc();n.Tb(1),n.Dc("ngComponentOutlet",e.prependModalComponent)("ngComponentOutletInjector",e.injector)}}const k=function(e,t){return{selected:e,"-disabled":t}},C=function(e){return{selected:e}};function x(e,t){if(1&amp;e){const e=n.oc();n.nc(0,"li",17),n.nc(1,"a",18),n.vc("click",(function(){n.Sc(e);const i=t.$implicit;return n.xc(2).switchTo(i.name)})),n.mc(),n.mc()}if(2&amp;e){const e=t.$implicit,i=n.xc(2);n.Dc("ngClass",n.Jc(4,k,i.currentTab&amp;&amp;e.name===i.currentTab.name,null!=e.disableBecause)),n.Tb(1),n.Dc("ngClass",n.Ic(7,C,i.currentTab&amp;&amp;e.name===i.currentTab.name))("textContent",e.title),n.Ub("title",e.disableBecause||e.title)}}function j(e,t){if(1&amp;e&amp;&amp;(n.nc(0,"div",14),n.nc(1,"ul",15),n.ad(2,x,2,9,"li",16),n.mc(),n.mc()),2&amp;e){const e=n.xc();n.Tb(2),n.Dc("ngForOf",e.availableTabs)}}const S=new n.z("WpTableConfigurationModalPrependComponent");class T extends r.a{constructor(e,t,i,s,a,r,c,l,d,u,h,p,m,g,f){super(e,m,f),this.locals=e,this.prependModalComponent=t,this.I18n=i,this.injector=s,this.appRef=a,this.componentFactoryResolver=r,this.loadingIndicator=c,this.querySpace=l,this.queryFormDm=d,this.wpStatesInitialization=u,this.notificationService=h,this.wpTableColumns=p,this.cdRef=m,this.ConfigurationService=g,this.elementRef=f,this.closeOnEscape=!1,this.closeOnOutsideClick=!1,this.text={title:this.I18n.t("js.work_packages.table_configuration.modal_title"),closePopup:this.I18n.t("js.close_popup_title"),columnsLabel:this.I18n.t("js.label_columns"),selectedColumns:this.I18n.t("js.description_selected_columns"),multiSelectLabel:this.I18n.t("js.work_packages.label_column_multiselect"),applyButton:this.I18n.t("js.modals.button_apply"),cancelButton:this.I18n.t("js.modals.button_cancel"),upsaleRelationColumns:this.I18n.t("js.modals.upsale_relation_columns"),upsaleRelationColumnsLink:this.I18n.t("js.modals.upsale_relation_columns_link")},this.onDataUpdated=new n.s,this.selectedColumnMap={},this.wpTableConfigurationService=this.injector.get(o.a,new o.a(this.I18n))}ngOnInit(){this.$element=jQuery(this.elementRef.nativeElement),this.tabPortalHost=new c.a(this.wpTableConfigurationService.tabs,this.tabContentOutlet.nativeElement,this.componentFactoryResolver,this.appRef,this.injector),this.loadingIndicator.indicator("modal").promise=this.loadForm().then(()=&gt;{const e=this.locals.initialTab||this.availableTabs[0].name;this.switchTo(e)})}ngOnDestroy(){this.onDataUpdated.complete(),this.tabPortalHost.dispose()}get availableTabs(){return this.tabPortalHost.availableTabs}get currentTab(){return this.tabPortalHost.currentTab}switchTo(e){this.tabPortalHost.switchTo(e)}saveChanges(){this.tabPortalHost.activeComponents.forEach(e=&gt;{e.onSave()}),this.onDataUpdated.emit(),this.service.close()}onClose(){return this.afterFocusOn.focus(),!0}get afterFocusOn(){return this.$element}loadForm(){const e=this.querySpace.query.value;return this.queryFormDm.load(e).then(t=&gt;(this.wpStatesInitialization.updateStatesFromForm(e,t),t)).catch(e=&gt;this.notificationService.handleRawError(e))}}T.\u0275fac=function(e){return new(e||T)(n.hc(m.a),n.hc(S,8),n.hc(p.a),n.hc(n.A),n.hc(n.f),n.hc(n.l),n.hc(h.a),n.hc(u.a),n.hc(l.a),n.hc(d.a),n.hc(g.a),n.hc(a.a),n.hc(n.i),n.hc(s.a),n.hc(n.q))},T.\u0275cmp=n.bc({type:T,selectors:[["ng-component"]],viewQuery:function(e,t){var i;(1&amp;e&amp;&amp;n.Yc(v,!0),2&amp;e)&amp;&amp;(n.Pc(i=n.wc())&amp;&amp;(t.tabContentOutlet=i.first))},features:[n.Qb],decls:13,vars:6,consts:[[1,"op-modal--portal"],["data-indicator-name","modal","tabindex","0",1,"op-modal--modal-container","-wide","wp-table--configuration-modal","loading-indicator--location"],[1,"op-modal--modal-header"],[1,"op-modal--modal-close-button"],[1,"icon-close",3,"click"],[3,"textContent"],[4,"ngIf"],["class","content--tabs scrollable-tabs",4,"ngIf"],[1,"tab-content"],["tabContentOutlet",""],[1,"modal--form-actions"],[1,"button","-highlight",3,"textContent","click"],[1,"button",3,"textContent","click"],[4,"ngComponentOutlet","ngComponentOutletInjector"],[1,"content--tabs","scrollable-tabs"],[1,"tabrow"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],["role","button","href","",1,"tab-show",3,"ngClass","textContent","click"]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"div",0),n.nc(1,"div",1),n.nc(2,"div",2),n.nc(3,"a",3),n.nc(4,"i",4),n.vc("click",(function(e){return t.closeMe(e)})),n.mc(),n.mc(),n.mc(),n.ic(5,"h3",5),n.ad(6,y,2,2,"ng-container",6),n.ad(7,j,3,1,"div",7),n.ic(8,"div",8,9),n.nc(10,"div",10),n.nc(11,"button",11),n.vc("click",(function(){return t.saveChanges()})),n.mc(),n.nc(12,"button",12),n.vc("click",(function(e){return t.closeMe(e)})),n.mc(),n.mc(),n.mc(),n.mc()),2&amp;e&amp;&amp;(n.Tb(4),n.Ub("title",t.text.closePopup),n.Tb(1),n.Dc("textContent",t.text.title),n.Tb(1),n.Dc("ngIf",!!t.prependModalComponent),n.Tb(1),n.Dc("ngIf",!!t.tabPortalHost),n.Tb(4),n.Dc("textContent",t.text.applyButton),n.Tb(1),n.Dc("textContent",t.text.cancelButton))},directives:[f.q,f.o,b.a,f.p,f.n],encapsulation:2})},"t+3x":function(e,t,i){"use strict";i.d(t,"a",(function(){return y}));var n=i("wZYP"),s=i("Jui0"),a=(i("ii2/"),i("pL6k")),r=i("VgZ9"),o=i("sl7t"),c=i("FDFi"),l=i("Rky/"),d=i("f9kS"),u=i("ug4p"),h=i("pLZG"),p=(i("B4Ei"),i("/C7M")),m=i("fXoL"),g=i("ofXK"),f=i("72oW");function b(e,t){if(1&amp;e&amp;&amp;(m.nc(0,"div",4),m.nc(1,"div",5),m.ic(2,"h3",6),m.mc(),m.mc()),2&amp;e){const e=m.xc(2);m.Tb(2),m.Dc("textContent",e.group.name)}}const v=function(e){return{actionsColumnEnabled:!0,hierarchyToggleEnabled:!1,inlineCreateEnabled:!0,compactTableStyle:!0,columnMenuEnabled:!1,contextMenuEnabled:!1,projectIdentifier:e,projectContext:!1}};function w(e,t){if(1&amp;e){const e=m.oc();m.lc(0),m.ad(1,b,3,1,"div",1),m.nc(2,"wp-embedded-table",2,3),m.vc("onQueryLoaded",(function(t){return m.Sc(e),m.xc().handleQueryLoaded(t)})),m.mc(),m.kc()}if(2&amp;e){const e=m.xc();m.Tb(1),m.Dc("ngIf",e.group),m.Tb(1),m.Dc("initialLoadingIndicator",!1)("queryProps",e.queryProps)("tableActions",e.tableActions)("configuration",m.Ic(5,v,e.workPackage.project.idFromLink))}}class y extends l.a{constructor(e,t,i,n,s,a,r){super(a),this.wpRelationsHierarchyService=e,this.PathHelper=t,this.wpInlineCreate=i,this.halEvents=n,this.wpCacheService=s,this.queryUrlParamsHelper=a,this.I18n=r,this.addExistingChildEnabled=!1,this.tableActions=[o.a.factoryFor("remove-child-action",this.I18n.t("js.relation_buttons.remove_child"),e=&gt;{this.embeddedTable.loadingIndicator=this.wpRelationsHierarchyService.removeChild(e)},e=&gt;!!e.changeParent)]}ngOnInit(){this.wpInlineCreate.referenceTarget=this.workPackage,this.queryProps=this.buildQueryProps(),this.wpInlineCreate.newInlineWorkPackageCreated.pipe(this.untilDestroyed()).subscribe(e=&gt;{this.halEvents.push(this.workPackage,{eventType:"association",relatedWorkPackage:e,relationType:"child"})}),this.wpCacheService.observe(this.workPackage.id).pipe(Object(h.a)(()=&gt;this.embeddedTable&amp;&amp;this.embeddedTable.isInitialized),this.untilDestroyed()).subscribe(()=&gt;this.refreshTable())}}y.\u0275fac=function(e){return new(e||y)(m.hc(r.a),m.hc(s.a),m.hc(c.a),m.hc(p.a),m.hc(u.a),m.hc(a.a),m.hc(n.a))},y.\u0275cmp=m.bc({type:y,selectors:[["wp-children-query"]],inputs:{workPackage:"workPackage",query:"query",group:"group",addExistingChildEnabled:"addExistingChildEnabled"},features:[m.Sb([{provide:c.a,useClass:d.a}]),m.Qb],decls:1,vars:1,consts:[[4,"ngIf"],["class","attributes-group--header",4,"ngIf"],[3,"initialLoadingIndicator","queryProps","tableActions","configuration","onQueryLoaded"],["embeddedTable",""],[1,"attributes-group--header"],[1,"attributes-group--header-container"],[1,"attributes-group--header-text",3,"textContent"]],template:function(e,t){1&amp;e&amp;&amp;m.ad(0,w,4,7,"ng-container",0),2&amp;e&amp;&amp;m.Dc("ngIf",!t.hidden)},directives:[g.q,f.a],encapsulation:2})},t7qP:function(e,t,i){"use strict";i.d(t,"a",(function(){return p}));var n=i("iB+3"),s=i("4lR/"),a=i("PUHT"),r=i("SKFm"),o=(i("ii2/"),i("RGDJ")),c=i("wZYP"),l=i("d/TE"),d=i("/C7M"),u=i("qc15"),h=i("fXoL");class p extends a.a{constructor(e,t,i,n,s,a,r,o){super(e,t),this.elementRef=e,this.opContextMenu=t,this.$state=i,this.workPackageNotificationService=n,this.halEditing=s,this.notificationService=a,this.I18n=r,this.halEvents=o}open(e){const t=this.halEditing.changeFor(this.workPackage);t.getForm().then(i=&gt;{const n=i.schema.status.allowedValues;this.buildItems(n),t.schema.status.writable?this.opContextMenu.show(this,e):this.notificationService.addError(this.I18n.t("js.work_packages.message_work_package_status_blocked"))})}get locals(){return{items:this.items,contextMenuId:"wp-status-context-menu"}}updateStatus(e){const t=this.halEditing.changeFor(this.workPackage);t.projectedResource.status=e,this.workPackage.isNew||this.halEditing.save(t).then(()=&gt;{this.workPackageNotificationService.showSave(this.workPackage),this.halEvents.push(this.workPackage,{eventType:"updated"})})}buildItems(e){this.items=e.map(e=&gt;({disabled:!1,linkText:e.name,postIcon:e.isReadonly?"icon-locked":null,postIconTitle:this.I18n.t("js.work_packages.message_work_package_read_only"),class:o.a.inlineClass("status",e.id),onClick:()=&gt;(this.updateStatus(e),!0)}))}}p.\u0275fac=function(e){return new(e||p)(h.hc(h.q),h.hc(s.a),h.hc(n.G),h.hc(u.a),h.hc(r.a),h.hc(l.a),h.hc(c.a),h.hc(d.a))},p.\u0275dir=h.cc({type:p,selectors:[["","wpStatusDropdown",""]],inputs:{workPackage:["wpStatusDropdown-workPackage","workPackage"]},features:[h.Qb]})},t8SH:function(e,t,i){"use strict";i.d(t,"a",(function(){return m}));var n=i("fXoL"),s=i("wZYP"),a=i("sjKJ"),r=i("Jui0"),o=i("ZOsW"),c=i("3Pt+"),l=i("ofXK"),d=i("ximh");const u=["ngSelectComponent"];function h(e,t){if(1&amp;e&amp;&amp;(n.ic(0,"b",4),n.cd(1)),2&amp;e){const e=t.searchTerm,i=n.xc();n.Dc("textContent",i.text.add_new_action),n.Tb(1),n.ed(": ",e," ")}}function p(e,t){if(1&amp;e&amp;&amp;(n.nc(0,"div",5),n.cd(1),n.mc()),2&amp;e){const e=t.item,i=t.searchTerm;n.Dc("ngOptionHighlight",i),n.Tb(1),n.dd(e.name)}}class m{constructor(e,t,i,s){this.I18n=e,this.cdRef=t,this.currentProject=i,this.pathHelper=s,this.required=!1,this.disabled=!1,this.finishedLoading=!1,this.id="",this.classes="",this.hideSelected=!1,this.onChange=new n.s,this.onKeydown=new n.s,this.onOpen=new n.s,this.onClose=new n.s,this.onAfterViewInit=new n.s,this.text={add_new_action:this.I18n.t("js.label_create")},this.createAllowed=!1,this._openDirectly=!1}ngAfterViewInit(){this.onAfterViewInit.emit(this)}openSelect(){this.ngSelectComponent&amp;&amp;(this.ngSelectComponent.open(),this.openDirectly=!1)}closeSelect(){this.ngSelectComponent&amp;&amp;this.ngSelectComponent.close()}changeModel(e){this.onChange.emit(e)}opened(){setTimeout(()=&gt;{const e=this.ngSelectComponent;e&amp;&amp;e.dropdownPanel&amp;&amp;e.dropdownPanel._updatePosition()},25),this.onOpen.emit()}closed(){this.openDirectly=!1,this.onClose.emit()}keyPressed(e){this.onKeydown.emit(e)}get openDirectly(){return this._openDirectly}set openDirectly(e){this._openDirectly=e,e&amp;&amp;this.openSelect()}focusInputField(){this.ngSelectComponent&amp;&amp;this.ngSelectComponent.focus()}}m.\u0275fac=function(e){return new(e||m)(n.hc(s.a),n.hc(n.i),n.hc(a.a),n.hc(r.a))},m.\u0275cmp=n.bc({type:m,selectors:[["create-autocompleter"]],viewQuery:function(e,t){var i;(1&amp;e&amp;&amp;n.hd(u,!0),2&amp;e)&amp;&amp;(n.Pc(i=n.wc())&amp;&amp;(t.ngSelectComponent=i.first))},inputs:{availableValues:"availableValues",appendTo:"appendTo",model:"model",required:"required",disabled:"disabled",finishedLoading:"finishedLoading",id:"id",classes:"classes",typeahead:"typeahead",hideSelected:"hideSelected"},outputs:{onChange:"onChange",onKeydown:"onKeydown",onOpen:"onOpen",onClose:"onClose",onAfterViewInit:"onAfterViewInit"},decls:4,vars:13,consts:[["bindLabel","name",3,"ngModel","items","ngClass","addTag","virtualScroll","required","clearable","disabled","typeahead","clearOnBackspace","appendTo","hideSelected","id","ngModelChange","change","open","close","keydown"],["ngSelectComponent",""],["ng-tag-tmp",""],["ng-option-tmp",""],[3,"textContent"],[1,"ng-option-label","ellipsis",3,"ngOptionHighlight"]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"ng-select",0,1),n.vc("ngModelChange",(function(e){return t.model=e}))("change",(function(e){return t.changeModel(e)}))("open",(function(){return t.opened()}))("close",(function(){return t.closed()}))("keydown",(function(e){return t.keyPressed(e)})),n.ad(2,h,2,2,"ng-template",2),n.ad(3,p,2,2,"ng-template",3),n.mc()),2&amp;e&amp;&amp;n.Dc("ngModel",t.model)("items",t.availableValues)("ngClass",t.classes)("addTag",t.createAllowed)("virtualScroll",!0)("required",t.required)("clearable",!t.required)("disabled",t.disabled)("typeahead",t.typeahead)("clearOnBackspace",!1)("appendTo",t.appendTo)("hideSelected",t.hideSelected)("id",t.id)},directives:[o.a,c.m,c.p,l.n,c.x,o.l,o.c,d.a],encapsulation:2})},tG68:function(e,t,i){"use strict";i.r(t),i.d(t,"ModalWrapperAugmentService",(function(){return o}));var n=i("ofXK"),s=i("5Lfy"),a=i("IaZ+"),r=i("fXoL");class o{constructor(e,t,i){this.documentElement=e,this.injector=t,this.opModalService=i}setupListener(){const e=this.documentElement.querySelectorAll("section[data-augmented-model-wrapper]");for(let t=0;t
                                  <e.length;++t)this.wrapelement(jquery(e[t]))}wrapelement(e){let t='e.find(".modal-wrapper--activation-link"),i=e.data("activationSelector");i&amp;&amp;(t=jQuery(i)),e.data("modalInitializeNow")?this.show(e):t.click(t='>
                                   {this.show(e),t.preventDefault()})}show(e){const t=e.data("modalClassName"),i=e.data("modalIframeUrl");let n=e.find(".modal-wrapper--content").html();i&amp;&amp;(n=this.appendIframe(n,i)),this.opModalService.show(s.a,this.injector,{modalBody:n,modalClassName:t})}appendIframe(e,t){let i=jQuery(e),n=jQuery('
                                   <iframe allowfullscreen="" frameborder="0" height="400">
                                    &gt;
                                   </iframe>
                                   ');return n.attr("src",t),i.find(".iframe-target-wrapper").append(n),i.html()}}o.\u0275fac=function(e){return new(e||o)(r.rc(n.d),r.rc(r.A),r.rc(a.b))},o.\u0275prov=r.dc({token:o,factory:o.\u0275fac,providedIn:"root"})},tN7n:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i("wZYP"),s=i("Uprc"),a=i("r76g"),r=i("byj5"),o=i("YO9K"),c=i("hj8t"),l=i("yUKD"),d=i("fXoL");class u{constructor(e){this.I18n=e,this._tabs=[{name:"columns",title:this.I18n.t("js.label_columns"),componentClass:a.a},{name:"filters",title:this.I18n.t("js.work_packages.query.filters"),componentClass:r.a},{name:"sort-by",title:this.I18n.t("js.label_sort_by"),componentClass:o.a},{name:"display-settings",title:this.I18n.t("js.work_packages.table_configuration.display_settings"),componentClass:s.a},{name:"highlighting",title:this.I18n.t("js.work_packages.table_configuration.highlighting"),componentClass:l.a},{name:"timelines",title:this.I18n.t("js.timelines.gantt_chart"),componentClass:c.a}]}get tabs(){return this._tabs}}u.\u0275fac=function(e){return new(e||u)(d.rc(n.a))},u.\u0275prov=d.dc({token:u,factory:u.\u0275fac})},th4C:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("2Vo4"),s=i("3UWI"),a=i("AEvm"),r=i("fXoL");class o extends a.a{constructor(e){super(),this.elementRef=e}ngOnInit(){let e=jQuery(this.elementRef.nativeElement),t=new n.a(!1);t.pipe(this.untilDestroyed(),Object(s.a)(50)).subscribe(t=&gt;{e.toggleClass("-focus",t)});e[0].addEventListener("focus",(function(){t.next(!0)}),!0);e[0].addEventListener("blur",(function(){t.next(!1)}),!0),setTimeout(()=&gt;{e.addClass("focus-within--trigger"),e.find(this.selector).addClass("focus-within--depending")},0)}}o.\u0275fac=function(e){return new(e||o)(r.hc(r.q))},o.\u0275dir=r.cc({type:o,selectors:[["","focus-within",""]],inputs:{selector:"selector"},features:[r.Qb]})},tmNb:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i("mrSG"),s=i("ofXK"),a=i("OW6k"),r=i("99YG"),o=i("fXoL");class c{constructor(e,t){this.document=e,this.injector=t,this.drake=null,this.members=[],this.escapeListener=e=&gt;{this.drake&amp;&amp;"Escape"===e.key&amp;&amp;this.drake.cancel(!0)},this.document.documentElement.addEventListener("keydown",this.escapeListener)}ngOnDestroy(){this.document.documentElement.removeEventListener("keydown",this.escapeListener),this.autoscroll&amp;&amp;this.autoscroll.destroy(),this.drake&amp;&amp;this.drake.destroy()}remove(e){this.initialized&amp;&amp;(_.remove(this.drake.containers,t=&gt;t===e),_.remove(this.members,t=&gt;t.dragContainer===e))}member(e){return _.find(this.members,t=&gt;t.dragContainer===e)}get initialized(){return null!==this.drake}register(e){this.members.push(e);const t=e.dragContainer;this.autoscroll?this.autoscroll.add(t):this.setupAutoscroll([t]),null===this.drake?this.initializeDrake([t]):this.drake.containers.push(t)}addScrollContainer(e){this.autoscroll?this.autoscroll.add(e):this.setupAutoscroll([e]),this.autoscroll.setOuterScrollContainer(e)}setupAutoscroll(e){this.autoscroll=new a.a(e,{margin:100,maxSpeed:10,scrollWhenOutside:!0,autoScroll:()=&gt;this.drake&amp;&amp;this.drake.dragging})}getMember(e){return this.members.find(t=&gt;t.dragContainer===e)}initializeDrake(e){this.drake=dragula(e,{moves:(e,t,i,n)=&gt;{const s=this.getMember(t);return!!s&amp;&amp;s.moves(e,t,i,n)},accepts:(e,t)=&gt;{const i=this.getMember(t);return!i||!i.accepts||i.accepts(e,t)},invalid:()=&gt;!1,direction:"vertical",copy:!1,revertOnSpill:!0,removeOnSpill:!1,mirrorContainer:document.body,ignoreInputTextSelection:!0}),this.drake.on("drag",(e,t)=&gt;{e.dataset.sourceIndex=r.a.findIndex(e).toString()}),this.drake.on("over",(e,t)=&gt;{const i=t.closest(".drop-zone");i&amp;&amp;i.classList.add("-dragged-over")}),this.drake.on("out",(e,t)=&gt;{const i=t.closest(".drop-zone");i&amp;&amp;i.classList.remove("-dragged-over")}),this.drake.on("cloned",(e,t)=&gt;{const i=this.member(t.parentElement);i&amp;&amp;i.onCloned&amp;&amp;i.onCloned(e,t)}),this.drake.on("drop",(e,t,i,s)=&gt;Object(n.b)(this,void 0,void 0,(function*(){try{yield this.handleDrop(e,t,i,s)}catch(n){console.error("Failed to handle drop of %O, %O",e,n)}}))),this.drake.on("shadow",(e,t)=&gt;{const i=this.member(t);i&amp;&amp;i.onShadowInserted&amp;&amp;i.onShadowInserted(e)}),this.drake.on("cancel",(e,t,i)=&gt;{const n=this.member(t);n&amp;&amp;n.onCancel&amp;&amp;n.onCancel(e)})}handleDrop(e,t,i,s){return Object(n.b)(this,void 0,void 0,(function*(){const n=this.member(t),a=this.member(i);if(n&amp;&amp;a)return n===a?n.onMoved(e,t,i,s):void((yield n.onAdded(e,t,i,s))?a.onRemoved(e,t,i,s):r.a.reinsert(e,e.dataset.sourceIndex||-1,i))}))}}c.\u0275fac=function(e){return new(e||c)(o.rc(s.d),o.rc(o.A))},c.\u0275prov=o.dc({token:c,factory:c.\u0275fac})},"u/Nd":function(e,t,i){"use strict";i.d(t,"a",(function(){return p}));var n=i("DhiE"),s=i("iMRi"),a=i("POAS"),r=i("d/TE"),o=i("SqdZ"),c=i("IaZ+"),l=i("wZYP"),d=i("E2tj"),u=i("fXoL"),h=i("k1Xe");class p extends o.a{constructor(e,t,i,n,s,a,r,o,c){super(t,a,e),this.elementRef=e,this.locals=t,this.I18n=i,this.states=n,this.querySpace=s,this.cdRef=a,this.wpListService=r,this.halNotification=o,this.notificationsService=c,this.isStarred=!1,this.isPublic=!1,this.isBusy=!1,this.text={title:this.I18n.t("js.modals.form_submit.title"),text:this.I18n.t("js.modals.form_submit.text"),save_as:this.I18n.t("js.label_save_as"),label_name:this.I18n.t("js.modals.label_name"),label_visibility_settings:this.I18n.t("js.label_visibility_settings"),button_save:this.I18n.t("js.modals.button_save"),button_cancel:this.I18n.t("js.button_cancel"),close_popup:this.I18n.t("js.close_popup_title")}}ngOnInit(){super.ngOnInit(),this.query=this.querySpace.query.value,this.isStarred=this.query.starred,this.isPublic=this.query.public}setValues(e){this.isStarred=e.isStarred,this.isPublic=e.isPublic}get afterFocusOn(){return jQuery("#work-packages-settings-button")}saveQuery(e){if(this.isBusy)return;this.isBusy=!0;let t=[];this.query.public!==this.isPublic&amp;&amp;(this.query.public=this.isPublic,t.push(this.wpListService.save(this.query))),this.query.starred!==this.isStarred&amp;&amp;t.push(this.wpListService.toggleStarred(this.query)),Promise.all(t).then(()=&gt;{this.closeMe(e),this.isBusy=!1}).catch(()=&gt;{this.notificationsService.addError(this.I18n.t("js.errors.query_saving")),this.isBusy=!1})}}p.\u0275fac=function(e){return new(e||p)(u.hc(u.q),u.hc(c.a),u.hc(l.a),u.hc(s.a),u.hc(d.a),u.hc(u.i),u.hc(n.a),u.hc(a.a),u.hc(r.a))},p.\u0275cmp=u.bc({type:p,selectors:[["ng-component"]],features:[u.Qb],decls:10,vars:8,consts:[[1,"op-modal--portal"],["data-indicator-name","modal","tabindex","0",1,"op-modal--modal-container","wp-table--configuration-modal","loading-indicator--location"],[1,"op-modal--modal-header"],[1,"op-modal--modal-close-button"],[1,"icon-close",3,"click"],[3,"textContent"],[3,"isSave","isStarred","isPublic","onChange"],[1,"form--space"],[1,"button","-highlight","-with-icon","icon-checkmark",3,"textContent","click"],[1,"button",3,"textContent","disabled","click"]],template:function(e,t){1&amp;e&amp;&amp;(u.nc(0,"div",0),u.nc(1,"div",1),u.nc(2,"div",2),u.nc(3,"a",3),u.nc(4,"i",4),u.vc("click",(function(e){return t.closeMe(e)})),u.mc(),u.mc(),u.mc(),u.ic(5,"h3",5),u.nc(6,"query-sharing-form",6),u.vc("onChange",(function(e){return t.setValues(e)})),u.mc(),u.nc(7,"div",7),u.nc(8,"button",8),u.vc("click",(function(e){return t.saveQuery(e)})),u.mc(),u.nc(9,"button",9),u.vc("click",(function(e){return t.closeMe(e)})),u.mc(),u.mc(),u.mc(),u.mc()),2&amp;e&amp;&amp;(u.Tb(4),u.Ub("title",t.text.close_popup),u.Tb(1),u.Dc("textContent",t.text.label_visibility_settings),u.Tb(1),u.Dc("isSave",!1)("isStarred",t.isStarred)("isPublic",t.isPublic),u.Tb(2),u.Dc("textContent",t.text.button_save),u.Tb(1),u.Dc("textContent",t.text.button_cancel)("disabled",t.isBusy))},directives:[h.a],encapsulation:2})},u4T9:function(e,t,i){"use strict";i.d(t,"a",(function(){return x}));var n=i("3Pt+"),s=i("8ggW"),a=i("HN1l"),r=i("g1AQ"),o=i("iB+3"),c=i("0loS"),l=i("+rOU"),d=i("ofXK"),u=i("5+WD"),h=i("CS/5"),p=i("mg4W"),m=i("t8SH"),g=i("ZOsW"),f=i("ximh"),b=i("sjKJ"),v=i("vK8y"),w=i("gh2L"),y=i("iuLl"),k=i("9Ejp"),C=i("fXoL");class x{constructor(e){!function(e){const t=e.get(b.a),i=e.get(v.a),n=e.get(o.G);window.ErrorReporter.addContext(e=&gt;{i.isLoggedIn&amp;&amp;e.setUser({name:i.name,id:i.userId,email:i.mail}),t.inProjectContext&amp;&amp;e.setTag("project",t.identifier),e.setExtra("router state",n.current.name)}),e.get(r.a).register("openProjectAngularBootstrap",()=&gt;[a.b])}(e)}}x.\u0275mod=C.fc({type:x}),x.\u0275inj=C.ec({factory:function(e){return new(e||x)(C.rc(C.A))},imports:[[c.UIRouterModule,d.b,n.i,l.g,u.g,k.b,s.a,g.b,f.b,h.f.withComponents([p.a,w.a,y.a,m.a])],c.UIRouterModule,d.b,n.i,l.g,u.g,s.a,g.b,f.b,h.f]})},u8Ab:function(e,t,i){"use strict";i.d(t,"b",(function(){return l})),i.d(t,"a",(function(){return d}));i("y2Tr");var n=i("Jui0"),s=i("PvNn"),a=i("fXoL"),r=i("ofXK");function o(e,t){if(1&amp;e){const e=a.oc();a.nc(0,"img",2),a.vc("error",(function(){return a.Sc(e),a.xc().replaceWithDefault()})),a.mc()}if(2&amp;e){const e=a.xc();a.Vb("avatar--fallback "+e.classes),a.Dc("alt",e.userName),a.Ub("src",e.userAvatarUrl,a.Vc)("title",e.userName)}}function c(e,t){if(1&amp;e&amp;&amp;a.ic(0,"div",3),2&amp;e){const e=a.xc();a.Vb("avatar-default "+e.classes),a.Zc("background",e.colorCode,a.ac),a.Dc("textContent",e.userInitials)}}const l="user-avatar";class d{constructor(e,t,i,n){this.elementRef=e,this.ref=t,this.pathHelper=i,this.colors=n}ngAfterViewInit(){this.initialize()}replaceWithDefault(){this.useFallback=!0,this.ref.detectChanges()}initialize(){const e=this.elementRef.nativeElement;this.user?(this.userId=this.user.id,this.userName=this.user.name):(this.userId=e.dataset.userId,this.userName=e.dataset.userName),this.classes=e.dataset.classList,this.useFallback=e.dataset.useFallback,this.userAvatarUrl=this.pathHelper.api.v3.users.id(this.userId).avatar.toString(),this.userInitials=this.getInitials(this.userName),this.colorCode=this.colors.toHsl(this.userName),this.ref.detectChanges()}getInitials(e){var t,i;let n=[...e],s=e.lastIndexOf(" ");return[null===(t=n[0])||void 0===t?void 0:t.toUpperCase(),null===(i=e[s+1])||void 0===i?void 0:i.toUpperCase()].join("")}}d.\u0275fac=function(e){return new(e||d)(a.hc(a.q),a.hc(a.i),a.hc(n.a),a.hc(s.a))},d.\u0275cmp=a.bc({type:d,selectors:[["user-avatar"]],inputs:{user:"user"},decls:2,vars:2,consts:[[3,"class","alt","error",4,"ngIf"],[3,"class","textContent","background",4,"ngIf"],[3,"alt","error"],[3,"textContent"]],template:function(e,t){1&amp;e&amp;&amp;(a.ad(0,o,1,5,"img",0),a.ad(1,c,1,5,"div",1)),2&amp;e&amp;&amp;(a.Dc("ngIf",t.userAvatarUrl&amp;&amp;!t.useFallback),a.Tb(1),a.Dc("ngIf",(!t.userAvatarUrl||t.useFallback)&amp;&amp;t.userInitials))},directives:[r.q],encapsulation:2,changeDetection:0})},"uSJ+":function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i("1MaS"),s=i("Jui0"),a=i("FnNU"),r=i("UD+K"),o=i("kTsZ"),c=i("fXoL");class l extends a.a{constructor(){super(),this.name="WP-Relations",this.relations=Object(a.g)(),this.initializeMembers()}}class d extends r.a{constructor(e,t,i){super(),this.relationsDm=e,this.PathHelper=t,this.halResource=i,this.relationStates=new l}get multiState(){return this.relationStates.relations}load(e){return new Promise((t,i)=&gt;{this.relationsDm.load(e).then(i=&gt;{this.updateRelationsStateTo(e,i),t(this.state(e).value)}).catch(i)})}loadAll(e){return new Promise((t,i)=&gt;{this.relationsDm.loadInvolved(e).then(i=&gt;{this.clearSome(...e),this.accumulateRelationsFromInvolved(e,i),t()}).catch(i)})}find(e,t,i){const n=this.state(e.id).value;if(n)return _.find(n,n=&gt;{const s=n.denormalized(e);return s.target.id===t.id&amp;&amp;s.relationType===i})}removeRelation(e){return e.delete().then(()=&gt;{this.removeFromStates(e)})}updateRelationType(e,t,i,n){const s={_links:{from:{href:e.href},to:{href:t.href}},type:n};return this.updateRelation(i,s)}updateRelation(e,t){return e.updateImmediately(t).then(e=&gt;(this.insertIntoStates(e),e))}addCommonRelation(e,t,i){const n={_links:{from:{href:this.PathHelper.api.v3.work_packages.id(e).toString()},to:{href:this.PathHelper.api.v3.work_packages.id(i).toString()}},type:t},s=this.PathHelper.api.v3.work_packages.id(e).relations.toString();return this.halResource.post(s,n).toPromise().then(e=&gt;(this.insertIntoStates(e),e))}insertIntoStates(e){_.values(e.ids).forEach(t=&gt;{this.multiState.get(t).doModify(t=&gt;(t[e.id]=e,t),()=&gt;{let t={};return t[e.id]=e,t})})}removeFromStates(e){_.values(e.ids).forEach(t=&gt;{this.multiState.get(t).doModify(t=&gt;(delete t[e.id],t),()=&gt;({}))})}updateRelationsStateTo(e,t){const i=this.multiState.get(e),n=_.keyBy(t,e=&gt;e.id);i.putValue(n,"Overriding relations state.")}accumulateRelationsFromInvolved(e,t){e.forEach(e=&gt;{const i=t.filter(t=&gt;t.isInvolved(e));this.updateRelationsStateTo(e,i)})}}d.\u0275fac=function(e){return new(e||d)(c.rc(n.a),c.rc(s.a),c.rc(o.a))},d.\u0275prov=c.dc({token:d,factory:d.\u0275fac})},ug4p:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i("iMRi"),s=i("UD+K"),a=i("dMmB"),r=i("qHU1"),o=i("5JuZ"),c=i("fXoL");function l(e){return(e||"new").toString()}class d extends s.a{constructor(e,t,i){super(),this.states=e,this.schemaCacheService=t,this.workPackageDmService=i}updateValue(e,t){this.updateWorkPackageList([t],!1)}updateWorkPackage(e,t=!1){const i=l(e.id);return t||e.isNew?(this.multiState.get(i).putValue(e),Promise.resolve()):this.schemaCacheService.ensureLoaded(e).then(()=&gt;{this.multiState.get(i).putValue(e)})}updateWorkPackageList(e,t=!0){for(var i of e){const e=i,n=l(e.id),s=this.multiState.get(n);e.isNew?s.putValue(e):this.schemaCacheService.ensureLoaded(e).then(()=&gt;{t&amp;&amp;s.hasValue()&amp;&amp;_.isEqual(s.value.$source,e.$source)?Object(r.a)("Skipping identical work package from updating"):this.multiState.get(n).putValue(e)})}}loadWorkPackage(e,t=!1){const i=this.state(e);return"new"===e||this.require(e,t),i}loadAll(e){return new Promise((t,i)=&gt;{this.workPackageDmService.loadWorkPackagesCollectionsFor(_.uniq(e)).then(e=&gt;{_.each(e,e=&gt;{e.schemas&amp;&amp;_.each(e.schemas.elements,e=&gt;{this.states.schemas.get(e.href).putValue(e)}),e.elements&amp;&amp;this.updateWorkPackageList(e.elements),t(void 0)})},i)})}load(e){return new Promise((t,i)=&gt;{const n=e=&gt;{i(e)};this.workPackageDmService.loadWorkPackageById(e,!0).then(i=&gt;{this.schemaCacheService.ensureLoaded(i).then(()=&gt;{this.multiState.get(e).putValue(i),t(i)},n)},n)})}get multiState(){return this.states.workPackages}}d.\u0275fac=function(e){return new(e||d)(c.rc(n.a),c.rc(a.a),c.rc(o.a))},d.\u0275prov=c.dc({token:d,factory:d.\u0275fac})},uhGA:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i("mrSG"),s=i("Mo6U"),a=i("PHo6"),r=i("LrpJ");class o extends s.a{constructor(){super(...arguments),this.attachmentsBackend=!0}$initialize(e){super.$initialize(e),this.widgets=this.widgets.map(e=&gt;{let t=new a.a(this.injector,e,!0,this.halInitializer,"GridWidget");return t.grid=this,t})}updateAttachments(){return Object(n.b)(this,void 0,void 0,(function*(){return this.attachments.$update().then(()=&gt;(this.states.forResource(this).putValue(this),this.attachments))}))}}const c=Object(r.a)(o)},ul8C:function(e,t,i){"use strict";i.d(t,"a",(function(){return h}));var n=i("xLNn"),s=i("wZYP"),a=i("PtkW"),r=i("fXoL"),o=i("ofXK"),c=i("N5AO");function l(e,t){if(1&amp;e){const e=r.oc();r.nc(0,"li"),r.nc(1,"button",2),r.vc("click",(function(){return r.Sc(e),r.xc().enableAutoZoom()})),r.ic(2,"op-icon",3),r.mc(),r.mc()}if(2&amp;e){const e=r.xc();r.Tb(1),r.Dc("ngClass",e.getAutoZoomToggleClass()),r.Ub("title",e.text.zoomAuto)}}function d(e,t){if(1&amp;e){const e=r.oc();r.nc(0,"li"),r.nc(1,"button",4),r.vc("click",(function(){return r.Sc(e),r.xc().updateZoomWithDelta(1)})),r.ic(2,"op-icon",5),r.mc(),r.mc()}if(2&amp;e){const e=r.xc();r.Tb(1),r.Dc("disabled",e.isMaxLevel),r.Ub("title",e.text.zoomOut)}}function u(e,t){if(1&amp;e){const e=r.oc();r.nc(0,"li"),r.nc(1,"button",6),r.vc("click",(function(){return r.Sc(e),r.xc().updateZoomWithDelta(-1)})),r.ic(2,"op-icon",7),r.mc(),r.mc()}if(2&amp;e){const e=r.xc();r.Tb(1),r.Dc("disabled",e.isMinLevel),r.Ub("title",e.text.zoomIn)}}class h extends n.a{constructor(e,t,i){super(e),this.I18n=e,this.cdRef=t,this.wpTableTimeline=i,this.buttonId="work-packages-timeline-toggle-button",this.iconClass="icon-view-timeline",this.minZoomLevel="days",this.maxZoomLevel="years",this.isAutoZoom=!1,this.isMaxLevel=!1,this.isMinLevel=!1,this.activateLabel=e.t("js.timelines.button_activate"),this.deactivateLabel=e.t("js.timelines.button_deactivate"),this.text.zoomIn=e.t("js.timelines.zoom.in"),this.text.zoomOut=e.t("js.timelines.zoom.out"),this.text.zoomAuto=e.t("js.timelines.zoom.auto")}ngOnInit(){this.wpTableTimeline.live$().pipe(this.untilDestroyed()).subscribe(()=&gt;{this.isAutoZoom=this.wpTableTimeline.isAutoZoom(),this.isActive=this.wpTableTimeline.isVisible,this.cdRef.detectChanges()}),this.wpTableTimeline.appliedZoomLevel$.values$().pipe(this.untilDestroyed()).subscribe(e=&gt;{this.isMaxLevel=e===this.maxZoomLevel,this.isMinLevel=e===this.minZoomLevel,this.cdRef.detectChanges()})}get label(){return this.isActive?this.deactivateLabel:this.activateLabel}isToggle(){return!0}updateZoomWithDelta(e){this.wpTableTimeline.updateZoomWithDelta(e)}performAction(e){this.toggleTimeline()}toggleTimeline(){this.wpTableTimeline.toggle()}enableAutoZoom(){this.wpTableTimeline.enableAutozoom()}getAutoZoomToggleClass(){return this.isAutoZoom?"-disabled":""}}h.\u0275fac=function(e){return new(e||h)(r.hc(s.a),r.hc(r.i),r.hc(a.a))},h.\u0275cmp=r.bc({type:h,selectors:[["wp-timeline-toggle-button"]],features:[r.Qb],decls:4,vars:3,consts:[["id","work-packages-timeline-mode-selection",1,"toolbar-button-group"],[4,"ngIf"],["id","work-packages-timeline-zoom-auto-button",1,"button","timeline-toolbar--button","toolbar-icon",3,"ngClass","click"],["icon-classes","icon-zoom-auto button--icon"],["id","work-packages-timeline-zoom-out-button",1,"button","timeline-toolbar--button","toolbar-icon",3,"disabled","click"],["icon-classes","icon-zoom-out button--icon"],["id","work-packages-timeline-zoom-in-button",1,"button","timeline-toolbar--button","toolbar-icon",3,"disabled","click"],["icon-classes","icon-zoom-in button--icon"]],template:function(e,t){1&amp;e&amp;&amp;(r.nc(0,"ul",0),r.ad(1,l,3,2,"li",1),r.ad(2,d,3,2,"li",1),r.ad(3,u,3,2,"li",1),r.mc()),2&amp;e&amp;&amp;(r.Tb(1),r.Dc("ngIf",t.isActive),r.Tb(1),r.Dc("ngIf",t.isActive),r.Tb(1),r.Dc("ngIf",t.isActive))},directives:[o.q,o.n,c.a],styles:[".toolbar-button-group[_ngcontent-%COMP%] &gt; li[_ngcontent-%COMP%]:last-child{margin-right:10px}"],changeDetection:0})},upbp:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i("fXoL"),s=i("ofXK");const a=["scrollContainer"],r=["scrollPane"],o=["scrollRightBtn"],c=["scrollLeftBtn"];function l(e,t){if(1&amp;e){const e=n.oc();n.nc(0,"li"),n.nc(1,"a",11),n.vc("click",(function(){n.Sc(e);const i=t.$implicit;return n.xc().clickTab(i.id)})),n.mc(),n.mc()}if(2&amp;e){const e=t.$implicit,i=n.xc();n.Yb("selected",e.id===i.currentTabId),n.Ub("tab-id",e.id),n.Tb(1),n.Dc("href",e.path,n.Vc)("textContent",e.name)}}class d{constructor(){this.currentTabId="",this.tabs=[],this.classes=["scrollable-tabs"],this.hideLeftButton=!0,this.hideRightButton=!0}ngAfterViewInit(){this.container=this.scrollContainer.nativeElement,this.pane=this.scrollPane.nativeElement,this.determineScrollButtonVisibility(),this.scrollIntoVisibleArea(this.currentTabId)}clickTab(e){this.currentTabId=e}onScroll(e){this.determineScrollButtonVisibility()}determineScrollButtonVisibility(){this.hideLeftButton=this.pane.scrollLeft&lt;=0,this.hideRightButton=this.pane.scrollWidth-this.pane.scrollLeft&lt;=this.container.clientWidth}scrollRight(){this.pane.scrollLeft+=this.container.clientWidth}scrollLeft(){this.pane.scrollLeft-=this.container.clientWidth}scrollIntoVisibleArea(e){const t=jQuery(this.pane).find(`[tab-id=${e}]`),i=t.position().left+Number(t.outerWidth());this.pane.scrollLeft+this.container.clientWidth
                                   <i&&(this.pane.scrollleft=i-this.container.clientwidth+40)}}d.\u0275fac=function(e){return e='n.xc();n.Dc("ngClass",e.resizerClass)}}class' i;(1&e&&(n.yc(a,!0),n.yc(r,!0),n.yc(o,!0),n.yc(c,!0)),2&e)&&(n.pc(i='n.wc())&amp;&amp;(t.scrollContainer=i.first),n.Pc(i=n.wc())&amp;&amp;(t.scrollPane=i.first),n.Pc(i=n.wc())&amp;&amp;(t.scrollRightBtn=i.first),n.Pc(i=n.wc())&amp;&amp;(t.scrollLeftBtn=i.first))},decls:11,vars:4,consts:[[3,"ngClass"],["scrollContainer",""],[1,"tabrow",3,"scroll"],["scrollPane",""],[3,"selected",4,"ngFor","ngForOf"],[1,"scrollable-tabs--button","-left",3,"hidden","click"],["scrollLeftBtn",""],[1,"icon-arrow-left2"],[1,"scrollable-tabs--button","-right",3,"hidden","click"],["scrollRightBtn",""],[1,"icon-arrow-right2"],[3,"href","textContent","click"]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"div",0,1),n.nc(2,"ul",2,3),n.vc("scroll",(function(e){return' isloggedin(){return="" n='i("fXoL");class' n.s,this.customhandler='!1,this.cursorClass="nwse-resize",this.resizerClass="resizer"}ngOnDestroy(){this.removeEventListener()}startResize(e){e.preventDefault(),e.stopPropagation(),1!==e.buttons&amp;&amp;1!==e.which&amp;&amp;0!==e.which||(this.oldX=this.startX=e.clientX||e.pageX||e.touches[0].clientX,this.oldY=this.startY=e.clientY||e.pageY||e.touches[0].clientY,this.newX=e.clientX||e.pageX||e.touches[0].clientX,this.newY=e.clientY||e.pageY||e.touches[0].clientY,this.resizing=!0,this.setResizeCursor(),this.bindEventListener(e),this.start.emit(this.buildDelta(e)))}onMouseUp(e){this.setAutoCursor(),this.removeEventListener(),this.end.emit(this.buildDelta(e))}onMouseMove(e){e.preventDefault(),e.stopPropagation(),this.oldX=this.newX,this.oldY=this.newY,this.newX=e.clientX||e.pageX||e.touches[0].clientX,this.newY=e.clientY||e.pageY||e.touches[0].clientX,this.move.emit(this.buildDelta(e))}bindEventListener(e){this.mouseMoveHandler=this.onMouseMove.bind(this),this.mouseUpHandler=this.onMouseUp.bind(this),window.addEventListener("mousemove",this.mouseMoveHandler),window.addEventListener("touchmove",this.mouseMoveHandler),window.addEventListener("mouseup",this.mouseUpHandler),window.addEventListener("touchend",this.mouseUpHandler)}removeEventListener(){window.removeEventListener("touchmove",this.mouseMoveHandler),window.removeEventListener("mousemove",this.mouseMoveHandler),window.removeEventListener("mouseup",this.mouseUpHandler),window.removeEventListener("touchend",this.mouseUpHandler)}setResizeCursor(){s.a.setBodyCursor(this.cursorClass,"important")}setAutoCursor(){s.a.setBodyCursor("auto")}buildDelta(e){return{origin:e,absolute:{x:this.newX-this.startX,y:this.newY-this.startY},relative:{x:this.newX-this.oldX,y:this.newY-this.oldX}}}}o.\u0275fac=function(e){return' n.s,this.move="new" n.s,this.start="new" new(e||d)},d.\u0275cmp='n.bc({type:d,selectors:[["ng-component"]],viewQuery:function(e,t){var' new(e||o)},o.\u0275cmp='n.bc({type:o,selectors:[["resizer"]],hostBindings:function(e,t){1&amp;e&amp;&amp;n.vc("mousedown",(function(e){return' o{constructor(){this.resizing="!1,this.end=new" o}));var="" r(e,t){if(1&e&&n.ic(0,"div",1),2&e){const="" strict";i.d(t,"a",(function(){return="" s{get="" s}));var="" t.onscroll(e)})),n.ad(4,l,2,5,"li",4),n.mc(),n.nc(5,"div",5,6),n.vc("click",(function(){return="" t.scrollleft()})),n.ic(7,"span",7),n.mc(),n.nc(8,"div",8,9),n.vc("click",(function(){return="" t.scrollright()})),n.ic(10,"span",10),n.mc(),n.mc()),2&e&&(n.dc("ngclass",t.classes),n.tb(4),n.dc("ngforof",t.tabs),n.tb(1),n.dc("hidden",t.hideleftbutton),n.tb(3),n.dc("hidden",t.hiderightbutton))},directives:[s.n,s.p],encapsulation:2})},"v9+u":function(e,t,i){"use="" t.startresize(e)}))("touchstart",(function(e){return="" t.startresize(e)}))},inputs:{customhandler:"customhandler",cursorclass:"cursorclass",resizerclass:"resizerclass"},outputs:{end:"end",start:"start",move:"move"},ngcontentselectors:["*"],decls:2,vars:1,consts:[[3,"ngclass",4,"ngif"],[3,"ngclass"]],template:function(e,t){1&e&&(n.cc(),n.ad(0,r,1,1,"div",0),n.bc(1)),2&e&&n.dc("ngif",!t.customhandler)},directives:[a.q,a.n],encapsulation:2})},vk8y:function(e,t,i){"use="" this.usermeta.length="">
                                    0}get userId(){return this.userMeta.data("id")}get name(){return this.userMeta.data("name")}get mail(){return this.userMeta.data("mail")}get language(){return I18n.locale||"en"}get userMeta(){return jQuery("meta[name=current_user]")}}s.\u0275fac=function(e){return new(e||s)},s.\u0275prov=n.dc({token:s,factory:s.\u0275fac,providedIn:"root"})},vPHx:function(e,t,i){"use strict";function n(e){window.OpenProject.getPluginContext().then(t=&gt;{const i=t.services.opModalService,n=t.classes.modals.passwordConfirmation;e(document).on("submit","form[data-request-for-confirmation]",(function(e){const t=jQuery(this);return!!t.find('input[name="_password_confirmation"]').length||function(e,t,i,n){return e.find("_password_confirmation").length&gt;0||(t.preventDefault(),i.show(n,"global").closingEvent.subscribe(t=&gt;{t.confirmed&amp;&amp;(jQuery("
                                    <input/>
                                    ").attr({type:"hidden",name:"_password_confirmation",value:t.password_confirmation}).appendTo(e),e.trigger("submit"))}),!1)}(t,e,i,n)}))})}i.r(t);var s,a=i("K247");(s=jQuery)((function(){s(document.documentElement).on("click",e=&gt;{const t=jQuery(e.target);return function(e,t){t.hasClass("-augmented-datepicker")&amp;&amp;t.attr("autocomplete","off").datepicker().datepicker("show")}(0,t),function(e,t){document.contains(e.target)||e.preventDefault();const i=t.closest("a");if(0===i.length)return;const n=i.attr("href")||"",s=n.indexOf("#");""!==n&amp;&amp;0!==s||(-1!==s&amp;&amp;"#"!==n&amp;&amp;(window.location.hash=n),e.preventDefault())}(e,t),!0});const e=window.location.hash;if(e&amp;&amp;e.startsWith("#"))try{const t=document.querySelector(e);t&amp;&amp;t.scrollIntoView()}catch(t){console.log("Could not scroll to given location hash: "+e+" ( "+t.message+")")}if(s(document).on("submit","form",(function(){window.OpenProject.pageIsSubmitted=!0})),document.querySelector(".warning-bar--item")){let e=document.querySelector("#content");e&amp;&amp;(e.style.marginBottom="100px")}s(window).on("beforeunload",e=&gt;{const t=e.originalEvent;window.OpenProject.pageWasEdited&amp;&amp;!window.OpenProject.pageIsSubmitted&amp;&amp;(t.preventDefault(),t.returnValue="")}),s(document.documentElement).on("dragover drop",e=&gt;(e.preventDefault(),!1)),function(){const e=document.querySelectorAll(".augment--refresh-on-form-changes");for(let t=0;t
                                    <e.length;t++){let i="e[t];const" n='jQuery(i),s=n.data("refreshUrl"),a=n.data("inputSelector");n.find(a).on("change",()='>
                                     {window.location.href=s+"?"+n.serialize()})}}(),n(s),(new a.a).isMobile&amp;&amp;function(){let e=window.scrollY;window.addEventListener("scroll",(function(){let t=window.scrollY&lt;0?0:window.scrollY;!jQuery("#main").hasClass("hidden-navigation")||jQuery("#top-menu").hasClass("-global-search-expanded")||Math.abs(t-e)&lt;=55||(void 0!==e&amp;&amp;void 0!==t&amp;&amp;e&gt;t?jQuery("#wrapper").removeClass("-header-scrolled"):jQuery("#wrapper").addClass("-header-scrolled"),e=t)}))}()}))},vd15:function(e,t,i){"use strict";i.d(t,"a",(function(){return S}));var n=i("mrSG"),s=(i("ii2/"),i("XZsv")),a=i("ug4p"),r=i("mMv8"),o=i("Y0Nk"),c=i("RuUM"),l=i("fXoL"),d=i("8zkO"),u=i("d/TE"),h=i("wZYP"),p=i("2Uhg"),m=i("qc15"),g=i("ofXK"),f=i("7MH/"),b=i("/Rze"),v=i("N5AO");const w=["commentContainer"];function y(e,t){if(1&amp;e&amp;&amp;l.jc(0,4),2&amp;e){const e=l.xc();l.Dc("ngTemplateOutlet",e.template)}}function k(e,t){if(1&amp;e&amp;&amp;l.ic(0,"edit-form-portal",10),2&amp;e){const e=l.xc(2);l.Dc("schemaInput",e.schema)("changeInput",e.change)("editFieldHandler",e.handler)}}function C(e,t){if(1&amp;e){const e=l.oc();l.nc(0,"div",11),l.vc("dragover",(function(t){return l.Sc(e),l.xc(2).startDragOverActivation(t)})),l.nc(1,"accessible-by-keyboard",12),l.vc("execute",(function(){return l.Sc(e),l.xc(2).activate()})),l.nc(2,"span",13),l.ic(3,"span",14),l.mc(),l.nc(4,"span",15),l.ic(5,"op-icon",16),l.mc(),l.mc(),l.mc()}if(2&amp;e){const e=l.xc(2);l.Tb(1),l.Dc("linkAriaLabel",e.text.editTitle),l.Tb(2),l.Dc("textContent",e.text.placeholder),l.Tb(2),l.Dc("icon-title",e.text.editTitle)}}function x(e,t){if(1&amp;e&amp;&amp;(l.nc(0,"div",5,6),l.nc(2,"div",7),l.ad(3,k,1,3,"edit-form-portal",8),l.ad(4,C,6,3,"div",9),l.mc(),l.mc()),2&amp;e){const e=l.xc();l.Tb(3),l.Dc("ngIf",e.active),l.Tb(1),l.Dc("ngIf",!e.active)}}function j(e,t){if(1&amp;e&amp;&amp;l.jc(0,4),2&amp;e){const e=l.xc();l.Dc("ngTemplateOutlet",e.template)}}class S extends p.a{constructor(e,t,i,n,s,a,r,o,c,l,d){super(e,t),this.elementRef=e,this.injector=t,this.commentService=i,this.wpLinkedActivities=n,this.ConfigurationService=s,this.loadingIndicator=a,this.wpCacheService=r,this.workPackageNotificationService=o,this.NotificationsService=c,this.cdRef=l,this.I18n=d,this.text={editTitle:this.I18n.t("js.label_add_comment_title"),addComment:this.I18n.t("js.label_add_comment"),cancelTitle:this.I18n.t("js.label_cancel_comment"),placeholder:this.I18n.t("js.label_add_comment_title")},this.fieldLabel=this.text.editTitle,this.inFlight=!1}ngOnInit(){super.ngOnInit(),this.canAddComment=!!this.workPackage.addComment,this.showAbove=this.ConfigurationService.commentsSortedInDescendingOrder(),this.commentService.quoteEvents.pipe(this.untilDestroyed()).subscribe(e=&gt;{this.activate(e),this.commentContainer.nativeElement.scrollIntoView()})}startDragOverActivation(e){return!!this.active||(this.activate(),e.preventDefault(),!1)}get htmlId(){return"wp-comment-field"}activate(e){super.activate(e),this.showAbove||this.scrollToBottom(),this.cdRef.detectChanges()}deactivate(e){e&amp;&amp;this.focus(),this.active=!1,this.cdRef.detectChanges()}handleUserSubmit(){return Object(n.b)(this,void 0,void 0,(function*(){if(this.inFlight||!this.rawComment)return Promise.resolve();return this.inFlight=!0,yield this.onSubmit(),this.loadingIndicator.wpDetails.promise=this.commentService.createComment(this.workPackage,this.commentValue).then(()=&gt;{this.active=!1,this.NotificationsService.addSuccess(this.I18n.t("js.work_packages.comment_added")),this.wpLinkedActivities.require(this.workPackage,!0),this.wpCacheService.updateWorkPackage(this.workPackage),this.inFlight=!1,this.deactivate(!0)}).catch(e=&gt;{this.inFlight=!1,e instanceof s.a?this.workPackageNotificationService.showError(e,this.workPackage):this.NotificationsService.addError(this.I18n.t("js.work_packages.comment_send_failed"))})}))}scrollToBottom(){const e=jQuery(this.elementRef.nativeElement).scrollParent()[0];e&amp;&amp;setTimeout(()=&gt;{e.scrollTop=e.scrollHeight},400)}setErrors(e){}}S.\u0275fac=function(e){return new(e||S)(l.hc(l.q),l.hc(l.A),l.hc(c.a),l.hc(r.a),l.hc(d.a),l.hc(o.a),l.hc(a.a),l.hc(m.a),l.hc(u.a),l.hc(l.i),l.hc(h.a))},S.\u0275cmp=l.bc({type:S,selectors:[["work-package-comment"]],contentQueries:function(e,t,i){var n;(1&amp;e&amp;&amp;l.Zb(i,l.ab,!0),2&amp;e)&amp;&amp;(l.Pc(n=l.wc())&amp;&amp;(t.template=n.first))},viewQuery:function(e,t){var i;(1&amp;e&amp;&amp;l.hd(w,!0),2&amp;e)&amp;&amp;(l.Pc(i=l.wc())&amp;&amp;(t.commentContainer=i.first))},inputs:{workPackage:"workPackage"},features:[l.Qb],decls:5,vars:3,consts:[["id","work-package-activites-container"],["id","work-package-comment-container"],[3,"ngTemplateOutlet",4,"ngIf"],["class","work-package--details--long-field work-packages--activity--add-comment hide-when-print",4,"ngIf"],[3,"ngTemplateOutlet"],[1,"work-package--details--long-field","work-packages--activity--add-comment","hide-when-print"],["commentContainer",""],[1,"inline-edit--container","inplace-edit"],[3,"schemaInput","changeInput","editFieldHandler",4,"ngIf"],["class","inplace-edit--read",3,"dragover",4,"ngIf"],[3,"schemaInput","changeInput","editFieldHandler"],[1,"inplace-edit--read",3,"dragover"],["spanClass","inplace-editing--container inline-edit--display-field","linkClass","inplace-editing--trigger-link",1,"inplace-editing--trigger-container",3,"linkAriaLabel","execute"],[1,"inplace-editing--trigger-text","inline-edit--formattable-display-text","-default"],[3,"textContent"],[1,"inplace-editing--trigger-icon"],["icon-classes","icon-edit",3,"icon-title"]],template:function(e,t){1&amp;e&amp;&amp;(l.nc(0,"div",0),l.nc(1,"div",1),l.ad(2,y,1,1,"ng-container",2),l.ad(3,x,5,2,"div",3),l.ad(4,j,1,1,"ng-container",2),l.mc(),l.mc()),2&amp;e&amp;&amp;(l.Tb(2),l.Dc("ngIf",!t.showAbove),l.Tb(1),l.Dc("ngIf",t.canAddComment),l.Tb(1),l.Dc("ngIf",t.showAbove))},directives:[g.q,g.x,f.a,b.a,v.a],encapsulation:2,changeDetection:0})},vqYl:function(e,t,i){"use strict";i.r(t),i.d(t,"OpenProject",(function(){return a}));var n=i("FnNU"),s=i("IzEk");class a{constructor(){this.pluginContext=Object(n.f)(),this.pageWasEdited=!1,this.pageIsSubmitted=!1}getPluginContext(){return this.pluginContext.values$().pipe(Object(s.a)(1)).toPromise()}get urlRoot(){return jQuery("meta[name=app_base_path]").attr("content")||""}get environment(){return jQuery("meta[name=openproject_initializer]").data("environment")}get edition(){return jQuery("meta[name=openproject_initializer]").data("edition")}get isStandardEdition(){return"standard"===this.edition}get isBimEdition(){return"bim"===this.edition}guardedLocalStorage(e,t){try{if(void 0===t){const t=window.localStorage.getItem(e);return null===t?void 0:t}window.localStorage.setItem(e,t)}catch(i){console.error("Failed to access your browsers local storage. Is your local database corrupted?")}}}window.OpenProject=new a},w6CH:function(e,t,i){"use strict";i.d(t,"a",(function(){return X}));var n=i("fXoL"),s=i("u4T9"),a=i("XGsO"),r=i("J30J"),o=i("mrSG"),c=i("4rda"),l=i("r0MM"),d=i("07mJ");class u extends c.a{render(e,t){const i=this.resource.bcfViewpoints;if(i&amp;&amp;i.length&gt;0){const t=i[0];e.innerHTML=`\n
                                     <img class="thumbnail" src="${this.bcfPathHelper.snapshotPath(t)}"/>
                                     \n      `}else e.innerHTML=""}}Object(o.c)([Object(l.a)(),Object(o.e)("design:type",d.a)],u.prototype,"bcfPathHelper",void 0);var h=i("tk/3"),p=i("HGdY"),m=i("ofXK");class g{constructor(e){this.documentElement=e}get isBcfActivated(){return this.hasBodyClass("bcf-activated")}hasBodyClass(e){return this.documentElement.body.classList.contains(e)}}g.\u0275fac=function(e){return new(e||g)(n.rc(m.d))},g.\u0275prov=n.dc({token:g,factory:g.\u0275fac});var f=i("XNiG"),b=i("/uUt"),v=i("pLZG"),w=i("SxV6"),y=i("CqXF"),k=i("lfyH"),C=i("FnNU");class x extends k.a{constructor(){super(),this.revitMessageReceivedSource=new f.a,this._trackingIdNumber=0,this._ready$=Object(C.f)(!1),this.revitMessageReceived$=this.revitMessageReceivedSource.asObservable(),window.RevitBridge?(console.log("window.RevitBridge is already there, so let's hook up the Revit Listener"),this.hookUpRevitListener()):(console.log("Waiting for Revit Plugin to become ready."),window.addEventListener("revit.plugin.ready",()=&gt;{console.log('CAPTURED EVENT "revit.plugin.ready"'),this.hookUpRevitListener()}))}viewerVisible(){return this._ready$.getValueOr(!1)}getViewpoint(){const e=this.newTrackingId();return this.sendMessageToRevit("ViewpointGenerationRequest",e,""),this.revitMessageReceived$.pipe(Object(b.a)(),Object(v.a)(t=&gt;"ViewpointData"===t.messageType&amp;&amp;t.trackingId===e),Object(w.a)()).toPromise().then(e=&gt;{let t=JSON.parse(e.messagePayload);return t.snapshot={snapshot_type:"png",snapshot_data:t.snapshot},t})}showViewpoint(e){this.sendMessageToRevit("ShowViewpoint",this.newTrackingId(),JSON.stringify(e))}sendMessageToRevit(e,t,i){if(!this.viewerVisible())return void console.log("The Revit bridge is not ready yet.");const n=null!=i?JSON.stringify(i):null;window.RevitBridge.sendMessageToRevit(e,t,n)}hookUpRevitListener(){window.RevitBridge.sendMessageToOpenProject=e=&gt;{const t=JSON.parse(e),i=t.messageType,n=t.trackingId,s=JSON.parse(t.messagePayload);this.revitMessageReceivedSource.next({messageType:i,trackingId:n,messagePayload:s})},this._ready$.putValue(!0)}newTrackingId(){return this._trackingIdNumber=this._trackingIdNumber+1,String(this._trackingIdNumber)}onLoad$(){return this._ready$.values$().pipe(Object(y.a)(void 0))}}x.\u0275fac=function(e){return new(e||x)},x.\u0275prov=n.dc({token:x,factory:x.\u0275fac});var j=i("jW2i"),S=i("g1AQ"),T=i("iB+3"),P=(i("ii2/"),i("Jui0")),I=i("3VS2"),_=i("sjKJ"),O=i("wZYP"),D=i("ug4p"),R=i("AEvm"),E=i("d/TE"),F=i("4n9w"),M=i("lJxs"),A=i("IzEk");class L{constructor(e){this.bcfApi=e,this.authorizationMap=Object(C.g)()}authorized$(e,t,i){const n=this.authorizationMap.get(e);return n.putFromPromiseIfPristine(()=&gt;this.bcfApi.projects.id(e).extensions.get().toPromise()),n.values$().pipe(Object(M.a)(e=&gt;e[t]&amp;&amp;e[t].includes(i)))}isAllowedTo(e,t,i){return this.authorized$(e,t,i).pipe(Object(A.a)(1)).toPromise().catch(()=&gt;!1)}}L.\u0275fac=function(e){return new(e||L)(n.rc(I.a))},L.\u0275prov=n.dc({token:L,factory:L.\u0275fac,providedIn:"root"});var q=i("N5AO");function $(e,t){if(1&amp;e){const e=n.oc();n.nc(0,"div",7),n.nc(1,"ngx-gallery",8),n.vc("change",(function(t){return n.Sc(e),n.xc(2).onGalleryChanged(t)}))("imagesReady",(function(){return n.Sc(e),n.xc(2).selectViewpointInGallery()}))("previewOpen",(function(){return n.Sc(e),n.xc(2).galleryPreviewOpen()}))("previewClose",(function(){return n.Sc(e),n.xc(2).galleryPreviewClose()})),n.mc(),n.mc()}if(2&amp;e){const e=n.xc(2);n.Tb(1),n.Dc("options",e.galleryOptions)("images",e.galleryImages)}}function V(e,t){if(1&amp;e){const e=n.oc();n.nc(0,"a",9),n.vc("click",(function(){return n.Sc(e),n.xc(2).saveCurrentAsViewpoint()})),n.ic(1,"op-icon",10),n.nc(2,"span",11),n.cd(3),n.mc(),n.mc()}if(2&amp;e){const e=n.xc(2);n.Dc("title",e.text.add_viewpoint),n.Tb(3),n.ed(" ",e.text.viewpoint," ")}}function N(e,t){if(1&amp;e&amp;&amp;(n.lc(0),n.nc(1,"div",1),n.nc(2,"div",2),n.nc(3,"div",3),n.ic(4,"h3",4),n.mc(),n.mc(),n.ad(5,$,2,2,"div",5),n.ad(6,V,4,2,"a",6),n.mc(),n.kc()),2&amp;e){const e=n.xc();n.Tb(4),n.Dc("textContent",e.text.bcf),n.Tb(1),n.Dc("ngIf",e.galleryImages.length&gt;0),n.Tb(1),n.Dc("ngIf",e.viewerVisible&amp;&amp;e.createAllowed)}}class H extends R.a{constructor(e,t,i,n,s,a,r,o,c,l,d){super(),this.state=e,this.pathHelper=t,this.currentProject=i,this.bcfApi=n,this.bcfAuthorization=s,this.viewerBridge=a,this.wpCache=r,this.wpCreate=o,this.notifications=c,this.cdRef=l,this.I18n=d,this.text={bcf:this.I18n.t("js.bcf.label_bcf"),viewpoint:this.I18n.t("js.bcf.viewpoint"),add_viewpoint:this.I18n.t("js.bcf.add_viewpoint"),show_viewpoint:this.I18n.t("js.bcf.show_viewpoint"),delete_viewpoint:this.I18n.t("js.bcf.delete_viewpoint"),text_are_you_sure:this.I18n.t("js.text_are_you_sure"),notice_successful_create:this.I18n.t("js.notice_successful_create"),notice_successful_delete:this.I18n.t("js.notice_successful_delete")},this.galleryOptions=[{width:"100%",height:"400px",startIndex:0,image:!1,thumbnailsColumns:1,thumbnailsAutoHide:!1,thumbnailSize:"contain",imageAnimation:"",previewAnimation:!1,previewCloseOnEsc:!0,previewKeyboardNavigation:!0,imageSize:"contain",imageArrowsAutoHide:!0,thumbnailsMargin:5,thumbnailMargin:5,previewDownload:!0,previewCloseOnClick:!0,arrowPrevIcon:"icon-arrow-left2",arrowNextIcon:"icon-arrow-right2",closeIcon:"icon-close",downloadIcon:"icon-download",thumbnailActions:this.actions(),actions:this.actions()},{breakpoint:800,width:"100%",height:"400px",imagePercent:80,thumbnailsPercent:20,thumbnailsMargin:5,thumbnailMargin:5},{breakpoint:680,height:"200px",thumbnailsColumns:3,thumbnailsMargin:5,thumbnailMargin:5}],this.viewpoints=[],this.galleryImages=[],this.viewAllowed=!1,this.createAllowed=!1,this.viewerVisible=this.viewerBridge.viewerVisible()}ngAfterViewInit(){this.observeChanges()}showViewpoint(e){this.viewpointFromIndex(e).get().subscribe(t=&gt;{this.viewerVisible?this.viewerBridge.showViewpoint(t):window.location.href=this.pathHelper.bimDetailsPath(this.workPackage.project.identifier,this.workPackage.id,e)})}deleteViewpoint(e){window.confirm(this.text.text_are_you_sure)&amp;&amp;this.viewpointFromIndex(e).delete().subscribe(e=&gt;{this.notifications.addSuccess(this.text.notice_successful_delete),this.wpCache.require(this.workPackage.id,!0),this.gallery.preview.close()})}saveCurrentAsViewpoint(){return Object(o.b)(this,void 0,void 0,(function*(){const e=yield this.viewerBridge.getViewpoint();yield this.persistViewpoint(e),this.notifications.addSuccess(this.text.notice_successful_create),this.showIndex=this.viewpoints.length,this.wpCache.require(this.workPackage.id,!0)}))}galleryPreviewOpen(){jQuery("#top-menu").addClass("-no-z-index")}galleryPreviewClose(){jQuery("#top-menu").removeClass("-no-z-index")}selectViewpointInGallery(){setTimeout(()=&gt;{var e;return null===(e=this.gallery)||void 0===e?void 0:e.show(this.showIndex)},250)}onGalleryChanged(e){this.showIndex=e.index}observeChanges(){this.wpCache.observe(this.workPackage.id).pipe(this.untilDestroyed()).subscribe(e=&gt;Object(o.b)(this,void 0,void 0,(function*(){this.workPackage=e,this.setTopicUUIDFromWorkPackage();const t=this.workPackage.project.idFromLink;this.viewAllowed=yield this.bcfAuthorization.isAllowedTo(t,"project_actions","viewTopic"),this.createAllowed=yield this.bcfAuthorization.isAllowedTo(t,"topic_actions","createViewpoint"),e.bcfViewpoints&amp;&amp;(this.setViewpoints(e.bcfViewpoints.map(e=&gt;({href:e.href,snapshotURL:`${e.href}/snapshot`}))),this.loadViewpointFromRoute()),this.cdRef.detectChanges()})))}persistViewpoint(e){return Object(o.b)(this,void 0,void 0,(function*(){return this.topicUUID=this.topicUUID||(yield this.createBcfTopic()),this.bcfApi.projects.id(this.wpProjectId).topics.id(this.topicUUID).viewpoints.post(e).toPromise()}))}set showIndex(e){const t=[...this.galleryOptions];t[0].startIndex=e,this.galleryOptions=t}get showIndex(){return this.galleryOptions[0].startIndex}setTopicUUIDFromWorkPackage(){var e;const t=null===(e=this.workPackage.bcfTopic)||void 0===e?void 0:e.href;t&amp;&amp;(this.topicUUID=this.bcfApi.parse(t).id)}createBcfTopic(){return Object(o.b)(this,void 0,void 0,(function*(){return this.bcfApi.projects.id(this.wpProjectId).topics.post(this.workPackage.convertBCF.payload).toPromise().then(e=&gt;e.guid)}))}setViewpoints(e){const t=e.length;this.setThumbnailProperties(t),this.showIndex&lt;0||t&lt;1?this.showIndex=0:this.showIndex&gt;=t&amp;&amp;(this.showIndex=t-1),this.viewpoints=e,this.galleryImages=e.map(e=&gt;({small:e.snapshotURL,medium:e.snapshotURL,big:e.snapshotURL})),this.cdRef.detectChanges()}viewpointFromIndex(e){let t=this.workPackage.bcfViewpoints[e].href;return this.bcfApi.parse(t)}loadViewpointFromRoute(){if("number"==typeof this.state.params.viewpoint){const e=this.state.params.viewpoint;this.showViewpoint(e),this.showIndex=e,this.selectViewpointInGallery(),this.state.go(".",Object.assign(Object.assign({},this.state.params),{viewpoint:void 0}),{reload:!1})}}actions(){return[{icon:"icon-view-model",onClick:(e,t)=&gt;this.showViewpoint(t),titleText:this.text.show_viewpoint},{icon:"icon-delete",onClick:(e,t)=&gt;this.deleteViewpoint(t),titleText:this.text.delete_viewpoint}]}get wpProjectId(){return this.workPackage.project.idFromLink}shouldShowGroup(){return this.viewAllowed&amp;&amp;(this.viewpoints.length&gt;0||this.createAllowed&amp;&amp;this.viewerVisible)}setThumbnailProperties(e){const t=[...this.galleryOptions];t[0].thumbnailsColumns=e&lt;5?e:4,t[1].thumbnailsColumns=e&lt;5?e:4,t[2].thumbnailsColumns=e&lt;4?e:3,t[0].height=`${this.dynamicThumbnailHeight(e)}px`,t[1].height=`${this.dynamicThumbnailHeight(e)}px`,t[2].height=`${this.dynamicThumbnailHeight(e)}px`,this.galleryOptions=t}dynamicThumbnailHeight(e){return Math.max(Math.round(300/e),120)}}function z(e,t){if(1&amp;e){const e=n.oc();n.nc(0,"div",7),n.nc(1,"ngx-gallery",8),n.vc("change",(function(t){return n.Sc(e),n.xc(2).onGalleryChanged(t)}))("imagesReady",(function(){return n.Sc(e),n.xc(2).selectViewpointInGallery()}))("previewOpen",(function(){return n.Sc(e),n.xc(2).galleryPreviewOpen()}))("previewClose",(function(){return n.Sc(e),n.xc(2).galleryPreviewClose()})),n.mc(),n.mc()}if(2&amp;e){const e=n.xc(2);n.Tb(1),n.Dc("options",e.galleryOptions)("images",e.galleryImages)}}function B(e,t){if(1&amp;e){const e=n.oc();n.nc(0,"a",9),n.vc("click",(function(){return n.Sc(e),n.xc(2).saveCurrentAsViewpoint()})),n.ic(1,"op-icon",10),n.nc(2,"span",11),n.cd(3),n.mc(),n.mc()}if(2&amp;e){const e=n.xc(2);n.Dc("title",e.text.add_viewpoint),n.Tb(3),n.ed(" ",e.text.viewpoint," ")}}function Q(e,t){if(1&amp;e&amp;&amp;(n.lc(0),n.nc(1,"div",1),n.nc(2,"div",2),n.nc(3,"div",3),n.ic(4,"h3",4),n.mc(),n.mc(),n.ad(5,z,2,2,"div",5),n.ad(6,B,4,2,"a",6),n.mc(),n.kc()),2&amp;e){const e=n.xc();n.Tb(4),n.Dc("textContent",e.text.bcf),n.Tb(1),n.Dc("ngIf",e.galleryImages.length&gt;0),n.Tb(1),n.Dc("ngIf",e.viewerVisible&amp;&amp;e.createAllowed)}}H.\u0275fac=function(e){return new(e||H)(n.hc(T.G),n.hc(P.a),n.hc(_.a),n.hc(I.a),n.hc(L),n.hc(k.a),n.hc(D.a),n.hc(F.a),n.hc(E.a),n.hc(n.i),n.hc(O.a))},H.\u0275cmp=n.bc({type:H,selectors:[["ng-component"]],viewQuery:function(e,t){var i;(1&amp;e&amp;&amp;n.hd(a.a,!0),2&amp;e)&amp;&amp;(n.Pc(i=n.wc())&amp;&amp;(t.gallery=i.first))},inputs:{workPackage:"workPackage"},features:[n.Qb],decls:1,vars:1,consts:[[4,"ngIf"],[1,"attributes-group","description-group"],[1,"attributes-group--header"],[1,"attributes-group--header-container"],[1,"attributes-group--header-text",3,"textContent"],["class","bcf--viewpoints",4,"ngIf"],["class","button",3,"title","click",4,"ngIf"],[1,"bcf--viewpoints"],[3,"options","images","change","imagesReady","previewOpen","previewClose"],[1,"button",3,"title","click"],["icon-classes","button--icon icon-add"],[1,"button--text"]],template:function(e,t){1&amp;e&amp;&amp;n.ad(0,N,7,3,"ng-container",0),2&amp;e&amp;&amp;n.Dc("ngIf",t.shouldShowGroup())},directives:[m.q,a.a,q.a],styles:[".bcf--viewpoints[_ngcontent-%COMP%]{clear:both}ngx-gallery[_ngcontent-%COMP%]{display:inline-block}ngx-gallery[_ngcontent-%COMP%]     ngx-gallery-thumbnails .ngx-gallery-arrow{color:var(--content-link-color)}ngx-gallery[_ngcontent-%COMP%]     .ngx-gallery-arrow.ngx-gallery-disabled{display:none}ngx-gallery[_ngcontent-%COMP%]     .ngx-gallery-icons-wrapper{background:hsla(0,0%,100%,.5);padding:5px}ngx-gallery[_ngcontent-%COMP%]     .ngx-gallery-icons-wrapper .ngx-gallery-icon{margin-top:0}ngx-gallery[_ngcontent-%COMP%]     .ngx-gallery-icons-wrapper ngx-gallery-action:last-of-type .ngx-gallery-icon{margin-right:0}ngx-gallery[_ngcontent-%COMP%]     .ngx-gallery-thumbnail{background-color:#fff}ngx-gallery[_ngcontent-%COMP%]     .ngx-gallery-thumbnail.ngx-gallery-clickable .ngx-gallery-icon{font-size:1.25rem;color:var(--content-link-color)}ngx-gallery[_ngcontent-%COMP%]     .ngx-gallery-active, ngx-gallery[_ngcontent-%COMP%]     .ngx-gallery-thumbnail{border:1px solid #e7e7e7!important}ngx-gallery[_ngcontent-%COMP%]     .ngx-gallery-preview-img{background-color:#fff}ngx-gallery[_ngcontent-%COMP%]     ngx-gallery-preview{background:rgba(0,0,0,.8)!important}ngx-gallery[_ngcontent-%COMP%]     ngx-gallery-preview a:hover{color:#fff}"],changeDetection:0});class W extends H{ngAfterViewInit(){super.ngAfterViewInit(),this.workPackage.isNew&amp;&amp;this.observeCreation()}showViewpoint(e){}deleteViewpoint(e){this.setViewpoints(this.viewpoints.filter((t,i)=&gt;i!==e))}saveCurrentAsViewpoint(){return Object(o.b)(this,void 0,void 0,(function*(){const e=yield this.viewerBridge.getViewpoint();this.setViewpoints([...this.viewpoints,{snapshotURL:e.snapshot.snapshot_data,viewpoint:e}]),this.showIndex=this.viewpoints.length-1,this.selectViewpointInGallery()}))}shouldShowGroup(){return this.createAllowed&amp;&amp;this.viewerVisible}observeCreation(){this.wpCreate.onNewWorkPackage().pipe(this.untilDestroyed(),Object(A.a)(1)).subscribe(e=&gt;Object(o.b)(this,void 0,void 0,(function*(){this.workPackage=e;for(let e of this.viewpoints)!e.href&amp;&amp;e.viewpoint&amp;&amp;(yield this.persistViewpoint(e.viewpoint));this.showIndex=this.viewpoints.length-1,this.wpCache.require(this.workPackage.id,!0)})))}actions(){return super.actions().filter(e=&gt;"icon-delete"===e.icon)}}W.\u0275fac=function(e){return U(e||W)},W.\u0275cmp=n.bc({type:W,selectors:[["ng-component"]],features:[n.Qb],decls:1,vars:1,consts:[[4,"ngIf"],[1,"attributes-group","description-group"],[1,"attributes-group--header"],[1,"attributes-group--header-container"],[1,"attributes-group--header-text",3,"textContent"],["class","bcf--viewpoints",4,"ngIf"],["class","button",3,"title","click",4,"ngIf"],[1,"bcf--viewpoints"],[3,"options","images","change","imagesReady","previewOpen","previewClose"],[1,"button",3,"title","click"],["icon-classes","button--icon icon-add"],[1,"button--text"]],template:function(e,t){1&amp;e&amp;&amp;n.ad(0,Q,7,3,"ng-container",0),2&amp;e&amp;&amp;n.Dc("ngIf",t.shouldShowGroup())},directives:[m.q,a.a,q.a],styles:[".bcf--viewpoints[_ngcontent-%COMP%]{clear:both}ngx-gallery[_ngcontent-%COMP%]{display:inline-block}ngx-gallery[_ngcontent-%COMP%]     ngx-gallery-thumbnails .ngx-gallery-arrow{color:var(--content-link-color)}ngx-gallery[_ngcontent-%COMP%]     .ngx-gallery-arrow.ngx-gallery-disabled{display:none}ngx-gallery[_ngcontent-%COMP%]     .ngx-gallery-icons-wrapper{background:hsla(0,0%,100%,.5);padding:5px}ngx-gallery[_ngcontent-%COMP%]     .ngx-gallery-icons-wrapper .ngx-gallery-icon{margin-top:0}ngx-gallery[_ngcontent-%COMP%]     .ngx-gallery-icons-wrapper ngx-gallery-action:last-of-type .ngx-gallery-icon{margin-right:0}ngx-gallery[_ngcontent-%COMP%]     .ngx-gallery-thumbnail{background-color:#fff}ngx-gallery[_ngcontent-%COMP%]     .ngx-gallery-thumbnail.ngx-gallery-clickable .ngx-gallery-icon{font-size:1.25rem;color:var(--content-link-color)}ngx-gallery[_ngcontent-%COMP%]     .ngx-gallery-active, ngx-gallery[_ngcontent-%COMP%]     .ngx-gallery-thumbnail{border:1px solid #e7e7e7!important}ngx-gallery[_ngcontent-%COMP%]     .ngx-gallery-preview-img{background-color:#fff}ngx-gallery[_ngcontent-%COMP%]     ngx-gallery-preview{background:rgba(0,0,0,.8)!important}ngx-gallery[_ngcontent-%COMP%]     ngx-gallery-preview a:hover{color:#fff}"],changeDetection:0});const U=n.pc(W);class X{constructor(e){X.bootstrap(e)}static bootstrap(e){if(this.bootstrapCalled)return;this.bootstrapCalled=!0,e.get(r.a).addFieldType(u,"bcfThumbnail",["BCF Thumbnail"]),e.get(S.a).register("prependedAttributeGroups",e=&gt;{if(window.OpenProject.isBimEdition)return e.isNew?W:H})}}X.bootstrapCalled=!1,X.\u0275mod=n.fc({type:X}),X.\u0275inj=n.ec({factory:function(e){return new(e||X)(n.rc(n.A))},providers:[{provide:h.a,useClass:p.a,multi:!0},{provide:k.a,useFactory:e=&gt;window.navigator.userAgent.search("Revit")&gt;-1?new x:e.get(j.a,new j.a),deps:[n.A]},g,d.a],imports:[[s.a,a.b]]})},wEvd:function(e,t){jQuery((function(e){var t=e.datepicker.regional,i=t[I18n.locale]||t[""];"number"==typeof I18n.firstDayOfWeek&amp;&amp;(i.firstDay=I18n.firstDayOfWeek),e.datepicker.setDefaults(i);var n=e.datepicker._gotoToday;e.datepicker._gotoToday=function(t){n.call(this,t);var i=e(t),s=this._getInst(i[0]),a=e.datepicker._formatDate(s);i.val(a),i.blur(),e.datepicker._hideDatepicker()};var s={showWeek:!0,changeMonth:!0,changeYear:!0,yearRange:"c-100:c+10",dateFormat:"yy-mm-dd",showButtonPanel:!0,calculateWeek:function(t){var i=new Date(+t);return 1!=t.getDay()&amp;&amp;i.setDate(t.getDate()-t.getDay()+1),e.datepicker.iso8601Week(i)}};e.datepicker.setDefaults(s),e.extend(e.datepicker,{_originalGotoToday:e.datepicker._gotoToday,_gotoToday:function(t){var i=e(t),n=this._getInst(i[0]),s=new Date,a=this._formatDate(n,s.getDate(),s.getMonth(),s.getFullYear());this._originalGotoToday(t),this._selectDate(t,a)},_inlineDatepicker2:e.datepicker._inlineDatepicker,_inlineDatepicker:function(t,i){this._inlineDatepicker2(t,i);var n=e.datepicker._get(i,"beforeShow");n&amp;&amp;n.apply(t,[t,i])},_checkOffsetOriginal:e.datepicker._checkOffset,_checkOffset:function(t,i,n){var s=e.datepicker._checkOffsetOriginal(t,i,n),a=this._get(t,"alterOffset");if(a){var r=t.input?t.input[0]:null;return a.apply(r,[s])}return s}})}))},wOIT:function(e,t,i){"use strict";i.d(t,"b",(function(){return d})),i.d(t,"a",(function(){return u}));var n=i("wZYP"),s=i("fXoL"),a=i("3Pt+"),r=i("ofXK"),o=i("ecJW");function c(e,t){if(1&amp;e&amp;&amp;s.ic(0,"option",6),2&amp;e){const e=t.$implicit;s.Dc("textContent",e.label)("ngValue",e)}}function l(e,t){if(1&amp;e){const e=s.oc();s.nc(0,"span",7),s.nc(1,"op-date-picker",8),s.vc("onChange",(function(t){return s.Sc(e),s.xc().updateField(t)}))("onInputChange",(function(t){return s.Sc(e),s.xc().updateField(t)})),s.ic(2,"input",9),s.mc(),s.mc()}if(2&amp;e){const e=s.xc();s.Tb(2),s.Dc("name",e.fieldId+"_input")("ngModel",e.fieldValue),s.Ub("id",e.fieldId+"_visible")}}const d="custom-date-action-admin";class u{constructor(e,t,i,n){this.elementRef=e,this.cdRef=t,this.appRef=i,this.I18n=n,this.valueVisible=!1,this.onKey="on",this.currentKey="current",this.currentFieldValue="%CURRENT_DATE%",this.operators=[{key:this.onKey,label:this.I18n.t("js.custom_actions.date.specific")},{key:this.currentKey,label:this.I18n.t("js.custom_actions.date.current_date")}]}ngOnInit(){const e=this.elementRef.nativeElement;this.fieldName=e.dataset.fieldName,this.fieldValue=e.dataset.fieldValue,this.fieldValue===this.currentFieldValue?this.selectedOperator=this.operators[1]:(this.selectedOperator=this.operators[0],this.visibleValue=this.fieldValue),this.toggleValueVisibility()}toggleValueVisibility(){this.valueVisible=this.selectedOperator.key===this.onKey,this.fieldValue===this.currentFieldValue&amp;&amp;(this.fieldValue=""),this.updateDbValue()}updateDbValue(){this.selectedOperator.key===this.currentKey&amp;&amp;(this.fieldValue=this.currentFieldValue)}get fieldId(){return this.fieldName.replace(/\[|\]/g,"_").replace("__","_").replace(/_$/,"")}updateField(e){this.fieldValue=e,this.cdRef.detectChanges()}}u.\u0275fac=function(e){return new(e||u)(s.hc(s.q),s.hc(s.i),s.hc(s.f),s.hc(n.a))},u.\u0275cmp=s.bc({type:u,selectors:[["custom-date-action-admin"]],decls:6,vars:6,consts:[[1,"form--field-container"],[1,"form--select-container"],[1,"form--select",3,"ngModel","ngModelChange","change"],[3,"textContent","ngValue",4,"ngFor","ngForOf"],["class","form--text-field-container -slim",4,"ngIf"],["type","hidden",3,"name","value"],[3,"textContent","ngValue"],[1,"form--text-field-container","-slim"],[3,"onChange","onInputChange"],["type","text",1,"form--text-field",3,"name","ngModel"]],template:function(e,t){1&amp;e&amp;&amp;(s.nc(0,"div",0),s.nc(1,"span",1),s.nc(2,"select",2),s.vc("ngModelChange",(function(e){return t.selectedOperator=e}))("change",(function(){return t.toggleValueVisibility()})),s.ad(3,c,1,2,"option",3),s.mc(),s.mc(),s.ad(4,l,3,3,"span",4),s.ic(5,"input",5),s.mc()),2&amp;e&amp;&amp;(s.Tb(2),s.Dc("ngModel",t.selectedOperator),s.Ub("id",t.fieldId),s.Tb(1),s.Dc("ngForOf",t.operators),s.Tb(1),s.Dc("ngIf",t.valueVisible),s.Tb(1),s.Dc("name",t.fieldName)("value",t.fieldValue))},directives:[a.y,a.m,a.p,r.p,r.q,a.r,a.B,o.a,a.c],encapsulation:2})},wZYP:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");class s{constructor(){this._i18n=window.I18n,this.toNumber=this._i18n.toNumber.bind(this._i18n),this.toPercentage=this._i18n.toPercentage.bind(this._i18n),this.toCurrency=this._i18n.toCurrency.bind(this._i18n),this.strftime=this._i18n.strftime.bind(this._i18n),this.toHumanSize=this._i18n.toHumanSize.bind(this._i18n)}get locale(){return this._i18n.locale}t(e,t){return this._i18n.t(e,t)}lookup(e){return this._i18n.lookup(e)}}s.\u0275fac=function(e){return new(e||s)},s.\u0275prov=n.dc({token:s,factory:s.\u0275fac,providedIn:"root"})},wyKs:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("zqrF");class s{constructor(e){this.isVisible=!1,this.last=null,this.collapsed={},this.isVisible=e}}var a=i("fXoL");class r extends n.a{valueFromQuery(e){const t=new s(e.showHierarchies),i=this.current;return i&amp;&amp;(t.collapsed=i.collapsed),t}hasChanged(e){return e.showHierarchies!==this.isEnabled}applyToQuery(e){return e.showHierarchies=this.isEnabled,this.isEnabled}get isEnabled(){return!(!this.current||!this.current.isVisible)}setEnabled(e=!0){const t=Object.assign(Object.assign({collapsed:{}},this.current),{isVisible:e,last:null});this.update(t)}toggleState(){return this.setEnabled(!this.isEnabled),this.isEnabled}collapsed(e){return this.current.collapsed[e]}collapse(e){this.setState(e,!0)}expand(e){this.setState(e,!1)}toggle(e){this.setState(e,!this.collapsed(e))}setState(e,t){const i=Object.assign(Object.assign({},this.current),{last:e});i.collapsed[e]=t,this.update(i)}get current(){const e=this.lastUpdatedState.value;return void 0===e?this.initialState:(e.collapsed||(e.collapsed={}),e)}get initialState(){return new s(!1)}}r.\u0275fac=function(e){return o(e||r)},r.\u0275prov=a.dc({token:r,factory:r.\u0275fac});const o=a.pc(r)},x5It:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("fXoL");class s{constructor(){this.causedUpdates=[]}includes(e){return this.causedUpdates.includes(this.cacheValue(e))}add(e){this.causedUpdates.length&gt;100&amp;&amp;this.causedUpdates.splice(0,90),this.causedUpdates.push(this.cacheValue(e))}cacheValue(e){return e.updatedAt+e.$href}}s.\u0275fac=function(e){return new(e||s)},s.\u0275prov=n.dc({token:s,factory:s.\u0275fac})},xFOf:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i("Qs0b"),s=i("wZYP"),a=i("fXoL"),r=i("ofXK");const o=function(e){return{"-left-margin":e}};class c{constructor(e){this.I18n=e,this.leftMargin=!1,this.text={enterpriseFeature:this.I18n.t("js.upsale.ee_only")}}eeLink(){return this.opReferrer?n.b+"&amp;op_referrer="+this.opReferrer:n.b}}c.\u0275fac=function(e){return new(e||c)(a.hc(s.a))},c.\u0275cmp=a.bc({type:c,selectors:[["enterprise-banner"]],inputs:{leftMargin:"leftMargin",textMessage:"textMessage",linkMessage:"linkMessage",opReferrer:"opReferrer"},decls:5,vars:7,consts:[[1,"notification-box","-ee-upsale",3,"ngClass"],[1,"notification-box--content"],[1,"-bold",3,"textContent"],[3,"textContent"],["target","blank",3,"href","textContent"]],template:function(e,t){1&amp;e&amp;&amp;(a.nc(0,"div",0),a.nc(1,"div",1),a.ic(2,"p",2),a.ic(3,"p",3),a.ic(4,"a",4),a.mc(),a.mc()),2&amp;e&amp;&amp;(a.Dc("ngClass",a.Ic(5,o,t.leftMargin)),a.Tb(2),a.Dc("textContent",t.text.enterpriseFeature),a.Tb(1),a.Dc("textContent",t.textMessage),a.Tb(1),a.Dc("href",t.eeLink(),a.Vc)("textContent",t.linkMessage))},directives:[r.n],styles:[".notification-box.-left-margin[_ngcontent-%COMP%]{margin-left:1.25rem}.notification-box[_ngcontent-%COMP%]   .notification-box--content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:10px}"]})},xLNn:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("AEvm");class s extends n.a{constructor(e){super(),this.I18n=e,this.isActive=!1,this.text={activate:this.I18n.t("js.label_activate"),deactivate:this.I18n.t("js.label_deactivate"),label:this.labelKey?this.I18n.t(this.labelKey):"",buttonText:this.textKey?this.I18n.t(this.textKey):""}}get label(){return this.text.label}get buttonText(){return this.text.buttonText}get labelKey(){return""}get textKey(){return""}get activationPrefix(){return this.isActive?"":this.text.activate+" "}get deactivationPrefix(){return this.isActive?this.text.deactivate+" ":""}get prefix(){return this.activationPrefix||this.deactivationPrefix}isToggle(){return!1}}},xRac:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("u4T9"),s=i("fXoL");class a{}a.\u0275mod=s.fc({type:a}),a.\u0275inj=s.ec({factory:function(e){return new(e||a)},imports:[[n.a]]})},"xV+i":function(e,t,i){"use strict";i.d(t,"c",(function(){return l})),i.d(t,"b",(function(){return d})),i.d(t,"a",(function(){return u}));var n=i("mrSG"),s=i("6XbZ"),a=i("iMRi"),r=i("CBsm"),o=i("wyKs"),c=i("r0MM");const l="-hierarchy-collapsed",d="wp-table--hierarchy-aditional-row";class u extends s.a{constructor(e,t){super(e,t),this.injector=e,this.workPackageTable=t,this.text={leaf:e=&gt;this.I18n.t("js.work_packages.hierarchy.leaf",{level:e}),expanded:e=&gt;this.I18n.t("js.work_packages.hierarchy.children_expanded",{level:e}),collapsed:e=&gt;this.I18n.t("js.work_packages.hierarchy.children_collapsed",{level:e})}}refreshRow(e,t){const i=super.refreshRow(e,t);return i.find(".wp-table--hierarchy-span").remove(),this.appendHierarchyIndicator(e,i),i}buildEmpty(e){let[t,i]=super.buildEmpty(e),[n,s]=this.ancestorRowData(e);return t.classList.add(...n),this.appendHierarchyIndicator(e,jQuery(t)),[t,s]}ancestorRowData(e){const t=this.wpTableHierarchies.current,i=[];let n=!1;return this.parentsWithVisibleChildren[e.id]&amp;&amp;i.push(Object(r.d)(e.id)),_.isArray(e.ancestors)&amp;&amp;e.ancestors.forEach(e=&gt;{i.push(Object(r.c)(e.id)),t.collapsed[e.id]&amp;&amp;(n=!0,i.push(Object(r.b)(e.id)))}),[i,n]}buildAncestorRow(e,t,i){const n=this.states.workPackages.get(e.id).value,[s,a]=this.buildEmpty(n);return s.classList.add(d),[s,a]}appendHierarchyIndicator(e,t,i){const n=void 0===i?e.ancestors.length:i,s=this.buildHierarchyIndicator(e,t,n);t.find("td.subject").addClass("-with-hierarchy").prepend(s),t.find("td.subject").css("minWidth",125+20*n+"px"),t.find("td.subject .wp-table--cell-container").css("width","calc(100% - 25px - "+20*n+"px)")}buildHierarchyIndicator(e,t,i){const n=document.createElement("span"),s=this.wpTableHierarchies.collapsed(e.id),a=25+20*i+"px";if(n.classList.add("wp-table--hierarchy-span"),n.style.width=a,n.dataset.indentation=a,this.parentsWithVisibleChildren[e.id]){const e=s?l:"";n.innerHTML=`\n
                                     <a class="wp-table--hierarchy-indicator ${e}" href="" role="button" tabindex="0">
                                      \n
                                      <span aria-hidden="true" class="wp-table--hierarchy-indicator-icon">
                                      </span>
                                      \n
                                      <span class="wp-table--hierarchy-indicator-expanded hidden-for-sighted">
                                       ${this.text.expanded(i)}
                                      </span>
                                      \n
                                      <span class="wp-table--hierarchy-indicator-collapsed hidden-for-sighted">
                                       ${this.text.collapsed(i)}
                                      </span>
                                      \n
                                     </a>
                                     \n        `}else n.innerHTML=`\n
                                     <span class="wp-table--leaf-indicator" tabindex="0">
                                      \n
                                      <span class="hidden-for-sighted">
                                       ${this.text.leaf(i)}
                                      </span>
                                      \n
                                     </span>
                                     \n        `;return n}}Object(n.c)([Object(c.a)(),Object(n.e)("design:type",o.a)],u.prototype,"wpTableHierarchies",void 0),Object(n.c)([Object(c.a)(),Object(n.e)("design:type",a.a)],u.prototype,"states",void 0)},xiBa:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i("wZYP"),s=i("sjKJ"),a=i("07mJ"),r=i("fXoL"),o=i("N5AO");class c{constructor(e,t,i){this.I18n=e,this.currentProject=t,this.bcfPathHelper=i,this.text={import:this.I18n.t("js.bcf.import")}}handleClick(){var e=this.currentProject.identifier;if(e){var t=this.bcfPathHelper.projectImportIssuePath(e);window.location.href=t}}}c.\u0275fac=function(e){return new(e||c)(r.hc(n.a),r.hc(s.a),r.hc(a.a))},c.\u0275cmp=r.bc({type:c,selectors:[["bcf-import-button"]],decls:4,vars:2,consts:[[1,"button","import-bcf-button",3,"title","click"],["icon-classes","button--icon icon-import"],[1,"button--text"]],template:function(e,t){1&amp;e&amp;&amp;(r.nc(0,"a",0),r.vc("click",(function(){return t.handleClick()})),r.ic(1,"op-icon",1),r.nc(2,"span",2),r.cd(3),r.mc(),r.mc()),2&amp;e&amp;&amp;(r.Dc("title",t.text.import),r.Tb(3),r.ed(" ",t.text.import," "))},directives:[o.a],encapsulation:2})},y2Tr:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("Mo6U");class s extends n.a{static get active_user_statuses(){return["active","registered"]}get state(){return this.states.users.get(this.href)}get showUserPath(){return this.showUser?this.showUser.$link.href:null}get isActive(){return s.active_user_statuses.indexOf(this.status)&gt;=0}}},yCBR:function(e,t,i){"use strict";i.d(t,"b",(function(){return f})),i.d(t,"a",(function(){return b}));var n=i("XV4z"),s=i("Wi9d"),a=i("4EDS"),r=i("K018"),o=i("lJxs"),c=i("sjKJ"),l=i("fXoL"),d=i("ofXK"),u=i("0loS");const h=function(){return{reload:!0}},p=function(e,t){return{board_id:e,query_props:"",projects:"projects",projectPath:t}};function m(e,t){if(1&amp;e&amp;&amp;(l.nc(0,"li"),l.ic(1,"a",3),l.mc()),2&amp;e){const e=t.$implicit,i=l.xc(2);l.Tb(1),l.Dc("textContent",e.name)("uiOptions",l.Hc(3,h))("uiParams",l.Jc(4,p,e.id,i.currentProjectIdentifier))}}function g(e,t){if(1&amp;e&amp;&amp;(l.nc(0,"div"),l.nc(1,"ul",1),l.ad(2,m,2,7,"li",2),l.mc(),l.mc()),2&amp;e){const e=t.ngIf,i=l.xc();l.Tb(2),l.Dc("ngForOf",e)("ngForTrackBy",i.trackById)}}const f="boards-menu";class b{constructor(e,t,i,n){this.boardService=e,this.boardCache=t,this.currentProject=i,this.mainMenuService=n,this.trackById=a.a.compareByAttribute("id"),this.currentProjectIdentifier=this.currentProject.identifier,this.boards$=this.boardCache.observeAll().pipe(Object(o.a)(e=&gt;e.sort((function(e,t){return e.name
                                     <t.name?-1:e.name>
                                      t.name?1:0}))))}ngOnInit(){this.mainMenuService.onActivate("board_view").subscribe(()=&gt;{this.focusBackArrow(),this.boardService.loadAllBoards()})}focusBackArrow(){jQuery('*[data-name="board_view"] .main-menu--arrow-left-to-project').focus()}}b.\u0275fac=function(e){return new(e||b)(l.hc(n.a),l.hc(s.a),l.hc(c.a),l.hc(r.a))},b.\u0275cmp=l.bc({type:b,selectors:[["boards-menu"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"main-menu--children","boards--menu-items"],[4,"ngFor","ngForOf","ngForTrackBy"],["uiSref","boards.show",1,"main-menu--children-sub-item","ellipsis",3,"textContent","uiOptions","uiParams"]],template:function(e,t){1&amp;e&amp;&amp;(l.ad(0,g,3,2,"div",0),l.yc(1,"async")),2&amp;e&amp;&amp;l.Dc("ngIf",l.zc(1,1,t.boards$))},directives:[d.q,d.p,u.AnchorUISref,u.UISref],pipes:[d.a],encapsulation:2})},yIst:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i("mrSG"),s=i("eyhC"),a=i("cd/7"),r=i("qHU1"),o=i("WW/2"),c=i("4lR/"),l=i("qtzK"),d=i("r0MM");class u{constructor(e,t){this.injector=e}get EVENT(){return"contextmenu.cardView.rightclick"}get SELECTOR(){return".wp-card"}eventScope(e){return jQuery(e.container.nativeElement)}handleEvent(e,t){let i=jQuery(t.target);if(i.closest(`.${a.c}`).length)return Object(r.a)("Allowing original context menu on state link"),!0;t.preventDefault(),t.stopPropagation();const n=i.closest("wp-single-card"),s=n.data("workPackageId");if(!s)return!0;{let i=n.data("classIdentifier"),a=this.wpCardView.findRenderedCard(i);this.wpTableSelection.isSelected(s)||this.wpTableSelection.setSelection(s,a);const r=new l.a(this.injector,s,jQuery(t.target),{},e.showInfoButton);this.opContextMenu.show(r,t)}return!1}}Object(n.c)([Object(d.a)(),Object(n.e)("design:type",s.a)],u.prototype,"wpTableSelection",void 0),Object(n.c)([Object(d.a)(),Object(n.e)("design:type",o.a)],u.prototype,"wpCardView",void 0),Object(n.c)([Object(d.a)(),Object(n.e)("design:type",c.a)],u.prototype,"opContextMenu",void 0)},yUKD:function(e,t,i){"use strict";i.d(t,"a",(function(){return f}));var n=i("2Qcm"),s=i("wZYP"),a=i("iMRi"),r=i("fbLK"),o=i("E2tj"),c=i("fXoL"),l=i("ofXK"),d=i("3Pt+"),u=i("ZOsW"),h=i("xFOf");const p=["highlightedAttributesNgSelect"],m=["rowHighlightNgSelect"];function g(e,t){if(1&amp;e&amp;&amp;c.ic(0,"enterprise-banner",13),2&amp;e){const e=c.xc();c.Dc("linkMessage",e.text.upsaleCheckOutLink)("textMessage",e.text.upsaleAttributeHighlighting)}}class f{constructor(e,t,i,n,s,a){this.injector=e,this.I18n=t,this.states=i,this.querySpace=n,this.Banners=s,this.wpTableHighlight=a,this.highlightingMode="inline",this.entireRowMode=!1,this.lastEntireRowAttribute="status",this.eeShowBanners=!1,this.availableInlineHighlightedAttributes=[],this.selectedAttributes=[],this.availableRowHighlightedAttributes=[],this.text={title:this.I18n.t("js.work_packages.table_configuration.highlighting"),highlighting_mode:{description:this.I18n.t("js.work_packages.table_configuration.highlighting_mode.description"),none:this.I18n.t("js.work_packages.table_configuration.highlighting_mode.none"),inline:this.I18n.t("js.work_packages.table_configuration.highlighting_mode.inline"),inline_all_attributes:this.I18n.t("js.work_packages.table_configuration.highlighting_mode.inline_all"),status:this.I18n.t("js.work_packages.table_configuration.highlighting_mode.status"),type:this.I18n.t("js.work_packages.properties.type"),priority:this.I18n.t("js.work_packages.table_configuration.highlighting_mode.priority"),entire_row_by:this.I18n.t("js.work_packages.table_configuration.highlighting_mode.entire_row_by")},upsaleAttributeHighlighting:this.I18n.t("js.work_packages.table_configuration.upsale.attribute_highlighting"),upsaleCheckOutLink:this.I18n.t("js.work_packages.table_configuration.upsale.check_out_link")}}ngOnInit(){this.availableInlineHighlightedAttributes=this.availableHighlightedAttributes,this.availableRowHighlightedAttributes=[{name:this.text.highlighting_mode.status,value:"status"},{name:this.text.highlighting_mode.priority,value:"priority"}],this.setSelectedValues(),this.eeShowBanners=this.Banners.eeShowBanners,this.updateMode(this.wpTableHighlight.current.mode),this.eeShowBanners&amp;&amp;this.updateMode("none")}onSave(){let e=this.highlightingMode;this.wpTableHighlight.update({mode:e,selectedAttributes:this.selectedAttributes})}updateMode(e){this.highlightingMode="entire-row"===e?this.lastEntireRowAttribute:e,-1!==["status","priority"].indexOf(this.highlightingMode)?(this.lastEntireRowAttribute=this.highlightingMode,this.entireRowMode=!0):this.entireRowMode=!1}updateHighlightingAttributes(e){this.selectedAttributes=e}disabledValue(e){return e?"disabled":null}get availableHighlightedAttributes(){return this.querySpace.queryForm.value.schema.highlightedAttributes.allowedValues}onOpen(e){setTimeout(()=&gt;{e.dropdownPanel&amp;&amp;e.dropdownPanel._updatePosition()},25)}setSelectedValues(){const e=this.wpTableHighlight.current.selectedAttributes;this.selectedAttributes=void 0===e?this.availableInlineHighlightedAttributes:e}}f.\u0275fac=function(e){return new(e||f)(c.hc(c.A),c.hc(s.a),c.hc(a.a),c.hc(o.a),c.hc(r.a),c.hc(n.a))},f.\u0275cmp=c.bc({type:f,selectors:[["ng-component"]],viewQuery:function(e,t){var i;(1&amp;e&amp;&amp;(c.hd(p,!0),c.hd(m,!0)),2&amp;e)&amp;&amp;(c.Pc(i=c.wc())&amp;&amp;(t.highlightedAttributesNgSelect=i.first),c.Pc(i=c.wc())&amp;&amp;(t.rowHighlightNgSelect=i.first))},decls:25,vars:22,consts:[["class","ee-attribute-highlighting-upsale","opReferrer","wp-attribute-highlighting#attribute-highlighting",3,"linkMessage","textMessage",4,"ngIf"],[3,"textContent"],[1,"form--field"],[1,"form--label"],["type","radio","value","inline","name","highlighting_mode_switch",3,"ngModel","ngModelChange","change"],[1,"form--field-container"],[1,"form--select-container"],["bindLabel","name","name","highlighting_attributes","appendTo","body",1,"form--select-field","-multi-select",3,"items","ngModel","multiple","disabled","clearable","closeOnSelect","ngModelChange","open","change"],["highlightedAttributesNgSelect",""],["type","radio","name","entire_row_switch",3,"ngModel","value","ngModelChange","change"],["bindLabel","name","bindValue","value","name","selected_attribute","appendTo","body","id","selected_attribute",1,"form--select-field",3,"items","ngModel","disabled","clearable","ngModelChange","open","change"],["rowHighlightNgSelect",""],["type","radio","value","none","name","highlighting_mode_switch",3,"ngModel","ngModelChange","change"],["opReferrer","wp-attribute-highlighting#attribute-highlighting",1,"ee-attribute-highlighting-upsale",3,"linkMessage","textMessage"]],template:function(e,t){if(1&amp;e){const e=c.oc();c.nc(0,"div"),c.ad(1,g,1,2,"enterprise-banner",0),c.nc(2,"form"),c.ic(3,"p",1),c.nc(4,"div",2),c.nc(5,"label",3),c.nc(6,"input",4),c.vc("ngModelChange",(function(e){return t.highlightingMode=e}))("change",(function(e){return t.updateMode(e.target.value)})),c.mc(),c.ic(7,"span",1),c.cd(8,"\xa0 "),c.mc(),c.nc(9,"div",5),c.nc(10,"div",6),c.nc(11,"ng-select",7,8),c.vc("ngModelChange",(function(e){return t.selectedAttributes=e}))("open",(function(){c.Sc(e);const i=c.Qc(12);return t.onOpen(i)}))("change",(function(e){return t.updateHighlightingAttributes(e)})),c.mc(),c.mc(),c.mc(),c.mc(),c.nc(13,"div",2),c.nc(14,"label",3),c.nc(15,"input",9),c.vc("ngModelChange",(function(e){return t.entireRowMode=e}))("change",(function(){return t.updateMode("entire-row")})),c.mc(),c.ic(16,"span",1),c.mc(),c.nc(17,"div",5),c.nc(18,"div",6),c.nc(19,"ng-select",10,11),c.vc("ngModelChange",(function(e){return t.lastEntireRowAttribute=e}))("open",(function(){c.Sc(e);const i=c.Qc(20);return t.onOpen(i)}))("change",(function(e){return t.updateMode(e.value)})),c.mc(),c.mc(),c.mc(),c.mc(),c.nc(21,"div",2),c.nc(22,"label",3),c.nc(23,"input",12),c.vc("ngModelChange",(function(e){return t.highlightingMode=e}))("change",(function(e){return t.updateMode(e.target.value)})),c.mc(),c.ic(24,"span",1),c.mc(),c.mc(),c.mc(),c.mc()}2&amp;e&amp;&amp;(c.Tb(1),c.Dc("ngIf",t.eeShowBanners),c.Tb(2),c.Dc("textContent",t.text.highlighting_mode.description),c.Tb(3),c.Dc("ngModel",t.highlightingMode),c.Ub("disabled",t.disabledValue(t.eeShowBanners)),c.Tb(1),c.Dc("textContent",t.text.highlighting_mode.inline),c.Tb(4),c.Dc("items",t.availableInlineHighlightedAttributes)("ngModel",t.selectedAttributes)("multiple",!0)("disabled","inline"!==t.highlightingMode)("clearable",!1)("closeOnSelect",!1),c.Tb(4),c.Dc("ngModel",t.entireRowMode)("value",!0),c.Ub("disabled",t.disabledValue(t.eeShowBanners)),c.Tb(1),c.Dc("textContent",t.text.highlighting_mode.entire_row_by),c.Tb(3),c.Dc("items",t.availableRowHighlightedAttributes)("ngModel",t.lastEntireRowAttribute)("disabled",t.disabledValue(t.eeShowBanners))("clearable",!1),c.Tb(4),c.Dc("ngModel",t.highlightingMode),c.Ub("disabled",t.disabledValue(t.eeShowBanners)),c.Tb(1),c.Dc("textContent",t.text.highlighting_mode.none))},directives:[l.q,d.C,d.n,d.o,d.u,d.c,d.m,d.p,u.a,h.a],encapsulation:2})},ylTo:function(e,t,i){"use strict";i.d(t,"a",(function(){return f}));var n=i("iB+3"),s=i("Y0Nk"),a=i("ug4p"),r=i("wZYP"),o=i("VFHb"),c=i("Jui0"),l=i("4EDS"),d=i("qc15"),u=i("AEvm"),h=i("fXoL");function p(e,t){if(1&amp;e&amp;&amp;(h.nc(0,"div",8),h.nc(1,"div",9),h.ic(2,"p",10),h.mc(),h.mc()),2&amp;e){const e=h.xc();h.Tb(2),h.Dc("textContent",e.text.loadingError)}}function m(e,t){if(1&amp;e&amp;&amp;h.ic(0,"wp-watcher-entry",11),2&amp;e){const e=t.$implicit;h.Dc("watcher",e)}}const g=function(e){return{"-read-only":e}};class f extends u.a{constructor(e,t,i,n,s,a,r,o,c){super(),this.I18n=e,this.elementRef=t,this.wpWatchersService=i,this.$transition=n,this.notificationService=s,this.loadingIndicator=a,this.wpCacheService=r,this.cdRef=o,this.pathHelper=c,this.trackByHref=l.a.trackByHref,this.error=!1,this.noResults=!1,this.allowedToView=!1,this.allowedToAdd=!1,this.allowedToRemove=!1,this.watching=[],this.text={loading:this.I18n.t("js.watchers.label_loading"),loadingError:this.I18n.t("js.watchers.label_error_loading"),autocomplete:{placeholder:this.I18n.t("js.watchers.typeahead_placeholder")}}}ngOnInit(){this.$element=jQuery(this.elementRef.nativeElement),this.workPackageId=this.$transition.params("to").workPackageId,this.wpCacheService.loadWorkPackage(this.workPackageId).values$().pipe(this.untilDestroyed()).subscribe(e=&gt;{this.workPackage=e,this.loadCurrentWatchers()}),this.availableWatchersPath=this.pathHelper.api.v3.work_packages.id(this.workPackageId).available_watchers}loadCurrentWatchers(){this.error=!1,this.allowedToView=!!this.workPackage.watchers,this.allowedToAdd=!!this.workPackage.addWatcher,this.allowedToRemove=!!this.workPackage.removeWatcher,this.allowedToView?this.wpWatchersService.require(this.workPackage).then(e=&gt;{this.watching=e,this.cdRef.detectChanges()}).catch(e=&gt;{this.notificationService.showError(e,this.workPackage)}):this.error=!0}set loadingPromise(e){this.loadingIndicator.wpDetails.promise=e}addWatcher(e){this.loadingPromise=this.workPackage.addWatcher.$link.$fetch({user:{href:e.href}}).then(()=&gt;{this.wpWatchersService.require(this.workPackage,!0),this.wpCacheService.loadWorkPackage(this.workPackage.id,!0),this.cdRef.detectChanges()}).catch(e=&gt;this.notificationService.showError(e,this.workPackage))}removeWatcher(e){this.workPackage.removeWatcher.$link.$prepare({user_id:e.id})().then(()=&gt;{_.remove(this.watching,t=&gt;t.href===e.href),this.wpWatchersService.require(this.workPackage,!0),this.wpCacheService.loadWorkPackage(this.workPackage.id,!0),this.cdRef.detectChanges()}).catch(e=&gt;this.notificationService.showError(e,this.workPackage))}}f.\u0275fac=function(e){return new(e||f)(h.hc(r.a),h.hc(h.q),h.hc(o.a),h.hc(n.J),h.hc(d.a),h.hc(s.a),h.hc(a.a),h.hc(h.i),h.hc(c.a))},f.\u0275cmp=h.bc({type:f,selectors:[["wp-watchers-tab"]],features:[h.Qb],decls:8,vars:10,consts:[["id","detail-panel-watchers"],["class","notification-box -error",4,"ngIf"],[3,"hidden"],[1,"work-package--watchers","form--selected-value--list",3,"ngClass"],[3,"watcher",4,"ngFor","ngForOf","ngForTrackBy"],[1,"work-package--watchers-lookup","hide-when-print",3,"hidden"],["name","watcherForm","novalidate",""],[1,"wp-watcher--autocomplete",3,"clearAfterSelection","url","onChange"],[1,"notification-box","-error"],[1,"notification-box--content"],[3,"textContent"],[3,"watcher"]],template:function(e,t){1&amp;e&amp;&amp;(h.nc(0,"div",0),h.ad(1,p,3,1,"div",1),h.nc(2,"div",2),h.nc(3,"div",3),h.ad(4,m,1,1,"wp-watcher-entry",4),h.mc(),h.nc(5,"div",5),h.nc(6,"form",6),h.nc(7,"user-autocompleter",7),h.vc("onChange",(function(e){return t.addWatcher(e)})),h.mc(),h.mc(),h.mc(),h.mc(),h.mc()),2&amp;e&amp;&amp;(h.Tb(1),h.Dc("ngIf",t.error),h.Tb(1),h.Dc("hidden",t.error),h.Tb(1),h.Dc("ngClass",h.Ic(8,g,!t.allowedToRemove)),h.Tb(1),h.Dc("ngForOf",t.watching)("ngForTrackBy",t.trackByHref),h.Tb(1),h.Dc("hidden",!t.allowedToAdd),h.Tb(2),h.Dc("clearAfterSelection",!0)("url",t.availableWatchersPath))},encapsulation:2,changeDetection:0})},zOhy:function(e,t,i){"use strict";i.d(t,"a",(function(){return w}));var n=i("iB+3"),s=i("Jui0"),a=i("iMRi"),r=i("ug4p"),o=i("4n9w"),c=i("GJmQ"),l=i("9cVk"),d=i("dfy/"),u=i("wZYP"),h=i("F5Dh"),p=i("Y/CA"),m=i("711n"),g=i("qc15"),f=i("yQm5"),b=i("AEvm"),v=i("fXoL");class w extends b.a{constructor(e,t,i,n,s,a,r,o,c,l,d,u,h,p){super(),this.injector=e,this.$transition=t,this.$state=i,this.I18n=n,this.titleService=s,this.notificationService=a,this.states=r,this.wpCreate=o,this.wpViewFocus=c,this.wpTableFilters=l,this.wpCacheService=d,this.pathHelper=u,this.cdRef=h,this.RootDm=p,this.successState=this.$state.current.data.baseRoute+".details",this.cancelState=this.$state.current.data.baseRoute,this.copying=!1,this.stateParams=this.$transition.params("to"),this.text={button_settings:this.I18n.t("js.button_settings")},this.destroyed=!1}ngOnInit(){this.closeEditFormWhenNewWorkPackageSaved(),this.showForm()}ngOnDestroy(){super.ngOnDestroy(),this.editForm.destroy()}switchToFullscreen(){this.$state.go("work-packages.new",this.$state.params)}onSaved(e){var t;let{savedResource:i,isInitial:n}=e;null===(t=this.editForm)||void 0===t||t.stop(),this.successState&amp;&amp;this.$state.go(this.successState,{workPackageId:i.id}).then(()=&gt;{this.wpViewFocus.updateFocus(i.id),this.notificationService.showSave(i,n)})}showForm(){this.createdWorkPackage().then(e=&gt;{this.change=e,this.newWorkPackage=e.projectedResource,this.cdRef.detectChanges(),this.setTitle(),this.stateParams.parent_id&amp;&amp;(this.newWorkPackage.parent={href:this.pathHelper.api.v3.work_packages.id(this.stateParams.parent_id).path}),this.stateParams.parent_id&amp;&amp;this.wpCacheService.loadWorkPackage(this.stateParams.parent_id).values$().pipe(this.untilDestroyed()).subscribe(e=&gt;{this.parentWorkPackage=e,this.cdRef.detectChanges()})}).catch(e=&gt;{"urn:openproject-org:api:v3:errors:MissingPermission"===e.errorIdentifier&amp;&amp;(this.RootDm.load().then(e=&gt;{if(!e.user){let e=f(this.pathHelper.loginPath());e.search({back_url:e}),window.location.href=e.toString()}}),this.notificationService.handleRawError(e))})}setTitle(){this.titleService.setFirstPart(this.I18n.t("js.work_packages.create.title"))}cancelAndBackToList(){this.wpCreate.cancelCreation(),this.$state.go(this.cancelState,this.$state.params)}createdWorkPackage(){const e=this.stateParams.type?parseInt(this.stateParams.type):void 0,t=this.stateParams.projectPath;return this.wpCreate.createOrContinueWorkPackage(t,e)}closeEditFormWhenNewWorkPackageSaved(){this.wpCreate.onNewWorkPackage().pipe(Object(c.a)(()=&gt;!this.componentDestroyed)).subscribe(e=&gt;{this.onSaved({savedResource:e,isInitial:!0})})}}w.\u0275fac=function(e){return new(e||w)(v.hc(v.A),v.hc(n.J),v.hc(n.G),v.hc(u.a),v.hc(d.a),v.hc(g.a),v.hc(a.a),v.hc(o.a),v.hc(p.a),v.hc(h.a),v.hc(r.a),v.hc(s.a),v.hc(v.i),v.hc(l.a))},w.\u0275dir=v.cc({type:w,viewQuery:function(e,t){var i;(1&amp;e&amp;&amp;v.hd(m.a,!0),2&amp;e)&amp;&amp;(v.Pc(i=v.wc())&amp;&amp;(t.editForm=i.first))},features:[v.Qb]})},zTuL:function(e,t,i){"use strict";i.d(t,"a",(function(){return m}));var n=i("wZYP"),s=i("sjKJ"),a=i("07mJ"),r=i("E2tj"),o=i("pL6k"),c=i("iB+3"),l=i("AEvm"),d=i("F3Jm"),u=i("IaZ+"),h=i("fXoL"),p=i("N5AO");class m extends l.a{constructor(e,t,i,n,s,a,r,o){super(),this.I18n=e,this.currentProject=t,this.bcfPathHelper=i,this.querySpace=n,this.queryUrlParamsHelper=s,this.opModalService=a,this.injector=r,this.state=o,this.text={export:this.I18n.t("js.bcf.export")}}ngOnInit(){this.querySpace.query.values$().pipe(this.untilDestroyed()).subscribe(e=&gt;{this.query=e;let t=this.currentProject.identifier,i=this.queryUrlParamsHelper.buildV3GetFilters(this.query.filters);this.exportLink=this.bcfPathHelper.projectExportIssuesPath(t,JSON.stringify(i))})}showDelayedExport(e){this.opModalService.show(d.a,this.injector,{link:this.exportLink}),e.preventDefault()}}m.\u0275fac=function(e){return new(e||m)(h.hc(n.a),h.hc(s.a),h.hc(a.a),h.hc(r.a),h.hc(o.a),h.hc(u.b),h.hc(h.A),h.hc(c.G))},m.\u0275cmp=h.bc({type:m,selectors:[["bcf-export-button"]],features:[h.Qb],decls:4,vars:3,consts:[[1,"button","export-bcf-button",3,"title","click"],["icon-classes","button--icon icon-export"],[1,"button--text"]],template:function(e,t){1&amp;e&amp;&amp;(h.nc(0,"a",0),h.vc("click",(function(e){return t.showDelayedExport(e)})),h.ic(1,"op-icon",1),h.nc(2,"span",2),h.cd(3),h.mc(),h.mc()),2&amp;e&amp;&amp;(h.Dc("title",t.text.export),h.Ub("href",t.exportLink,h.Vc),h.Tb(3),h.ed(" ",t.text.export," "))},directives:[p.a],encapsulation:2})},zUnb:function(e,t,i){"use strict";i.r(t);var n=i("fXoL"),s=i("EVdn"),a=i("AytR"),r=i("1Wj6");var o=i("qHU1"),c=i("FnNU"),l=i("3Pt+"),d=i("8VVp"),u=i("iMRi"),h=i("kt6C"),p=i("oJ+N"),m=i("CK39"),g=i("DvFC"),f=i("oT5z"),b=i("u4T9"),v=i("RuUM"),w=i("g1AQ"),y=i("mrSG"),k=i("d/TE"),C=i("wZYP"),x=i("kTsZ"),j=i("8aTQ");const S=["passwordConfirmationField"];class T extends j.a{constructor(){super(...arguments),this.password_confirmation=null}ngOnInit(){super.ngOnInit(),this.text.title=I18n.t("js.password_confirmation.title"),this.text.field_description=I18n.t("js.password_confirmation.field_description"),this.text.confirm_button=I18n.t("js.button_confirm"),this.text.password=I18n.t("js.label_password"),this.closeOnEscape=!1,this.closeOnOutsideClick=!1,this.showClose=!1}confirmAndClose(e){this.passwordValuePresent()&amp;&amp;super.confirmAndClose(e)}onOpen(e){super.onOpen(e),this.passwordConfirmationField.nativeElement.focus()}passwordValuePresent(){return null!==this.password_confirmation&amp;&amp;this.password_confirmation.length&gt;0}}T.\u0275fac=function(e){return P(e||T)},T.\u0275cmp=n.bc({type:T,selectors:[["ng-component"]],viewQuery:function(e,t){var i;(1&amp;e&amp;&amp;n.Yc(S,!0),2&amp;e)&amp;&amp;(n.Pc(i=n.wc())&amp;&amp;(t.passwordConfirmationField=i.first))},features:[n.Qb],decls:16,vars:8,consts:[[1,"op-modal--portal","confirm-form-submit--modal","ngdialog-theme-openproject"],["data-indicator-name","modal","tabindex","0",1,"op-modal--modal-container","password-confirm-dialog--modal","loading-indicator--location"],[1,"op-modal--modal-header"],[1,"icon-context","icon-locked",3,"textContent"],[1,"op-modal--modal-body"],[1,"request-for-confirmation--form","form","-vertical",3,"submit"],[1,"form--field","-required"],["for","request_for_confirmation_password",1,"form--label",3,"textContent"],[1,"form--field-container"],[1,"form--text-field-container"],["type","password","id","request_for_confirmation_password","name","request_for_confirmation_password",1,"form--text-field",3,"ngModel","ngModelChange"],["passwordConfirmationField",""],[1,"form--field-instructions",3,"textContent"],[1,"op-modal--modal-footer"],[1,"confirm-form-submit--continue","button",3,"textContent","disabled","click"]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"div",0),n.nc(1,"div",1),n.nc(2,"div",2),n.ic(3,"h3",3),n.mc(),n.nc(4,"div",4),n.nc(5,"form",5),n.vc("submit",(function(e){return t.confirmAndClose(e)})),n.nc(6,"div",6),n.ic(7,"label",7),n.nc(8,"div",8),n.nc(9,"div",9),n.nc(10,"input",10,11),n.vc("ngModelChange",(function(e){return t.password_confirmation=e})),n.mc(),n.mc(),n.mc(),n.ic(12,"div",12),n.mc(),n.mc(),n.mc(),n.nc(13,"div",13),n.nc(14,"button",14),n.vc("click",(function(e){return t.confirmAndClose(e)})),n.cd(15,' [attr.title]="text.button_cancel"&gt; '),n.mc(),n.mc(),n.mc(),n.mc()),2&amp;e&amp;&amp;(n.Tb(3),n.Dc("textContent",t.text.title),n.Tb(4),n.Dc("textContent",t.text.password),n.Ub("aria-label",t.text.field_description),n.Tb(3),n.Dc("ngModel",t.password_confirmation),n.Tb(2),n.Dc("textContent",t.text.field_description),n.Tb(2),n.Dc("textContent",t.text.confirm_button)("disabled",!t.passwordValuePresent()),n.Ub("title",t.text.confirm_button))},directives:[l.C,l.n,l.o,l.c,l.m,l.p],encapsulation:2});const P=n.pc(T);var I=i("IaZ+"),O=i("Ul5t"),D=i("nfBx"),R=i("YIAj"),E=i("5Lfy"),F=i("4rda"),M=i("Mo6U"),A=i("ug4p"),L=i("J30J"),q=i("5btT"),$=i("ZsX/"),V=i("Tac9"),N=i("jhN1");class H{constructor(e){this.sanitizer=e}sanitize(e){return this.sanitizer.sanitize(n.W.HTML,e)||""}}H.\u0275fac=function(e){return new(e||H)(n.rc(N.b))},H.\u0275prov=n.dc({token:H,factory:H.\u0275fac,providedIn:"root"});var z=i("Jui0"),B=i("E+lO"),Q=i("GLdX"),W=i("r0MM");class U{constructor(e){this.injector=e,this._knownHookNames=["workPackageTableContextMenu","workPackageSingleContextMenu","workPackageNewInitialization"],this.services={confirmDialog:this.injector.get(g.a),externalQueryConfiguration:this.injector.get(p.a),externalRelationQueryConfiguration:this.injector.get(m.a),halResource:this.injector.get(x.a),hooks:this.injector.get(w.a),i18n:this.injector.get(C.a),notifications:this.injector.get(k.a),opModalService:this.injector.get(I.b),opFileUpload:this.injector.get($.a),helpTextDm:this.injector.get(O.a),attributeHelpTexts:this.injector.get(D.a),displayField:this.injector.get(L.a),editField:this.injector.get(q.a),wpCache:this.injector.get(A.a),macros:this.injector.get(V.a),htmlSanitizeService:this.injector.get(H),ckEditorPreview:this.injector.get(Q.a),pathHelperService:this.injector.get(z.a),states:this.injector.get(u.a)},this.classes={modals:{passwordConfirmation:T,attributeHelpTexts:R.a,dynamicContent:E.a},HalResource:M.a,DisplayField:F.a},this.hooks={},this._knownHookNames.forEach(e=&gt;{this.hooks[e]=t=&gt;this.services.hooks.register(e,t)})}runInZone(e){this.zone.run(e)}bootstrap(e){B.DynamicBootstrapper.bootstrapOptionalEmbeddable(this.injector.get(n.f),e)}}Object(y.c)([Object(W.a)(),Object(y.e)("design:type",n.K)],U.prototype,"zone",void 0);class X{constructor(e){Object(o.a)("Registering OpenProject plugin context");const t=new U(e);window.OpenProject.pluginContext.putValue(t)}}X.\u0275mod=n.fc({type:X}),X.\u0275inj=n.ec({factory:function(e){return new(e||X)(n.rc(n.A))},providers:[w.a]});var Y,G=i("ofXK");!function(e){function t(e,t){const n=document.createElement("canvas"),s=n.getContext("2d");let a=t.width,r=t.height;a&gt;r?a&gt;e&amp;&amp;(r*=e/a,a=e):r&gt;e&amp;&amp;(a*=e/r,r=e),n.width=a,n.height=r,s.drawImage(t,0,0,a,r);let o=n.toDataURL("image/jpeg");return[o,i(o)]}function i(e){const t=e.split(",")[0].indexOf("base64")&gt;=0?atob(e.split(",")[1]):unescape(e.split(",")[1]),i=e.split(",")[0].split(":")[1].split(";")[0],n=t.length,s=new Uint8Array(n);for(var a=0;a
                                      <n;a++)s[a]=t.charcodeat(a);return blob([s],{type:i})}e.resizefile="function(e,i){return" new="" promise((n,s)="">
                                       {const a=new FileReader;a.onload=i=&gt;{const s=new Image;s.onload=()=&gt;n(t(e,s)),s.src=i.target.result},a.readAsDataURL(i)})},e.resizeImage=t}(Y||(Y={}));const K=["avatarFilePicker"];function Z(e,t){if(1&amp;e&amp;&amp;n.ic(0,"span",6),2&amp;e){const e=n.xc();n.Dc("textContent",e.text.wrong_file_format)}}function J(e,t){if(1&amp;e&amp;&amp;(n.nc(0,"fieldset",11),n.ic(1,"legend",12),n.ic(2,"img",13),n.mc()),2&amp;e){const e=n.xc();n.Tb(1),n.Dc("textContent",e.text.preview),n.Tb(1),n.Dc("src",e.avatarPreviewUrl,n.Vc)}}const ee=function(e){return{"-error":e}};class te{constructor(e,t,i,n){this.I18n=e,this.elementRef=t,this.notificationsService=i,this.opFileUpload=n,this.busy=!1,this.fileInvalid=!1,this.text={label_choose_avatar:this.I18n.t("js.avatars.label_choose_avatar"),upload_instructions:this.I18n.t("js.avatars.text_upload_instructions"),error_too_large:this.I18n.t("js.avatars.error_image_too_large"),wrong_file_format:this.I18n.t("js.avatars.wrong_file_format"),button_update:this.I18n.t("js.button_update"),uploading:this.I18n.t("js.avatars.uploading_avatar"),preview:this.I18n.t("js.label_preview")}}ngOnInit(){const e=this.elementRef.nativeElement;this.target=e.getAttribute("target"),this.method=e.getAttribute("method")}onFilePickerChanged(e){const t=Array.from(this.avatarFilePicker.nativeElement.files);if(0===t.length)return;const i=t[0];-1!==["image/jpeg","image/png","image/gif"].indexOf(i.type)?Y.resizeFile(128,i).then(([e,t])=&gt;{t.name=i.name,this.avatarFile=t,this.avatarPreviewUrl=e}):this.fileInvalid=!0}uploadAvatar(e){e.preventDefault(),this.busy=!0;const t=this.opFileUpload.uploadSingle(this.target,this.avatarFile,this.method,"text");this.notificationsService.addAttachmentUpload(this.text.uploading,[t]),t[1].subscribe(e=&gt;{switch(e.type){case 0:return;case 4:return this.avatarFile.progress=100,this.busy=!1,void window.location.reload();default:return}},e=&gt;{this.notificationsService.addError(e.error),this.busy=!1})}}te.\u0275fac=function(e){return new(e||te)(n.hc(C.a),n.hc(n.q),n.hc(k.a),n.hc($.a))},te.\u0275cmp=n.bc({type:te,selectors:[["avatar-upload-form"]],viewQuery:function(e,t){var i;(1&amp;e&amp;&amp;n.Yc(K,!0),2&amp;e)&amp;&amp;(n.Pc(i=n.wc())&amp;&amp;(t.avatarFilePicker=i.first))},decls:11,vars:9,consts:[[1,"form--field"],["for","avatar_file_input",1,"form--label",3,"ngClass","textContent"],[1,"form--field-container"],["type","file","accept","image/jpeg,image/png,image/gif","id","avatar_file_input","name","avatar_file_input",3,"change"],["avatarFilePicker",""],[1,"form--field-instructions"],[3,"textContent"],[1,"avatars--error-pane"],[3,"textContent",4,"ngIf"],["class","preview",4,"ngIf"],["type","submit",1,"button","-highlight","-with-icon","icon-checkmark",3,"textContent","click"],[1,"preview"],[1,"preview--legend",3,"textContent"],[1,"avatars--local-avatar-preview",3,"src"]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"div",0),n.ic(1,"label",1),n.nc(2,"div",2),n.nc(3,"input",3,4),n.vc("change",(function(e){return t.onFilePickerChanged(e)})),n.mc(),n.mc(),n.nc(5,"div",5),n.ic(6,"span",6),n.nc(7,"div",7),n.ad(8,Z,1,1,"span",8),n.mc(),n.mc(),n.mc(),n.ad(9,J,3,2,"fieldset",9),n.nc(10,"button",10),n.vc("click",(function(e){return t.uploadAvatar(e)})),n.mc()),2&amp;e&amp;&amp;(n.Tb(1),n.Dc("ngClass",n.Ic(7,ee,t.fileInvalid))("textContent",t.text.label_choose_avatar),n.Tb(5),n.Dc("textContent",t.text.upload_instructions),n.Tb(2),n.Dc("ngIf",t.fileInvalid),n.Tb(1),n.Dc("ngIf",t.avatarPreviewUrl),n.Tb(1),n.Dc("textContent",t.text.button_update),n.Ub("disabled",!t.avatarFile||t.busy||void 0))},directives:[G.n,G.q],encapsulation:2});class ie{constructor(e){e.get(w.a).register("openProjectAngularBootstrap",()=&gt;[{selector:"avatar-upload-form",cls:te}])}}ie.\u0275mod=n.fc({type:ie}),ie.\u0275inj=n.ec({factory:function(e){return new(e||ie)(n.rc(n.A))},imports:[[G.b]]});class ne extends F.a{apply(e,t){super.apply(e,t),this.wpCacheService=this.injector.get(A.a),this.loadIfNecessary()}loadIfNecessary(){this.value&amp;&amp;!1===this.value.$loaded&amp;&amp;this.value.$load().then(()=&gt;{"WorkPackage"===this.resource.$source._type&amp;&amp;this.wpCacheService.touch(this.resource.id)})}get title(){return""}render(e,t){this.isEmpty()?e.textContent=this.placeholder:this.value.elements.forEach((t,i)=&gt;{this.resource.showCosts?this.renderCostAsLink(t,e,i):this.renderCostAsText(t,e,i)})}isEmpty(){return!this.value||!this.value.elements||0===this.value.elements.length}renderCostAsLink(e,t,i){const n=this.resource.showCosts,s=document.createElement("a");s.href=n.href+"?cost_type_id="+e.costObjectId,s.setAttribute("target","_blank"),s.textContent=e.spentUnits+" "+e.costType.name,t.appendChild(s),this.addSeparator(t,i)}renderCostAsText(e,t,i){document.createElement("span").textContent=e.spentUnits+" "+e.costType.name,this.addSeparator(t,i)}addSeparator(e,t){if(t
                                       <this.value.elements.length-1){const ",e.appendchild(t)}}}class="" \d+="" ae='i("LrpJ");class' ce{constructor(){jquery("costs-subform").each((e,t)="" extends="" f.a{isempty(){return!this.value||!parsefloat(this.value.match(="" g)[0])}}var="" m.a{}const="" oe="Object(ae.a)(re);class" re="" se="" t='document.createElement("span");t.textContent=",'>
                                        {let i=jQuery(t);const n=i.find(".subform-container"),s=i.find(".subform-row-template");s.detach();const a=s[0].outerHTML;let r=parseInt(i.attr("item-count"));i.on("click",".delete-row-button,.delete-budget-item",e=&gt;(jQuery(e.target).closest(".subform-row").remove(),!1)),i.find(".add-row-button,.wp-inline-create--add-link").click(e=&gt;{e.preventDefault();let t=jQuery(a.replace(/INDEX/g,r.toString()));return t.show(),t.removeClass("subform-row-template"),n.append(t),r+=1,n.find(".costs-date-picker").datepicker(),n.find(".subform-row:last-child input:first").focus(),!1})})}}ce.\u0275fac=function(e){return new(e||ce)},ce.\u0275prov=n.dc({token:ce,factory:ce.\u0275fac});class le{constructor(e){this.$element=e,this.objId=this.$element.attr("obj-id"),this.objName=this.$element.attr("obj-name"),this.obj=jQuery(`#${this.objId}_costs`),this.makeEditable()}static listen(){jQuery(document).on("click",".costs--edit-planned-costs-btn",e=&gt;{const t=jQuery(e.target).closest("cost-unit-subform");new le(t)})}makeEditable(){this.edit_and_focus()}edit_and_focus(){this.edit(),jQuery("#"+this.objId+"_costs_edit").trigger("focus"),jQuery("#"+this.objId+"_costs_edit").trigger("select")}getCurrency(){return jQuery("#"+this.objId+"_currency").val()}getValue(){return jQuery("#"+this.objId+"_cost_value").val()}edit(){this.obj.hide();let e=this.obj[0].id,t=this.getCurrency(),i=this.getValue(),n=this.objName;jQuery(`\n
                                        <section class="form--section" id="${e}_section">
                                         \n
                                         <div class="form--field">
                                          \n
                                          <div class="form--field-container">
                                           \n
                                           <div class="form--field-affix -transparent icon icon-close" id="${e}_cancel">
                                           </div>
                                           \n
                                           <div class="form--text-field-container" id="${e}_editor">
                                            \n
                                            <input class="currency" id="${e}_edit" name="${n}" type="text" value="${i}">
                                             \n
                                            </input>
                                           </div>
                                           \n
                                           <div class="form--field-affix" id="${e}_affix">
                                            ${t}
                                           </div>
                                           \n
                                          </div>
                                          \n
                                         </div>
                                         \n
                                        </section>
                                        \n    `).insertAfter(this.obj);let s=this;jQuery("#"+e+"_cancel").on("click",(function(){return jQuery("#"+e+"_section").remove(),s.obj.show(),!1}))}}var de=i("POAS"),ue=i("tk/3");class he{constructor(e,t){this.halNotification=e,this.http=t}listen(){jQuery("costs-budget-subform").each((e,t)=&gt;{let i=jQuery(t);const n=i.find(".budget-item-container"),s=i.find(".budget-row-template");s.detach();const a=s[0].outerHTML;let r=parseInt(i.attr("item-count"));i.on("change",".budget-item-value",e=&gt;{let t=jQuery(e.target).closest(".cost_entry");this.refreshRow(i,t.attr("id"))}),i.on("click",".delete-budget-item",e=&gt;(e.preventDefault(),jQuery(e.target).closest(".cost_entry").remove(),!1)),i.find(".budget-add-row").click(e=&gt;{e.preventDefault();let t=jQuery(a.replace(/INDEX/g,r.toString()));return t.show(),t.removeClass("budget-row-template"),n.append(t),r+=1,!1})})}refreshRow(e,t){let i=e.find("#"+t),n=this.buildRefreshRequest(i,t);this.http.post(e.attr("update-url"),n,{headers:{Accept:"application/json"},withCredentials:!0}).subscribe(e=&gt;{_.each(e,(e,t)=&gt;{let i=document.getElementById(t);i instanceof HTMLInputElement?i.value=e:i&amp;&amp;(i.textContent=e)})},e=&gt;this.halNotification.handleRawError(e))}buildRefreshRequest(e,t){let i={element_id:t,fixed_date:jQuery("#cost_object_fixed_date").val()};return e.find(".budget-item-value").each((e,t)=&gt;{let n=jQuery(t);i[n.data("requestKey")]=n.val()||"0"}),i}}he.\u0275fac=function(e){return new(e||he)(n.rc(de.a),n.rc(ue.b))},he.\u0275prov=n.dc({token:he,factory:he.\u0275fac});class pe{constructor(e){!function(e){window.OpenProject.getPluginContext().then(t=&gt;{t.services.editField.extendFieldType("select",["Budget"]);let i=t.services.displayField;i.extendFieldType("resource",["Budget"]),i.addFieldType(ne,"costs",["costsByType"]),i.addFieldType(se,"currency",["laborCosts","materialCosts","overallCosts"]),t.services.halResource.registerResource("Budget",{cls:oe}),t.hooks.workPackageSingleContextMenu((function(e){return{key:"log_costs",icon:"icon-projects",indexBy:function(e){var t=_.findIndex(e,{key:"log_time"});return-1!==t?t+1:e.length},resource:"workPackage",link:"logCosts"}})),t.hooks.workPackageTableContextMenu((function(e){return{key:"log_costs",icon:"icon-projects",link:"logCosts",indexBy:function(e){var t=_.findIndex(e,{link:"logTime"});return-1!==t?t+1:e.length},text:I18n.t("js.button_log_costs")}})),t.services.states.add("budgets",Object(c.g)()),new ce,le.listen(),e.get(he).listen()})}(e)}}pe.\u0275mod=n.fc({type:pe}),pe.\u0275inj=n.ec({factory:function(e){return new(e||pe)(n.rc(n.A))},providers:[he]});class me extends M.a{constructor(){super(...arguments),this.attachmentsBackend=!1}}const ge=Object(ae.a)(me);class fe{constructor(){window.OpenProject.getPluginContext().then(e=&gt;{e.services.halResource.registerResource("Document",{cls:ge}),e.services.states.add("documents",Object(c.g)())})}}fe.\u0275mod=n.fc({type:fe}),fe.\u0275inj=n.ec({factory:function(e){return new(e||fe)}});class be{}be.\u0275mod=n.fc({type:be}),be.\u0275inj=n.ec({factory:function(e){return new(e||be)},imports:[[ie,pe,fe]]});var ve=i("tG68"),we=i("VpST"),ye=i("xRac"),ke=i("Xmgp"),Ce=i("CS/5"),xe=i("5+WD"),je=i("CejQ"),Se=i("sjKJ");class Te{constructor(e,t,i,n){this.startRow=e,this.endRow=t,this.startColumn=i,this.endColumn=n}get gridStartRow(){return 2*this.startRow}get gridEndRow(){return 2*this.endRow-1}get gridStartColumn(){return 2*this.startColumn}get gridEndColumn(){return 2*this.endColumn-1}get guid(){return this.storedGuid||(this.storedGuid=this.newGuid()),this.storedGuid}newGuid(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}class Pe extends Te{constructor(e){super(e.startRow,e.endRow,e.startColumn,e.endColumn),this.widget=e}reset(){this.startRow=this.widget.startRow,this.endRow=this.widget.endRow,this.startColumn=this.widget.startColumn,this.endColumn=this.widget.endColumn}moveRight(){this.startColumn++,this.endColumn++}moveLeft(){this.startColumn--,this.endColumn--}growColumn(){this.endColumn++}overlaps(e){return this.rowOverlaps(e)&amp;&amp;this.columnOverlaps(e)}rowOverlaps(e){return this.startRow
                                        <e.endrow&&this.endrow>
                                         =e.endRow||this.startRow&lt;=e.startRow&amp;&amp;this.endRow&gt;e.startRow||this.startRow&gt;e.startRow&amp;&amp;this.endRow
                                         <e.endrow}columnoverlaps(e){return this.startcolumn<e.endcolumn&&this.endcolumn="">
                                          =e.endColumn||this.startColumn&lt;=e.startColumn&amp;&amp;this.endColumn&gt;e.startColumn||this.startColumn&gt;e.startColumn&amp;&amp;this.endColumn
                                          <e.endcolumn}startcolumnoverlaps(e){return this.startcolumn<e.startcolumn&&this.endcolumn="">
                                           e.startColumn&amp;&amp;this.rowOverlaps(e)}get unchangedSize(){return this.startColumn===this.widget.startColumn&amp;&amp;this.endColumn===this.widget.endColumn&amp;&amp;this.startRow===this.widget.startRow&amp;&amp;this.endRow===this.widget.endRow}writeAreaChangeToWidget(){this.widget.startRow=this.startRow,this.widget.endRow=this.endRow,this.widget.startColumn=this.startColumn,this.widget.endColumn=this.endColumn}copyDimensionsTo(e){e.startRow=this.startRow,e.startColumn=this.startColumn,e.endRow=this.endRow,e.endColumn=this.endColumn}}class Ie extends Te{constructor(e,t,i,n,s){super(e,t,i,n),this.type=s}get gridStartRow(){return this.isRow?2*this.startRow-1:2*this.startRow}get gridEndRow(){return this.isRow?2*this.endRow-2:2*this.endRow-1}get gridStartColumn(){return this.isRow?2*this.startColumn:2*this.startColumn-1}get gridEndColumn(){return this.isRow?2*this.endColumn-1:2*this.endColumn-2}get isRow(){return"row"===this.type}get isColumn(){return"column"===this.type}}var _e=i("n9mQ"),Oe=i("2Vo4");class De{constructor(e,t,i){this.gridDm=e,this.notification=t,this.i18n=i,this.numColumns=0,this.numRows=0,this.mousedOverArea=null,this.$mousedOverArea=new Oe.a(this.mousedOverArea),this.helpMode=!1}set gridResource(e){this.resource=e,this.fetchSchema(),this.numRows=this.resource.rowCount,this.numColumns=this.resource.columnCount,this.buildAreas(!0)}get gridResource(){return this.resource}setMousedOverArea(e){this.mousedOverArea=e,this.$mousedOverArea.next(e)}cleanupUnusedAreas(){let e=_.range(this.numRows,0,-1);this.widgetAreas.forEach(t=&gt;{e=e.filter(e=&gt;e!==t.startRow)}),e.forEach(e=&gt;{this.numRows&gt;1&amp;&amp;this.removeRow(e)});let t=_.range(this.numColumns,0,-1);this.widgetAreas.forEach(e=&gt;{t=t.filter(t=&gt;t!==e.startColumn)}),t.forEach(e=&gt;{this.numColumns&gt;1&amp;&amp;this.removeColumn(e)})}buildAreas(e=!1){this.gridAreas=this.buildGridAreas(),this.gridGaps=this.buildGridGaps(),this.gridAreaIds=this.buildGridAreaIds(),e&amp;&amp;(this.widgetAreas=this.buildGridWidgetAreas())}rebuildAndPersist(){this.persist(),this.buildAreas(!1)}persist(){this.resource.rowCount=this.numRows=(this.widgetAreas.map(e=&gt;e.endRow).sort().pop()||2)-1,this.resource.columnCount=this.numColumns,this.writeAreaChangesToWidgets(),this.saveGrid(this.resource,this.schema)}saveWidgetChangeset(e){let t=this.gridDm.extractPayload(this.resource,this.schema),i=t.widgets.find(t=&gt;t.id===e.pristineResource.id);Object.assign(i,e.changes),t.id=this.resource.id,this.saveGrid(t)}isGap(e){return e instanceof Ie}get isSingleCell(){return 1===this.numRows&amp;&amp;1===this.numColumns&amp;&amp;0===this.widgetResources.length}get inHelpMode(){return this.helpMode||this.isSingleCell}toggleHelpMode(){this.helpMode=!this.helpMode}scrollPlaceholderIntoView(){let e=jQuery(".grid--area.-placeholder");e[0].scrollIntoViewIfNeeded&amp;&amp;setTimeout(()=&gt;e[0].scrollIntoViewIfNeeded())}saveGrid(e,t){this.gridDm.update(e,t).then(e=&gt;{this.assignAreasWidget(e),this.notification.addSuccess(this.i18n.t("js.notice_successful_update"))})}assignAreasWidget(e){this.resource.widgets=e.widgets;let t=this.widgetAreas.map(e=&gt;e.widget.id);this.widgetAreas.forEach(i=&gt;{let n;n=i.widget.id?e.widgets.find(e=&gt;e.id===i.widget.id):e.widgets.find(e=&gt;!t.includes(e.id)&amp;&amp;e.identifier===i.widget.identifier&amp;&amp;e.startRow===i.widget.startRow&amp;&amp;e.startColumn===i.widget.startColumn),i.widget=n})}buildGridAreas(){let e=[];for(let t=1;t&lt;=this.numRows+1;t++)e.push(...this.buildGridAreasRow(t));return e}buildGridGaps(){let e=[];if(this.isSingleCell)return e;for(let t=1;t&lt;=this.numRows+1;t++)e.push(...this.buildGridGapRow(t));return e}buildGridAreasRow(e){let t=[];for(let i=1;i&lt;=this.numColumns;i++){let n=new Te(e,e+1,i,i+1);t.push(n)}return t}buildGridGapRow(e){let t=[];for(let i=1;i&lt;=this.numColumns;i++)t.push(new Ie(e,e+1,i,i+1,"row"));if(e&lt;=this.numRows)for(let i=1;i&lt;=this.numColumns+1;i++)t.push(new Ie(e,e+1,i,i+1,"column"));return t}buildGridWidgetAreas(){return this.widgetResources.map(e=&gt;new Pe(e))}writeAreaChangesToWidgets(){this.widgetAreas.forEach(e=&gt;{e.writeAreaChangeToWidget()})}addColumn(e,t){this.numColumns++;let i=[];for(let n=1;n&lt;=this.numRows;n++){if(n===t)continue;let s=this.rowWidgets(n).sort((e,t)=&gt;e.startColumn-t.startColumn).find(i=&gt;!(i.startRow
                                           <t&&i.endrow>
                                            t)&amp;&amp;(i.startColumn===e+1||i.endColumn===e+1||i.startColumn&lt;=e&amp;&amp;i.endColumn&gt;e));s&amp;&amp;(i.push(s),s.endColumn++)}this.moveSubsequentRowWidgets(this.widgetAreas.filter(e=&gt;!i.includes(e)),e)}addRow(e,t){this.numRows++;let i=[];for(let n=1;n&lt;=this.numColumns;n++){if(n===t)continue;let s=this.columnWidgets(n).sort((e,t)=&gt;e.startRow-t.startRow).find(i=&gt;!(i.startColumn
                                            <t&&i.endcolumn>
                                             t)&amp;&amp;(i.startRow===e+1||i.endRow===e+1||i.startRow&lt;=e&amp;&amp;i.endRow&gt;e));s&amp;&amp;(i.push(s),s.endRow++)}this.moveSubsequentColumnWidgets(this.widgetAreas.filter(e=&gt;!i.includes(e)),e)}removeColumn(e){this.numColumns--,this.widgetAreas.forEach(t=&gt;{t.startColumn&lt;=e&amp;&amp;t.endColumn&gt;=e+1&amp;&amp;t.endColumn--}),this.widgetAreas.filter(t=&gt;t.startColumn&gt;e).forEach(e=&gt;{e.startColumn--,e.endColumn--})}removeRow(e){this.numRows--,this.widgetAreas.forEach(t=&gt;{t.startRow&lt;=e&amp;&amp;t.endRow&gt;=e+1&amp;&amp;t.endRow--}),this.widgetAreas.filter(t=&gt;t.startRow&gt;e).forEach(e=&gt;{e.startRow--,e.endRow--})}resetAreas(e=null){this.widgetAreas.filter(t=&gt;!e||t.guid!==e.guid).forEach(e=&gt;e.reset()),this.numRows=this.resource.rowCount,this.numColumns=this.resource.columnCount}get isEditable(){return void 0!==this.gridResource.updateImmediately}buildGridAreaIds(){return this.gridAreas.filter(e=&gt;!this.isGap(e)).map(e=&gt;e.guid)}fetchSchema(){this.gridDm.updateForm(this.resource).then(e=&gt;{this.schema=e.schema})}removeWidget(e){let t=this.resource.widgets.findIndex(t=&gt;t.id===e.id);this.resource.widgets.splice(t,1),t=this.widgetAreas.findIndex(t=&gt;t.widget.id===e.id),this.widgetAreas.splice(t,1),this.cleanupUnusedAreas(),this.rebuildAndPersist()}get widgetResources(){return this.resource&amp;&amp;this.resource.widgets||[]}rowWidgets(e){return this.widgetAreas.filter(t=&gt;t.startRow===e)}moveSubsequentRowWidgets(e,t){e.forEach(e=&gt;{e.startColumn&gt;t&amp;&amp;(e.startColumn++,e.endColumn++)})}columnWidgets(e){return this.widgetAreas.filter(t=&gt;t.startColumn===e)}moveSubsequentColumnWidgets(e,t){e.forEach(e=&gt;{e.startRow&gt;t&amp;&amp;(e.startRow++,e.endRow++)})}}De.\u0275fac=function(e){return new(e||De)(n.rc(_e.a),n.rc(k.a),n.rc(C.a))},De.\u0275prov=n.dc({token:De,factory:De.\u0275fac});var Re=i("CV67");const Ee=function(e){return{"-editable":e}};class Fe{constructor(e){this.layout=e,this.editable=!0,this.onRenamed=new n.s}renamed(e){this.onRenamed.emit(e)}get isRenameable(){return this.editable&amp;&amp;this.layout.isEditable}}Fe.\u0275fac=function(e){return new(e||Fe)(n.hc(De))},Fe.\u0275cmp=n.bc({type:Fe,selectors:[["widget-header"]],inputs:{name:"name",editable:"editable"},outputs:{onRenamed:"onRenamed"},ngContentSelectors:["*"],decls:3,vars:5,consts:[[1,"widget-box--header",3,"ngClass"],[1,"widget-box--header-title",3,"title","editable","onSave"]],template:function(e,t){1&amp;e&amp;&amp;(n.Cc(),n.nc(0,"h3",0),n.nc(1,"editable-toolbar-title",1),n.vc("onSave",(function(e){return t.renamed(e)})),n.mc(),n.Bc(2),n.mc()),2&amp;e&amp;&amp;(n.Dc("ngClass",n.Ic(3,Ee,t.isRenameable)),n.Tb(1),n.Dc("title",t.name)("editable",t.isRenameable))},directives:[G.n,Re.a],styles:[".widget-box--header.-editable[_ngcontent-%COMP%]{margin-top:0}.widget-box--header-title[_ngcontent-%COMP%]{padding-right:5px}"],changeDetection:0});i("PHo6");class Me{constructor(e){this.layout=e}area(e){this.widget(e.widget)}widget(e){this.layout.removeWidget(e)}}Me.\u0275fac=function(e){return new(e||Me)(n.rc(De))},Me.\u0275prov=n.dc({token:Me,factory:Me.\u0275fac});class Ae{constructor(e,t,i){this.i18n=e,this.remove=t,this.layout=i,this.menuItemList=[this.removeItem]}get menuItems(){return()=&gt;Object(y.b)(this,void 0,void 0,(function*(){return this.menuItemList}))}get removeItem(){return{linkText:this.i18n.t("js.grid.remove"),onClick:()=&gt;(this.remove.widget(this.resource),!0)}}get hasMenu(){return this.layout.isEditable}}Ae.\u0275fac=function(e){return new(e||Ae)(n.hc(C.a),n.hc(Me),n.hc(De))},Ae.\u0275dir=n.cc({type:Ae,inputs:{resource:"resource"}});var Le=i("AdL0");function qe(e,t){if(1&amp;e&amp;&amp;n.ic(0,"icon-triggered-context-menu",1),2&amp;e){const e=n.xc();n.Dc("menu-items",e.menuItems)}}class $e extends Ae{}$e.\u0275fac=function(e){return Ve(e||$e)},$e.\u0275cmp=n.bc({type:$e,selectors:[["widget-menu"]],features:[n.Qb],decls:1,vars:1,consts:[[3,"menu-items",4,"ngIf"],[3,"menu-items"]],template:function(e,t){1&amp;e&amp;&amp;n.ad(0,qe,1,1,"icon-triggered-context-menu",0),2&amp;e&amp;&amp;n.Dc("ngIf",t.hasMenu)},directives:[G.q,Le.a],styles:["[_nghost-%COMP%]{align-self:center}"]});const Ve=n.pc($e);var Ne=i("HEQ6"),He=i("IvIE"),ze=i("E2tj"),Be=i("F5Dh"),Qe=i("wd/R"),We=i("DhiE"),Ue=i("iB+3"),Xe=i("W6hW"),Ye=i("dfy/"),Ge=i("iOEq"),Ke=i("IzEk"),Ze=i("8zkO"),Je=i("AEvm");function et(e,t){if(1&amp;e&amp;&amp;n.ic(0,"div",4),2&amp;e){const e=n.xc();n.Dc("textContent",e.tooManyResultsText)}}class tt extends Je.a{constructor(e,t,i,n,s,a,r,o,c,l,d,u){super(),this.states=e,this.$state=t,this.wpTableFilters=i,this.wpListService=n,this.querySpace=s,this.wpListChecksumService=a,this.titleService=r,this.element=o,this.i18n=c,this.notificationsService=l,this.sanitizer=d,this.configuration=u,this.static=!1,this.calendarPlugins=[Ge.d],this.alreadyLoaded=!1}ngOnInit(){this.querySpace.stopAllSubscriptions.next(),this.setupWorkPackagesListener(),this.initializeCalendar()}ngAfterViewInit(){this.ucCalendar.getApi().setOption("eventRender",e=&gt;{this.addTooltip(e)}),this.ucCalendar.getApi().setOption("eventClick",e=&gt;{this.toWPFullView(e)})}calendarEventsFunction(e,t,i){if(this.alreadyLoaded){this.alreadyLoaded=!1;let e=this.updateResults(this.querySpace.results.value);t(e)}else this.querySpace.results.values$().pipe(Object(Ke.a)(1)).subscribe(e=&gt;{let i=this.updateResults(e);t(i)});this.updateTimeframe(e)}initializeCalendar(){this.calendarEvents=this.calendarEventsFunction.bind(this),this.setCalendarHeight(),this.setCalendarHeader()}updateTimeframe(e){let t=this.wpTableFilters.isEmpty;if(t&amp;&amp;this.querySpace.query.value)return;let i=Qe(e.start).format("YYYY-MM-DD"),n=Qe(e.end).format("YYYY-MM-DD");if(t){let e=this.defaultQueryProps(i,n);this.$state.params.query_props&amp;&amp;(e=decodeURIComponent(this.$state.params.query_props||"")),this.wpListService.fromQueryParams({query_props:e},this.projectIdentifier).toPromise()}else{this.$state.params;this.wpTableFilters.modify("datesInterval",e=&gt;{e.values[0]=i,e.values[1]=n})}}addTooltip(e){jQuery(e.el).tooltip({content:this.tooltipContentString(e.event.extendedProps.workPackage),items:".fc-event",close:function(){jQuery(".ui-helper-hidden-accessible").remove()},track:!0})}toWPFullView(e){let t=e.event.extendedProps.workPackage;e.el&amp;&amp;this.removeTooltip(e.el),this.wpListChecksumService.clear(),window.history.pushState({},this.titleService.current,window.location.href),this.$state.go("work-packages.show",{workPackageId:t.id},{inherit:!1})}get calendarEditable(){return!1}get calendarEventLimit(){return!1}get calendarLocale(){return this.i18n.locale}get calendarFixedWeekCount(){return!1}get calendarDefaultView(){return this.static?"dayGridWeek":null}get calendarFirstDay(){return this.configuration.startOfWeek()}get calendarElement(){return jQuery(this.element.nativeElement).find(".fc-view-container")}setCalendarHeight(){this.static?this.calendarHeight=()=&gt;{let e=jQuery(this.element.nativeElement);for(;!e.height()&amp;&amp;e.parent();)e=e.parent();let t=jQuery(this.element.nativeElement).position().top,i=e.position().top;return e.height()-(t-i)}:this.calendarHeight=()=&gt;jQuery(window).height()-this.calendarElement.offset().top-12}setCalendarHeader(){this.static?this.calendarHeader=!1:this.calendarHeader={right:"dayGridMonth,dayGridWeek",center:"title",left:"prev,next today"}}setCalendarsDate(){const e=this.querySpace.query.value;if(!e)return;let t=_.find(e.filters||[],{id:"datesInterval"}),i=null,n="dayGridMonth";if(t){let e=Qe(t.values[0]),s=Qe(t.values[1]).diff(e,"days");i=e.add(s/2,"days"),7===s&amp;&amp;(n="dayGridWeek")}i?this.ucCalendar.getApi().changeView(n,i.toDate()):this.ucCalendar.getApi().changeView(n)}setupWorkPackagesListener(){this.querySpace.results.values$().pipe(this.untilDestroyed()).subscribe(e=&gt;{this.alreadyLoaded=!0,this.setCalendarsDate(),this.ucCalendar.getApi().refetchEvents()})}updateResults(e){return this.warnOnTooManyResults(e),this.mapToCalendarEvents(e.elements)}mapToCalendarEvents(e){return e.map(e=&gt;{let t=this.eventDate(e,"start"),i=this.eventDate(e,"due"),n=Qe(i).add(1,"days").format("YYYY-MM-DD");return{title:e.subject,start:t,end:n,allDay:!0,className:`__hl_background_type_${e.type.id}`,workPackage:e}})}warnOnTooManyResults(e){e.count
                                             <e.total?this.toomanyresultstext=this.i18n.t("js.calendar.too_many",{count:e.total,max:tt.max_displayed}):this.toomanyresultstext=null,this.toomanyresultstext&&!this.static&&this.notificationsservice.addnotice(this.toomanyresultstext)}defaultqueryprops(e,t){let i='{c:["id"],t:"id:asc",f:[{n:"status",o:"o",v:[]},{n:"datesInterval",o:"&lt;'>
                                              d",v:[e,t]}],pp:tt.MAX_DISPLAYED};return JSON.stringify(i)}eventDate(e,t){return e.isMilestone?e.date:e[`${t}Date`]}tooltipContentString(e){return`\n        ${this.sanitizedValue(e,"type")} #${e.id}: ${this.sanitizedValue(e,"subject",null)}\n
                                              <ul class="tooltip--map">
                                               \n
                                               <li class="tooltip--map--item">
                                                \n
                                                <span class="tooltip--map--key">
                                                 ${this.i18n.t("js.work_packages.properties.projectName")}:
                                                </span>
                                                \n
                                                <span class="tooltip--map--value">
                                                 ${this.sanitizedValue(e,"project")}
                                                </span>
                                                \n
                                               </li>
                                               \n
                                               <li class="tooltip--map--item">
                                                \n
                                                <span class="tooltip--map--key">
                                                 ${this.i18n.t("js.work_packages.properties.status")}:
                                                </span>
                                                \n
                                                <span class="tooltip--map--value">
                                                 ${this.sanitizedValue(e,"status")}
                                                </span>
                                                \n
                                               </li>
                                               \n
                                               <li class="tooltip--map--item">
                                                \n
                                                <span class="tooltip--map--key">
                                                 ${this.i18n.t("js.work_packages.properties.startDate")}:
                                                </span>
                                                \n
                                                <span class="tooltip--map--value">
                                                 ${this.eventDate(e,"start")}
                                                </span>
                                                \n
                                               </li>
                                               \n
                                               <li class="tooltip--map--item">
                                                \n
                                                <span class="tooltip--map--key">
                                                 ${this.i18n.t("js.work_packages.properties.dueDate")}:
                                                </span>
                                                \n
                                                <span class="tooltip--map--value">
                                                 ${this.eventDate(e,"due")}
                                                </span>
                                                \n
                                               </li>
                                               \n
                                               <li class="tooltip--map--item">
                                                \n
                                                <span class="tooltip--map--key">
                                                 ${this.i18n.t("js.work_packages.properties.assignee")}:
                                                </span>
                                                \n
                                                <span class="tooltip--map--value">
                                                 ${this.sanitizedValue(e,"assignee")}
                                                </span>
                                                \n
                                               </li>
                                               \n
                                               <li class="tooltip--map--item">
                                                \n
                                                <span class="tooltip--map--key">
                                                 ${this.i18n.t("js.work_packages.properties.priority")}:
                                                </span>
                                                \n
                                                <span class="tooltip--map--value">
                                                 ${this.sanitizedValue(e,"priority")}
                                                </span>
                                                \n
                                               </li>
                                               \n
                                              </ul>
                                              \n        `}sanitizedValue(e,t,i="name"){let s=e[t];return s=i&amp;&amp;s?s[i]:s,s=s||this.i18n.t("js.placeholders.default"),this.sanitizer.sanitize(n.W.HTML,s)}removeTooltip(e){jQuery(e).tooltip({close:function(){jQuery(".ui-helper-hidden-accessible").remove()},disabled:!0})}}tt.MAX_DISPLAYED=100,tt.\u0275fac=function(e){return new(e||tt)(n.hc(u.a),n.hc(Ue.G),n.hc(Be.a),n.hc(We.a),n.hc(ze.a),n.hc(Xe.a),n.hc(Ye.a),n.hc(n.q),n.hc(C.a),n.hc(k.a),n.hc(N.b),n.hc(Ze.a))},tt.\u0275cmp=n.bc({type:tt,selectors:[["wp-calendar"]],viewQuery:function(e,t){var i;(1&amp;e&amp;&amp;n.hd(He.a,!0),2&amp;e)&amp;&amp;(n.Pc(i=n.wc())&amp;&amp;(t.ucCalendar=i.first))},inputs:{projectIdentifier:"projectIdentifier",static:"static"},features:[n.Qb],decls:4,vars:12,consts:[[1,"wp-calendar--container","loading-indicator--location",2,"position","relative"],[3,"editable","eventLimit","locale","fixedWeekCount","height","header","defaultView","firstDay","events","plugins"],["ucCalendar",""],["class","wp-calendar--notification",3,"textContent",4,"ngIf"],[1,"wp-calendar--notification",3,"textContent"]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"div",0),n.ic(1,"full-calendar",1,2),n.ad(3,et,1,1,"div",3),n.mc()),2&amp;e&amp;&amp;(n.Ub("data-indicator-name","table"),n.Tb(1),n.Dc("editable",t.calendarEditable)("eventLimit",t.calendarEventLimit)("locale",t.calendarLocale)("fixedWeekCount",t.calendarFixedWeekCount)("height",t.calendarHeight)("header",t.calendarHeader)("defaultView",t.calendarDefaultView)("firstDay",t.calendarFirstDay)("events",t.calendarEvents)("plugins",t.calendarPlugins),n.Tb(2),n.Dc("ngIf",t.static))},directives:[He.a,G.q],styles:[".wp-calendar--container[_ngcontent-%COMP%]{min-height:200px}.wp-calendar--notification[_ngcontent-%COMP%]{font-style:italic;margin-top:.5rem}"]});class it extends je.a{constructor(e,t,i){super(e,t),this.i18n=e,this.injector=t,this.currentProject=i}get projectIdentifier(){return this.currentProject.identifier}}it.\u0275fac=function(e){return new(e||it)(n.hc(C.a),n.hc(n.A),n.hc(Se.a))},it.\u0275cmp=n.bc({type:it,selectors:[["ng-component"]],features:[n.Qb],decls:4,vars:4,consts:[[3,"name","onRenamed"],[3,"resource"],["wp-isolated-query-space",""],[3,"static","projectIdentifier"]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"widget-header",0),n.vc("onRenamed",(function(e){return t.renameWidget(e)})),n.ic(1,"widget-menu",1),n.mc(),n.lc(2,2),n.ic(3,"wp-calendar",3),n.kc()),2&amp;e&amp;&amp;(n.Dc("name",t.widgetName),n.Tb(1),n.Dc("resource",t.resource),n.Tb(2),n.Dc("static",!0)("projectIdentifier",t.projectIdentifier))},directives:[Fe,$e,Ne.a,tt],encapsulation:2});var nt=i("juWA"),st=i("p8AH"),at=i("j/Ak"),rt=i("UD+K"),ot=i("dMmB");class ct extends rt.a{constructor(e,t,i){super(),this.states=e,this.schemaCacheService=t,this.timeEntryDm=i}loadAll(e){return Promise.all(e.map(e=&gt;this.load(e))).then(e=&gt;{})}updateValue(e,t){this.schemaCacheService.ensureLoaded(t).then(()=&gt;{super.updateValue(e,t)})}load(e){return this.timeEntryDm.one(parseInt(e)).then(e=&gt;this.schemaCacheService.ensureLoaded(e).then(()=&gt;e))}get multiState(){return this.states.timeEntries}}ct.\u0275fac=function(e){return new(e||ct)(n.rc(u.a),n.rc(ot.a),n.rc(at.a))},ct.\u0275prov=n.dc({token:ct,factory:ct.\u0275fac,providedIn:"root"});var lt=i("Gbwi"),dt=i("SKFm"),ut=i("SqdZ"),ht=(i("qvol"),i("711n")),pt=i("80WE");const mt=["editForm"];function gt(e,t){if(1&amp;e&amp;&amp;n.ic(0,"editable-attribute-field",6),2&amp;e){const e=n.xc();n.Dc("resource",e.entry)("fieldName","activity")}}function ft(e,t){if(1&amp;e&amp;&amp;n.ic(0,"i",10),2&amp;e){const e=n.xc();n.Dc("textContent",e.text.wpRequired)}}const bt=function(e){return{"-required":e}};function vt(e,t){if(1&amp;e&amp;&amp;(n.lc(0),n.ic(1,"div",3),n.nc(2,"div",4),n.ic(3,"editable-attribute-field",6),n.mc(),n.kc()),2&amp;e){const e=t.$implicit,i=n.xc();n.Tb(1),n.Dc("ngClass",n.Ic(4,bt,i.isRequired(e.key)))("textContent",e.label),n.Tb(2),n.Dc("resource",i.entry)("fieldName",e.key)}}class wt extends Je.a{constructor(e,t,i){super(),this.halEditing=e,this.cdRef=t,this.i18n=i,this.modifiedEntry=new n.s,this.text={attributes:{comment:this.i18n.t("js.time_entry.comment"),hours:this.i18n.t("js.time_entry.hours"),activity:this.i18n.t("js.time_entry.activity"),workPackage:this.i18n.t("js.time_entry.work_package"),spentOn:this.i18n.t("js.time_entry.spent_on")},wpRequired:this.i18n.t("js.time_entry.work_package_required")},this.workPackageSelected=!1,this.customFields=[]}ngOnInit(){this.halEditing.temporaryEditResource(this.entry).values$().pipe(this.untilDestroyed()).subscribe(e=&gt;{e&amp;&amp;e.workPackage&amp;&amp;(this.workPackageSelected=!0,this.cdRef.markForCheck())}),this.setCustomFields(this.entry.schema),this.cdRef.detectChanges()}signalModifiedEntry(e){this.modifiedEntry.emit(e)}save(){return this.editForm.save()}get inEditMode(){return!0}isRequired(e){return"workPackage"===e||this.entry.schema[e].required}setCustomFields(e){Object.entries(e).forEach(([e,t])=&gt;{e.match(/customField\d+/)&amp;&amp;this.customFields.push({key:e,label:t.name})})}}wt.\u0275fac=function(e){return new(e||wt)(n.hc(dt.a),n.hc(n.i),n.hc(C.a))},wt.\u0275cmp=n.bc({type:wt,selectors:[["te-form"]],viewQuery:function(e,t){var i;(1&amp;e&amp;&amp;n.Yc(mt,!0),2&amp;e)&amp;&amp;(n.Pc(i=n.wc())&amp;&amp;(t.editForm=i.first))},inputs:{entry:"entry"},outputs:{modifiedEntry:"modifiedEntry"},features:[n.Qb],decls:20,vars:35,consts:[[3,"resource","inEditMode","onSaved"],["editForm",""],[1,"attributes-map"],[1,"attributes-map--key",3,"ngClass","textContent"],[1,"attributes-map--value"],[3,"resource","wrapperClasses","fieldName"],[3,"resource","fieldName"],[3,"resource","fieldName",4,"ngIf"],[3,"textContent",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"textContent"]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"edit-form",0,1),n.vc("onSaved",(function(e){return t.signalModifiedEntry(e)})),n.nc(2,"div",2),n.ic(3,"div",3),n.nc(4,"div",4),n.ic(5,"editable-attribute-field",5),n.mc(),n.ic(6,"div",3),n.nc(7,"div",4),n.ic(8,"editable-attribute-field",5),n.mc(),n.ic(9,"div",3),n.nc(10,"div",4),n.ic(11,"editable-attribute-field",6),n.mc(),n.ic(12,"div",3),n.nc(13,"div",4),n.ad(14,gt,1,2,"editable-attribute-field",7),n.ad(15,ft,1,1,"i",8),n.mc(),n.ic(16,"div",3),n.nc(17,"div",4),n.ic(18,"editable-attribute-field",6),n.mc(),n.ad(19,vt,4,6,"ng-container",9),n.mc(),n.mc()),2&amp;e&amp;&amp;(n.Dc("resource",t.entry)("inEditMode",t.inEditMode),n.Tb(3),n.Dc("ngClass",n.Ic(25,bt,t.isRequired("spentOn")))("textContent",t.text.attributes.spentOn),n.Tb(2),n.Dc("resource",t.entry)("wrapperClasses","-tiny")("fieldName","spentOn"),n.Tb(1),n.Dc("ngClass",n.Ic(27,bt,t.isRequired("hours")))("textContent",t.text.attributes.hours),n.Tb(2),n.Dc("resource",t.entry)("wrapperClasses","-tiny")("fieldName","hours"),n.Tb(1),n.Dc("ngClass",n.Ic(29,bt,t.isRequired("workPackage")))("textContent",t.text.attributes.workPackage),n.Tb(2),n.Dc("resource",t.entry)("fieldName","workPackage"),n.Tb(1),n.Dc("ngClass",n.Ic(31,bt,t.isRequired("activity")))("textContent",t.text.attributes.activity),n.Tb(2),n.Dc("ngIf",t.workPackageSelected),n.Tb(1),n.Dc("ngIf",!t.workPackageSelected),n.Tb(1),n.Dc("ngClass",n.Ic(33,bt,t.isRequired("comment")))("textContent",t.text.attributes.comment),n.Tb(2),n.Dc("resource",t.entry)("fieldName","comment"),n.Tb(1),n.Dc("ngForOf",t.customFields))},directives:[ht.a,G.n,pt.a,G.q,G.p],encapsulation:2,changeDetection:0});const yt=["editForm"];class kt extends ut.a{constructor(e,t,i,n){super(t,i,e),this.elementRef=e,this.locals=t,this.cdRef=i,this.i18n=n,this.text={title:this.i18n.t("js.time_entry.label"),cancel:this.i18n.t("js.button_cancel"),close:this.i18n.t("js.button_close"),delete:this.i18n.t("js.button_delete"),areYouSure:this.i18n.t("js.text_are_you_sure")},this.closeOnEscape=!1,this.closeOnOutsideClick=!1}get entry(){return this.locals.entry}saveEntry(){this.editForm.save().then(()=&gt;{this.service.close()})}get saveText(){return this.i18n.t("js.button_save")}get saveAllowed(){return!0}get deleteAllowed(){return!0}}kt.\u0275fac=function(e){return new(e||kt)(n.hc(n.q),n.hc(I.a),n.hc(n.i),n.hc(C.a))},kt.\u0275dir=n.cc({type:kt,viewQuery:function(e,t){var i;(1&amp;e&amp;&amp;n.Yc(yt,!0),2&amp;e)&amp;&amp;(n.Pc(i=n.wc())&amp;&amp;(t.editForm=i.first))},features:[n.Qb]});var Ct=i("N5AO");function xt(e,t){if(1&amp;e){const e=n.oc();n.nc(0,"button",12),n.vc("click",(function(){return n.Sc(e),n.xc().saveEntry()})),n.ic(1,"op-icon",13),n.ic(2,"span",14),n.mc()}if(2&amp;e){const e=n.xc();n.Ub("title",e.saveText),n.Tb(2),n.Dc("textContent",e.saveText)}}function jt(e,t){if(1&amp;e){const e=n.oc();n.nc(0,"button",15),n.vc("click",(function(t){return n.Sc(e),n.xc().closeMe(t)})),n.ic(1,"op-icon",16),n.ic(2,"span",14),n.mc()}if(2&amp;e){const e=n.xc();n.Ub("title",e.text.cancel),n.Tb(2),n.Dc("textContent",e.text.cancel)}}function St(e,t){if(1&amp;e){const e=n.oc();n.nc(0,"button",15),n.vc("click",(function(){return n.Sc(e),n.xc().destroy()})),n.ic(1,"op-icon",17),n.ic(2,"span",14),n.mc()}if(2&amp;e){const e=n.xc();n.Ub("title",e.text.delete),n.Tb(2),n.Dc("textContent",e.text.delete)}}class Tt extends kt{setModifiedEntry(e){this.modifiedEntry=e.savedResource}get saveAllowed(){return!!this.entry.update}get deleteAllowed(){return!!this.entry.delete}destroy(){window.confirm(this.text.areYouSure)&amp;&amp;(this.destroyedEntry=this.entry,this.service.close())}}Tt.\u0275fac=function(e){return Pt(e||Tt)},Tt.\u0275cmp=n.bc({type:Tt,selectors:[["ng-component"]],features:[n.Sb([dt.a]),n.Qb],decls:13,vars:6,consts:[[1,"op-modal--portal","ngdialog-theme-openproject"],["data-indicator-name","modal","tabindex","0",1,"op-modal--modal-container","confirm-dialog--modal","loading-indicator--location"],[1,"op-modal--modal-header"],[1,"op-modal--modal-close-button"],[1,"icon-close",3,"click"],[1,"icon-context","icon-log_time",3,"textContent"],[1,"ngdialog-body","op-modal--modal-body"],[3,"entry","modifiedEntry"],["editForm",""],[1,"op-modal--modal-footer"],["class","button -highlight",3,"click",4,"ngIf"],["class","button",3,"click",4,"ngIf"],[1,"button","-highlight",3,"click"],["icon-classes","button--icon icon-checkmark"],["aria-hidden","true",1,"button--text",3,"textContent"],[1,"button",3,"click"],["icon-classes","button--icon icon-close"],["icon-classes","button--icon icon-delete"]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"div",0),n.nc(1,"div",1),n.nc(2,"div",2),n.nc(3,"a",3),n.nc(4,"i",4),n.vc("click",(function(e){return t.closeMe(e)})),n.mc(),n.mc(),n.ic(5,"h3",5),n.mc(),n.nc(6,"div",6),n.nc(7,"te-form",7,8),n.vc("modifiedEntry",(function(e){return t.setModifiedEntry(e)})),n.mc(),n.mc(),n.nc(9,"div",9),n.ad(10,xt,3,2,"button",10),n.ad(11,jt,3,2,"button",11),n.ad(12,St,3,2,"button",11),n.mc(),n.mc(),n.mc()),2&amp;e&amp;&amp;(n.Tb(4),n.Ub("title",t.text.close),n.Tb(1),n.Dc("textContent",t.text.title),n.Tb(2),n.Dc("entry",t.entry),n.Tb(3),n.Dc("ngIf",t.saveAllowed),n.Tb(1),n.Dc("ngIf",t.saveAllowed),n.Tb(1),n.Dc("ngIf",t.deleteAllowed))},directives:[wt,G.q,Ct.a],styles:[".op-modal--modal-container[_ngcontent-%COMP%]{max-width:90vw;width:800px}.op-modal--modal-footer[_ngcontent-%COMP%]{margin-top:2em}.op-modal--modal-footer[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{margin-bottom:0}.icon-log_time[_ngcontent-%COMP%]:before{padding-right:6px}"],changeDetection:0});const Pt=n.pc(Tt);class It{constructor(e,t,i,n,s){this.opModalService=e,this.injector=t,this.halResource=i,this.halEditing=n,this.i18n=s}edit(e){return new Promise((t,i)=&gt;{const n=this.opModalService.show(Tt,this.injector,{entry:e});n.closingEvent.pipe(Object(Ke.a)(1)).subscribe(()=&gt;{n.destroyedEntry?n.destroyedEntry.delete().then(()=&gt;{t({entry:n.destroyedEntry,action:"destroy"})}):n.modifiedEntry?t({entry:n.modifiedEntry,action:"update"}):i()})})}}function _t(e,t){if(1&amp;e){const e=n.oc();n.nc(0,"button",12),n.vc("click",(function(){return n.Sc(e),n.xc().saveEntry()})),n.ic(1,"op-icon",13),n.ic(2,"span",14),n.mc()}if(2&amp;e){const e=n.xc();n.Ub("title",e.saveText),n.Tb(2),n.Dc("textContent",e.saveText)}}function Ot(e,t){if(1&amp;e){const e=n.oc();n.nc(0,"button",15),n.vc("click",(function(t){return n.Sc(e),n.xc().closeMe(t)})),n.ic(1,"op-icon",16),n.ic(2,"span",14),n.mc()}if(2&amp;e){const e=n.xc();n.Ub("title",e.text.cancel),n.Tb(2),n.Dc("textContent",e.text.cancel)}}function Dt(e,t){if(1&amp;e){const e=n.oc();n.nc(0,"button",15),n.vc("click",(function(){return n.Sc(e),n.xc().destroy()})),n.ic(1,"op-icon",17),n.ic(2,"span",14),n.mc()}if(2&amp;e){const e=n.xc();n.Ub("title",e.text.delete),n.Tb(2),n.Dc("textContent",e.text.delete)}}It.\u0275fac=function(e){return new(e||It)(n.rc(I.b),n.rc(n.A),n.rc(x.a),n.rc(dt.a),n.rc(C.a))},It.\u0275prov=n.dc({token:It,factory:It.\u0275fac});class Rt extends kt{get deleteAllowed(){return!1}setModifiedEntry(e){this.createdEntry=e.savedResource}get saveText(){return this.i18n.t("js.label_create")}}Rt.\u0275fac=function(e){return Et(e||Rt)},Rt.\u0275cmp=n.bc({type:Rt,selectors:[["ng-component"]],features:[n.Sb([dt.a]),n.Qb],decls:13,vars:6,consts:[[1,"op-modal--portal","ngdialog-theme-openproject"],["data-indicator-name","modal","tabindex","0",1,"op-modal--modal-container","confirm-dialog--modal","loading-indicator--location"],[1,"op-modal--modal-header"],[1,"op-modal--modal-close-button"],[1,"icon-close",3,"click"],[1,"icon-context","icon-log_time",3,"textContent"],[1,"ngdialog-body","op-modal--modal-body"],[3,"entry","modifiedEntry"],["editForm",""],[1,"op-modal--modal-footer"],["class","button -highlight",3,"click",4,"ngIf"],["class","button",3,"click",4,"ngIf"],[1,"button","-highlight",3,"click"],["icon-classes","button--icon icon-checkmark"],["aria-hidden","true",1,"button--text",3,"textContent"],[1,"button",3,"click"],["icon-classes","button--icon icon-close"],["icon-classes","button--icon icon-delete"]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"div",0),n.nc(1,"div",1),n.nc(2,"div",2),n.nc(3,"a",3),n.nc(4,"i",4),n.vc("click",(function(e){return t.closeMe(e)})),n.mc(),n.mc(),n.ic(5,"h3",5),n.mc(),n.nc(6,"div",6),n.nc(7,"te-form",7,8),n.vc("modifiedEntry",(function(e){return t.setModifiedEntry(e)})),n.mc(),n.mc(),n.nc(9,"div",9),n.ad(10,_t,3,2,"button",10),n.ad(11,Ot,3,2,"button",11),n.ad(12,Dt,3,2,"button",11),n.mc(),n.mc(),n.mc()),2&amp;e&amp;&amp;(n.Tb(4),n.Ub("title",t.text.close),n.Tb(1),n.Dc("textContent",t.text.title),n.Tb(2),n.Dc("entry",t.entry),n.Tb(3),n.Dc("ngIf",t.saveAllowed),n.Tb(1),n.Dc("ngIf",t.saveAllowed),n.Tb(1),n.Dc("ngIf",t.deleteAllowed))},directives:[wt,G.q,Ct.a],styles:[".op-modal--modal-container[_ngcontent-%COMP%]{max-width:90vw;width:800px}.op-modal--modal-footer[_ngcontent-%COMP%]{margin-top:2em}.op-modal--modal-footer[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{margin-bottom:0}.icon-log_time[_ngcontent-%COMP%]:before{padding-right:6px}"],changeDetection:0});const Et=n.pc(Rt);class Ft{constructor(e,t,i,n,s,a){this.opModalService=e,this.injector=t,this.halResource=i,this.timeEntryDm=n,this.halEditing=s,this.i18n=a}create(e){return new Promise((t,i)=&gt;{this.createNewTimeEntry(e).then(e=&gt;{const n=this.opModalService.show(Rt,this.injector,{entry:e.pristineResource});n.closingEvent.pipe(Object(Ke.a)(1)).subscribe(()=&gt;{n.createdEntry?t({entry:n.createdEntry,action:"create"}):i()})})})}createNewTimeEntry(e){return this.timeEntryDm.createForm({spentOn:e.format("YYYY-MM-DD")}).then(e=&gt;this.fromCreateForm(e))}fromCreateForm(e){let t=this.initializeNewResource(e);return this.halEditing.edit(t,e)}initializeNewResource(e){let t=this.halResource.createHalResourceOfType("TimeEntry",e.payload.$plain());return t.$links.schema=e.schema,t.overriddenSchema=e.schema,t._type="TimeEntry",t.id="new",t.hours="PT1H",t.update=t.$links.update=e.$links.self,t.updateImmediately=t.$links.updateImmediately=e=&gt;this.timeEntryDm.create(e),t.state.putValue(t),t}}Ft.\u0275fac=function(e){return new(e||Ft)(n.rc(I.b),n.rc(n.A),n.rc(x.a),n.rc(at.a),n.rc(dt.a),n.rc(C.a))},Ft.\u0275prov=n.dc({token:Ft,factory:Ft.\u0275fac});var Mt=i("PvNn"),At=i("buwf");class Lt{constructor(e,t,i,s,a,r,o,c,l,d,u,h,p,m,g){this.states=e,this.timeEntryDm=t,this.$state=i,this.element=s,this.i18n=a,this.injector=r,this.notifications=o,this.sanitizer=c,this.configuration=l,this.timezone=d,this.timeEntryEdit=u,this.timeEntryCreate=h,this.timeEntryCache=p,this.colors=m,this.browserDetector=g,this.static=!1,this.entries=new n.s,this.minHour=1,this.maxHour=12,this.labelIntervalHours=2,this.scaleRatio=1,this.calendarPlugins=[st.a,lt.a],this.calendarHeader={right:"",center:"title",left:"prev,next today"},this.calendarSlotLabelFormat=e=&gt;(this.maxHour-e.date.hour)/this.scaleRatio,this.calendarSlotLabelInterval=`${this.labelIntervalHours}:00:00`,this.calendarContentHeight=605,this.calendarAllDaySlot=!1,this.calendarDisplayEventTime=!1,this.calendarSlotEventOverlap=!1,this.calendarEditable=!1,this.calendarMinTime=`${this.minHour-1}:00:00`,this.calendarMaxTime=`${this.maxHour}:00:00`,this.calendarEventOverlap=e=&gt;!e.classNames.includes("te-calendar--time-entry"),this.memoizedCreateAllowed=!1,this.text={logTime:this.i18n.t("js.button_log_time")}}ngOnInit(){this.initializeCalendar()}ngAfterViewInit(){this.ucCalendar.getApi().setOption("eventRender",e=&gt;{this.alterEventEntry(e)}),this.ucCalendar.getApi().setOption("eventDestroy",e=&gt;{this.beforeEventRemove(e)}),this.ucCalendar.getApi().setOption("eventClick",e=&gt;{this.dispatchEventClick(e)}),this.ucCalendar.getApi().setOption("eventDrop",e=&gt;{this.moveEvent(e)})}calendarEventsFunction(e,t,i){this.fetchTimeEntries(e.start,e.end).then(i=&gt;{this.entries.emit(i),t(this.buildEntries(i.elements,e))})}fetchTimeEntries(e,t){if(!this.memoizedTimeEntries||this.memoizedTimeEntries.start.getTime()!==e.getTime()||this.memoizedTimeEntries.end.getTime()!==t.getTime()){let i=this.timeEntryDm.list({filters:this.dmFilters(e,t),pageSize:500}).then(e=&gt;(this.memoizedCreateAllowed=!!e.createTimeEntry,e.elements.forEach(e=&gt;this.timeEntryCache.updateValue(e.id,e)),e));this.memoizedTimeEntries={start:e,end:t,entries:i}}return this.memoizedTimeEntries.entries}buildEntries(e,t){return this.setRatio(e),this.buildTimeEntryEntries(e).concat(this.buildAuxEntries(e,t))}setRatio(e){let t=this.calculateDateSums(e),i=Math.max(...Object.values(t),0),n=this.scaleRatio;i&gt;this.maxHour-this.minHour?this.scaleRatio=this.smallerSuitableRatio((this.maxHour-this.minHour)/i):this.scaleRatio=1,n!==this.scaleRatio&amp;&amp;this.ucCalendar.getApi().setOption("slotLabelFormat",e=&gt;(this.maxHour-e.date.hour)/this.scaleRatio)}buildTimeEntryEntries(e){let t={};return e.map(e=&gt;{let i,n,s=this.timezone.toHours(e.hours)*this.scaleRatio;t[e.spentOn]?(i=t[e.spentOn].clone().subtract(s,"h"),n=t[e.spentOn].clone()):(i=Qe(e.spentOn).add(this.maxHour-s,"h"),n=Qe(e.spentOn).add(this.maxHour,"h")),t[e.spentOn]=i;this.colors.toHsl(this.entryName(e));return this.timeEntry(e,s,i,n)})}buildAuxEntries(e,t){let i=this.calculateDateSums(e),n=[];for(let s=Qe(t.start);s.diff(t.end,"days")&lt;=0;s.add(1,"days")){let e=i[s.format("YYYY-MM-DD")]||0;n.push(this.sumEntry(s,e)),this.memoizedCreateAllowed&amp;&amp;n.push(this.addEntry(s,e))}return n}calculateDateSums(e){let t={};return e.forEach(e=&gt;{let i=this.timezone.toHours(e.hours);t[e.spentOn]?t[e.spentOn]+=i:t[e.spentOn]=i}),t}timeEntry(e,t,i,n){const s=this.colors.toHsl(this.entryName(e));let a=["te-calendar--time-entry"],r=n.diff(i,"m");return r&lt;40&amp;&amp;a.push("-no-fadeout"),{title:r&lt;20?"":this.entryName(e),startEditable:!!e.update,start:i.format(),end:n.format(),backgroundColor:s,borderColor:s,classNames:a,entry:e}}sumEntry(e,t){return{start:e.clone().add(this.maxHour-Math.min(t*this.scaleRatio,this.maxHour-.5)-.5,"h").format(),end:e.clone().add(this.maxHour-Math.min((t+.05)*this.scaleRatio,this.maxHour-.5),"h").format(),classNames:"te-calendar--day-sum",rendering:"background",sum:this.i18n.t("js.units.hour",{count:this.formatNumber(t)})}}addEntry(e,t){let i=["te-calendar--add-entry"];return t&gt;=24&amp;&amp;i.push("-prohibited"),{start:e.clone().format(),end:e.clone().add(this.maxHour-Math.min(t*this.scaleRatio,this.maxHour-1)-.5,"h").format(),rendering:"background",classNames:i}}dmFilters(e,t){return[["spentOn","&lt;&gt;d",[Qe(e).format("YYYY-MM-DD"),Qe(t).subtract(1,"d").format("YYYY-MM-DD")]],["user_id","=",["me"]]]}initializeCalendar(){this.calendarEvents=this.calendarEventsFunction.bind(this)}get calendarEventLimit(){return!1}get calendarLocale(){return this.i18n.locale}get calendarFixedWeekCount(){return!1}get calendarDefaultView(){return"timeGridWeek"}get calendarFirstDay(){return this.configuration.startOfWeek()}get calendarElement(){return jQuery(this.element.nativeElement).find(".fc-view-container")}dispatchEventClick(e){e.event.extendedProps.entry?this.editEvent(e.event.extendedProps.entry):e.el.classList.contains("te-calendar--add-entry")&amp;&amp;!e.el.classList.contains("-prohibited")&amp;&amp;this.addEvent(Qe(e.event.start))}editEvent(e){this.timeEntryEdit.edit(e).then(e=&gt;{this.updateEventSet(e.entry,e.action)}).catch(()=&gt;{})}moveEvent(e){let t=e.event.extendedProps.entry;t.spentOn=Qe(e.event.end).format("YYYY-MM-DD"),this.timeEntryDm.update(t,t.schema).then(e=&gt;{this.updateEventSet(e,"update")}).catch(t=&gt;{this.notifications.handleRawError(t),e.revert()})}addEventToday(){this.addEvent(Qe(new Date))}addEvent(e){this.memoizedCreateAllowed&amp;&amp;this.timeEntryCreate.create(e).then(e=&gt;{this.updateEventSet(e.entry,e.action)}).catch(()=&gt;{})}updateEventSet(e,t){this.memoizedTimeEntries.entries.then(i=&gt;{let n=i.elements.findIndex(t=&gt;t.id===e.id);switch(t){case"update":i.elements[n]=e;break;case"destroy":i.elements.splice(n,1);break;case"create":this.timeEntryCache.updateValue(e.id,e),i.elements.push(e)}this.ucCalendar.getApi().refetchEvents()})}alterEventEntry(e){this.appendAddIcon(e),this.appendSum(e),e.event.extendedProps.entry&amp;&amp;(this.addTooltip(e),this.prependDuration(e),this.appendFadeout(e))}appendAddIcon(e){if(!e.el.classList.contains("te-calendar--add-entry"))return;let t=document.createElement("div");t.classList.add("te-calendar--add-icon"),t.innerText="+",e.el.append(t)}appendSum(e){e.event.extendedProps.sum&amp;&amp;e.el.append(e.event.extendedProps.sum)}addTooltip(e){this.browserDetector.isMobile||jQuery(e.el).tooltip({content:this.tooltipContentString(e.event.extendedProps.entry),items:".fc-event",close:function(){jQuery(".ui-helper-hidden-accessible").remove()},track:!0})}removeTooltip(e){jQuery(e.el).tooltip("disable")}prependDuration(e){let t=this.timezone.formattedDuration(e.event.extendedProps.entry.hours);jQuery(e.el).find(".fc-title").prepend(`
                                              <div class="fc-duration">
                                               ${t}
                                              </div>
                                              `)}appendFadeout(e){let t=e.event.extendedProps.entry;if(this.timezone.toHours(t.hours)&lt;.5)return;let i=jQuery(e.el),n=jQuery('
                                              <div class="fc-fadeout">
                                              </div>
                                              '),s=this.colors.toHsla(this.entryName(t),0),a=this.colors.toHsla(this.entryName(t),100);n.css("background",`-webkit-linear-gradient(${s} 0%, ${a} 100%`),["-moz-linear-gradient","-o-linear-gradient","linear-gradient","-ms-linear-gradient"].forEach(e=&gt;{n.css("background-image",`${e}(${s} 0%, ${a} 100%`)}),i.append(n)}beforeEventRemove(e){e.event.extendedProps.entry&amp;&amp;this.removeTooltip(e)}entryName(e){let t=e.project.name;return e.workPackage&amp;&amp;(t+=` - ${this.workPackageName(e)}`),t||"-"}workPackageName(e){return`#${e.workPackage.idFromLink}: ${e.workPackage.name}`}tooltipContentString(e){return`\n
                                              <ul class="tooltip--map">
                                               \n
                                               <li class="tooltip--map--item">
                                                \n
                                                <span class="tooltip--map--key">
                                                 ${this.i18n.t("js.time_entry.project")}:
                                                </span>
                                                \n
                                                <span class="tooltip--map--value">
                                                 ${this.sanitizedValue(e.project.name)}
                                                </span>
                                                \n
                                               </li>
                                               \n
                                               <li class="tooltip--map--item">
                                                \n
                                                <span class="tooltip--map--key">
                                                 ${this.i18n.t("js.time_entry.work_package")}:
                                                </span>
                                                \n
                                                <span class="tooltip--map--value">
                                                 ${e.workPackage?this.sanitizedValue(this.workPackageName(e)):this.i18n.t("js.placeholders.default")}
                                                </span>
                                                \n
                                               </li>
                                               \n
                                               <li class="tooltip--map--item">
                                                \n
                                                <span class="tooltip--map--key">
                                                 ${this.i18n.t("js.time_entry.activity")}:
                                                </span>
                                                \n
                                                <span class="tooltip--map--value">
                                                 ${this.sanitizedValue(e.activity.name)}
                                                </span>
                                                \n
                                               </li>
                                               \n
                                               <li class="tooltip--map--item">
                                                \n
                                                <span class="tooltip--map--key">
                                                 ${this.i18n.t("js.time_entry.hours")}:
                                                </span>
                                                \n
                                                <span class="tooltip--map--value">
                                                 ${this.timezone.formattedDuration(e.hours)}
                                                </span>
                                                \n
                                               </li>
                                               \n
                                               <li class="tooltip--map--item">
                                                \n
                                                <span class="tooltip--map--key">
                                                 ${this.i18n.t("js.time_entry.comment")}:
                                                </span>
                                                \n
                                                <span class="tooltip--map--value">
                                                 ${e.comment.raw||this.i18n.t("js.placeholders.default")}
                                                </span>
                                                \n
                                               </li>
                                               \n        `}sanitizedValue(e){return this.sanitizer.sanitize(n.W.HTML,e)}formatNumber(e){return this.i18n.toNumber(e,{precision:2})}smallerSuitableRatio(e){for(let t=this.labelIntervalHours+1;t&lt;100;t++){let i=this.labelIntervalHours/t;if(e&gt;=i)return i}return 1}}Lt.\u0275fac=function(e){return new(e||Lt)(n.hc(u.a),n.hc(at.a),n.hc(Ue.G),n.hc(n.q),n.hc(C.a),n.hc(n.A),n.hc(de.a),n.hc(N.b),n.hc(Ze.a),n.hc(nt.a),n.hc(It),n.hc(Ft),n.hc(ct),n.hc(Mt.a),n.hc(At.a))},Lt.\u0275cmp=n.bc({type:Lt,selectors:[["te-calendar"]],viewQuery:function(e,t){var i;(1&amp;e&amp;&amp;n.hd(He.a,!0),2&amp;e)&amp;&amp;(n.Pc(i=n.wc())&amp;&amp;(t.ucCalendar=i.first))},inputs:{projectIdentifier:"projectIdentifier",static:"static"},outputs:{entries:"entries"},features:[n.Sb([It,Ft,dt.a])],decls:6,vars:21,consts:[[1,"te-calendar--container","loading-indicator--location",2,"position","relative"],[1,"button","te-calendar--create-button",3,"click"],["icon-classes","button--icon icon-log_time"],["aria-hidden","true",1,"button--text",3,"textContent"],[3,"editable","eventLimit","locale","fixedWeekCount","header","defaultView","firstDay","contentHeight","slotEventOverlap","slotLabelInterval","slotLabelFormat","allDaySlot","displayEventTime","minTime","maxTime","events","eventOverlap","plugins"],["ucCalendar",""]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"div",0),n.nc(1,"button",1),n.vc("click",(function(){return t.addEventToday()})),n.ic(2,"op-icon",2),n.ic(3,"span",3),n.mc(),n.ic(4,"full-calendar",4,5),n.mc()),2&amp;e&amp;&amp;(n.Ub("data-indicator-name","table"),n.Tb(1),n.Ub("aria-label",t.text.logTime),n.Tb(2),n.Dc("textContent",t.text.logTime),n.Tb(1),n.Dc("editable",t.calendarEditable)("eventLimit",t.calendarEventLimit)("locale",t.calendarLocale)("fixedWeekCount",t.calendarFixedWeekCount)("header",t.calendarHeader)("defaultView",t.calendarDefaultView)("firstDay",t.calendarFirstDay)("contentHeight",t.calendarContentHeight)("slotEventOverlap",t.calendarSlotEventOverlap)("slotLabelInterval",t.calendarSlotLabelInterval)("slotLabelFormat",t.calendarSlotLabelFormat)("allDaySlot",t.calendarAllDaySlot)("displayEventTime",t.calendarDisplayEventTime)("minTime",t.calendarMinTime)("maxTime",t.calendarMaxTime)("events",t.calendarEvents)("eventOverlap",t.calendarEventOverlap)("plugins",t.calendarPlugins))},directives:[Ct.a,He.a],styles:[".fc-view-container{overflow-x:auto}.fc-view-container .fc-view{min-width:800px}.fc-view-container .fc-head{display:table-footer-group}.fc-view-container .fc-bgevent,.fc-view-container .fc-event{border-radius:0;margin-right:8px;margin-left:8px}.fc-view-container .fc-head-container{border-color:#fff}.fc-view-container .fc-day-header{padding-top:5px}.fc-view-container .fc-widget-content{border-left-color:#fff}.fc-view-container .fc-widget-content .fc-day{border-left:0;border-right:0}.fc-view-container .fc-timeGrid-view .fc-day-grid .fc-row{min-height:1em}.fc-view-container .fc-timeGrid-view .fc-day-grid .fc-row .fc-content-skeleton{padding-bottom:0}.fc-view-container .fc-time-grid .fc-slats .fc-minor td{border-top:0}.fc-view-container .te-calendar--day-sum{border:none;background-color:initial;color:#000;text-align:center;font-size:.875em;font-weight:700;line-height:22px;opacity:1}.fc-view-container .te-calendar--add-entry{text-align:center;font-weight:700;opacity:0;background:none;border:none;display:flex;align-items:center}.fc-view-container .te-calendar--add-entry:hover{opacity:1;transition:opacity 1s ease;background:#eaeaea}.fc-view-container .te-calendar--add-entry .te-calendar--add-icon{color:#000;width:100%;font-weight:400;font-size:1.5rem}.fc-view-container .te-calendar--add-entry.-prohibited{cursor:not-allowed}.fc-view-container .te-calendar--add-entry.-prohibited .te-calendar--add-icon{display:none}.fc-view-container .te-calendar--time-entry .fc-content{height:100%}.fc-view-container .te-calendar--time-entry .fc-fadeout{position:relative;bottom:2em;height:2em;z-index:5}.fc-view-container .te-calendar--time-entry.-no-fadeout .fc-fadeout{display:none}.fc-view-container .fc-duration{border-right:1px solid #fff;border-bottom:1px solid #fff;margin-left:-1px;padding-left:1px;display:inline-block;margin-right:5px;padding-right:5px;font-weight:700}.te-calendar--create-button{float:right;margin-right:0;margin-top:4px;height:34px}"],encapsulation:2,changeDetection:0});class qt extends je.a{constructor(e,t,i,n,s){super(i,e),this.injector=e,this.timezone=t,this.i18n=i,this.pathHelper=n,this.cdr=s,this.entries=[]}updateEntries(e){this.entries=e.elements,this.cdr.detectChanges()}get total(){let e=this.entries.reduce((e,t)=&gt;e+this.timezone.toHours(t.hours),0);return e&gt;0?this.i18n.t("js.units.hour",{count:this.formatNumber(e)}):this.i18n.t("js.placeholders.default")}get isEditable(){return!1}formatNumber(e){return this.i18n.toNumber(e,{precision:2})}}qt.\u0275fac=function(e){return new(e||qt)(n.hc(n.A),n.hc(nt.a),n.hc(C.a),n.hc(z.a),n.hc(n.i))},qt.\u0275cmp=n.bc({type:qt,selectors:[["ng-component"]],features:[n.Qb],decls:8,vars:4,consts:[[3,"name","editable"],[3,"resource"],[3,"entries"],[1,"total-hours"],[3,"textContent"]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"widget-header",0),n.ic(1,"widget-menu",1),n.mc(),n.nc(2,"te-calendar",2),n.vc("entries",(function(e){return t.updateEntries(e)})),n.mc(),n.lc(3),n.nc(4,"div",3),n.nc(5,"p"),n.cd(6,"Total: "),n.ic(7,"span",4),n.mc(),n.mc(),n.kc()),2&amp;e&amp;&amp;(n.Dc("name",t.widgetName)("editable",t.isEditable),n.Tb(1),n.Dc("resource",t.resource),n.Tb(6),n.Dc("textContent",t.total))},directives:[Fe,$e,Lt],encapsulation:2,changeDetection:0});class $t{constructor(e){this.Hook=e}get registered(){let e=[];return _.each(this.Hook.call("gridWidgets"),t=&gt;{e=e.concat(t)}),e}}$t.\u0275fac=function(e){return new(e||$t)(n.rc(w.a))},$t.\u0275prov=n.dc({token:$t,factory:$t.\u0275fac});var Vt=i("Dp3K"),Nt=i("p5fp"),Ht=i("qvi4"),zt=i("eaMR");class Bt extends Vt.a{set loadingIndicator(e){this.loadingIndicatorService.indicator("calendar-entry").promise=e}refresh(e,t){return this.loadingIndicator=this.wpListService.loadCurrentQueryFromParams(this.projectIdentifier)}}Bt.\u0275fac=function(e){return Qt(e||Bt)},Bt.\u0275cmp=n.bc({type:Bt,selectors:[["ng-component"]],viewQuery:function(e,t){var i;(1&amp;e&amp;&amp;n.Yc(tt,!0),2&amp;e)&amp;&amp;(n.Pc(i=n.wc())&amp;&amp;(t.calendarElement=i.first))},features:[n.Qb],decls:13,vars:2,consts:[["data-indicator-name","calendar-entry",1,"work-packages-calendar-view--container","loading-indicator--location"],[1,"toolbar-container","-editable"],[1,"toolbar"],[1,"title-container"],[1,"toolbar-items","hide-when-print"],[1,"toolbar-item","hidden-for-mobile"],[3,"projectIdentifier"]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"div",0),n.nc(1,"div",1),n.nc(2,"div",2),n.nc(3,"div",3),n.nc(4,"h2"),n.cd(5),n.mc(),n.mc(),n.nc(6,"ul",4),n.nc(7,"li",5),n.ic(8,"wp-filter-button"),n.mc(),n.nc(9,"li",5),n.ic(10,"zen-mode-toggle-button"),n.mc(),n.mc(),n.mc(),n.mc(),n.ic(11,"filter-container"),n.ic(12,"wp-calendar",6),n.mc()),2&amp;e&amp;&amp;(n.Tb(5),n.ed(" ",t.I18n.t("js.calendar.title")," "),n.Tb(7),n.Dc("projectIdentifier",t.projectIdentifier))},directives:[Nt.a,Ht.a,zt.a,tt],encapsulation:2});const Qt=n.pc(Bt);var Wt=i("0loS");class Ut{}Ut.\u0275mod=n.fc({type:Ut}),Ut.\u0275inj=n.ec({factory:function(e){return new(e||Ut)},providers:[],imports:[[b.a,f.a]]});const Xt=[{name:"work-packages.calendar",url:"/calendar",component:Bt,reloadOnSearch:!1,data:{bodyClasses:"router--work-packages-calendar",menuItem:"calendar-menu-item",parent:"work-packages"}}];class Yt{}Yt.\u0275mod=n.fc({type:Yt}),Yt.\u0275inj=n.ec({factory:function(e){return new(e||Yt)},imports:[[b.a,Wt.UIRouterModule.forChild({states:Xt}),we.a,Ut,f.a,He.b]]});var Gt=i("8h6p");function Kt(e,t){if(1&amp;e&amp;&amp;n.ic(0,"no-results",5),2&amp;e){const e=n.xc();n.Dc("title",e.text.noResults)}}function Zt(e,t){if(1&amp;e&amp;&amp;(n.lc(0),n.nc(1,"h4",6),n.ic(2,"a",7),n.mc(),n.nc(3,"p",8),n.ic(4,"em",9),n.mc(),n.ic(5,"div",10),n.kc()),2&amp;e){const e=t.$implicit,i=n.xc();n.Tb(2),n.Dc("href",i.documentPath(e),n.Vc)("textContent",e.title),n.Tb(2),n.Dc("textContent",i.documentCreated(e)),n.Tb(1),n.Dc("innerHtml",i.documentDescription(e),n.Tc)}}class Jt extends je.a{constructor(e,t,i,n,s,a,r,o){super(i,a),this.halResource=e,this.pathHelper=t,this.i18n=i,this.timezone=n,this.domSanitizer=s,this.injector=a,this.currentProject=r,this.cdr=o,this.text={noResults:this.i18n.t("js.grid.widgets.documents.no_results")},this.entries=[],this.entriesLoaded=!1}ngOnInit(){this.halResource.get(this.documentsUrl).toPromise().then(e=&gt;{this.entries=e.elements,this.entriesLoaded=!0,this.cdr.detectChanges()})}get isEditable(){return!1}documentPath(e){return`${this.pathHelper.appBasePath}/documents/${e.id}`}documentCreated(e){return this.timezone.formattedDatetime(e.createdAt)}documentDescription(e){return this.domSanitizer.sanitize(n.W.HTML,e.description.html)}get noEntries(){return!this.entries.length&amp;&amp;this.entriesLoaded}get documentsUrl(){let e=JSON.stringify([["updated_at","desc"]]),t=`${this.pathHelper.api.v3.apiV3Base}/documents?sortBy=${e}&amp;pageSize=10`;if(this.currentProject.id){t+=`&amp;filters=${JSON.stringify([{project_id:{operator:"=",values:[this.currentProject.id.toString()]}}])}`}return t}}Jt.\u0275fac=function(e){return new(e||Jt)(n.hc(x.a),n.hc(z.a),n.hc(C.a),n.hc(nt.a),n.hc(N.b),n.hc(n.A),n.hc(Se.a),n.hc(n.i))},Jt.\u0275cmp=n.bc({type:Jt,selectors:[["ng-component"]],features:[n.Qb],decls:5,vars:5,consts:[[3,"name","editable"],[3,"resource"],[1,"grid--widget-content"],[3,"title",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"title"],[1,"document-category-elements--header"],[3,"href","textContent"],[1,"document-category-elements--date"],[3,"textContent"],[1,"wiki","grid--widget-limited-text",3,"innerHtml"]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"widget-header",0),n.ic(1,"widget-menu",1),n.mc(),n.nc(2,"div",2),n.ad(3,Kt,1,1,"no-results",3),n.ad(4,Zt,6,4,"ng-container",4),n.mc()),2&amp;e&amp;&amp;(n.Dc("name",t.widgetName)("editable",t.isEditable),n.Tb(1),n.Dc("resource",t.resource),n.Tb(2),n.Dc("ngIf",t.noEntries),n.Tb(1),n.Dc("ngForOf",t.entries))},directives:[Fe,$e,G.q,G.p,Gt.a],encapsulation:2,changeDetection:0});var ei=i("DDsP"),ti=i("u8Ab");function ii(e,t){if(1&amp;e&amp;&amp;n.ic(0,"no-results",6),2&amp;e){const e=n.xc();n.Dc("title",e.text.noResults)}}function ni(e,t){if(1&amp;e&amp;&amp;n.ic(0,"user-avatar",12),2&amp;e){const e=n.xc().$implicit;n.Dc("user",e.author)}}function si(e,t){if(1&amp;e&amp;&amp;n.ic(0,"p",13),2&amp;e){const e=n.xc().$implicit;n.Dc("textContent",e.summary)}}function ai(e,t){if(1&amp;e&amp;&amp;(n.nc(0,"p",14),n.cd(1),n.ic(2,"a",9),n.cd(3),n.mc()),2&amp;e){const e=n.xc().$implicit,t=n.xc();n.Tb(1),n.ed(" ",t.text.createdBy," "),n.Tb(1),n.Dc("href",t.newsAuthorPath(e),n.Vc)("textContent",t.newsAuthorName(e)),n.Tb(1),n.fd(" ",t.text.at," ",t.newsCreated(e)," ")}}function ri(e,t){if(1&amp;e&amp;&amp;(n.nc(0,"li",7),n.nc(1,"div"),n.ad(2,ni,1,1,"user-avatar",8),n.ic(3,"a",9),n.cd(4,": "),n.ic(5,"a",9),n.ad(6,si,1,1,"p",10),n.ad(7,ai,4,5,"p",11),n.mc(),n.mc()),2&amp;e){const e=t.$implicit,i=n.xc();n.Tb(2),n.Dc("ngIf",e.author),n.Tb(1),n.Dc("href",i.newsProjectPath(e),n.Vc)("textContent",i.newsProjectName(e)),n.Tb(2),n.Dc("href",i.newsPath(e),n.Vc)("textContent",e.title),n.Tb(1),n.Dc("ngIf",e.summary),n.Tb(1),n.Dc("ngIf",e.author)}}class oi extends je.a{constructor(e,t,i,n,s,a,r){super(t,i),this.pathHelper=e,this.i18n=t,this.injector=i,this.timezone=n,this.newsDm=s,this.currentProject=a,this.cdr=r,this.text={createdBy:this.i18n.t("js.label_created_by"),at:this.i18n.t("js.grid.widgets.news.at"),noResults:this.i18n.t("js.grid.widgets.news.no_results")},this.entries=[],this.entriesLoaded=!1}ngOnInit(){this.newsDm.list(this.newsDmParams).then(e=&gt;this.setupNews(e.elements))}setupNews(e){this.entries=e,this.entriesLoaded=!0,this.cdr.detectChanges()}get isEditable(){return!1}newsPath(e){return this.pathHelper.newsPath(e.id)}newsProjectPath(e){var t;return this.pathHelper.projectPath(null===(t=e.project)||void 0===t?void 0:t.idFromLink)}newsProjectName(e){var t;return null===(t=e.project)||void 0===t?void 0:t.name}newsAuthorName(e){var t;return null===(t=e.author)||void 0===t?void 0:t.name}newsAuthorPath(e){var t;return this.pathHelper.userPath(null===(t=e.author)||void 0===t?void 0:t.id)}newsCreated(e){return this.timezone.formattedDatetime(e.createdAt)}get noEntries(){return!this.entries.length&amp;&amp;this.entriesLoaded}get newsDmParams(){let e={sortBy:[["created_at","desc"]],pageSize:3};return this.currentProject.id&amp;&amp;(e.filters=[["project_id","=",[this.currentProject.id]]]),e}}oi.\u0275fac=function(e){return new(e||oi)(n.hc(z.a),n.hc(C.a),n.hc(n.A),n.hc(nt.a),n.hc(ei.a),n.hc(Se.a),n.hc(n.i))},oi.\u0275cmp=n.bc({type:oi,selectors:[["ng-component"]],features:[n.Qb],decls:6,vars:5,consts:[[3,"name","editable"],[3,"resource"],[1,"grid--widget-content"],[3,"title",4,"ngIf"],[1,"widget-box--arrow-links"],["class","-widget-box--arrow-multiline",4,"ngFor","ngForOf"],[3,"title"],[1,"-widget-box--arrow-multiline"],["data-class-list","avatar avatar-medium -spaced",3,"user",4,"ngIf"],[3,"href","textContent"],["class","widget-box--additional-info",3,"textContent",4,"ngIf"],["class","widget-box--additional-info",4,"ngIf"],["data-class-list","avatar avatar-medium -spaced",3,"user"],[1,"widget-box--additional-info",3,"textContent"],[1,"widget-box--additional-info"]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"widget-header",0),n.ic(1,"widget-menu",1),n.mc(),n.nc(2,"div",2),n.ad(3,ii,1,1,"no-results",3),n.nc(4,"ul",4),n.ad(5,ri,8,7,"li",5),n.mc(),n.mc()),2&amp;e&amp;&amp;(n.Dc("name",t.widgetName)("editable",t.isEditable),n.Tb(1),n.Dc("resource",t.resource),n.Tb(2),n.Dc("ngIf",t.noEntries),n.Tb(2),n.Dc("ngForOf",t.entries))},directives:[Fe,$e,G.q,G.p,Gt.a,ti.a],encapsulation:2,changeDetection:0});class ci{constructor(e,t){this.gridDm=e,this.halResourceService=t}initialize(e){return this.gridDm.list({filters:[["scope","=",[e]]]}).then(t=&gt;0===t.total?this.myPageForm(e):t.elements[0])}myPageForm(e){return new Promise((t,i)=&gt;{let n={_links:{scope:{href:e}}};this.gridDm.createForm(n).then(e=&gt;{let n=e.payload.$source,s=this.halResourceService.createHalResource(n);0===s.widgets.length&amp;&amp;(s.rowCount=1,s.columnCount=1),this.gridDm.create(s,e.schema).then(e=&gt;{t(e)}).catch(()=&gt;{i()})})})}}ci.\u0275fac=function(e){return new(e||ci)(n.rc(_e.a),n.rc(x.a))},ci.\u0275prov=n.dc({token:ci,factory:ci.\u0275fac});const li=["tabInner"];class di{onSave(){this.tabInner.onSave()}}di.\u0275fac=function(e){return new(e||di)},di.\u0275cmp=n.bc({type:di,selectors:[["ng-component"]],viewQuery:function(e,t){var i;(1&amp;e&amp;&amp;n.Yc(li,!0),2&amp;e)&amp;&amp;(n.Pc(i=n.wc())&amp;&amp;(t.tabInner=i.first))},decls:3,vars:0,consts:[["wp-isolated-query-space",""],["tabInner",""]],template:function(e,t){1&amp;e&amp;&amp;(n.lc(0,0),n.ic(1,"settings-tab-inner",null,1),n.kc())},encapsulation:2});const ui=["tabInner"];class hi{onSave(){this.tabInner.onSave()}}hi.\u0275fac=function(e){return new(e||hi)},hi.\u0275cmp=n.bc({type:hi,selectors:[["ng-component"]],viewQuery:function(e,t){var i;(1&amp;e&amp;&amp;n.Yc(ui,!0),2&amp;e)&amp;&amp;(n.Pc(i=n.wc())&amp;&amp;(t.tabInner=i.first))},decls:3,vars:0,consts:[["wp-isolated-query-space",""],["tabInner",""]],template:function(e,t){1&amp;e&amp;&amp;(n.lc(0,0),n.ic(1,"filters-tab-inner",null,1),n.kc())},encapsulation:2});var pi=i("OGNV"),mi=i("0bag");class gi{constructor(e,t,i){this.queryParams=e,this.chartOptions=t,this.chartType=i,this.queries=[],this.chartType=this.chartType||"horizontalBar"}static queryCreationParams(e,t){return{hidden:!0,public:t,name:e.t("js.grid.widgets.work_packages_graph.title"),showHierarchies:!1,_links:{groupBy:{href:"/api/v3/queries/group_bys/status"}}}}}var fi=i("qc15");class bi{constructor(e,t,i,n,s){this.I18n=e,this.queryFormDm=t,this.queryDm=i,this.notificationService=n,this.currentProject=s,this._forms={}}persistAndReload(){return new Promise((e,t)=&gt;{this.persistChanges().then(()=&gt;{this.reloadQueries().then(()=&gt;e())})})}persistChanges(){let e=this.queries.map(e=&gt;this.saveQuery(e));return Promise.all(e)}get datasets(){return this.queries.map(e=&gt;({groups:e.results.groups,queryProps:"",label:e.name}))}reloadQueries(){return this.configuration.queries.length=0,this.loadQueries()}ensureQueryAndLoad(){return 0===this.queryParams.length?this.createInitial().then(e=&gt;(this.queryParams.push({id:e.id}),this.loadQueries())):this.loadQueries()}createInitial(){return this.queryFormDm.loadWithParams({pageSize:0},void 0,this.currentProject.identifier,gi.queryCreationParams(this.I18n,!!this.currentProject.identifier)).then(e=&gt;{const t=this.queryFormDm.buildQueryResource(e);return this.queryDm.create(t,e)})}loadQueries(){let e=this.queryParams.map(e=&gt;this.loadQuery(e));return Promise.all(e)}loadQuery(e){return this.queryDm.find(Object.assign({pageSize:0},e.props),e.id,this.currentProject.identifier).then(t=&gt;{e.name&amp;&amp;(t.name=e.name),this.configuration.queries.push(t)})}saveQuery(e){return Object(y.b)(this,void 0,void 0,(function*(){return this.formFor(e).then(t=&gt;this.queryDm.update(e,t).toPromise())}))}get configuration(){return this._configuration}set configuration(e){this._configuration=e,this._formsPromise=null}formFor(e){return Object(y.b)(this,void 0,void 0,(function*(){return this.loadForms().then(()=&gt;this._forms[e.id])}))}get tabs(){let e=[{name:"graph-settings",title:this.I18n.t("js.chart.tabs.graph_settings"),componentClass:di}],t=this.configuration.queries.map(e=&gt;({name:e.id,title:this.I18n.t("js.work_packages.query.filters"),componentClass:hi}));return e.concat(t)}loadForms(){if(!this._formsPromise){let e=this.configuration.queries.map(e=&gt;this.queryFormDm.load(e).then(t=&gt;{this._forms[e.id]=t}).catch(e=&gt;this.notificationService.handleRawError(e)));this._formsPromise=Promise.all(e)}return this._formsPromise}get chartType(){return this._configuration.chartType}set chartType(e){this._configuration.chartType=e}get queries(){return this._configuration.queries}get chartOptions(){return this._configuration.chartOptions}get queryParams(){return this._configuration.queryParams}}bi.\u0275fac=function(e){return new(e||bi)(n.rc(C.a),n.rc(pi.a),n.rc(mi.a),n.rc(fi.a),n.rc(Se.a))},bi.\u0275prov=n.dc({token:bi,factory:bi.\u0275fac});var vi=i("H3ou"),wi=i("Y0Nk");const yi=["tabContentOutlet"];function ki(e,t){1&amp;e&amp;&amp;n.jc(0)}function Ci(e,t){if(1&amp;e&amp;&amp;(n.lc(0),n.ad(1,ki,1,0,"ng-container",13),n.kc()),2&amp;e){const e=n.xc();n.Tb(1),n.Dc("ngComponentOutlet",e.prependModalComponent)("ngComponentOutletInjector",e.injector)}}const xi=function(e,t){return{selected:e,"-disabled":t}},ji=function(e){return{selected:e}};function Si(e,t){if(1&amp;e){const e=n.oc();n.nc(0,"li",17),n.nc(1,"a",18),n.vc("click",(function(){n.Sc(e);const i=t.$implicit;return n.xc(2).switchTo(i.name)})),n.mc(),n.mc()}if(2&amp;e){const e=t.$implicit,i=n.xc(2);n.Dc("ngClass",n.Jc(4,xi,i.currentTab&amp;&amp;e.name===i.currentTab.name,null!=e.disableBecause)),n.Tb(1),n.Dc("ngClass",n.Ic(7,ji,i.currentTab&amp;&amp;e.name===i.currentTab.name))("textContent",e.title),n.Ub("title",e.disableBecause||e.title)}}function Ti(e,t){if(1&amp;e&amp;&amp;(n.nc(0,"div",14),n.nc(1,"ul",15),n.ad(2,Si,2,9,"li",16),n.mc(),n.mc()),2&amp;e){const e=n.xc();n.Tb(2),n.Dc("ngForOf",e.availableTabs)}}const Pi=new n.z("WpTableConfigurationModalPrependComponent");class Ii extends ut.a{constructor(e,t,i,n,s,a,r,o,c,l,d,u){super(e,c,d),this.locals=e,this.prependModalComponent=t,this.I18n=i,this.injector=n,this.appRef=s,this.componentFactoryResolver=a,this.loadingIndicator=r,this.notificationService=o,this.cdRef=c,this.ConfigurationService=l,this.elementRef=d,this.graphConfiguration=u,this.closeOnEscape=!1,this.closeOnOutsideClick=!1,this.text={title:this.I18n.t("js.chart.modal_title"),closePopup:this.I18n.t("js.close_popup_title"),applyButton:this.I18n.t("js.modals.button_apply"),cancelButton:this.I18n.t("js.modals.button_cancel")}}ngOnInit(){this.$element=jQuery(this.elementRef.nativeElement),this.loadingIndicator.indicator("modal").promise=this.graphConfiguration.loadForms().then(()=&gt;{this.tabPortalHost=new vi.a(this.graphConfiguration.tabs,this.tabContentOutlet.nativeElement,this.componentFactoryResolver,this.appRef,this.injector);const e=this.locals.initialTab||this.availableTabs[0].name;this.switchTo(e)})}ngOnDestroy(){this.tabPortalHost.dispose()}get availableTabs(){return this.tabPortalHost.availableTabs}get currentTab(){return this.tabPortalHost.currentTab}switchTo(e){this.tabPortalHost.switchTo(e)}saveChanges(){this.tabPortalHost.activeComponents.forEach(e=&gt;{e.onSave()}),this.configuration=this.graphConfiguration.configuration,this.service.close()}onClose(){return this.afterFocusOn.focus(),!0}get afterFocusOn(){return this.$element}}Ii.\u0275fac=function(e){return new(e||Ii)(n.hc(I.a),n.hc(Pi,8),n.hc(C.a),n.hc(n.A),n.hc(n.f),n.hc(n.l),n.hc(wi.a),n.hc(fi.a),n.hc(n.i),n.hc(Ze.a),n.hc(n.q),n.hc(bi))},Ii.\u0275cmp=n.bc({type:Ii,selectors:[["ng-component"]],viewQuery:function(e,t){var i;(1&amp;e&amp;&amp;n.Yc(yi,!0),2&amp;e)&amp;&amp;(n.Pc(i=n.wc())&amp;&amp;(t.tabContentOutlet=i.first))},features:[n.Qb],decls:13,vars:6,consts:[[1,"op-modal--portal"],["data-indicator-name","modal","tabindex","0",1,"op-modal--modal-container","-wide","wp-table--configuration-modal","loading-indicator--location"],[1,"op-modal--modal-header"],[1,"op-modal--modal-close-button"],[1,"icon-close",3,"click"],[3,"textContent"],[4,"ngIf"],["class","content--tabs scrollable-tabs",4,"ngIf"],[1,"tab-content"],["tabContentOutlet",""],[1,"modal--form-actions"],[1,"button","-highlight",3,"textContent","click"],[1,"button",3,"textContent","click"],[4,"ngComponentOutlet","ngComponentOutletInjector"],[1,"content--tabs","scrollable-tabs"],[1,"tabrow"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],["role","button","href","",1,"tab-show",3,"ngClass","textContent","click"]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"div",0),n.nc(1,"div",1),n.nc(2,"div",2),n.nc(3,"a",3),n.nc(4,"i",4),n.vc("click",(function(e){return t.closeMe(e)})),n.mc(),n.mc(),n.mc(),n.ic(5,"h3",5),n.ad(6,Ci,2,2,"ng-container",6),n.ad(7,Ti,3,1,"div",7),n.ic(8,"div",8,9),n.nc(10,"div",10),n.nc(11,"button",11),n.vc("click",(function(){return t.saveChanges()})),n.mc(),n.nc(12,"button",12),n.vc("click",(function(e){return t.closeMe(e)})),n.mc(),n.mc(),n.mc(),n.mc()),2&amp;e&amp;&amp;(n.Tb(4),n.Ub("title",t.text.closePopup),n.Tb(1),n.Dc("textContent",t.text.title),n.Tb(1),n.Dc("ngIf",!!t.prependModalComponent),n.Tb(1),n.Dc("ngIf",!!t.tabPortalHost),n.Tb(4),n.Dc("textContent",t.text.applyButton),n.Tb(1),n.Dc("textContent",t.text.cancelButton))},directives:[G.q,G.o,Ce.a,G.p,G.n],encapsulation:2});class _i extends Ae{constructor(e,t,i,s,a){super(i,s,a),this.injector=e,this.opModalService=t,this.i18n=i,this.remove=s,this.layout=a,this.onConfigured=new n.s,this.menuItemList=[this.removeItem,this.configureItem]}get configureItem(){return{linkText:this.i18n.t("js.toolbar.settings.configure_view"),onClick:()=&gt;(this.opModalService.show(this.configurationComponent,this.injector,this.locals).closingEvent.subscribe(e=&gt;{this.onConfigured.emit(e.configuration)}),!0)}}get locals(){return{}}}function Oi(e,t){if(1&amp;e&amp;&amp;n.ic(0,"icon-triggered-context-menu",1),2&amp;e){const e=n.xc();n.Dc("menu-items",e.menuItems)}}_i.\u0275fac=function(e){return new(e||_i)(n.hc(n.A),n.hc(I.b),n.hc(C.a),n.hc(Me),n.hc(De))},_i.\u0275dir=n.cc({type:_i,outputs:{onConfigured:"onConfigured"},features:[n.Qb]});class Di extends _i{constructor(){super(...arguments),this.configurationComponent=Ii}}Di.\u0275fac=function(e){return Ri(e||Di)},Di.\u0275cmp=n.bc({type:Di,selectors:[["widget-wp-graph-menu"]],features:[n.Qb],decls:1,vars:1,consts:[[3,"menu-items",4,"ngIf"],[3,"menu-items"]],template:function(e,t){1&amp;e&amp;&amp;n.ad(0,Oi,1,1,"icon-triggered-context-menu",0),2&amp;e&amp;&amp;n.Dc("ngIf",t.hasMenu)},directives:[G.q,Le.a],encapsulation:2});const Ri=n.pc(Di);i("MO+k");var Ei=i("LPYB");function Fi(e,t){if(1&amp;e&amp;&amp;n.ic(0,"canvas",4),2&amp;e){const e=n.xc();n.Dc("datasets",e.chartData)("labels",e.chartLabels)("chartType",e.chartType)("options",e.chartOptions)}}function Mi(e,t){if(1&amp;e&amp;&amp;n.ic(0,"no-results",5),2&amp;e){const e=n.xc();n.Dc("title",e.text.noResults)}}const Ai=function(e){return{height:e}};class Li{constructor(e){this.i18n=e,this.chartType="horizontalBar",this.error=null,this.chartHeight="100%",this.chartLabels=[],this.chartData=[],this.initialized=!1,this.text={noResults:this.i18n.t("js.work_packages.no_results.title")}}ngOnChanges(e){e.datasets?(this.setChartOptions(),this.updateChartData(),e.datasets.firstChange||(this.initialized=!0)):e.chartType&amp;&amp;this.setChartOptions()}updateChartData(){let e=_.uniq(this.datasets.reduce((e,t)=&gt;{let i=(t.groups||[]).map(e=&gt;e.value);return e.concat(i)},[])),t=this.datasets.map(t=&gt;{let i=(t.groups||[]).reduce((e,t)=&gt;(e[t.value]=t.count,e),{});return{label:t.label,data:e.map(e=&gt;i[e]||0)}});e=e.map(e=&gt;e||this.i18n.t("js.placeholders.default")),this.setHeight(),this.chartLabels.length=0,this.chartLabels.push(...e),this.chartData.length=0,this.chartData.push(...t)}setChartOptions(){let e={responsive:!0,maintainAspectRatio:!1,legend:{display:this.datasets.length&gt;1}},t={};"horizontalBar"===this.chartType&amp;&amp;(t={scales:{xAxes:[{stacked:!0,ticks:{callback:e=&gt;Math.floor(e)===e?e:0}}],yAxes:[{stacked:!0}]}}),this.chartOptions=Object.assign({},e,t,this.inputChartOptions)}get hasDataToDisplay(){return this.chartData.length&gt;0&amp;&amp;this.chartData.some(e=&gt;e.data.length&gt;0)}setHeight(){if("horizontalBar"===this.chartType&amp;&amp;this.datasets&amp;&amp;this.datasets[0]){let e=[];this.datasets.forEach(t=&gt;t.groups.forEach(t=&gt;{e.includes(t.value)||e.push(t.value)}));let t=40*e.length;this.datasets.length&gt;1&amp;&amp;(t+=40),t+=40,this.chartHeight=`${t}px`}else this.chartHeight="100%"}}Li.\u0275fac=function(e){return new(e||Li)(n.hc(C.a))},Li.\u0275cmp=n.bc({type:Li,selectors:[["wp-embedded-graph"]],inputs:{datasets:"datasets",inputChartOptions:["chartOptions","inputChartOptions"],chartType:"chartType"},features:[n.Rb],decls:4,vars:5,consts:[[1,"work-packages-embedded-view--container","loading-indicator--location",3,"ngStyle"],["graphContainer",""],["baseChart","",3,"datasets","labels","chartType","options",4,"ngIf"],[3,"title",4,"ngIf"],["baseChart","",3,"datasets","labels","chartType","options"],[3,"title"]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"div",0,1),n.ad(2,Fi,1,4,"canvas",2),n.ad(3,Mi,1,1,"no-results",3),n.mc()),2&amp;e&amp;&amp;(n.Dc("ngStyle",n.Ic(3,Ai,t.chartHeight)),n.Tb(2),n.Dc("ngIf",t.hasDataToDisplay),n.Tb(1),n.Dc("ngIf",!t.hasDataToDisplay&amp;&amp;t.initialized))},directives:[G.t,G.q,Ei.a,Gt.a],styles:[".work-packages-embedded-view--container[_ngcontent-%COMP%]{height:100%;max-height:500px;position:relative}"]});class qi extends je.a{constructor(e,t,i,n){super(e,t),this.i18n=e,this.injector=t,this.cdr=i,this.graphConfiguration=n,this.datasets=[]}ngOnInit(){this.initializeConfiguration(),this.loadQueriesInitially()}set chartType(e){this.resource.options.chartType=e}updateGraph(e){this.graphConfiguration.persistAndReload().then(()=&gt;{if(this.repaint(),this.resource.options.chartType!==this.graphConfiguration.chartType){let e=this.setChangesetOptions({chartType:this.graphConfiguration.chartType});this.resourceChanged.emit(e)}})}repaint(){this.datasets=this.graphConfiguration.datasets,this.cdr.detectChanges()}initializeConfiguration(){let e=[];this.resource.options.queryId&amp;&amp;e.push({id:this.resource.options.queryId}),this.graphConfiguration.configuration=new gi(e,this.resource.options.chartOptions,this.resource.options.chartType)}loadQueriesInitially(){this.graphConfiguration.ensureQueryAndLoad().then(()=&gt;{if(!this.resource.options.queryId){let e=this.setChangesetOptions({queryId:this.graphConfiguration.queryParams[0].id});this.resourceChanged.emit(e)}this.repaint()})}get chartOptions(){return this.graphConfiguration.chartOptions}get chartType(){return this.graphConfiguration.chartType}}qi.\u0275fac=function(e){return new(e||qi)(n.hc(C.a),n.hc(n.A),n.hc(n.i),n.hc(bi))},qi.\u0275cmp=n.bc({type:qi,selectors:[["widget-wp-graph"]],features:[n.Sb([bi]),n.Qb],decls:3,vars:4,consts:[[3,"name","onRenamed"],[3,"resource","onConfigured"],[1,"grid--widget-content",3,"datasets","chartType"]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"widget-header",0),n.vc("onRenamed",(function(e){return t.renameWidget(e)})),n.nc(1,"widget-wp-graph-menu",1),n.vc("onConfigured",(function(e){return t.updateGraph(e)})),n.mc(),n.mc(),n.ic(2,"wp-embedded-graph",2)),2&amp;e&amp;&amp;(n.Dc("name",t.widgetName),n.Tb(1),n.Dc("resource",t.resource),n.Tb(1),n.Dc("datasets",t.datasets)("chartType",t.chartType))},directives:[Fe,Di,Li],styles:["wp-embedded-table[_ngcontent-%COMP%]{overflow:auto}"],changeDetection:0});var $i=i("pL6k"),Vi=i("zP0r"),Ni=i("sngl");function Hi(e,t){if(1&amp;e&amp;&amp;n.ic(0,"icon-triggered-context-menu",1),2&amp;e){const e=n.xc();n.Dc("menu-items",e.menuItems)}}class zi extends _i{constructor(){super(...arguments),this.configurationComponent=Ni.a}}zi.\u0275fac=function(e){return Bi(e||zi)},zi.\u0275cmp=n.bc({type:zi,selectors:[["widget-wp-table-menu"]],features:[n.Qb],decls:1,vars:1,consts:[[3,"menu-items",4,"ngIf"],[3,"menu-items"]],template:function(e,t){1&amp;e&amp;&amp;n.ad(0,Hi,1,1,"icon-triggered-context-menu",0),2&amp;e&amp;&amp;n.Dc("ngIf",t.hasMenu)},directives:[G.q,Le.a],encapsulation:2});const Bi=n.pc(zi);var Qi=i("72oW");function Wi(e,t){if(1&amp;e&amp;&amp;n.ic(0,"wp-embedded-table",3),2&amp;e){const e=n.xc();n.Dc("queryId",e.queryId)("configuration",e.configuration)}}class Ui extends je.a{constructor(e,t,i,n,s,a,r){super(e,t),this.i18n=e,this.injector=t,this.urlParamsHelper=i,this.state=n,this.queryDm=s,this.querySpace=a,this.queryFormDm=r,this.inFlight=!1,this.configuration={actionsColumnEnabled:!1,columnMenuEnabled:!1,hierarchyToggleEnabled:!0,contextMenuEnabled:!1}}ngOnInit(){this.resource.options.queryId?this.queryId=this.resource.options.queryId:this.createInitial().then(e=&gt;{let t=this.setChangesetOptions({queryId:e.id});this.resourceChanged.emit(t),this.queryId=e.id}),this.query$=this.querySpace.query.values$(),this.query$.pipe(Object(Vi.a)(2),this.untilDestroyed()).subscribe(e=&gt;{this.ensureFormAndSaveQuery(e)})}get widgetName(){return this.resource.options.name}static get identifier(){return"work_packages_table"}ensureFormAndSaveQuery(e){this.queryForm?this.saveQuery(e):this.queryFormDm.load(e).then(t=&gt;{this.queryForm=t,this.saveQuery(e)})}saveQuery(e){this.inFlight=!0,this.queryDm.update(e,this.queryForm).toPromise().then(e=&gt;(this.inFlight=!1,e)).catch(()=&gt;this.inFlight=!1)}createInitial(){const e=this.state.params.projectPath;let t=this.resource.options.queryProps,i=Object.assign({pageSize:0},t);return this.queryFormDm.loadWithParams(i,void 0,e,this.queryCreationParams()).then(e=&gt;{const t=this.queryFormDm.buildQueryResource(e);return this.queryDm.create(t,e).then(e=&gt;(delete this.resource.options.queryProps,e))})}queryCreationParams(){return{hidden:!0,public:!!this.state.params.projectPath}}}Ui.\u0275fac=function(e){return new(e||Ui)(n.hc(C.a),n.hc(n.A),n.hc($i.a),n.hc(Ue.G),n.hc(mi.a),n.hc(ze.a),n.hc(pi.a))},Ui.\u0275cmp=n.bc({type:Ui,selectors:[["widget-wp-table"]],features:[n.Qb],decls:3,vars:3,consts:[[3,"name","onRenamed"],[3,"resource"],[3,"queryId","configuration",4,"ngIf"],[3,"queryId","configuration"]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"widget-header",0),n.vc("onRenamed",(function(e){return t.renameWidget(e)})),n.ic(1,"widget-wp-table-menu",1),n.mc(),n.ad(2,Wi,1,2,"wp-embedded-table",2)),2&amp;e&amp;&amp;(n.Dc("name",t.widgetName),n.Tb(1),n.Dc("resource",t.resource),n.Tb(1),n.Dc("ngIf",t.queryId))},directives:[Fe,zi,G.q,Qi.a],styles:["wp-embedded-table[_ngcontent-%COMP%]{overflow:auto}"],changeDetection:0});class Xi extends je.a{onResourceChanged(e){this.resourceChanged.emit(e)}}Xi.\u0275fac=function(e){return Yi(e||Xi)},Xi.\u0275cmp=n.bc({type:Xi,selectors:[["ng-component"]],features:[n.Qb],decls:2,vars:1,consts:[["wp-isolated-query-space",""],[3,"resource","resourceChanged"]],template:function(e,t){1&amp;e&amp;&amp;(n.lc(0,0),n.nc(1,"widget-wp-table",1),n.vc("resourceChanged",(function(e){return t.onResourceChanged(e)})),n.mc(),n.kc()),2&amp;e&amp;&amp;(n.Tb(1),n.Dc("resource",t.resource))},directives:[Ne.a,Ui],styles:["widget-wp-table[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column}"]});const Yi=n.pc(Xi);var Gi=i("l08T"),Ki=i("+oAL");class Zi{constructor(e,t,i){this.I18n=e,this.wpStatesInitialization=t,this.wpGraphConfiguration=i}initializeQuerySpace(){return this.wpGraphConfiguration.formFor(this.query).then(e=&gt;{this.wpStatesInitialization.initialize(this.query,this.query.results),this.wpStatesInitialization.updateStatesFromForm(this.query,e)})}}var Ji=i("70hh");function en(e,t){if(1&amp;e){const e=n.oc();n.nc(0,"query-filters",1),n.vc("filtersChanged",(function(t){return n.Sc(e),n.xc().filters=t})),n.mc()}if(2&amp;e){const e=n.xc();n.Dc("filters",e.filters)}}class tn extends Zi{constructor(e,t,i,n,s){super(e,n,s),this.I18n=e,this.wpTableFilters=t,this.wpFiltersService=i,this.wpStatesInitialization=n,this.wpGraphConfiguration=s,this.filters=[],this.text={multiSelectLabel:this.I18n.t("js.work_packages.label_column_multiselect")}}ngOnInit(){this.initializeQuerySpace().then(()=&gt;{this.wpTableFilters.onReady().then(()=&gt;{this.filters=this.wpTableFilters.current})})}onSave(){this.filters&amp;&amp;(this.wpTableFilters.replaceIfComplete(this.filters),this.wpTableFilters.applyToQuery(this.wpGraphConfiguration.queries[0]))}get query(){return this.wpGraphConfiguration.queries[0]}}tn.\u0275fac=function(e){return new(e||tn)(n.hc(C.a),n.hc(Be.a),n.hc(Gi.a),n.hc(Ki.a),n.hc(bi))},tn.\u0275cmp=n.bc({type:tn,selectors:[["filters-tab-inner"]],features:[n.Qb],decls:1,vars:1,consts:[[3,"filters","filtersChanged",4,"ngIf"],[3,"filters","filtersChanged"]],template:function(e,t){1&amp;e&amp;&amp;n.ad(0,en,1,1,"query-filters",0),2&amp;e&amp;&amp;n.Dc("ngIf",!!t.filters)},directives:[G.q,Ji.a],encapsulation:2});var nn=i("AeZM");function sn(e,t){if(1&amp;e&amp;&amp;n.ic(0,"option",9),2&amp;e){const e=t.$implicit;n.Dc("ngValue",e)("textContent",e.name)}}function an(e,t){if(1&amp;e&amp;&amp;n.ic(0,"option",9),2&amp;e){const e=t.$implicit;n.Dc("ngValue",e)("textContent",e.label)}}const rn=function(){return{standalone:!0}};class on extends Zi{constructor(e,t,i,n){super(e,i,n),this.I18n=e,this.wpTableGroupBy=t,this.wpStatesInitialization=i,this.wpGraphConfiguration=n,this.availableGroups=[],this.text={group_by:this.I18n.t("js.chart.axis_criteria"),chart_type:this.I18n.t("js.chart.type")}}onSave(){this.wpGraphConfiguration.chartType=this.currentChartType.identifier,this.wpGraphConfiguration.queries.forEach(e=&gt;{this.wpTableGroupBy.applyToQuery(e)})}get currentGroup(){return this.wpTableGroupBy.current}set currentGroup(e){this.wpTableGroupBy.update(e)}ngOnInit(){this.initializeQuerySpace().then(()=&gt;{this.wpTableGroupBy.onReady().then(()=&gt;{this.initializeAvailableGroups(),this.initializeAvailableChartType()})})}initializeAvailableGroups(){let e=this.wpTableGroupBy.available,t=this.wpTableGroupBy.current;t&amp;&amp;(e=e.filter(e=&gt;e.id!==t.id),e=e.concat(t)),this.availableGroups=_.sortBy(e,"name")}initializeAvailableChartType(){this.availableChartTypes=_.sortBy([{identifier:"horizontalBar",label:this.I18n.t("js.chart.types.horizontal_bar")},{identifier:"bar",label:this.I18n.t("js.chart.types.bar")},{identifier:"line",label:this.I18n.t("js.chart.types.line")},{identifier:"pie",label:this.I18n.t("js.chart.types.pie")},{identifier:"doughnut",label:this.I18n.t("js.chart.types.doughnut")},{identifier:"radar",label:this.I18n.t("js.chart.types.radar")},{identifier:"polarArea",label:this.I18n.t("js.chart.types.polar_area")}],"label"),this.currentChartType=this.availableChartTypes.find(e=&gt;e.identifier===this.wpGraphConfiguration.configuration.chartType)||this.availableChartTypes[0]}get query(){return this.wpGraphConfiguration.queries[0]}}on.\u0275fac=function(e){return new(e||on)(n.hc(C.a),n.hc(nn.a),n.hc(Ki.a),n.hc(bi))},on.\u0275cmp=n.bc({type:on,selectors:[["settings-tab-inner"]],features:[n.Qb],decls:14,vars:10,consts:[[1,"form"],[1,"form--field"],["for","selected_grouping",1,"form--label",3,"textContent"],[1,"form--field-container"],[1,"form--select-container","-middle"],["id","selected_grouping",1,"form--select",3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngValue","textContent",4,"ngFor","ngForOf"],["for","selected_chart_type",1,"form--label",3,"textContent"],["id","selected_chart_type",3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngValue","textContent"]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"div"),n.nc(1,"form",0),n.nc(2,"div",1),n.ic(3,"label",2),n.nc(4,"div",3),n.nc(5,"div",4),n.nc(6,"select",5),n.vc("ngModelChange",(function(e){return t.currentGroup=e})),n.ad(7,sn,1,2,"option",6),n.mc(),n.mc(),n.mc(),n.mc(),n.nc(8,"div",1),n.ic(9,"label",7),n.nc(10,"div",3),n.nc(11,"div",4),n.nc(12,"select",8),n.vc("ngModelChange",(function(e){return t.currentChartType=e})),n.ad(13,an,1,2,"option",6),n.mc(),n.mc(),n.mc(),n.mc(),n.mc(),n.mc()),2&amp;e&amp;&amp;(n.Tb(3),n.Dc("textContent",t.text.group_by),n.Tb(3),n.Dc("ngModel",t.currentGroup)("ngModelOptions",n.Hc(8,rn)),n.Tb(1),n.Dc("ngForOf",t.availableGroups),n.Tb(2),n.Dc("textContent",t.text.chart_type),n.Tb(3),n.Dc("ngModel",t.currentChartType)("ngModelOptions",n.Hc(9,rn)),n.Tb(1),n.Dc("ngForOf",t.availableChartTypes))},directives:[l.C,l.n,l.o,l.y,l.m,l.p,G.p,l.r,l.B],encapsulation:2});const cn=["wpEmbeddedGraphMulti"],ln=["wpEmbeddedGraphSingle"];function dn(e,t){if(1&amp;e&amp;&amp;(n.nc(0,"option",4),n.cd(1),n.mc()),2&amp;e){const e=t.$implicit;n.Dc("ngValue",e.key),n.Tb(1),n.dd(e.label)}}function un(e,t){if(1&amp;e&amp;&amp;(n.nc(0,"div",5),n.ic(1,"div",6),n.mc()),2&amp;e){const e=n.xc();n.Tb(1),n.Dc("textContent",e.error)}}function hn(e,t){if(1&amp;e&amp;&amp;n.ic(0,"wp-embedded-graph",7,8),2&amp;e){const e=n.xc();n.Dc("datasets",e.datasets)("chartOptions",e.chartOptions)}}function pn(e,t){if(1&amp;e&amp;&amp;n.ic(0,"wp-embedded-graph",7,9),2&amp;e){const e=n.xc();n.Dc("datasets",e.datasets)("chartOptions",e.chartOptions)}}class mn{constructor(e,t,i,n){this.elementRef=e,this.I18n=t,this.graphConfigurationService=i,this.cdr=n,this.groupBy="status",this.chartOptions={maintainAspectRatio:!1},this.datasets=[],this.displayModeSingle=!0,this.error=null,this.availableGroupBy=[{label:t.t("js.work_packages.properties.category"),key:"category"},{label:t.t("js.work_packages.properties.type"),key:"type"},{label:t.t("js.work_packages.properties.status"),key:"status"},{label:t.t("js.work_packages.properties.priority"),key:"priority"},{label:t.t("js.work_packages.properties.author"),key:"author"},{label:t.t("js.work_packages.properties.assignee"),key:"assignee"}]}ngOnInit(){const e=this.elementRef.nativeElement;this.additionalFilter=JSON.parse(e.getAttribute("additional-filter")),this.setQueryProps()}setQueryProps(){this.datasets=[];let e=this.graphParams;this.graphConfigurationService.configuration=new gi(e,{},"horizontalBar"),this.graphConfigurationService.reloadQueries().then(()=&gt;{this.datasets=this.sortedDatasets(this.graphConfigurationService.datasets,e),this.cdr.detectChanges()}).catch(()=&gt;{this.error=this.I18n.t("js.chart.errors.could_not_load"),this.cdr.detectChanges()})}get graphParams(){let e=[];return"status"===this.groupBy?(this.displayModeSingle=!0,e.push({name:this.I18n.t("js.label_all"),props:this.propsBoth})):(this.displayModeSingle=!1,e.push({name:this.I18n.t("js.label_open_work_packages"),props:this.propsOpen}),e.push({name:this.I18n.t("js.label_closed_work_packages"),props:this.propsClosed})),e}sortedDatasets(e,t){let i=t.map(e=&gt;e.name);return e.slice().sort((e,t)=&gt;i.indexOf(e.label)-i.indexOf(t.label))}get propsBoth(){return this.baseProps()}get propsOpen(){return this.baseProps({status:{operator:"o",values:[]}})}get propsClosed(){return this.baseProps({status:{operator:"c",values:[]}})}baseProps(e){let t=[{subprojectId:{operator:"*",values:[]}}];return e&amp;&amp;t.push(e),this.additionalFilter&amp;&amp;t.push(this.additionalFilter),{"columns[]":[],filters:JSON.stringify(t),group_by:this.groupBy,pageSize:0}}get displaySingle(){return this.displayModeSingle}get displayMulti(){return!this.displayModeSingle}get currentGraph(){return this.displaySingle?this.embeddedGraphSingle:this.embeddedGraphMulti}}mn.\u0275fac=function(e){return new(e||mn)(n.hc(n.q),n.hc(C.a),n.hc(bi),n.hc(n.i))},mn.\u0275cmp=n.bc({type:mn,selectors:[["wp-overview-graph"]],viewQuery:function(e,t){var i;(1&amp;e&amp;&amp;(n.hd(cn,!0),n.hd(ln,!0)),2&amp;e)&amp;&amp;(n.Pc(i=n.wc())&amp;&amp;(t.embeddedGraphMulti=i.first),n.Pc(i=n.wc())&amp;&amp;(t.embeddedGraphSingle=i.first))},inputs:{additionalFilter:"additionalFilter",groupBy:"groupBy",chartOptions:"chartOptions"},features:[n.Sb([bi])],decls:5,vars:5,consts:[[3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],["class","notification-box -error",4,"ngIf"],[3,"datasets","chartOptions",4,"ngIf"],[3,"ngValue"],[1,"notification-box","-error"],[1,"notification-box--content",3,"textContent"],[3,"datasets","chartOptions"],["wpEmbeddedGraphMulti",""],["wpEmbeddedGraphSingle",""]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"select",0),n.vc("ngModelChange",(function(e){return t.groupBy=e}))("ngModelChange",(function(){return t.setQueryProps()})),n.ad(1,dn,2,2,"option",1),n.mc(),n.ad(2,un,2,1,"div",2),n.ad(3,hn,2,2,"wp-embedded-graph",3),n.ad(4,pn,2,2,"wp-embedded-graph",3)),2&amp;e&amp;&amp;(n.Dc("ngModel",t.groupBy),n.Tb(1),n.Dc("ngForOf",t.availableGroupBy),n.Tb(1),n.Dc("ngIf",t.error),n.Tb(1),n.Dc("ngIf",t.displayMulti),n.Tb(1),n.Dc("ngIf",t.displaySingle))},directives:[l.y,l.m,l.p,G.p,G.q,l.r,l.B,Li],styles:["wp-embedded-graph[_ngcontent-%COMP%]{margin-top:20px;display:block}"],changeDetection:0});i("qb46");var gn=i("+rOU"),fn=i("kor4"),bn=i("1EAr"),vn=i("/Rze"),wn=i("ZOsW"),yn=i("ximh"),kn=i("ecJW"),Cn=i("QihR"),xn=i("RN/J"),jn=i("CX+C"),Sn=i("th4C"),Tn=i("oUDv"),Pn=i("2hMx"),In=i("+1L4"),_n=i("cJ7v"),On=i("lmKF"),Dn=i("HN1l"),Rn=i("v9+U"),En=i("mRSd"),Fn=i("X4Sm"),Mn=i("lfQJ"),An=i("IYP9"),Ln=i("upbp"),qn=i("xFOf"),$n=i("gh2L"),Vn=i("jQQo"),Nn=i("9hh2"),Hn=i("lmDM"),zn=i("CVKj"),Bn=i("hvpr"),Qn=i("SIjI"),Wn=i("ZTEj"),Un=i("f24R"),Xn=i("2orT"),Yn=i("Eofd"),Gn=i("m3nR"),Kn=i("ZAVI"),Zn=i("9pt+"),Jn=i("S2zE"),es=i("eJFM"),ts=i("byj5"),is=i("2TbE"),ns=i("XZlt"),ss=i("2bW2"),as=i("aveh"),rs=i("PwL/"),os=i("DLfB");class cs{constructor(){}}cs.\u0275mod=n.fc({type:cs}),cs.\u0275inj=n.ec({factory:function(e){return new(e||cs)},imports:[[b.a,we.a,Ei.b]]}),n.Wc(hi,[Wt.UISref,Wt.AnchorUISref,Wt.UIView,Wt.UISrefActive,Wt.UISrefStatus,G.n,G.o,G.p,G.q,G.x,G.t,G.u,G.v,G.w,G.r,G.s,l.C,l.r,l.B,l.c,l.s,l.v,l.a,l.y,l.z,l.u,l.m,l.n,l.x,l.k,l.j,l.t,l.b,l.d,l.p,l.q,l.o,gn.a,gn.b,gn.h,gn.e,xe.e,xe.f,xe.a,xe.b,xe.d,xe.c,fn.a,bn.a,vn.a,wn.a,wn.n,wn.d,wn.c,wn.e,wn.f,wn.g,wn.h,wn.i,wn.j,wn.k,wn.l,wn.m,yn.a,kn.a,Cn.a,Ct.a,xn.a,jn.a,R.a,Sn.a,Tn.a,Pn.a,In.a,_n.a,On.a,Dn.a,Rn.a,En.a,Fn.a,Ht.a,Mn.a,Le.a,Gt.a,An.a,Ln.a,Re.a,ti.a,qn.a,Ce.c,Ce.d,Ce.a,Ce.b,Ce.e,$n.a,Vn.a,Nn.a,Hn.a,Qi.a,zn.a,Bn.a,Qn.a,Nt.a,zt.a,Ne.a,Wn.a,Ji.a,Un.a,Xn.a,Yn.a,Gn.a,Kn.a,Zn.a,Jn.a,es.a,Ni.a,ts.a,is.a,ns.a,ss.a,as.a,rs.a,os.a,Ei.a,Ii,hi,tn,di,on,Li,mn],[G.a,G.C,G.m,G.j,G.A,G.f,G.z,G.B,G.c,G.e,G.h,G.i,G.k]),n.Wc(di,[Wt.UISref,Wt.AnchorUISref,Wt.UIView,Wt.UISrefActive,Wt.UISrefStatus,G.n,G.o,G.p,G.q,G.x,G.t,G.u,G.v,G.w,G.r,G.s,l.C,l.r,l.B,l.c,l.s,l.v,l.a,l.y,l.z,l.u,l.m,l.n,l.x,l.k,l.j,l.t,l.b,l.d,l.p,l.q,l.o,gn.a,gn.b,gn.h,gn.e,xe.e,xe.f,xe.a,xe.b,xe.d,xe.c,fn.a,bn.a,vn.a,wn.a,wn.n,wn.d,wn.c,wn.e,wn.f,wn.g,wn.h,wn.i,wn.j,wn.k,wn.l,wn.m,yn.a,kn.a,Cn.a,Ct.a,xn.a,jn.a,R.a,Sn.a,Tn.a,Pn.a,In.a,_n.a,On.a,Dn.a,Rn.a,En.a,Fn.a,Ht.a,Mn.a,Le.a,Gt.a,An.a,Ln.a,Re.a,ti.a,qn.a,Ce.c,Ce.d,Ce.a,Ce.b,Ce.e,$n.a,Vn.a,Nn.a,Hn.a,Qi.a,zn.a,Bn.a,Qn.a,Nt.a,zt.a,Ne.a,Wn.a,Ji.a,Un.a,Xn.a,Yn.a,Gn.a,Kn.a,Zn.a,Jn.a,es.a,Ni.a,ts.a,is.a,ns.a,ss.a,as.a,rs.a,os.a,Ei.a,Ii,hi,tn,di,on,Li,mn],[G.a,G.C,G.m,G.j,G.A,G.f,G.z,G.B,G.c,G.e,G.h,G.i,G.k]);var ls=i("RhL0"),ds=i("NNMa");function us(e,t){if(1&amp;e&amp;&amp;(n.nc(0,"edit-form",1),n.ic(1,"editable-attribute-field",4),n.mc()),2&amp;e){const e=t.ngIf;n.Dc("resource",e),n.Tb(1),n.Dc("resource",e)("fieldName","description")}}class hs extends je.a{constructor(e,t,i,n,s){super(e,t),this.i18n=e,this.injector=t,this.projectCache=i,this.currentProject=n,this.cdRef=s}ngOnInit(){this.project$=this.projectCache.requireAndStream(this.currentProject.id),this.cdRef.detectChanges()}get isEditable(){return!1}}hs.\u0275fac=function(e){return new(e||hs)(n.hc(C.a),n.hc(n.A),n.hc(ds.a),n.hc(Se.a),n.hc(n.i))},hs.\u0275cmp=n.bc({type:hs,selectors:[["ng-component"]],features:[n.Sb([dt.a]),n.Qb],decls:5,vars:6,consts:[[3,"name","editable"],[3,"resource"],[1,"grid--widget-content","-allow-inner-overflow"],[3,"resource",4,"ngIf"],[3,"resource","fieldName"]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"widget-header",0),n.ic(1,"widget-menu",1),n.mc(),n.nc(2,"div",2),n.ad(3,us,2,3,"edit-form",3),n.yc(4,"async"),n.mc()),2&amp;e&amp;&amp;(n.Dc("name",t.widgetName)("editable",t.isEditable),n.Tb(1),n.Dc("resource",t.resource),n.Tb(2),n.Dc("ngIf",n.zc(4,4,t.project$)))},directives:[Fe,$e,G.q,ht.a,pt.a],pipes:[G.a],encapsulation:2,changeDetection:0});class ps extends je.a{}ps.\u0275fac=function(e){return ms(e||ps)},ps.\u0275cmp=n.bc({type:ps,selectors:[["ng-component"]],features:[n.Qb],decls:3,vars:3,consts:[[3,"name","onRenamed"],[3,"resource"],[1,"grid--widget-content",3,"groupBy"]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"widget-header",0),n.vc("onRenamed",(function(e){return t.renameWidget(e)})),n.ic(1,"widget-menu",1),n.mc(),n.ic(2,"wp-overview-graph",2)),2&amp;e&amp;&amp;(n.Dc("name",t.widgetName),n.Tb(1),n.Dc("resource",t.resource),n.Tb(1),n.Dc("groupBy","type"))},directives:[Fe,$e,mn],encapsulation:2,changeDetection:0});const ms=n.pc(ps);var gs=i("kgyZ"),fs=i("GntA");class bs extends fs.a{}class vs extends gs.a{constructor(e,t){super(),this.elementRef=e,this.injector=t,this.fieldName="text",this.inEdit=!1,this.inEditMode=!1,this.inFlight=!1}onFocusOut(){}initialize(e){this.changeset=new bs(this.newEditResource(e)),this.valueChanged$=new Oe.a(e.options.text)}reinitialize(e){this.changeset=new bs(this.newEditResource(e))}handleUserSubmit(){return this.update()}reset(e=""){e.length&gt;0&amp;&amp;(e+="\n"),this.changeset.setValue("text",{raw:e})}get schema(){return{name:I18n.t("js.grid.widgets.custom_text.title"),writable:!0,required:!1,type:"Formattable",hasDefault:!1}}update(){return Object(y.b)(this,void 0,void 0,(function*(){return this.onSubmit().then(()=&gt;{this.valueChanged$.next(this.rawText),this.deactivate()})}))}get rawText(){return _.get(this.textValue,"raw","")}get htmlText(){return _.get(this.textValue,"html","")}get textValue(){return this.changeset.value("text")}handleUserCancel(){this.deactivate()}get active(){return this.inEdit}activate(e){this.inEdit=!0}deactivate(){this.changeset.clear(),this.inEdit=!1}focus(){const e=this.elementRef.nativeElement.querySelector(".inplace-editing--trigger-container");e&amp;&amp;e.focus()}setErrors(e){}handleUserKeydown(e,t){}isChanged(){return!this.changeset.isEmpty()}stopPropagation(e){return!1}newEditResource(e){return{text:e.options.text,getEditorTypeFor:()=&gt;"full",canAddAttachments:e.grid.canAddAttachments,uploadAttachments:t=&gt;e.grid.uploadAttachments(t)}}}vs.\u0275fac=function(e){return new(e||vs)(n.rc(n.q),n.rc(n.A))},vs.\u0275prov=n.dc({token:vs,factory:vs.\u0275fac});var ws=i("pLZG"),ys=i("7MH/"),ks=i("jEcX");const Cs=["displayContainer"];function xs(e,t){if(1&amp;e&amp;&amp;n.ic(0,"span",11),2&amp;e){const e=n.xc(2);n.Dc("innerHTML",e.customText,n.Tc)}}function js(e,t){if(1&amp;e&amp;&amp;n.ic(0,"span",11),2&amp;e){const e=n.xc(2);n.Dc("innerHTML",e.placeholderText,n.Tc)}}function Ss(e,t){if(1&amp;e&amp;&amp;(n.nc(0,"span",8,9),n.ad(2,xs,1,1,"span",10),n.ad(3,js,1,1,"span",10),n.mc()),2&amp;e){const e=n.xc();n.Tb(2),n.Dc("ngIf",!e.textEmpty),n.Tb(1),n.Dc("ngIf",e.textEmpty)}}function Ts(e,t){if(1&amp;e&amp;&amp;n.ic(0,"edit-form-portal",12),2&amp;e){const e=n.xc();n.Dc("schemaInput",e.schema)("changeInput",e.changeset)("editFieldHandler",e.handler)}}function Ps(e,t){if(1&amp;e&amp;&amp;n.ic(0,"attachments",13),2&amp;e){const e=n.xc();n.Dc("resource",e.resource.grid)}}function Is(e,t){1&amp;e&amp;&amp;n.jc(0)}function _s(e,t){if(1&amp;e){const e=n.oc();n.nc(0,"div",17),n.vc("accessibleClick",(function(t){return n.Sc(e),n.xc(2).activate(t)})),n.ad(1,Is,1,0,"ng-container",18),n.mc()}if(2&amp;e){const e=n.xc(2),t=n.Qc(3);n.Dc("accessibleClickStopEvent",!1)("ngClass",e.inplaceEditClasses),n.Tb(1),n.Dc("ngTemplateOutlet",t)}}function Os(e,t){1&amp;e&amp;&amp;n.jc(0)}function Ds(e,t){if(1&amp;e&amp;&amp;(n.lc(0),n.ad(1,Os,1,0,"ng-container",18),n.kc()),2&amp;e){n.xc(2);const e=n.Qc(3);n.Tb(1),n.Dc("ngTemplateOutlet",e)}}const Rs=function(e){return{"inline-edit--container":e}};function Es(e,t){if(1&amp;e&amp;&amp;(n.nc(0,"div",14),n.ad(1,_s,2,3,"div",15),n.ad(2,Ds,2,1,"ng-container",16),n.mc()),2&amp;e){const e=n.xc();n.Dc("ngClass",n.Ic(3,Rs,e.isTextEditable)),n.Tb(1),n.Dc("ngIf",e.isTextEditable),n.Tb(1),n.Dc("ngIf",!e.isTextEditable)}}class Fs extends je.a{constructor(e,t,i,n,s,a){super(e,t),this.i18n=e,this.injector=t,this.handler=i,this.cdr=n,this.sanitization=s,this.layout=a}ngOnInit(){this.setupVariables(!0),this.handler.valueChanged$.pipe(this.untilDestroyed(),Object(ws.a)(e=&gt;e!==this.resource.options.text)).subscribe(e=&gt;{let t=this.setChangesetOptions({text:{raw:e}});this.resourceChanged.emit(t)})}ngOnChanges(e){e.resource.currentValue.options.text.raw!==this.currentRawText&amp;&amp;(this.setupVariables(),this.cdr.detectChanges())}activate(e){this.clickedElementIsLinkWithinDisplayContainer(e)||this.resource.grid.updateAttachments().then(()=&gt;{this.handler.activate()})}get placeholderText(){return this.i18n.t("js.grid.widgets.work_packages_overview.placeholder")}get inplaceEditClasses(){let e="inplace-editing--container inline-edit--display-field -editable";return this.textEmpty&amp;&amp;(e+=" -placeholder"),e}get schema(){return this.handler.schema}get changeset(){return this.handler.changeset}get active(){return this.handler.active}get textEmpty(){return!this.currentRawText.length}get isTextEditable(){return this.layout.isEditable}setupVariables(e=!1){this.memorizeRawText(),e?this.handler.initialize(this.resource):this.handler.reinitialize(this.resource),this.memorizeCustomText()}memorizeRawText(){this.currentRawText=this.resource.options.text.raw}memorizeCustomText(){this.customText=this.sanitization.bypassSecurityTrustHtml(this.handler.htmlText)}clickedElementIsLinkWithinDisplayContainer(e){return this.displayContainer.nativeElement.contains(e.target.closest("a,macro"))}}Fs.\u0275fac=function(e){return new(e||Fs)(n.hc(C.a),n.hc(n.A),n.hc(vs),n.hc(n.i),n.hc(N.b),n.hc(De))},Fs.\u0275cmp=n.bc({type:Fs,selectors:[["ng-component"]],viewQuery:function(e,t){var i;(1&amp;e&amp;&amp;n.hd(Cs,!0),2&amp;e)&amp;&amp;(n.Pc(i=n.wc())&amp;&amp;(t.displayContainer=i.first))},features:[n.Sb([vs]),n.Qb,n.Rb],decls:9,vars:5,consts:[[3,"name","onRenamed"],[3,"resource"],["text",""],[1,"grid--widget-content","-custom-text","-allow-inner-overflow"],[1,"inline-edit--container","inplace-edit"],[3,"schemaInput","changeInput","editFieldHandler",4,"ngIf"],["data-allow-uploading","true",3,"resource",4,"ngIf"],["class","inplace-edit--read wiki -no-label",3,"ngClass",4,"ngIf"],[1,"inline-edit--formattable-display-text","-default"],["displayContainer",""],[3,"innerHTML",4,"ngIf"],[3,"innerHTML"],[3,"schemaInput","changeInput","editFieldHandler"],["data-allow-uploading","true",3,"resource"],[1,"inplace-edit--read","wiki","-no-label",3,"ngClass"],[3,"accessibleClickStopEvent","ngClass","accessibleClick",4,"ngIf"],[4,"ngIf"],[3,"accessibleClickStopEvent","ngClass","accessibleClick"],[4,"ngTemplateOutlet"]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"widget-header",0),n.vc("onRenamed",(function(e){return t.renameWidget(e)})),n.ic(1,"widget-menu",1),n.mc(),n.ad(2,Ss,4,2,"ng-template",null,2,n.bd),n.nc(4,"div",3),n.nc(5,"div",4),n.ad(6,Ts,1,3,"edit-form-portal",5),n.ad(7,Ps,1,1,"attachments",6),n.ad(8,Es,3,5,"div",7),n.mc(),n.mc()),2&amp;e&amp;&amp;(n.Dc("name",t.widgetName),n.Tb(1),n.Dc("resource",t.resource),n.Tb(5),n.Dc("ngIf",t.active),n.Tb(1),n.Dc("ngIf",t.active),n.Tb(1),n.Dc("ngIf",!t.active))},directives:[Fe,$e,G.q,ys.a,ks.a,G.n,fn.a,G.x],encapsulation:2,changeDetection:0});var Ms=i("Ywds");const As=["contentContainer"];function Ls(e,t){if(1&amp;e&amp;&amp;(n.lc(0),n.nc(1,"div",6),n.cd(2),n.mc(),n.nc(3,"div",7),n.ic(4,"editable-attribute-field",8),n.mc(),n.kc()),2&amp;e){const e=t.$implicit,i=n.xc().ngIf;n.Tb(2),n.ed(" ",e.label," "),n.Tb(2),n.Dc("resource",i)("fieldName",e.key)}}function qs(e,t){if(1&amp;e&amp;&amp;(n.nc(0,"edit-form",1),n.nc(1,"div",4),n.ad(2,Ls,5,3,"ng-container",5),n.mc(),n.mc()),2&amp;e){const e=t.ngIf,i=n.xc();n.Dc("resource",e),n.Tb(2),n.Dc("ngForOf",i.customFields)}}class $s extends je.a{constructor(e,t,i,n,s,a){super(e,t),this.i18n=e,this.injector=t,this.projectDm=i,this.projectCache=n,this.currentProject=s,this.cdRef=a,this.customFields=[]}ngOnInit(){this.loadAndRender(),this.project$=this.projectCache.requireAndStream(this.currentProject.id)}get isEditable(){return!1}loadAndRender(){Promise.all([this.loadProjectSchema()]).then(([e])=&gt;{this.setCustomFields(e)})}loadProjectSchema(){return this.projectDm.schema()}setCustomFields(e){Object.entries(e).forEach(([e,t])=&gt;{e.match(/customField\d+/)&amp;&amp;this.customFields.push({key:e,label:t.name})}),this.cdRef.detectChanges()}}$s.\u0275fac=function(e){return new(e||$s)(n.hc(C.a),n.hc(n.A),n.hc(Ms.a),n.hc(ds.a),n.hc(Se.a),n.hc(n.i))},$s.\u0275cmp=n.bc({type:$s,selectors:[["ng-component"]],viewQuery:function(e,t){var i;(1&amp;e&amp;&amp;n.Yc(As,!0),2&amp;e)&amp;&amp;(n.Pc(i=n.wc())&amp;&amp;(t.contentContainer=i.first))},features:[n.Sb([dt.a]),n.Qb],decls:5,vars:6,consts:[[3,"name","editable"],[3,"resource"],[1,"grid--widget-content"],[3,"resource",4,"ngIf"],[1,"attributes-map"],[4,"ngFor","ngForOf"],[1,"attributes-map--key"],[1,"attributes-map--value"],[3,"resource","fieldName"]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"widget-header",0),n.ic(1,"widget-menu",1),n.mc(),n.nc(2,"div",2),n.ad(3,qs,3,2,"edit-form",3),n.yc(4,"async"),n.mc()),2&amp;e&amp;&amp;(n.Dc("name",t.widgetName)("editable",t.isEditable),n.Tb(1),n.Dc("resource",t.resource),n.Tb(2),n.Dc("ngIf",n.zc(4,4,t.project$)))},directives:[Fe,$e,G.q,ht.a,G.p,pt.a],pipes:[G.a],encapsulation:2,changeDetection:0});class Vs extends je.a{constructor(e,t,i,n,s,a,r){super(n,t),this.timeEntryDm=e,this.injector=t,this.timezone=i,this.i18n=n,this.pathHelper=s,this.confirmDialog=a,this.cdr=r,this.text={activity:this.i18n.t("js.time_entry.activity"),comment:this.i18n.t("js.time_entry.comment"),hour:this.i18n.t("js.time_entry.hours"),workPackage:this.i18n.t("js.label_work_package"),edit:this.i18n.t("js.button_edit"),delete:this.i18n.t("js.button_delete"),confirmDelete:{text:this.i18n.t("js.text_are_you_sure"),title:this.i18n.t("js.modals.form_submit.title")},noResults:this.i18n.t("js.grid.widgets.time_entries_list.no_results")},this.entries=[],this.entriesLoaded=!1,this.rows=[]}ngOnInit(){this.timeEntryDm.list({filters:this.dmFilters(),pageSize:500}).then(e=&gt;{this.buildEntries(e.elements),this.entriesLoaded=!0,this.cdr.detectChanges()})}get total(){let e=this.entries.reduce((e,t)=&gt;e+this.timezone.toHours(t.hours),0);return this.i18n.t("js.units.hour",{count:this.formatNumber(e)})}get anyEntries(){return!!this.entries.length}activityName(e){return e.activity.name}projectName(e){return e.project.name}workPackageName(e){return`#${e.workPackage.id}: ${e.workPackage.name}`}workPackageId(e){return e.workPackage.id}comment(e){return e.comment&amp;&amp;e.comment.raw}hours(e){return this.formatNumber(this.timezone.toHours(e.hours))}editPath(e){return this.pathHelper.timeEntryEditPath(e.id)}deletePath(e){return this.pathHelper.timeEntryPath(e.id)}workPackagePath(e){return this.pathHelper.workPackagePath(e.workPackage.idFromLink)}get isEditable(){return!1}deleteIfConfirmed(e,t){e.preventDefault(),this.confirmDialog.confirm({text:this.text.confirmDelete,closeByEscape:!0,showClose:!0,closeByDocument:!0}).then(()=&gt;{t.delete().then(()=&gt;{let e=this.entries.filter(e=&gt;t.id!==e.id);this.buildEntries(e)})}).catch(()=&gt;{})}buildEntries(e){this.entries=e;let t={};e.forEach(e=&gt;{let i=e.spentOn;t[i]||(t[i]=0),t[i]=t[i]+this.timezone.toHours(e.hours)});let i=e.sort((e,t)=&gt;t.spentOn.localeCompare(e.spentOn));this.rows=[];let n=null;i.forEach(e=&gt;{e.spentOn!==n&amp;&amp;(n=e.spentOn,this.rows.push({date:this.timezone.formattedDate(n),sum:this.formatNumber(t[n])})),this.rows.push({date:n,entry:e})})}formatNumber(e){return this.i18n.toNumber(e,{precision:2})}get noEntries(){return!this.entries.length&amp;&amp;this.entriesLoaded}}function Ns(e,t){if(1&amp;e&amp;&amp;n.ic(0,"no-results",4),2&amp;e){const e=n.xc();n.Dc("title",e.text.noResults)}}function Hs(e,t){if(1&amp;e&amp;&amp;n.ic(0,"td",27),2&amp;e){const e=n.xc().$implicit,t=n.xc(3);n.Dc("textContent",t.activityName(e.entry))}}function zs(e,t){if(1&amp;e&amp;&amp;(n.nc(0,"td",28),n.ic(1,"strong",6),n.mc()),2&amp;e){const e=n.xc().$implicit;n.Tb(1),n.Dc("textContent",e.date)}}function Bs(e,t){if(1&amp;e&amp;&amp;(n.nc(0,"td",29),n.cd(1),n.ic(2,"a",30),n.mc()),2&amp;e){const e=n.xc().$implicit,t=n.xc(3);n.Tb(1),n.ed(" ",t.projectName(e.entry)," - "),n.Tb(1),n.Dc("href",t.workPackagePath(e.entry),n.Vc)("textContent",t.workPackageName(e.entry))}}function Qs(e,t){if(1&amp;e&amp;&amp;n.ic(0,"td",31),2&amp;e){const e=n.xc().$implicit,t=n.xc(3);n.Dc("textContent",t.projectName(e.entry))}}function Ws(e,t){if(1&amp;e&amp;&amp;n.ic(0,"td",32),2&amp;e){const e=n.xc().$implicit,t=n.xc(3);n.Dc("textContent",t.comment(e.entry))}}function Us(e,t){if(1&amp;e&amp;&amp;n.ic(0,"td",33),2&amp;e){const e=n.xc().$implicit,t=n.xc(3);n.Dc("textContent",t.hours(e.entry))}}function Xs(e,t){if(1&amp;e&amp;&amp;(n.nc(0,"td",34),n.ic(1,"em",6),n.mc()),2&amp;e){const e=n.xc().$implicit;n.Tb(1),n.Dc("textContent",e.sum)}}function Ys(e,t){if(1&amp;e&amp;&amp;(n.nc(0,"a",35),n.ic(1,"op-icon",36),n.mc()),2&amp;e){const e=n.xc().$implicit,t=n.xc(3);n.Dc("href",t.editPath(e.entry),n.Vc)("title",t.text.edit)}}function Gs(e,t){if(1&amp;e){const e=n.oc();n.nc(0,"a",37),n.vc("click",(function(t){n.Sc(e);const i=n.xc().$implicit;return n.xc(3).deleteIfConfirmed(t,i.entry)})),n.ic(1,"op-icon",38),n.mc()}if(2&amp;e){const e=n.xc().$implicit,t=n.xc(3);n.Dc("href",t.deletePath(e.entry),n.Vc)("title",t.text.delete)}}function Ks(e,t){if(1&amp;e&amp;&amp;(n.nc(0,"tr",16),n.ad(1,Hs,1,1,"td",17),n.ad(2,zs,2,1,"td",18),n.ad(3,Bs,3,3,"td",19),n.ad(4,Qs,1,1,"td",20),n.ad(5,Ws,1,1,"td",21),n.ad(6,Us,1,1,"td",22),n.ad(7,Xs,2,1,"td",23),n.nc(8,"td",24),n.ad(9,Ys,2,2,"a",25),n.ad(10,Gs,2,2,"a",26),n.mc(),n.mc()),2&amp;e){const e=t.$implicit;n.Tb(1),n.Dc("ngIf",e.entry),n.Tb(1),n.Dc("ngIf",e.sum),n.Tb(1),n.Dc("ngIf",e.entry&amp;&amp;e.entry.workPackage),n.Tb(1),n.Dc("ngIf",e.entry&amp;&amp;!e.entry.workPackage),n.Tb(1),n.Dc("ngIf",e.entry),n.Tb(1),n.Dc("ngIf",e.entry),n.Tb(1),n.Dc("ngIf",e.sum),n.Tb(2),n.Dc("ngIf",e.entry&amp;&amp;e.entry.updateImmediately),n.Tb(1),n.Dc("ngIf",e.entry&amp;&amp;e.entry.delete)}}function Zs(e,t){if(1&amp;e&amp;&amp;(n.nc(0,"div",8),n.nc(1,"table",9),n.nc(2,"colgroup"),n.ic(3,"col",10),n.ic(4,"col",10),n.ic(5,"col",10),n.ic(6,"col",10),n.ic(7,"col"),n.mc(),n.nc(8,"thead",11),n.nc(9,"tr"),n.nc(10,"th"),n.nc(11,"div",12),n.nc(12,"div",13),n.ic(13,"span",6),n.mc(),n.mc(),n.mc(),n.nc(14,"th"),n.nc(15,"div",12),n.nc(16,"div",13),n.ic(17,"span",6),n.mc(),n.mc(),n.mc(),n.nc(18,"th"),n.nc(19,"div",12),n.nc(20,"div",13),n.ic(21,"span",6),n.mc(),n.mc(),n.mc(),n.nc(22,"th"),n.nc(23,"div",12),n.nc(24,"div",13),n.ic(25,"span",6),n.mc(),n.mc(),n.mc(),n.nc(26,"th"),n.ic(27,"div",14),n.mc(),n.mc(),n.mc(),n.nc(28,"tbody"),n.ad(29,Ks,11,9,"tr",15),n.mc(),n.mc(),n.mc()),2&amp;e){const e=n.xc(2);n.Tb(13),n.Dc("textContent",e.text.activity),n.Tb(4),n.Dc("textContent",e.text.workPackage),n.Tb(4),n.Dc("textContent",e.text.comment),n.Tb(4),n.Dc("textContent",e.text.hour),n.Tb(4),n.Dc("ngForOf",e.rows)}}function Js(e,t){if(1&amp;e&amp;&amp;(n.lc(0),n.nc(1,"div",5),n.nc(2,"p"),n.cd(3,"Total: "),n.ic(4,"span",6),n.mc(),n.mc(),n.ad(5,Zs,30,5,"div",7),n.kc()),2&amp;e){const e=n.xc();n.Tb(4),n.Dc("textContent",e.total),n.Tb(1),n.Dc("ngIf",e.anyEntries)}}Vs.\u0275fac=function(e){return new(e||Vs)(n.hc(at.a),n.hc(n.A),n.hc(nt.a),n.hc(C.a),n.hc(z.a),n.hc(g.a),n.hc(n.i))},Vs.\u0275dir=n.cc({type:Vs,features:[n.Qb]});class ea extends Vs{constructor(e,t,i,n,s,a,r,o){super(e,t,i,n,s,a,r),this.timeEntryDm=e,this.injector=t,this.timezone=i,this.i18n=n,this.pathHelper=s,this.confirmDialog=a,this.cdr=r,this.currentProject=o}dmFilters(){return[["spentOn","&gt;t-",["7"]],["project_id","=",[this.currentProject.id]]]}}function ta(e,t){if(1&amp;e&amp;&amp;n.ic(0,"no-results",5),2&amp;e){const e=n.xc();n.Dc("title",e.text.noResults)}}function ia(e,t){1&amp;e&amp;&amp;(n.nc(0,"span"),n.cd(1,", "),n.mc())}function na(e,t){if(1&amp;e&amp;&amp;(n.nc(0,"span"),n.ic(1,"a",6),n.ad(2,ia,2,0,"span",7),n.mc()),2&amp;e){const e=t.$implicit,i=t.last,s=n.xc();n.Tb(1),n.Dc("href",s.projectPath(e),n.Vc)("textContent",s.projectName(e)),n.Tb(1),n.Dc("ngIf",!i)}}ea.\u0275fac=function(e){return new(e||ea)(n.hc(at.a),n.hc(n.A),n.hc(nt.a),n.hc(C.a),n.hc(z.a),n.hc(g.a),n.hc(n.i),n.hc(Se.a))},ea.\u0275cmp=n.bc({type:ea,selectors:[["ng-component"]],features:[n.Qb],decls:4,vars:5,consts:[[3,"name","editable"],[3,"resource"],[3,"title",4,"ngIf"],[4,"ngIf"],[3,"title"],[1,"total-hours"],[3,"textContent"],["class","generic-table--results-container",4,"ngIf"],[1,"generic-table--results-container"],[1,"generic-table","time-entries"],["highlight-col",""],[1,"-sticky"],[1,"generic-table--sort-header-outer"],[1,"generic-table--sort-header"],[1,"generic-table--empty-header"],["class","time-entry",4,"ngFor","ngForOf"],[1,"time-entry"],["class","activity",3,"textContent",4,"ngIf"],["colspan","3",4,"ngIf"],["class","subject",4,"ngIf"],["class","subject",3,"textContent",4,"ngIf"],["class","comments",3,"textContent",4,"ngIf"],["class","hours",3,"textContent",4,"ngIf"],["class","hours",4,"ngIf"],[1,"buttons"],[3,"href","title",4,"ngIf"],[3,"href","title","click",4,"ngIf"],[1,"activity",3,"textContent"],["colspan","3"],[1,"subject"],[3,"href","textContent"],[1,"subject",3,"textContent"],[1,"comments",3,"textContent"],[1,"hours",3,"textContent"],[1,"hours"],[3,"href","title"],["icon-classes","icon-context icon-edit"],[3,"href","title","click"],["icon-classes","icon-context icon-delete"]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"widget-header",0),n.ic(1,"widget-menu",1),n.mc(),n.ad(2,Ns,1,1,"no-results",2),n.ad(3,Js,6,2,"ng-container",3)),2&amp;e&amp;&amp;(n.Dc("name",t.widgetName)("editable",t.isEditable),n.Tb(1),n.Dc("resource",t.resource),n.Tb(1),n.Dc("ngIf",t.noEntries),n.Tb(1),n.Dc("ngIf",!t.noEntries))},directives:[Fe,$e,G.q,Gt.a,Dn.a,G.p,Ct.a],encapsulation:2});class sa extends je.a{constructor(e,t,i,n,s,a,r,o){super(i,n),this.halResource=e,this.pathHelper=t,this.i18n=i,this.injector=n,this.timezone=s,this.projectDm=a,this.currentProject=r,this.cdr=o,this.text={noResults:this.i18n.t("js.grid.widgets.subprojects.no_results")}}ngOnInit(){this.projectDm.list(this.projectDmParams).then(e=&gt;{this.projects=e.elements,this.cdr.detectChanges()})}get isEditable(){return!1}projectPath(e){return this.pathHelper.projectPath(e.identifier)}projectName(e){return e.name}get noEntries(){return this.projects&amp;&amp;!this.projects.length}get projectDmParams(){return{sortBy:[["name","asc"]],filters:[["parent_id","=",[this.currentProject.id]]]}}}sa.\u0275fac=function(e){return new(e||sa)(n.hc(x.a),n.hc(z.a),n.hc(C.a),n.hc(n.A),n.hc(nt.a),n.hc(Ms.a),n.hc(Se.a),n.hc(n.i))},sa.\u0275cmp=n.bc({type:sa,selectors:[["ng-component"]],features:[n.Qb],decls:5,vars:5,consts:[[3,"name","editable"],[3,"resource"],[1,"grid--widget-content"],[3,"title",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"title"],[3,"href","textContent"],[4,"ngIf"]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"widget-header",0),n.ic(1,"widget-menu",1),n.mc(),n.nc(2,"div",2),n.ad(3,ta,1,1,"no-results",3),n.ad(4,na,3,3,"span",4),n.mc()),2&amp;e&amp;&amp;(n.Dc("name",t.widgetName)("editable",t.isEditable),n.Tb(1),n.Dc("resource",t.resource),n.Tb(2),n.Dc("ngIf",t.noEntries),n.Tb(1),n.Dc("ngForOf",t.projects))},directives:[Fe,$e,G.q,G.p,Gt.a],encapsulation:2,changeDetection:0});var aa=i("PSqx");function ra(e,t){if(1&amp;e&amp;&amp;n.ic(0,"no-results",10),2&amp;e){const e=n.xc();n.Dc("title",e.text.noResults)}}function oa(e,t){if(1&amp;e&amp;&amp;(n.lc(0),n.ic(1,"span",14),n.kc()),2&amp;e){const e=n.xc().$implicit,t=n.xc(2);n.Tb(1),n.Dc("textContent",t.userName(e))}}function ca(e,t){if(1&amp;e&amp;&amp;(n.lc(0),n.ic(1,"user-avatar",15),n.ic(2,"a",16),n.kc()),2&amp;e){const e=n.xc().$implicit,t=n.xc(2);n.Tb(1),n.Dc("user",e),n.Tb(1),n.Dc("href",t.userPath(e),n.Vc)("textContent",t.userName(e))}}function la(e,t){1&amp;e&amp;&amp;(n.lc(0),n.cd(1,", "),n.kc())}function da(e,t){if(1&amp;e&amp;&amp;(n.nc(0,"span"),n.ad(1,oa,2,1,"ng-container",13),n.ad(2,ca,3,3,"ng-container",13),n.ad(3,la,2,0,"ng-container",13),n.mc()),2&amp;e){const e=t.$implicit,i=t.last,s=n.xc(2);n.Tb(1),n.Dc("ngIf",s.isGroup(e)),n.Tb(1),n.Dc("ngIf",!s.isGroup(e)),n.Tb(1),n.Dc("ngIf",!i)}}function ua(e,t){if(1&amp;e&amp;&amp;(n.lc(0),n.nc(1,"div",11),n.cd(2),n.mc(),n.nc(3,"div",12),n.ad(4,da,4,3,"span",5),n.mc(),n.kc()),2&amp;e){const e=t.$implicit;n.Tb(2),n.ed(" ",e.role.name," "),n.Tb(2),n.Dc("ngForOf",e.users)}}function ha(e,t){if(1&amp;e&amp;&amp;(n.nc(0,"div",17),n.cd(1),n.mc()),2&amp;e){const e=n.xc();n.Tb(1),n.ed(" ",e.moreMembersText," ")}}function pa(e,t){if(1&amp;e&amp;&amp;(n.nc(0,"a",18),n.ic(1,"i",19),n.ic(2,"span",20),n.mc()),2&amp;e){const e=n.xc();n.Dc("href",e.projectMembershipsPath+"?show_add_members=true",n.Vc),n.Tb(2),n.Dc("textContent",e.text.add)}}function ma(e,t){if(1&amp;e&amp;&amp;(n.nc(0,"a",21),n.ic(1,"i",22),n.ic(2,"span",20),n.mc()),2&amp;e){const e=n.xc();n.Dc("href",e.projectMembershipsPath,n.Vc),n.Tb(2),n.Dc("textContent",e.text.viewAll)}}class ga extends je.a{constructor(e,t,i,n,s,a){super(t,i),this.pathHelper=e,this.i18n=t,this.injector=i,this.membershipDm=n,this.currentProject=s,this.cdr=a,this.text={add:this.i18n.t("js.grid.widgets.members.add"),noResults:this.i18n.t("js.grid.widgets.members.no_results"),viewAll:this.i18n.t("js.grid.widgets.members.view_all_members")},this.entriesByRoles={},this.entriesLoaded=!1,this.membersAddable=!1}ngOnInit(){this.membershipDm.list(this.listMembersParams).then(e=&gt;{this.partitionEntriesByRole(e.elements),this.sortUsersByName(),this.totalMembers=e.total,this.entriesLoaded=!0,this.cdr.detectChanges()}),this.membershipDm.listAvailableProjects(this.listAvailableProjectsParams).then(e=&gt;{this.membersAddable=e.total&gt;0}).catch(()=&gt;{})}get isEditable(){return!1}userPath(e){return this.pathHelper.userPath(e.id)}userName(e){return e.name}get noMembers(){return this.entriesLoaded&amp;&amp;!Object.keys(this.entriesByRoles).length}get moreMembers(){return this.entriesLoaded&amp;&amp;this.totalMembers&gt;100}get moreMembersText(){return I18n.t("js.grid.widgets.members.too_many",{count:100,total:this.totalMembers})}get projectMembershipsPath(){return this.pathHelper.projectMembershipsPath(this.currentProject.identifier)}get usersByRole(){return Object.values(this.entriesByRoles)}isGroup(e){return this.pathHelper.api.v3.groups.id(e.id).toString()===e.href}partitionEntriesByRole(e){e.forEach(e=&gt;{e.roles.forEach(t=&gt;{this.entriesByRoles[t.id]||(this.entriesByRoles[t.id]={role:t,users:[]}),this.entriesByRoles[t.id].users.push(e.principal)})})}sortUsersByName(){Object.values(this.entriesByRoles).forEach(e=&gt;{e.users.sort((e,t)=&gt;this.userName(e).localeCompare(this.userName(t)))})}get listMembersParams(){let e={sortBy:[["created_on","desc"]],pageSize:100};return this.currentProject.id&amp;&amp;(e.filters=[["project_id","=",[this.currentProject.id]]]),e}get listAvailableProjectsParams(){let e={};return this.currentProject.id&amp;&amp;(e.filters=[["id","=",[this.currentProject.id]]]),e}}ga.\u0275fac=function(e){return new(e||ga)(n.hc(z.a),n.hc(C.a),n.hc(n.A),n.hc(aa.a),n.hc(Se.a),n.hc(n.i))},ga.\u0275cmp=n.bc({type:ga,selectors:[["ng-component"]],features:[n.Qb],decls:10,vars:8,consts:[[3,"name","editable"],[3,"resource"],[1,"grid--widget-content"],[3,"title",4,"ngIf"],[1,"attributes-map","-minimal-keys"],[4,"ngFor","ngForOf"],["class","members-widget--notification",4,"ngIf"],[1,"grid--widget-footer"],["class","button -alt-highlight",3,"href",4,"ngIf"],["class","button -highlight-inverted",3,"href",4,"ngIf"],[3,"title"],[1,"attributes-map--key"],[1,"attributes-map--value"],[4,"ngIf"],[3,"textContent"],["data-class-list","avatar avatar-mini -spaced",3,"user"],[3,"href","textContent"],[1,"members-widget--notification"],[1,"button","-alt-highlight",3,"href"],["aria-hidden","true",1,"button--icon","icon-add"],[1,"button--text",3,"textContent"],[1,"button","-highlight-inverted",3,"href"],["aria-hidden","true",1,"button--icon","icon-group"]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"widget-header",0),n.ic(1,"widget-menu",1),n.mc(),n.nc(2,"div",2),n.ad(3,ra,1,1,"no-results",3),n.nc(4,"div",4),n.ad(5,ua,5,2,"ng-container",5),n.mc(),n.ad(6,ha,2,1,"div",6),n.mc(),n.nc(7,"div",7),n.ad(8,pa,3,2,"a",8),n.ad(9,ma,3,2,"a",9),n.mc()),2&amp;e&amp;&amp;(n.Dc("name",t.widgetName)("editable",t.isEditable),n.Tb(1),n.Dc("resource",t.resource),n.Tb(2),n.Dc("ngIf",t.noMembers),n.Tb(2),n.Dc("ngForOf",t.usersByRole),n.Tb(1),n.Dc("ngIf",t.moreMembers),n.Tb(2),n.Dc("ngIf",t.membersAddable),n.Tb(1),n.Dc("ngIf",!t.noMembers))},directives:[Fe,$e,G.q,G.p,Gt.a,ti.a],styles:[".members-widget--notification[_ngcontent-%COMP%]{font-style:italic;margin-top:.5rem}.grid--widget-footer[_ngcontent-%COMP%]{margin-top:.5rem}.grid--widget-footer[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{margin-bottom:0}.attributes-map[_ngcontent-%COMP%]{padding-bottom:.875rem;line-height:1.5rem}"],changeDetection:0});var fa=i("ouar"),ba=i("2Qcm");const va=["contentContainer"];function wa(e,t){if(1&amp;e&amp;&amp;(n.nc(0,"edit-form",1),n.nc(1,"div",4),n.ic(2,"editable-attribute-field",5),n.mc(),n.nc(3,"div",6),n.ic(4,"editable-attribute-field",7),n.mc(),n.mc()),2&amp;e){const e=t.ngIf;n.Dc("resource",e),n.Tb(2),n.Dc("resource",e),n.Tb(2),n.Dc("resource",e)}}class ya extends je.a{constructor(e,t,i,n,s,a){super(e,t),this.i18n=e,this.injector=t,this.projectDm=i,this.projectCache=n,this.currentProject=s,this.cdRef=a,this.currentStatusCode="not set",this.explanation=""}ngOnInit(){this.project$=this.projectCache.requireAndStream(this.currentProject.id),this.cdRef.detectChanges()}get isEditable(){return!1}}ya.\u0275fac=function(e){return new(e||ya)(n.hc(C.a),n.hc(n.A),n.hc(Ms.a),n.hc(ds.a),n.hc(Se.a),n.hc(n.i))},ya.\u0275cmp=n.bc({type:ya,selectors:[["ng-component"]],viewQuery:function(e,t){var i;(1&amp;e&amp;&amp;n.Yc(va,!0),2&amp;e)&amp;&amp;(n.Pc(i=n.wc())&amp;&amp;(t.contentContainer=i.first))},features:[n.Sb([fa.a,ba.a,ze.a,dt.a]),n.Qb],decls:5,vars:6,consts:[[3,"name","editable"],[3,"resource"],[1,"grid--widget-content","-allow-inner-overflow"],[3,"resource",4,"ngIf"],[1,"project-status--container"],["fieldName","status","wrapperClasses","project-status--display-field",3,"resource"],[1,"project-status-explanation--container"],["fieldName","statusExplanation",3,"resource"]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"widget-header",0),n.ic(1,"widget-menu",1),n.mc(),n.nc(2,"div",2),n.ad(3,wa,5,3,"edit-form",3),n.yc(4,"async"),n.mc()),2&amp;e&amp;&amp;(n.Dc("name",t.widgetName)("editable",t.isEditable),n.Tb(1),n.Dc("resource",t.resource),n.Tb(2),n.Dc("ngIf",n.zc(4,4,t.project$)))},directives:[Fe,$e,G.q,ht.a,pt.a],pipes:[G.a],encapsulation:2,changeDetection:0});class ka{constructor(e){!function(e){const t=e.get(w.a),i=e.get(C.a);t.register("gridWidgets",()=&gt;{let e=["id","project","type","subject"],t=new ls.a;t.add("assignee","=",["me"]),t.add("status","o",[]);let n={"columns[]":e,filters:t.toJson()},s=new ls.a;s.add("responsible","=",["me"]),s.add("status","o",[]);let a={"columns[]":e,filters:s.toJson()},r=new ls.a;r.add("author","=",["me"]),r.add("status","o",[]);let o={"columns[]":e,filters:r.toJson()},c=new ls.a;c.add("watcher","=",["me"]),c.add("status","o",[]);let l={"columns[]":e,filters:c.toJson()};return[{identifier:"work_packages_assigned",component:Xi,title:i.t("js.grid.widgets.work_packages_assigned.title"),properties:{queryProps:n,name:i.t("js.grid.widgets.work_packages_assigned.title")}},{identifier:"work_packages_accountable",component:Xi,title:i.t("js.grid.widgets.work_packages_accountable.title"),properties:{queryProps:a,name:i.t("js.grid.widgets.work_packages_accountable.title")}},{identifier:"work_packages_created",component:Xi,title:i.t("js.grid.widgets.work_packages_created.title"),properties:{queryProps:o,name:i.t("js.grid.widgets.work_packages_created.title")}},{identifier:"work_packages_watched",component:Xi,title:i.t("js.grid.widgets.work_packages_watched.title"),properties:{queryProps:l,name:i.t("js.grid.widgets.work_packages_watched.title")}},{identifier:"work_packages_table",component:Xi,title:i.t("js.grid.widgets.work_packages_table.title"),properties:{name:i.t("js.grid.widgets.work_packages_table.title")}},{identifier:"work_packages_graph",component:qi,title:i.t("js.grid.widgets.work_packages_graph.title"),properties:{name:i.t("js.grid.widgets.work_packages_graph.title")}},{identifier:"work_packages_calendar",component:it,title:i.t("js.grid.widgets.work_packages_calendar.title"),properties:{name:i.t("js.grid.widgets.work_packages_calendar.title")}},{identifier:"work_packages_overview",component:ps,title:i.t("js.grid.widgets.work_packages_overview.title"),properties:{name:i.t("js.grid.widgets.work_packages_overview.title")}},{identifier:"time_entries_current_user",component:qt,title:i.t("js.grid.widgets.time_entries_current_user.title"),properties:{name:i.t("js.grid.widgets.time_entries_current_user.title")}},{identifier:"time_entries_project",component:ea,title:i.t("js.grid.widgets.time_entries_list.title"),properties:{name:i.t("js.grid.widgets.time_entries_list.title")}},{identifier:"documents",component:Jt,title:i.t("js.grid.widgets.documents.title"),properties:{name:i.t("js.grid.widgets.documents.title")}},{identifier:"members",component:ga,title:i.t("js.grid.widgets.members.title"),properties:{name:i.t("js.grid.widgets.members.title")}},{identifier:"news",component:oi,title:i.t("js.grid.widgets.news.title"),properties:{name:i.t("js.grid.widgets.news.title")}},{identifier:"project_description",component:hs,title:i.t("js.grid.widgets.project_description.title"),properties:{name:i.t("js.grid.widgets.project_description.title")}},{identifier:"custom_text",component:Fs,title:i.t("js.grid.widgets.custom_text.title"),properties:{name:i.t("js.grid.widgets.custom_text.title"),text:{raw:""}}},{identifier:"project_details",component:$s,title:i.t("js.grid.widgets.project_details.title"),properties:{name:i.t("js.grid.widgets.project_details.title")}},{identifier:"project_status",component:ya,title:i.t("js.grid.widgets.project_status.title"),properties:{name:i.t("js.grid.widgets.project_status.title")}},{identifier:"subprojects",component:sa,title:i.t("js.grid.widgets.subprojects.title"),properties:{name:i.t("js.grid.widgets.subprojects.title")}}]})}(e)}}ka.\u0275mod=n.fc({type:ka}),ka.\u0275inj=n.ec({factory:function(e){return new(e||ka)(n.rc(n.A))},providers:[$t,ci],imports:[[N.a,l.i,xe.g,b.a,we.a,cs,Yt,ye.a,Ce.f.withComponents([Fs,Jt,ga,oi,Xi,qi,it,ps,hs,$s,ya,sa,qt,ea]),f.a]]});var Ca=i("oqKi");class xa{}xa.\u0275fac=function(e){return new(e||xa)},xa.\u0275cmp=n.bc({type:xa,selectors:[["openproject-base"]],decls:2,vars:0,consts:[[1,"openproject-base--ui-view"]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"div",0),n.ic(1,"ui-view"),n.mc())},directives:[Wt.UIView],encapsulation:2});var ja=i("pQre");const Sa=[{name:"root",url:"/{projects}/{projectPath}",component:xa,abstract:!0,params:{projectPath:{type:"path",value:null,squash:!0},projects:{type:"path",value:null,squash:!0},flash_message:{dynamic:!0,value:null,inherit:!1}}},{name:"boards.**",parent:"root",url:"/boards",loadChildren:()=&gt;i.e(10).then(i.bind(null,"lrTx")).then(e=&gt;e.OpenprojectBoardsModule)},{name:"bim.**",parent:"root",url:"/bcf",loadChildren:()=&gt;i.e(9).then(i.bind(null,"5VZj")).then(e=&gt;e.OpenprojectIFCModelsModule)}];function Ta(e,t="add"){e&amp;&amp;(Array.isArray(e)?e.forEach(e=&gt;{document.body.classList[t](e)}):document.body.classList[t](e))}function Pa(e,t="add"){if(!e)return;let i=jQuery("#main-menu ."+e)[0];if(!i)return;i.classList[t]("selected");let n=(i.getAttribute("title")||"").split(":").slice(-1)[0];"add"===t&amp;&amp;(n=I18n.t("js.description_current_position")+n),i.setAttribute("title",n)}class Ia{constructor(e){!function(e){const t=e.get(Ue.O),i=e.get(Ue.G),n=e.get(k.a),s=e.get(Se.a),a=e.get(Ca.a),r=e.get(ja.a);let o=document.querySelector("openproject-base");t.onEnter({},(function(e,t){Ta(_.get(t,"data.bodyClasses"),"add"),e.from().data&amp;&amp;_.get(t,"data.menuItem")!==e.from().data.menuItem&amp;&amp;Pa(_.get(t,"data.menuItem"),"add"),window.scrollTo(0,0)})),t.onExit({},(function(e,t){Ta(_.get(t,"data.bodyClasses"),"remove"),e.to().data&amp;&amp;_.get(t,"data.menuItem")!==e.to().data.menuItem&amp;&amp;Pa(_.get(t,"data.menuItem"),"remove")})),t.onStart({},(function(e){const t=e.router.stateService,c=e.params("to"),l=(e.from(),e.to());if(c.start_onboarding_tour&amp;&amp;"work-packages.partitioned.list"!==l.name){const i=Object.assign({},e.params());return i.start_onboarding_tour=void 0,t.target(e.to(),i)}r.sync(e);const d=window.MiniProfiler;d&amp;&amp;d.pageTransition();const u=c.projectPath||s.identifier;if(!c.projects&amp;&amp;u){const e=_.clone(c);return _.assign(e,{projectPath:u,projects:"projects"}),t.target(l,e,{location:"replace"})}if(null===o){e.options().source;const t=window.location.pathname,n=i.href(l,c);if(n&amp;&amp;t!==n)return window.location.href=n,!1}return Ta(_.get(l,"data.bodyClasses"),"add"),a.setIfFirst(l.name,c),e.to().name!==e.from().name&amp;&amp;n.clear(),c.flash_message&amp;&amp;n.add(c.flash_message),!0}))}(e)}}Ia.\u0275mod=n.fc({type:Ia}),Ia.\u0275inj=n.ec({factory:function(e){return new(e||Ia)(n.rc(n.A))},providers:[Ca.a],imports:[[Wt.UIRouterModule.forRoot({states:Sa,useHash:!1,config:function(e,t,i){e.urlService.config.strictMode(!1),e.urlService.config.type("opQueryString",{encode:encodeURIComponent,decode:decodeURIComponent,raw:!0,dynamic:!0,is:e=&gt;"string"==typeof e,equals:(e,t)=&gt;_.isEqual(e,t)})}})]]});var _a=i("ODu2"),Oa=i("qs3h"),Da=i("ylTo"),Ra=i("kZPr"),Ea=i("VYxi"),Fa=i("rJ6b"),Ma=i("YefF"),Aa=i("fdeW"),La=i("hxzR"),qa=i("/qfM");const $a=[{name:"work-packages",parent:"root",component:Ma.a,url:"/work_packages?query_id&amp;query_props&amp;start_onboarding_tour",redirectTo:"work-packages.partitioned.list",data:{bodyClasses:"router--work-packages-base",menuItem:"work-packages-menu-item"},params:{query_id:{type:"query",dynamic:!0},query_props:{type:"opQueryString"},start_onboarding_tour:{type:"query",squash:!0,value:void 0}}},{name:"work-packages.new",url:"/new?type&amp;parent_id",component:Ra.a,reloadOnSearch:!1,data:{baseRoute:"work-packages",allowMovingInEditMode:!0,bodyClasses:"router--work-packages-full-create",menuItem:"work-packages-menu-item"}},{name:"work-packages.copy",url:"/{copiedFromWorkPackageId:[0-9]+}/copy",component:Ea.a,reloadOnSearch:!1,data:{baseRoute:"work-packages",allowMovingInEditMode:!0,bodyClasses:"router--work-packages-full-create",menuItem:"work-packages-menu-item"}},{name:"work-packages.show",url:"/{workPackageId:[0-9]+}",redirectTo:"work-packages.show.activity",component:Fa.a,data:{baseRoute:"work-packages",bodyClasses:"router--work-packages-full-view",newRoute:"work-packages.new",menuItem:"work-packages-menu-item"}},{name:"work-packages.show.activity",url:"/activity",component:_a.a,data:{parent:"work-packages.show",menuItem:"work-packages-menu-item"}},{name:"work-packages.show.activity.details",url:"/activity/details/#{activity_no:d+}",component:_a.a,data:{parent:"work-packages.show",menuItem:"work-packages-menu-item"}},{name:"work-packages.show.relations",url:"/relations",component:Oa.a,data:{parent:"work-packages.show",menuItem:"work-packages-menu-item"}},{name:"work-packages.show.watchers",url:"/watchers",component:Da.a,data:{parent:"work-packages.show",menuItem:"work-packages-menu-item"}},{name:"work-packages.partitioned",component:La.a,url:"",data:{bodyClasses:""}},{name:"work-packages.partitioned.list",url:"",reloadOnSearch:!1,views:{"content-left":{component:Aa.a}},data:{bodyClasses:"router--work-packages-partitioned-split-view",menuItem:"work-packages-menu-item",partition:"-left-only"}},...Object(qa.a)("work-packages.partitioned.list","work-packages-menu-item",rs.a)];class Va{}Va.\u0275mod=n.fc({type:Va}),Va.\u0275inj=n.ec({factory:function(e){return new(e||Va)},imports:[[we.a,Wt.UIRouterModule.forChild({states:$a})]]});class Na{constructor(e,t,i,n){this.I18n=e,this.injector=t,this.PathHelper=i,this.currentProjectService=n,this._searchTerm=new Oe.a(""),this.searchTerm$=this._searchTerm.asObservable(),this._currentTab=new Oe.a("work_packages"),this.currentTab$=this._currentTab.asObservable(),this._projectScope=new Oe.a(""),this.projectScope$=this._projectScope.asObservable(),this._tabs=new Oe.a([]),this.tabs$=this._tabs.asObservable(),this._resultsHidden=new Oe.a(!1),this.resultsHidden$=this._resultsHidden.asObservable(),this.initialize()}initialize(){let e=this.loadGonData();e&amp;&amp;(e.available_search_types&amp;&amp;this._tabs.next(e.available_search_types),e.search_term&amp;&amp;this._searchTerm.next(e.search_term),e.current_tab&amp;&amp;this._currentTab.next(e.current_tab),e.project_scope?this._projectScope.next(e.project_scope):this.currentProjectService.path||this._projectScope.next("all"))}loadGonData(){try{return window.gon.global_search}catch(e){return null}}submitSearch(){window.location.href=this.searchPath()}searchPath(){let e=this.PathHelper.staticBase;return this.currentProjectService.path&amp;&amp;"all"!==this.projectScope&amp;&amp;(e=this.currentProjectService.path),e+=`/search?${this.searchQueryParams()}`,e}set searchTerm(e){this._searchTerm.next(e)}get searchTerm(){return this._searchTerm.value}get tabs(){return this._tabs.value}get currentTab(){return this._currentTab.value}set currentTab(e){this._currentTab.next(e)}get projectScope(){return this._projectScope.value}set projectScope(e){this._projectScope.next(e)}get resultsHidden(){return this._resultsHidden.value}set resultsHidden(e){this._resultsHidden.next(e)}searchQueryParams(){let e;return e=`q=${encodeURIComponent(this.searchTerm)}`,this.currentTab.length&gt;0&amp;&amp;"all"!==this.currentTab&amp;&amp;(e=`${e}&amp;${this.currentTab}=1`),this.projectScope.length&gt;0&amp;&amp;(e=`${e}&amp;scope=${this.projectScope}`),e}isAfterSearch(){return jQuery("body.controller-search").length&gt;0}}Na.\u0275fac=function(e){return new(e||Na)(n.rc(C.a),n.rc(n.A),n.rc(z.a),n.rc(Se.a))},Na.\u0275prov=n.dc({token:Na,factory:Na.\u0275fac});class Ha{}Ha.\u0275mod=n.fc({type:Ha}),Ha.\u0275inj=n.ec({factory:function(e){return new(e||Ha)},providers:[Na],imports:[[b.a,we.a]]});var za=i("K018"),Ba=i("fbLK");class Qa extends Ba.a{constructor(e,t,i){super(e),this.documentElement=e,this.confirmDialog=t,this.I18n=i}showEEOnlyHint(){this.confirmDialog.confirm({text:{title:this.I18n.t("js.types.attribute_groups.upgrade_to_ee"),text:this.I18n.t("js.types.attribute_groups.upgrade_to_ee_text"),button_continue:this.I18n.t("js.types.attribute_groups.more_information"),button_cancel:this.I18n.t("js.types.attribute_groups.nevermind")}}).then(()=&gt;{window.location.href="https://www.openproject.org/enterprise-edition/?utm_source=unknown&amp;utm_medium=community-edition&amp;utm_campaign=form-configuration"})}}Qa.\u0275fac=function(e){return new(e||Qa)(n.rc(G.d),n.rc(g.a),n.rc(C.a))},Qa.\u0275prov=n.dc({token:Qa,factory:Qa.\u0275fac});var Wa=i("OW6k"),Ua=i("DHgU"),Xa=i("9Ejp");function Ya(e,t){if(1&amp;e){const e=n.oc();n.nc(0,"type-form-attribute-group",25),n.vc("removeAttribute",(function(t){return n.Sc(e),n.xc(2).deactivateAttribute(t)}))("deleteGroup",(function(){n.Sc(e);const t=n.xc().$implicit;return n.xc().deleteGroup(t)})),n.mc()}if(2&amp;e){const e=n.xc().$implicit;n.Dc("group",e)}}function Ga(e,t){if(1&amp;e){const e=n.oc();n.nc(0,"type-form-query-group",26),n.vc("editQuery",(function(){n.Sc(e);const t=n.xc().$implicit;return n.xc().editQuery(t)}))("deleteGroup",(function(){n.Sc(e);const t=n.xc().$implicit;return n.xc().deleteGroup(t)})),n.mc()}if(2&amp;e){const e=n.xc().$implicit;n.Dc("group",e)}}function Ka(e,t){if(1&amp;e&amp;&amp;(n.lc(0),n.ad(1,Ya,1,1,"type-form-attribute-group",23),n.ad(2,Ga,1,1,"type-form-query-group",24),n.kc()),2&amp;e){const e=t.$implicit;n.Tb(1),n.Dc("ngIf","attribute"===e.type),n.Tb(1),n.Dc("ngIf","query"===e.type)}}function Za(e,t){if(1&amp;e&amp;&amp;n.ic(0,"span",31),2&amp;e){const e=n.xc(2);n.Dc("textContent",e.text.custom_field)}}function Ja(e,t){if(1&amp;e&amp;&amp;(n.nc(0,"div",27),n.ic(1,"span",28),n.nc(2,"span",29),n.cd(3),n.ad(4,Za,1,1,"span",30),n.mc(),n.mc()),2&amp;e){const e=t.$implicit;n.Ub("data-key",e.key),n.Tb(3),n.ed(" ",e.translation," "),n.Tb(1),n.Dc("ngIf",e.is_cf)}}class er extends Je.a{constructor(e,t,i,n,s,a,r){super(),this.elementRef=e,this.I18n=t,this.Gon=i,this.dragula=n,this.confirmDialog=s,this.notificationsService=a,this.externalRelationQuery=r,this.text={drag_to_activate:this.I18n.t("js.admin.type_form.drag_to_activate"),reset:this.I18n.t("js.admin.type_form.reset_to_defaults"),label_group:this.I18n.t("js.label_group"),new_group:this.I18n.t("js.admin.type_form.new_group"),label_inactive:this.I18n.t("js.admin.type_form.inactive"),custom_field:this.I18n.t("js.admin.type_form.custom_field"),add_group:this.I18n.t("js.admin.type_form.add_group"),add_table:this.I18n.t("js.admin.type_form.add_table")},this.groups=[],this.inactives=[]}ngOnInit(){this.element=this.elementRef.nativeElement,this.no_filter_query=this.element.dataset.noFilterQuery,this.form=jQuery(this.element).closest("form"),this.submit=this.form.find(".form-configuration--save");let e=!1;this.form.on("submit",t=&gt;{e=!0}),this.submit.on("mousedown",t=&gt;(setTimeout(()=&gt;{e||this.form.trigger("submit")},50),!0)),this.form.on("submit.typeformupdater",()=&gt;(this.updateHiddenFields(),!0)),this.dragula.createGroup("groups",{moves:(e,t,i)=&gt;i.classList.contains("group-handle")}),this.dragula.createGroup("attributes",{moves:(e,t,i)=&gt;i.classList.contains("attribute-handle")}),this.dragula.dropModel("attributes").pipe(this.untilDestroyed()).subscribe(e=&gt;{console.log(e)}),this.groups=JSON.parse(this.element.dataset.activeGroups),this.inactives=JSON.parse(this.element.dataset.inactiveAttributes);const t=this;this.autoscroll=new Wa.a([document.getElementById("content-wrapper")],{margin:25,maxSpeed:10,scrollWhenOutside:!0,autoScroll:function(){const e=t.groupsDrake&amp;&amp;t.groupsDrake.dragging,i=t.attributeDrake&amp;&amp;t.attributeDrake.draggingreturn this.down&amp;&amp;(e||i)}})}deactivateAttribute(e){this.updateInactives(this.inactives.concat(e))}addGroupAndOpenQuery(){let e=this.createGroup("query");this.editQuery(e)}editQuery(e){const t={"display-settings":I18n.t("js.work_packages.table_configuration.embedded_tab_disabled"),timelines:I18n.t("js.work_packages.table_configuration.embedded_tab_disabled")};this.externalRelationQuery.show(JSON.parse(e.query),t=&gt;e.query=JSON.stringify(t),t)}deleteGroup(e){return"attribute"===e.type&amp;&amp;this.updateInactives(this.inactives.concat(e.attributes)),this.groups=this.groups.filter(t=&gt;t!==e),e}createGroup(e,t=""){let i={type:e,name:"",key:null,query:this.no_filter_query,attributes:[]};return this.groups.unshift(i),i}resetToDefault(e){return this.confirmDialog.confirm({text:{title:this.I18n.t("js.types.attribute_groups.reset_title"),text:this.I18n.t("js.types.attribute_groups.confirm_reset"),button_continue:this.I18n.t("js.label_reset")}}).then(()=&gt;{this.form.find("input#type_attribute_groups").val(JSON.stringify([])),this.form.off("submit.typeformupdater"),this.form.trigger("submit")}),e.preventDefault(),!1}updateInactives(e){this.inactives=[...e].sort((e,t)=&gt;e.translation.localeCompare(t.translation))}updateHiddenFields(){this.form.find(".admin-type-form--hidden-field").val(JSON.stringify(this.groups))}}function tr(e,t){if(1&amp;e){const e=n.oc();n.nc(0,"div",2),n.vc("click",(function(){return n.Sc(e),n.xc().startEditing()})),n.mc()}if(2&amp;e){const e=n.xc();n.Dc("textContent",e.name)}}function ir(e,t){if(1&amp;e){const e=n.oc();n.nc(0,"input",3,4),n.vc("ngModelChange",(function(t){return n.Sc(e),n.xc().editedName=t}))("blur",(function(t){return n.Sc(e),n.xc().saveEdition(t)}))("keydown.escape",(function(){return n.Sc(e),n.xc().reset()}))("keydown.enter",(function(t){return n.Sc(e),n.xc().saveEdition(t)})),n.mc()}if(2&amp;e){const e=n.xc();n.Dc("ngModel",e.editedName),n.Ub("placeholder",e.placeholder)}}er.\u0275fac=function(e){return new(e||er)(n.hc(n.q),n.hc(C.a),n.hc(Ua.a),n.hc(Xa.c),n.hc(g.a),n.hc(k.a),n.hc(m.a))},er.\u0275cmp=n.bc({type:er,selectors:[["admin-type-form-configuration"]],features:[n.Sb([Qa]),n.Qb],decls:29,vars:10,consts:[[1,"toolbar-container","-with-dropdown"],[1,"toolbar"],[1,"toolbar-items"],[1,"toolbar-item"],["type","button -alt-highlight",1,"form-configuration--reset","button",3,"click"],["icon-classes","button--icon icon-undo"],[1,"button--text",3,"textContent"],[1,"toolbar-item","drop-down"],["ng-click","showGroupsContextMenu($event)","aria-haspopup","true",1,"form-configuration--add-group","button","-alt-highlight"],["icon-classes","button--icon icon-add"],["icon-classes","button--dropdown-indicator"],[1,"menu-drop-down-container"],[1,"form-configuration--add-group",3,"textContent","accessibleClick"],[1,"grid-block","wrap"],[1,"grid-content","small-12","medium-6"],["id","draggable-groups","dragula","groups",3,"dragulaModel","dragulaModelChange"],[4,"ngFor","ngForOf"],["id","type-form-conf-inactive-group"],[1,"group-head"],[1,"group-name",3,"textContent"],[1,"advice",3,"textContent"],["dragula","attributes",1,"attributes",3,"dragulaModel","dragulaModelChange"],["class","type-form-conf-attribute",4,"ngFor","ngForOf"],[3,"group","removeAttribute","deleteGroup",4,"ngIf"],[3,"group","editQuery","deleteGroup",4,"ngIf"],[3,"group","removeAttribute","deleteGroup"],[3,"group","editQuery","deleteGroup"],[1,"type-form-conf-attribute"],[1,"attribute-handle","icon-drag-handle"],[1,"attribute-name"],["class","attribute-cf-label",3,"textContent",4,"ngIf"],[1,"attribute-cf-label",3,"textContent"]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"div",0),n.nc(1,"div",1),n.nc(2,"ul",2),n.nc(3,"li",3),n.nc(4,"button",4),n.vc("click",(function(e){return t.resetToDefault(e)})),n.ic(5,"op-icon",5),n.ic(6,"span",6),n.mc(),n.mc(),n.nc(7,"li",7),n.nc(8,"a",8),n.ic(9,"op-icon",9),n.ic(10,"span",6),n.ic(11,"op-icon",10),n.mc(),n.nc(12,"ul",11),n.nc(13,"li"),n.nc(14,"a",12),n.vc("accessibleClick",(function(){return t.createGroup("attribute","")})),n.mc(),n.mc(),n.nc(15,"li"),n.nc(16,"a",12),n.vc("accessibleClick",(function(){return t.addGroupAndOpenQuery()})),n.mc(),n.mc(),n.mc(),n.mc(),n.mc(),n.mc(),n.mc(),n.nc(17,"div",13),n.nc(18,"div",14),n.nc(19,"div",15),n.vc("dragulaModelChange",(function(e){return t.groups=e})),n.ad(20,Ka,3,2,"ng-container",16),n.mc(),n.mc(),n.nc(21,"div",14),n.nc(22,"div",17),n.nc(23,"div",18),n.ic(24,"span",19),n.cd(25," "),n.ic(26,"span",20),n.mc(),n.nc(27,"div",21),n.vc("dragulaModelChange",(function(e){return t.inactives=e})),n.ad(28,Ja,5,3,"div",22),n.mc(),n.mc(),n.mc(),n.mc()),2&amp;e&amp;&amp;(n.Tb(6),n.Dc("textContent",t.text.reset),n.Tb(4),n.Dc("textContent",t.text.label_group),n.Tb(4),n.Dc("textContent",t.text.add_group),n.Tb(2),n.Dc("textContent",t.text.add_table),n.Tb(3),n.Dc("dragulaModel",t.groups),n.Tb(1),n.Dc("ngForOf",t.groups),n.Tb(4),n.Dc("textContent",t.text.label_inactive),n.Tb(2),n.Dc("textContent",t.text.drag_to_activate),n.Tb(1),n.Dc("dragulaModel",t.inactives),n.Tb(1),n.Dc("ngForOf",t.inactives))},encapsulation:2});class nr{constructor(e,t){this.bannerService=e,this.cdRef=t,this.placeholder="",this.onValueChange=new n.s,this.editing=!1}ngOnInit(){this.editedName=this.name,this.name&amp;&amp;0!==this.name.length||this.startEditing()}startEditing(){this.bannerService.conditional(()=&gt;this.bannerService.showEEOnlyHint(),()=&gt;{this.editing=!0})}saveEdition(e){return this.leaveEditingMode(),this.name=this.editedName.trim(),this.cdRef.detectChanges(),""!==this.name&amp;&amp;this.onValueChange.emit(this.name),e.preventDefault(),e.stopPropagation(),!1}reset(){this.editing=!1,this.editedName=this.name}leaveEditingMode(){null!=this.editedName&amp;&amp;this.editedName.trim().length&gt;0&amp;&amp;(this.editing=!1)}}function sr(e,t){if(1&amp;e&amp;&amp;n.ic(0,"span",12),2&amp;e){const e=n.xc(2);n.Dc("textContent",e.text.custom_field)}}function ar(e,t){if(1&amp;e){const e=n.oc();n.nc(0,"div",7),n.ic(1,"span",8),n.nc(2,"span",9),n.cd(3),n.ad(4,sr,1,1,"span",10),n.mc(),n.nc(5,"span",11),n.vc("click",(function(){n.Sc(e);const i=t.$implicit;return n.xc().removeFromGroup(i)})),n.mc(),n.mc()}if(2&amp;e){const e=t.$implicit;n.Ub("data-key",e.key),n.Tb(3),n.ed(" ",e.translation," "),n.Tb(1),n.Dc("ngIf",e.is_cf)}}nr.\u0275fac=function(e){return new(e||nr)(n.hc(Qa),n.hc(n.i))},nr.\u0275cmp=n.bc({type:nr,selectors:[["group-edit-in-place"]],inputs:{placeholder:"placeholder",name:"name"},outputs:{onValueChange:"onValueChange"},decls:2,vars:2,consts:[["class","group-edit-handler",3,"textContent","click",4,"ngIf"],["class","group-edit-in-place--input","type","text","autoFocus","",3,"ngModel","ngModelChange","blur","keydown.escape","keydown.enter",4,"ngIf"],[1,"group-edit-handler",3,"textContent","click"],["type","text","autoFocus","",1,"group-edit-in-place--input",3,"ngModel","ngModelChange","blur","keydown.escape","keydown.enter"],["nameInput",""]],template:function(e,t){1&amp;e&amp;&amp;(n.ad(0,tr,1,1,"div",0),n.ad(1,ir,2,2,"input",1)),2&amp;e&amp;&amp;(n.Dc("ngIf",!t.editing),n.Tb(1),n.Dc("ngIf",t.editing))},directives:[G.q,l.c,xn.a,l.m,l.p],encapsulation:2,changeDetection:0});class rr{constructor(e,t){this.I18n=e,this.cdRef=t,this.deleteGroup=new n.s,this.removeAttribute=new n.s,this.text={custom_field:this.I18n.t("js.admin.type_form.custom_field")}}rename(e){this.group.name=e,delete this.group.key,this.cdRef.detectChanges()}removeFromGroup(e){this.group.attributes=this.group.attributes.filter(t=&gt;t!==e),this.removeAttribute.emit(e)}}rr.\u0275fac=function(e){return new(e||rr)(n.hc(C.a),n.hc(n.i))},rr.\u0275cmp=n.bc({type:rr,selectors:[["type-form-attribute-group"]],inputs:{group:"group"},outputs:{deleteGroup:"deleteGroup",removeAttribute:"removeAttribute"},decls:7,vars:3,consts:[[1,"type-form-conf-group"],[1,"group-head"],[1,"group-handle","icon-drag-handle"],[1,"group-name",3,"name","onValueChange"],[1,"delete-group","icon-small","icon-close",3,"click"],["dragula","attributes",1,"attributes",3,"dragulaModel","dragulaModelChange"],["class","type-form-conf-attribute",4,"ngFor","ngForOf"],[1,"type-form-conf-attribute"],[1,"attribute-handle","icon-drag-handle"],[1,"attribute-name"],["class","attribute-cf-label",3,"textContent",4,"ngIf"],[1,"delete-attribute","icon-small","icon-close",3,"click"],[1,"attribute-cf-label",3,"textContent"]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"div",0),n.nc(1,"div",1),n.ic(2,"span",2),n.nc(3,"group-edit-in-place",3),n.vc("onValueChange",(function(e){return t.rename(e)})),n.mc(),n.nc(4,"span",4),n.vc("click",(function(){return t.deleteGroup.emit()})),n.mc(),n.mc(),n.nc(5,"div",5),n.vc("dragulaModelChange",(function(e){return t.group.attributes=e})),n.ad(6,ar,6,3,"div",6),n.mc(),n.mc()),2&amp;e&amp;&amp;(n.Tb(3),n.Dc("name",t.group.name),n.Tb(2),n.Dc("dragulaModel",t.group.attributes),n.Tb(1),n.Dc("ngForOf",t.group.attributes))},directives:[nr,Xa.a,G.p,G.q],encapsulation:2,changeDetection:0});class or{constructor(e,t){this.I18n=e,this.cdRef=t,this.text={edit_query:this.I18n.t("js.admin.type_form.edit_query")},this.editQuery=new n.s,this.deleteGroup=new n.s}rename(e){this.group.name=e,this.cdRef.detectChanges()}}or.\u0275fac=function(e){return new(e||or)(n.hc(C.a),n.hc(n.i))},or.\u0275cmp=n.bc({type:or,selectors:[["type-form-query-group"]],inputs:{group:"group"},outputs:{editQuery:"editQuery",deleteGroup:"deleteGroup"},decls:9,vars:2,consts:[[1,"type-form-conf-group","type-form-query-group"],[1,"group-head"],[1,"group-handle","icon-drag-handle"],[1,"group-name",3,"name","onValueChange"],[1,"delete-group","icon-small","icon-close",3,"click"],[1,"type-form-query"],[1,"type-form-query-group--edit-button",3,"click"],["icon-classes","button--icon icon-edit"]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"div",0),n.nc(1,"div",1),n.ic(2,"span",2),n.nc(3,"group-edit-in-place",3),n.vc("onValueChange",(function(e){return t.rename(e)})),n.mc(),n.nc(4,"span",4),n.vc("click",(function(){return t.deleteGroup.emit()})),n.mc(),n.mc(),n.nc(5,"div",5),n.nc(6,"span",6),n.vc("click",(function(){return t.editQuery.emit()})),n.ic(7,"op-icon",7),n.cd(8),n.mc(),n.mc(),n.mc()),2&amp;e&amp;&amp;(n.Tb(3),n.Dc("name",t.group.name),n.Tb(5),n.ed(" ",t.text.edit_query," "))},directives:[nr,Ct.a],encapsulation:2,changeDetection:0});class cr{}function lr(e,t){if(1&amp;e){const e=n.oc();n.nc(0,"div",9),n.vc("click",(function(i){n.Sc(e);const s=t.$implicit;return n.xc().select(i,s)})),n.mc()}if(2&amp;e){const e=t.$implicit;n.Dc("id",e.identifier)("textContent",e.title)}}function dr(e,t){if(1&amp;e&amp;&amp;n.ic(0,"enterprise-banner",10),2&amp;e){const e=n.xc();n.Dc("linkMessage",e.text.upsale_link)("textMessage",e.text.upsale_text)}}cr.\u0275mod=n.fc({type:cr}),cr.\u0275inj=n.ec({factory:function(e){return new(e||cr)},providers:[],imports:[[Xa.b.forRoot(),b.a]]}),n.Wc(er,[Xa.a,Wt.UISref,Wt.AnchorUISref,Wt.UIView,Wt.UISrefActive,Wt.UISrefStatus,G.n,G.o,G.p,G.q,G.x,G.t,G.u,G.v,G.w,G.r,G.s,l.C,l.r,l.B,l.c,l.s,l.v,l.a,l.y,l.z,l.u,l.m,l.n,l.x,l.k,l.j,l.t,l.b,l.d,l.p,l.q,l.o,gn.a,gn.b,gn.h,gn.e,xe.e,xe.f,xe.a,xe.b,xe.d,xe.c,fn.a,bn.a,vn.a,wn.a,wn.n,wn.d,wn.c,wn.e,wn.f,wn.g,wn.h,wn.i,wn.j,wn.k,wn.l,wn.m,yn.a,kn.a,Cn.a,Ct.a,xn.a,jn.a,R.a,Sn.a,Tn.a,Pn.a,In.a,_n.a,On.a,Dn.a,Rn.a,En.a,Fn.a,Ht.a,Mn.a,Le.a,Gt.a,An.a,Ln.a,Re.a,ti.a,qn.a,Ce.c,Ce.d,Ce.a,Ce.b,Ce.e,$n.a,Vn.a,rr,or,er,nr],[G.a,G.C,G.m,G.j,G.A,G.f,G.z,G.B,G.c,G.e,G.h,G.i,G.k]);class ur extends ut.a{constructor(e,t,i,n,s,a){super(t,i,e),this.elementRef=e,this.locals=t,this.cdRef=i,this.widgetsService=n,this.i18n=s,this.bannerService=a,this.text={title:this.i18n.t("js.grid.add_widget"),close_popup:this.i18n.t("js.button_close"),upsale_link:this.i18n.t("js.grid.upsale.link"),upsale_text:this.i18n.t("js.grid.upsale.text")},this.eeShowBanners=!1}ngOnInit(){super.ngOnInit(),this.eeShowBanners=this.bannerService.eeShowBanners}get selectable(){return this.eligibleWidgets.sort((e,t)=&gt;e.title.localeCompare(t.title))}select(e,t){this.chosenWidget=t,this.closeMe(e)}trackWidgetBy(e){return e.identifier}get eligibleWidgets(){let e=this.locals.schema.widgets.allowedValues.map(e=&gt;e.identifier);return this.widgetsService.registered.filter(t=&gt;e.includes(t.identifier))}}ur.\u0275fac=function(e){return new(e||ur)(n.hc(n.q),n.hc(I.a),n.hc(n.i),n.hc($t),n.hc(C.a),n.hc(Ba.a))},ur.\u0275cmp=n.bc({type:ur,selectors:[["ng-component"]],features:[n.Qb],decls:9,vars:5,consts:[[1,"op-modal--portal","ngdialog-theme-openproject"],["data-indicator-name","modal","tabindex","0",1,"op-modal--modal-container","confirm-dialog--modal","loading-indicator--location"],[1,"op-modal--modal-header"],[1,"op-modal--modal-close-button"],[1,"icon-close",3,"click"],[1,"icon-context","icon-attention",3,"textContent"],[1,"ngdialog-body","op-modal--modal-body"],["class","grid--addable-widget",3,"id","textContent","click",4,"ngFor","ngForOf","ngForTrackBy"],["class","grid--add-widget-ee","opReferrer","grids#add-widget",3,"linkMessage","textMessage",4,"ngIf"],[1,"grid--addable-widget",3,"id","textContent","click"],["opReferrer","grids#add-widget",1,"grid--add-widget-ee",3,"linkMessage","textMessage"]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"div",0),n.nc(1,"div",1),n.nc(2,"div",2),n.nc(3,"a",3),n.nc(4,"i",4),n.vc("click",(function(e){return t.closeMe(e)})),n.mc(),n.mc(),n.ic(5,"h3",5),n.mc(),n.nc(6,"div",6),n.ad(7,lr,1,2,"div",7),n.ad(8,dr,1,2,"enterprise-banner",8),n.mc(),n.mc(),n.mc()),2&amp;e&amp;&amp;(n.Tb(4),n.Ub("title",t.text.close_popup),n.Tb(1),n.Dc("textContent",t.text.title),n.Tb(2),n.Dc("ngForOf",t.selectable)("ngForTrackBy",t.trackWidgetBy),n.Tb(1),n.Dc("ngIf",t.eeShowBanners))},directives:[G.p,G.q,qn.a],encapsulation:2});class hr{constructor(e){this.layout=e}down(e,t){let i=[],n=this.layout.widgetAreas.slice(0);for(t&amp;&amp;(n=n.filter(e=&gt;e.guid!==t.guid)),n.sort((e,t)=&gt;t.startRow-e.startRow);null!==e;)i.push(e),n=n.filter(t=&gt;t.guid!==e.guid),e=this.moveOneDown(i,n)}moveOneDown(e,t){let i=this.firstAreaToMove(e,t);if(i){let e=i[0],t=i[1],n=e.widget.height;return e.startRow=t.endRow,e.endRow=e.startRow+n,this.layout.numRows
                                               <e.endrow-1&&(this.layout.numrows=e.endrow-1),e}return i="null,n=null;if(t.forEach(t=" null}firstareatomove(e,t){let="">
                                                {e.forEach(e=&gt;{if(e.overlaps(t))return i=e,void(n=t)})}),null!==n){let t=i;return e.forEach(e=&gt;{e.endRow&gt;t.endRow&amp;&amp;n.columnOverlaps(e)&amp;&amp;(t=e)}),[n,t]}return null}}hr.\u0275fac=function(e){return new(e||hr)(n.rc(De))},hr.\u0275prov=n.dc({token:hr,factory:hr.\u0275fac});var pr=i("gcYM"),mr=i("/uUt");class gr{constructor(e,t){this.layout=e,this.move=t,this.setupMousedOverAreaSubscription()}ngOnDestroy(){this.mousedOverAreaObserver.unsubscribe()}setupMousedOverAreaSubscription(){this.mousedOverAreaObserver=this.layout.$mousedOverArea.pipe(Object(pr.a)(10),Object(mr.a)(),Object(ws.a)(e=&gt;this.currentlyDragging&amp;&amp;!!e&amp;&amp;!this.layout.isGap(e)&amp;&amp;(this.placeholderArea.startRow!==e.startRow||this.placeholderArea.startColumn!==e.startColumn))).subscribe(e=&gt;{this.updateArea(e),this.layout.scrollPlaceholderIntoView()})}updateArea(e){this.layout.resetAreas(this.draggedArea),this.moveAreasOnDragging(e)}moveAreasOnDragging(e){if(!this.placeholderArea)return;let t=this.draggedArea;this.copyPositionButRestrict(e,this.placeholderArea),this.move.down(this.placeholderArea,t)}get currentlyDragging(){return!!this.draggedArea}isDropOnlyArea(e){return!this.currentlyDragging&amp;&amp;e.endRow===this.layout.numRows+2}isDragged(e){return this.currentlyDragging&amp;&amp;this.draggedArea.guid===e.guid}isPassive(e){return this.currentlyDragging&amp;&amp;!this.isDragged(e)}get isDraggable(){return this.layout.isEditable}start(e){this.placeholderArea=new Pe(e.widget),this.draggedHeight=document.getElementById(e.guid).offsetHeight-2,this.draggedArea=e}abort(){document.dispatchEvent(new Event("mouseup")),this.draggedArea=null,this.placeholderArea=null,this.layout.resetAreas()}drop(){this.draggedArea&amp;&amp;(this.placeholderArea.copyDimensionsTo(this.draggedArea),this.draggedArea.unchangedSize||(this.layout.writeAreaChangesToWidgets(),this.layout.cleanupUnusedAreas(),this.layout.rebuildAndPersist()),this.draggedArea=null,this.placeholderArea=null)}copyPositionButRestrict(e,t){t.startRow=e.startRow,e.startRow===this.layout.numRows+1?t.endRow=this.layout.numRows+2:e.startRow+t.widget.height&gt;this.layout.numRows+1?t.endRow=this.layout.numRows+1:t.endRow=e.startRow+t.widget.height,t.startColumn=e.startColumn,e.startColumn+t.widget.width&gt;this.layout.numColumns+1?t.endColumn=this.layout.numColumns+1:t.endColumn=e.startColumn+t.widget.width}}gr.\u0275fac=function(e){return new(e||gr)(n.rc(De),n.rc(hr))},gr.\u0275prov=n.dc({token:gr,factory:gr.\u0275fac});class fr{constructor(e,t,i){this.layout=e,this.move=t,this.drag=i}end(e){this.resizedArea&amp;&amp;(this.resizedArea=null,e.unchangedSize||(this.layout.writeAreaChangesToWidgets(),this.layout.cleanupUnusedAreas(),this.layout.rebuildAndPersist()))}abort(){this.resizedArea&amp;&amp;(this.layout.resetAreas(),this.resizedArea=null)}start(e){this.resizedArea=e;let t=this.layout.gridAreas.filter(e=&gt;{let t=e.startRow===this.resizedArea.startRow&amp;&amp;e.startColumn&gt;=this.resizedArea.startColumn,i=e.startRow&gt;this.resizedArea.startRow&amp;&amp;e.startColumn&gt;=this.resizedArea.startColumn&amp;&amp;this.layout.widgetAreas.some(t=&gt;t.startRow===e.startRow&amp;&amp;(t.endColumn&lt;=this.resizedArea.startColumn||t.startColumn&gt;=e.endColumn));return t||i});this.targetIds=t.map(e=&gt;e.guid)}moving(e){this.resizedArea&amp;&amp;this.layout.mousedOverArea&amp;&amp;this.targetIds.includes(this.layout.mousedOverArea.guid)&amp;&amp;(this.layout.resetAreas(),this.resizedArea.endRow=this.layout.mousedOverArea.endRow,this.resizedArea.endColumn=this.layout.mousedOverArea.endColumn,this.move.down(this.resizedArea,this.resizedArea))}isTarget(e){let t=e.guid;return this.resizedArea&amp;&amp;this.targetIds.includes(t)}isResized(e){return this.resizedArea&amp;&amp;this.resizedArea.guid===e.guid}isPassive(e){return this.currentlyResizing&amp;&amp;!this.isResized(e)}get currentlyResizing(){return!!this.resizedArea}get isResizable(){return!this.drag.currentlyDragging&amp;&amp;this.isAllowed}get isAllowed(){return this.layout.gridResource.updateImmediately}}fr.\u0275fac=function(e){return new(e||fr)(n.rc(De),n.rc(hr),n.rc(gr))},fr.\u0275prov=n.dc({token:fr,factory:fr.\u0275fac});class br{constructor(e,t,i,n,s,a,r,o){this.opModalService=e,this.injector=t,this.halResource=i,this.layout=n,this.drag=s,this.move=a,this.resize=r,this.i18n=o,this.text={add:this.i18n.t("js.grid.add_widget")}}isAddable(e){return!this.drag.currentlyDragging&amp;&amp;!this.resize.currentlyResizing&amp;&amp;(this.layout.mousedOverArea===e||this.layout.isSingleCell||this.layout.inHelpMode)&amp;&amp;this.isAllowed}widget(e){this.select(e).then(t=&gt;{this.layout.isGap(e)&amp;&amp;this.addLine(e);let i=new Pe(t);this.setMaxWidth(i),this.persist(i)}).catch(()=&gt;{})}get addText(){return this.text.add}select(e){return new Promise((t,i)=&gt;{this.opModalService.show(ur,this.injector,{schema:this.layout.schema}).closingEvent.subscribe(n=&gt;{let s=n.chosenWidget;if(!s)return void i();let a={_type:"GridWidget",identifier:s.identifier,startRow:e.startRow,endRow:e.endRow,startColumn:e.startColumn,endColumn:e.endColumn,options:s.properties||{}},r=this.halResource.createHalResource(a);r.grid=this.layout.gridResource,t(r)})})}addLine(e){e.isRow?this.layout.addRow(e.startRow-1,e.startColumn):e.isColumn&amp;&amp;this.layout.addColumn(e.startColumn-1,e.startRow)}setMaxWidth(e){e.endColumn=this.layout.numColumns+1,this.layout.widgetAreas.forEach(t=&gt;{e.startColumnOverlaps(t)&amp;&amp;(e.endColumn=t.startColumn)})}persist(e){e.writeAreaChangeToWidget(),this.layout.widgetAreas.push(e),this.layout.widgetResources.push(e.widget),this.layout.rebuildAndPersist()}get isAllowed(){return this.layout.gridResource&amp;&amp;this.layout.gridResource.updateImmediately}}br.\u0275fac=function(e){return new(e||br)(n.rc(I.b),n.rc(n.A),n.rc(x.a),n.rc(De),n.rc(gr),n.rc(hr),n.rc(fr),n.rc(C.a))},br.\u0275prov=n.dc({token:br,factory:br.\u0275fac});class vr{constructor(e,t,i,n,s,a,r,o,c){this.gridInitialization=e,this.pathHelper=t,this.currentProject=i,this.i18n=n,this.cdRef=s,this.title=a,this.addWidget=r,this.renderer=o,this.areas=c,this.text={title:this.i18n.t(`js.${this.i18nNamespace()}.label`),html_title:this.i18n.t(`js.${this.i18nNamespace()}.label`)}}ngOnInit(){this.renderer.addClass(document.body,"widget-grid-layout"),this.gridInitialization.initialize(this.gridScopePath()).then(e=&gt;{this.grid=e,this.cdRef.detectChanges()}),this.setHtmlTitle()}ngOnDestroy(){this.renderer.removeClass(document.body,"widget-grid-layout")}setHtmlTitle(){this.title.setTitle(this.text.html_title)}}vr.\u0275fac=function(e){return new(e||vr)(n.hc(ci),n.hc(z.a),n.hc(Se.a),n.hc(C.a),n.hc(n.i),n.hc(N.e),n.hc(br),n.hc(n.S),n.hc(De))},vr.\u0275dir=n.cc({type:vr});i("uhGA");function wr(e,t){if(1&amp;e&amp;&amp;n.ic(0,"span",10),2&amp;e){const e=n.xc(2);n.Dc("hidden",e.isMobileDevice)}}function yr(e,t){if(1&amp;e){const e=n.oc();n.nc(0,"resizer",11),n.vc("end",(function(){n.Sc(e);const t=n.xc().$implicit;return n.xc().resize.end(t)}))("start",(function(){n.Sc(e);const t=n.xc().$implicit;return n.xc().resize.start(t)}))("move",(function(t){return n.Sc(e),n.xc(2).resize.moving(t)})),n.nc(1,"div",12),n.ic(2,"i",13),n.mc(),n.mc()}2&amp;e&amp;&amp;n.Dc("customHandler",!0)}const kr=function(e,t,i){return{"-dragged":e,"-passive":t,"-resizing":i}};function Cr(e,t){if(1&amp;e){const e=n.oc();n.nc(0,"div",5),n.nc(1,"div",6),n.vc("cdkDragStarted",(function(){n.Sc(e);const i=t.$implicit;return n.xc().drag.start(i)}))("cdkDragDropped",(function(){return n.Sc(e),n.xc().drag.drop()})),n.ad(2,wr,1,1,"span",7),n.ic(3,"ndc-dynamic",8),n.mc(),n.ad(4,yr,3,1,"resizer",9),n.mc()}if(2&amp;e){const e=t.$implicit,i=n.xc();n.Zc("grid-row-start",e.gridStartRow)("grid-row-end",e.gridEndRow)("grid-column-start",e.gridStartColumn)("grid-column-end",e.gridEndColumn),n.Dc("ngClass",n.Kc(18,kr,i.drag.isDragged(e),i.drag.isPassive(e)||i.resize.isPassive(e),i.resize.isResized(e)))("id",e.guid)("cdkDropListData",e)("cdkDropListConnectedTo",i.layout.gridAreaIds),n.Tb(1),n.Dc("cdkDragDisabled",i.isMobileDevice),n.Tb(1),n.Dc("ngIf",i.drag.isDraggable),n.Tb(1),n.Dc("ndcDynamicComponent",i.widgetComponent(e))("ndcDynamicInputs",i.widgetComponentInput(e))("ndcDynamicOutputs",i.widgetComponentOutput(e)),n.Tb(1),n.Dc("ngIf",i.resize.isResizable)}}function xr(e,t){if(1&amp;e){const e=n.oc();n.nc(0,"div",16),n.vc("click",(function(){n.Sc(e);const t=n.xc().$implicit;return n.xc().add.widget(t)})),n.mc()}if(2&amp;e){const e=n.xc(2);n.Dc("title",e.add.addText)}}const jr=function(e,t,i,n,s){return{"-drop-target":e,"-drop-only":t,"-resize-target":i,"-addable":n,"-help-mode":s}};function Sr(e,t){if(1&amp;e){const e=n.oc();n.nc(0,"div",14),n.vc("mouseover",(function(){n.Sc(e);const i=t.$implicit;return n.xc().layout.setMousedOverArea(i)})),n.ad(1,xr,1,1,"div",15),n.mc()}if(2&amp;e){const e=t.$implicit,i=n.xc();n.Zc("grid-row-start",e.gridStartRow)("grid-row-end",e.gridEndRow)("grid-column-start",e.gridStartColumn)("grid-column-end",e.gridEndColumn),n.Dc("ngClass",n.Mc(13,jr,i.drag.currentlyDragging,i.drag.isDropOnlyArea(e),i.resize.isTarget(e),i.add.isAddable(e),i.layout.inHelpMode))("id",e.guid)("cdkDropListData",e)("cdkDropListConnectedTo",i.layout.gridAreaIds),n.Tb(1),n.Dc("ngIf",i.add.isAllowed)}}function Tr(e,t){if(1&amp;e){const e=n.oc();n.nc(0,"div",19),n.vc("click",(function(){n.Sc(e);const t=n.xc().$implicit;return n.xc().add.widget(t)})),n.mc()}if(2&amp;e){const e=n.xc(2);n.Dc("title",e.add.addText)}}const Pr=function(e,t,i,n){return{"-addable":e,"-help-mode":t,"-row":i,"-column":n}};function Ir(e,t){if(1&amp;e){const e=n.oc();n.nc(0,"div",17),n.vc("mouseover",(function(){n.Sc(e);const i=t.$implicit;return n.xc().layout.setMousedOverArea(i)})),n.ad(1,Tr,1,1,"div",18),n.mc()}if(2&amp;e){const e=t.$implicit,i=n.xc();n.Zc("grid-row-start",e.gridStartRow)("grid-row-end",e.gridEndRow)("grid-column-start",e.gridStartColumn)("grid-column-end",e.gridEndColumn),n.Dc("ngClass",n.Lc(11,Pr,i.add.isAddable(e),i.layout.inHelpMode,e.isRow,e.isColumn))("id",e.guid),n.Tb(1),n.Dc("ngIf",i.add.isAllowed)}}function _r(e,t){if(1&amp;e&amp;&amp;(n.nc(0,"div",20),n.ic(1,"div",21),n.mc()),2&amp;e){const e=n.xc();n.Zc("grid-row-start",e.drag.placeholderArea.gridStartRow)("grid-row-end",e.drag.placeholderArea.gridEndRow)("grid-column-start",e.drag.placeholderArea.gridStartColumn)("grid-column-end",e.drag.placeholderArea.gridEndColumn)("min-height",e.drag.draggedHeight,"px")}}const Or=[De,hr,gr,fr,br,Me];class Dr{constructor(e,t,i,n,s,a,r,o){this.sanitization=e,this.widgetsService=t,this.drag=i,this.resize=n,this.layout=s,this.add=a,this.remove=r,this.browserDetector=o,this.uiWidgets=[],this.GRID_AREA_HEIGHT="auto",this.GRID_GAP_DIMENSION="20px",this.component=qi}ngOnInit(){this.layout.gridResource=this.grid}ngOnDestroy(){this.uiWidgets.forEach(e=&gt;e.destroy())}handleKeyboardEvent(e){"Escape"===e.key&amp;&amp;(this.drag.currentlyDragging?this.drag.abort():this.resize.currentlyResizing&amp;&amp;this.resize.abort())}widgetComponent(e){let t=e.widget;if(!t)return null;let i=this.widgetsService.registered.find(e=&gt;e.identifier===t.identifier);return i?i.component:null}widgetComponentInput(e){return{resource:e.widget}}widgetComponentOutput(e){return{resourceChanged:this.layout.saveWidgetChangeset.bind(this.layout)}}get gridColumnStyle(){return this.gridStyle(this.layout.numColumns,`calc((100% - ${this.GRID_GAP_DIMENSION} * ${this.layout.numColumns+1}) / ${this.layout.numColumns})`)}get gridRowStyle(){return this.gridStyle(this.layout.numRows,this.GRID_AREA_HEIGHT)}identifyGridArea(e,t){return t.guid}get isHeadersDisplayed(){return this.layout.isEditable}get isMobileDevice(){return this.browserDetector.isMobile}gridStyle(e,t){let i="";for(let n=0;n
                                                <e;n++)i+=`${this.grid_gap_dimension} $r(e,t){if(1&e&&(n.nc(0,"div",1),n.ic(1,"wp-single-card",2),n.mc()),2&e){const="" ${t}="" (.*)="" (max-width:679px){.title-container[_ngcontent-%comp%]{margin-left:0;margin-bottom:0}}"]});const="" -gap="" -gap",3,"title","click",4,"ngif"],[1,"grid--widget-add","-gap",3,"title","click"],[1,"grid--area","-widgeted","-placeholder"],[1,"widget-box"]],template:function(e,t){1&e&&(n.nc(0,"div",0),n.ad(1,cr,5,22,"div",1),n.ad(2,sr,2,19,"div",2),n.ad(3,ir,2,16,"div",3),n.ad(4,_r,2,10,"div",4),n.mc()),2&e&&(n.zc("grid-template-columns",t.gridcolumnstyle)("grid-template-rows",t.gridrowstyle),n.tb(1),n.dc("ngforof",t.layout.widgetareas)("ngfortrackby",t.identifygridarea),n.tb(1),n.dc("ngforof",t.layout.gridareas)("ngfortrackby",t.identifygridarea),n.tb(1),n.dc("ngforof",t.layout.gridgaps)("ngfortrackby",t.identifygridarea),n.tb(1),n.dc("ngif",t.drag.placeholderarea))},directives:[g.p,g.q,xe.e,g.n,xe.a,ce.c,ce.d,xe.b,rn.a],encapsulation:2});const="" -placeholder",3,"grid-row-start","grid-row-end","grid-column-start","grid-column-end","min-height",4,"ngif"],["cdkdroplist","",1,"grid--area","-widgeted",3,"ngclass","id","cdkdroplistdata","cdkdroplistconnectedto"],["cdkdrag","",1,"grid--area-content","widget-box",3,"cdkdragdisabled","cdkdragstarted","cdkdragdropped"],["class","grid--area-drag-handle\n="" -widgeted="" -widgeted","cdkdroplist","",3,"ngclass","grid-row-start","grid-row-end","grid-column-start","grid-column-end","id","cdkdroplistdata","cdkdroplistconnectedto",4,"ngfor","ngforof","ngfortrackby"],["class","grid--area="" `;return="" and="" ar='n.pc(Mr),Lr=[{name:"dashboards",parent:"root",url:"/dashboards/",data:{bodyClasses:["router--dashboards-view-base","widget-grid-layout"],menuItem:"dashboards-menu-item"},component:Mr}];class' ar(e||mr)},mr.\u0275cmp='n.bc({type:Mr,selectors:[["dashboard"]],features:[n.Sb(Or),n.Qb],decls:10,vars:3,consts:[[1,"toolbar-container"],[1,"toolbar"],[1,"title-container"],[3,"textContent"],[1,"toolbar-items","hidden-for-mobile"],[1,"toolbar-item","hidden-for-mobile"],[1,"toolbar-item"],["class","button",3,"title","ngClass","click",4,"ngIf"],[3,"grid",4,"ngIf"],[1,"button",3,"title","ngClass","click"],["icon-classes","button--icon' dashboards$"),e="" e='n.xc();n.Tb(1),n.Dc("workPackage",e.workPackage)}}qr.\u0275mod=n.fc({type:qr}),qr.\u0275inj=n.ec({factory:function(e){return' er(e,t){if(1&e){const="" extends="" fr(e,t){if(1&e&&n.ic(0,"grid",11),2&e){const="" hidden-for-mobile","cdkdraghandle","",3,"hidden",4,"ngif"],[3,"ndcdynamiccomponent","ndcdynamicinputs","ndcdynamicoutputs"],[3,"customhandler","end","start","move",4,"ngif"],["cdkdraghandle","",1,"grid--area-drag-handle","icon","icon-drag-handle","hidden-for-mobile",3,"hidden"],[3,"customhandler","end","start","move"],[1,"grid--resizer"],["aria-hidden","true",1,"icon-resizer-bottom-right","hidden-for-mobile"],["cdkdroplist","",1,"grid--area","hidden-for-mobile",3,"ngclass","id","cdkdroplistdata","cdkdroplistconnectedto","mouseover"],["class","grid--widget-add",3,"title","click",4,"ngif"],[1,"grid--widget-add",3,"title","click"],[1,"grid--area","-gap","hidden-for-mobile",3,"ngclass","id","mouseover"],["class","grid--widget-add="" hidden-for-mobile","cdkdroplist","",3,"ngclass","grid-row-start","grid-row-end","grid-column-start","grid-column-end","id","cdkdroplistdata","cdkdroplistconnectedto","mouseover",4,"ngfor","ngforof","ngfortrackby"],["class","grid--area="" hidden-for-mobile",3,"ngclass","grid-row-start","grid-row-end","grid-column-start","grid-column-end","id","mouseover",4,"ngfor","ngforof","ngfortrackby"],["class","grid--area="" i+="`${this.GRID_GAP_DIMENSION}`,this.sanitization.bypassSecurityTrustStyle(i)}}Dr.\u0275fac=function(e){return" icon-add"],[3,"grid"]],template:function(e,t){1&e&&(n.nc(0,"div",0),n.nc(1,"div",1),n.nc(2,"div",2),n.ic(3,"h2",3),n.mc(),n.nc(4,"ul",4),n.nc(5,"li",5),n.ic(6,"zen-mode-toggle-button"),n.mc(),n.nc(7,"li",6),n.ad(8,er,2,4,"button",7),n.mc(),n.mc(),n.mc(),n.mc(),n.ad(9,fr,1,1,"grid",8)),2&e&&(n.tb(3),n.dc("textcontent",t.text.title),n.tb(5),n.dc("ngif",t.addwidget.isallowed),n.tb(1),n.dc("ngif",t.grid))},directives:[ht.a,g.q,g.n,ct.a,dr],styles:[".title-container[_ngcontent-%comp%]{margin-left:20px;margin-bottom:-5px}.toolbar-container[_ngcontent-%comp%]{margin-bottom:0}.toolbar-items[_ngcontent-%comp%]{padding-right:20px}@media="" icon-drag-handle\n="" icon\n="" mr="" n.sc(e),n.xc().areas.togglehelpmode()})),n.ic(1,"op-icon",10),n.mc()}if(2&e){const="" new(e||dr)(n.hc(n.b),n.hc($t),n.hc(gr),n.hc(fr),n.hc(de),n.hc(br),n.hc(me),n.hc(at.a))},dr.\u0275cmp='n.bc({type:Dr,selectors:[["grid"]],hostBindings:function(e,t){1&amp;e&amp;&amp;n.vc("keyup",(function(e){return' new(e||qr)},providers:[],imports:[[b.a,ka,wt.uiroutermodule.forchild({states:lr,config:function(e){e.urlservice.rules.when(new="" only="" projects="" qr{}function="" regexp("^="" rr='function(e){return{"-active":e}};function' screen="" t.handlekeyboardevent(e)}),!1,n.rc)},inputs:{grid:"grid"},decls:5,vars:11,consts:[[1,"grid--container"],["class","grid--area="" this.pathhelper.projectdashboardspath(this.currentproject.identifier)}}mr.\u0275fac="function(e){return" vr{i18nnamespace(){return"dashboards"}gridscopepath(){return="">
                                                 `/projects/${e[1]}/dashboards/`)}})]]});class Vr extends ut.a{constructor(e,t,i,n,s,a){super(t,i,e),this.elementRef=e,this.locals=t,this.cdRef=i,this.i18n=n,this.wpCacheService=s,this.opModalService=a,this.text={created_by:this.i18n.t("js.label_created_by")}}ngOnInit(){super.ngOnInit();const e=this.locals.workPackageLink,t=M.a.idFromLink(e);this.wpCacheService.require(t).then(e=&gt;{this.workPackage=e,this.cdRef.detectChanges();const t=jQuery(this.elementRef.nativeElement).find(".preview-modal--container");this.reposition(t,this.locals.event.target)})}reposition(e,t){e.position({my:"right top",at:"right bottom",of:t,collision:"flipfit"})}}Vr.\u0275fac=function(e){return new(e||Vr)(n.hc(n.q),n.hc(I.a),n.hc(n.i),n.hc(C.a),n.hc(A.a),n.hc(I.b))},Vr.\u0275cmp=n.bc({type:Vr,selectors:[["ng-component"]],features:[n.Qb],decls:1,vars:1,consts:[["class","preview-modal--container","wp-isolated-query-space","",4,"ngIf"],["wp-isolated-query-space","",1,"preview-modal--container"],["orientation","horizontal",3,"workPackage"]],template:function(e,t){1&amp;e&amp;&amp;n.ad(0,$r,2,1,"div",0),2&amp;e&amp;&amp;n.Dc("ngIf",t.workPackage)},directives:[G.q,Ne.a,Qn.a],styles:[".cdk-drag-preview[_ngcontent-%COMP%]{box-shadow:0 0 10px 5px rgba(0,0,0,.1);z-index:10000!important}.preview-modal--container[_ngcontent-%COMP%]{position:absolute;z-index:5000;min-width:350px;padding:0;box-shadow:0 0 5px 2px rgba(0,0,0,.25)}"],changeDetection:0});class Nr{constructor(e,t){this.opModalService=e,this.injector=t}setupListener(){jQuery(document.body).on("mouseenter",".preview-trigger",e=&gt;{e.preventDefault(),e.stopPropagation();const t=jQuery(e.target),i=t.attr("href");i&amp;&amp;(this.previewModal=this.opModalService.show(Vr,this.injector,{workPackageLink:i,event:e}),this.modalElement=this.previewModal.elementRef.nativeElement,this.previewModal.reposition(jQuery(this.modalElement),t),jQuery(this.modalElement).addClass("-no-width -no-height"))}),jQuery(document.body).on("mouseleave",".preview-trigger",e=&gt;{e.preventDefault(),e.stopPropagation(),this.isMouseOverPreview(e)?jQuery(this.modalElement).on("mouseleave",()=&gt;{this.opModalService.close()}):this.opModalService.close()})}isMouseOverPreview(e){if(!this.modalElement)return!1;const t=jQuery(this.modalElement.children[0]);if(t&amp;&amp;t.offset()){let i=e.pageX&gt;=Math.floor(t.offset().left)&amp;&amp;e.pageX
                                                 <t.offset().left+t.width(),n=e.pagey>
                                                  =Math.floor(t.offset().top)&amp;&amp;e.pageY
                                                  <t.offset().top+t.height();return ([^="" (max-width:679px){.title-container[_ngcontent-%comp%]{margin-left:0;margin-bottom:0}}"]});const="" ]+)$"),e="" and="" br(e,t){if(1&e&&n.ic(0,"grid",11),2&e){const="" e='n.xc();n.Dc("grid",e.grid)}}class' extends="" hr='function(e){return{"-active":e}};function' i&&n}return!1}}nr.\u0275fac="function(e){return" icon-add"],[3,"grid"]],template:function(e,t){1&e&&(n.nc(0,"div",0),n.nc(1,"div",1),n.nc(2,"div",2),n.ic(3,"h2",3),n.mc(),n.nc(4,"ul",4),n.nc(5,"li",5),n.ic(6,"zen-mode-toggle-button"),n.mc(),n.nc(7,"li",6),n.ad(8,zr,2,4,"button",7),n.mc(),n.mc(),n.mc(),n.mc(),n.ad(9,br,1,1,"grid",8)),2&e&&(n.tb(3),n.dc("textcontent",t.text.title),n.tb(5),n.dc("ngif",t.addwidget.isallowed),n.tb(1),n.dc("ngif",t.grid))},directives:[ht.a,g.q,g.n,ct.a,dr],styles:[".title-container[_ngcontent-%comp%]{margin-left:20px;margin-bottom:-5px}.toolbar-container[_ngcontent-%comp%]{margin-bottom:0}.toolbar-items[_ngcontent-%comp%]{padding-right:20px}@media="" n.sc(e),n.xc().areas.togglehelpmode()})),n.ic(1,"op-icon",10),n.mc()}if(2&e){const="" new$)="" new(e||nr)(n.rc(i.b),n.rc(n.a))},nr.\u0275prov='n.dc({token:Nr,factory:Nr.\u0275fac,providedIn:"root"});const' new(e||xr)},providers:[],imports:[[b.a,ka,wt.uiroutermodule.forchild({states:ur,config:function(e){e.urlservice.rules.when(new="" only="" projects(?!="" qr="" regexp("^="" screen="" this.pathhelper.projectpath(this.currentproject.identifier)}}qr.\u0275fac="function(e){return" vr{i18nnamespace(){return"overviews"}gridscopepath(){return="" wr='n.pc(Qr),Ur=[{name:"overview",parent:"root",url:"/",data:{menuItem:"overview-menu-item"},component:Qr}];class' wr(e||qr)},qr.\u0275cmp='n.bc({type:Qr,selectors:[["overview"]],features:[n.Sb(Or),n.Qb],decls:10,vars:3,consts:[[1,"toolbar-container"],[1,"toolbar"],[1,"title-container"],[3,"textContent"],[1,"toolbar-items","hidden-for-mobile"],[1,"toolbar-item","hidden-for-mobile"],[1,"toolbar-item"],["class","button",3,"title","ngClass","click",4,"ngIf"],[3,"grid",4,"ngIf"],[1,"button",3,"title","ngClass","click"],["icon-classes","button--icon' xr{}xr.\u0275mod="n.fc({type:Xr}),Xr.\u0275inj=n.ec({factory:function(e){return" zr(e,t){if(1&e){const="">
                                                   `/projects/${e[1]}/`)}})]]});const Yr=function(e){return{"-active":e}};function Gr(e,t){if(1&amp;e){const e=n.oc();n.nc(0,"button",9),n.vc("click",(function(){return n.Sc(e),n.xc().areas.toggleHelpMode()})),n.ic(1,"op-icon",10),n.mc()}if(2&amp;e){const e=n.xc();n.Dc("title",e.addWidget.addText)("ngClass",n.Ic(2,Yr,e.areas.inHelpMode))}}function Kr(e,t){if(1&amp;e&amp;&amp;n.ic(0,"grid",11),2&amp;e){const e=n.xc();n.Dc("grid",e.grid)}}class Zr extends vr{i18nNamespace(){return"my_page"}gridScopePath(){return this.pathHelper.myPagePath()}}Zr.\u0275fac=function(e){return Jr(e||Zr)},Zr.\u0275cmp=n.bc({type:Zr,selectors:[["ng-component"]],features:[n.Sb(Or),n.Qb],decls:10,vars:3,consts:[[1,"toolbar-container"],[1,"toolbar"],[1,"title-container"],[3,"textContent"],[1,"toolbar-items","hidden-for-mobile"],[1,"toolbar-item","hidden-for-mobile"],[1,"toolbar-item"],["class","button",3,"title","ngClass","click",4,"ngIf"],[3,"grid",4,"ngIf"],[1,"button",3,"title","ngClass","click"],["icon-classes","button--icon icon-add"],[3,"grid"]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"div",0),n.nc(1,"div",1),n.nc(2,"div",2),n.ic(3,"h2",3),n.mc(),n.nc(4,"ul",4),n.nc(5,"li",5),n.ic(6,"zen-mode-toggle-button"),n.mc(),n.nc(7,"li",6),n.ad(8,Gr,2,4,"button",7),n.mc(),n.mc(),n.mc(),n.mc(),n.ad(9,Kr,1,1,"grid",8)),2&amp;e&amp;&amp;(n.Tb(3),n.Dc("textContent",t.text.title),n.Tb(5),n.Dc("ngIf",t.addWidget.isAllowed),n.Tb(1),n.Dc("ngIf",t.grid))},directives:[Ht.a,G.q,G.n,Ct.a,Dr],styles:[".title-container[_ngcontent-%COMP%]{margin-left:20px;margin-bottom:-5px}.toolbar-container[_ngcontent-%COMP%]{margin-bottom:0}.toolbar-items[_ngcontent-%COMP%]{padding-right:20px}@media only screen and (max-width:679px){.title-container[_ngcontent-%COMP%]{margin-left:0;margin-bottom:0}}"]});const Jr=n.pc(Zr),eo=[{name:"my_page",url:"/my/page",component:Zr,data:{bodyClasses:["router--work-packages-my-page","widget-grid-layout"],parent:"work-packages"}}];class to{}to.\u0275mod=n.fc({type:to}),to.\u0275inj=n.ec({factory:function(e){return new(e||to)},imports:[[b.a,ka,Wt.UIRouterModule.forChild({states:eo})]]});var io=i("GZlY"),no=i("7ond");const so={preview:1,newWorkPackage:2,edit:3,quickSearch:4,projectSearch:5,help:6,moreMenu:7,details:8};class ao{constructor(e,t,i){this.PathHelper=e,this.FocusHelper=t,this.currentProject=i,this.shortcuts={"?":()=&gt;this.showHelpModal(),"g m":this.globalAction("myPagePath"),"g o":this.projectScoped("projectPath"),"g w p":this.projectScoped("projectWorkPackagesPath"),"g w i":this.projectScoped("projectWikiPath"),"g a":this.projectScoped("projectActivityPath"),"g c":this.projectScoped("projectCalendarPath"),"g n":this.projectScoped("projectNewsPath"),"g t":this.projectScoped("projectTimelinesPath"),"n w p":this.projectScoped("projectWorkPackageNewPath"),"g e":this.accessKey("edit"),"g p":this.accessKey("preview"),"d w p":this.accessKey("details"),m:this.accessKey("moreMenu"),p:this.accessKey("projectSearch"),s:this.accessKey("quickSearch"),k:()=&gt;this.focusPrevItem(),j:()=&gt;this.focusNextItem()},this.register()}register(){_.each(this.shortcuts,(e,t)=&gt;Mousetrap.bind(t,e))}accessKey(e){var t=so[e];return()=&gt;{var e=jQuery("[accesskey="+t+"]:first");e.is("input")||"global-search-input"===e.attr("id")?setTimeout(()=&gt;this.FocusHelper.focus(e),200):e.is("[href]")?this.clickLink(e[0]):e[0].click()}}globalAction(e){return()=&gt;{var t=this.PathHelper[e]();window.location.href=t}}projectScoped(e){return()=&gt;{var t=this.currentProject.identifier;if(t){var i=this.PathHelper[e](t);window.location.href=i}}}clickLink(e){var t=!1;if(document.createEvent){var i=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});t=!e.dispatchEvent(i)}else e.fireEvent&amp;&amp;(t=!e.fireEvent("onclick"));t||(window.location.href=e.href)}showHelpModal(){window.open(this.PathHelper.keyboardShortcutsHelpPath())}findListInPage(){const e=jQuery("table.keyboard-accessible-list"),t=[];return e.find("tbody tr").each((function(e,i){var n=jQuery(i).find(":visible:tabbable")[0];void 0!==n&amp;&amp;t.push(n)})),t}focusItemOffset(e){const t=this.findListInPage();let i;if(null===t)return;i=t.indexOf(jQuery(document.activeElement).closest("table.keyboard-accessible-list tbody tr").find(":visible:tabbable")[0]),jQuery(t[(i+e+t.length)%t.length]).focus()}focusNextItem(){this.focusItemOffset(1)}focusPrevItem(){this.focusItemOffset(-1)}}ao.\u0275fac=function(e){return new(e||ao)(n.rc(z.a),n.rc(no.a),n.rc(Se.a))},ao.\u0275prov=n.dc({token:ao,factory:ao.\u0275fac,providedIn:"root"});var ro=i("saRB"),oo=i("RGDJ");function co(e,t){if(1&amp;e&amp;&amp;(n.nc(0,"span",3),n.cd(1),n.mc()),2&amp;e){const e=t.item,i=n.xc();n.Dc("ngClass",i.highlightColor(e)),n.Tb(1),n.dd(e.name)}}function lo(e,t){if(1&amp;e&amp;&amp;(n.nc(0,"span",3),n.cd(1),n.mc()),2&amp;e){const e=t.item,i=n.xc();n.Dc("ngClass",i.highlightColor(e)),n.Tb(1),n.dd(e.name)}}class uo{constructor(e,t){this.elementRef=e,this.I18n=t,this.highlightTextInline=!1}ngOnInit(){this.setColorOptions(),this.updateInputField=document.getElementsByName(this.elementRef.nativeElement.dataset.updateInput)[0],this.highlightTextInline=JSON.parse(this.elementRef.nativeElement.dataset.highlightTextInline)}onModelChange(e){e&amp;&amp;this.updateInputField&amp;&amp;(this.updateInputField.value=e.value)}setColorOptions(){this.options=JSON.parse(this.elementRef.nativeElement.dataset.colors),this.options.unshift({name:this.I18n.t("js.label_no_color"),value:""}),this.selectedOption=this.options.find(e=&gt;!0===e.selected),this.selectedOption?this.selectedOption=this.selectedOption.value:(this.selectedColorId=this.elementRef.nativeElement.dataset.selectedColor,this.selectedOption=this.selectedColorId?this.selectedColorId:"")}highlightColor(e){if(""===e.value)return;let t;return t=this.highlightTextInline?"__hl_inline_type_ ":"__hl_inline_ ",t+oo.a.colorClass(this.highlightTextInline,e.value)}}uo.\u0275fac=function(e){return new(e||uo)(n.hc(n.q),n.hc(C.a))},uo.\u0275cmp=n.bc({type:uo,selectors:[["colors-autocompleter"]],decls:3,vars:4,consts:[["bindLabel","name","bindValue","value","appendTo","body",3,"items","virtualScroll","ngModel","clearable","ngModelChange","change"],["ng-label-tmp",""],["ng-option-tmp",""],[3,"ngClass"]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"ng-select",0),n.vc("ngModelChange",(function(e){return t.selectedOption=e}))("change",(function(e){return t.onModelChange(e)})),n.ad(1,co,2,2,"ng-template",1),n.ad(2,lo,2,2,"ng-template",2),n.mc()),2&amp;e&amp;&amp;n.Dc("items",t.options)("virtualScroll",!0)("ngModel",t.selectedOption)("clearable",!1)},directives:[wn.a,l.m,l.p,wn.e,wn.c,G.n],encapsulation:2});var ho=i("Kj3r"),po=i("itXk");function mo(e,t){if(1&amp;e&amp;&amp;n.ic(0,"wp-embedded-table",1),2&amp;e){const e=n.xc();n.Dc("queryProps",e.queryProps)("configuration",e.tableConfiguration)}}class go extends Je.a{constructor(e,t,i,n,s,a,r,o,c,l,d){super(),this.FocusHelper=e,this.elementRef=t,this.renderer=i,this.I18n=n,this.halResourceService=s,this.globalSearchService=a,this.wpTableFilters=r,this.querySpace=o,this.wpFilters=c,this.cdRef=l,this.UrlParamsHelper=d,this.resultsHidden=!1,this.tableConfiguration={actionsColumnEnabled:!1,columnMenuEnabled:!0,contextMenuEnabled:!1,inlineCreateEnabled:!1,withFilters:!0,showFilterButton:!0,filterButtonText:this.I18n.t("js.button_advanced_filter")}}ngAfterViewInit(){Object(po.a)([this.globalSearchService.searchTerm$,this.globalSearchService.projectScope$]).pipe(Object(Vi.a)(1),Object(mr.a)(),Object(ho.a)(10),this.untilDestroyed()).subscribe(([e,t])=&gt;{this.wpFilters.visible=!1,this.setQueryProps()}),this.globalSearchService.resultsHidden$.pipe(this.untilDestroyed()).subscribe(e=&gt;this.resultsHidden=e)}ngOnInit(){this.setQueryProps()}setQueryProps(){let e=[],t=["id","project","subject","type","status","updatedAt"];this.globalSearchService.searchTerm.length&gt;0&amp;&amp;e.push({search:{operator:"**",values:[this.globalSearchService.searchTerm]}}),"current_project"===this.globalSearchService.projectScope&amp;&amp;(e.push({subprojectId:{operator:"!*",values:[]}}),t=["id","subject","type","status","updatedAt"]),""===this.globalSearchService.projectScope&amp;&amp;e.push({subprojectId:{operator:"*",values:[]}}),this.queryProps={"columns[]":t,filters:JSON.stringify(e),sortBy:JSON.stringify([["updatedAt","desc"]]),showHierarchies:!1}}}go.\u0275fac=function(e){return new(e||go)(n.hc(no.a),n.hc(n.q),n.hc(n.S),n.hc(C.a),n.hc(x.a),n.hc(Na),n.hc(Be.a),n.hc(ze.a),n.hc(Gi.a),n.hc(n.i),n.hc($i.a))},go.\u0275cmp=n.bc({type:go,selectors:[["global-search-work-packages"]],features:[n.Qb],decls:1,vars:1,consts:[[3,"queryProps","configuration",4,"ngIf"],[3,"queryProps","configuration"]],template:function(e,t){1&amp;e&amp;&amp;n.ad(0,mo,1,2,"wp-embedded-table",0),2&amp;e&amp;&amp;n.Dc("ngIf",!t.resultsHidden)},directives:[G.q,Qi.a],encapsulation:2});class fo{constructor(e,t){this.i18n=e,this.domSanitizer=t,this.text={newFeatures:this.i18n.t("js.label_new_features"),descriptionNewFeatures:this.i18n.t("js.homescreen.blocks.new_features.text_new_features"),learnAbout:this.i18n.t("js.homescreen.blocks.new_features.learn_about")},this.i18nBase="js.homescreen.blocks.new_features.",this.isStandardEdition=window.OpenProject.isStandardEdition}get teaserWebsiteUrl(){let e=this.translated("learn_about_link");return this.domSanitizer.bypassSecurityTrustResourceUrl(e)}get currentNewFeatureHtml(){return this.translated("current_new_feature_html")}translated(e){return this.i18n.t(this.i18nBase+this.i18nPrefix+"."+e,{bcf_api_link:"https://github.com/opf/openproject/blob/dev/docs/api/bcf/bcf-rest-api.md"})}get i18nPrefix(){return this.isStandardEdition?"standard":"bim"}}fo.\u0275fac=function(e){return new(e||fo)(n.hc(C.a),n.hc(N.b))},fo.\u0275cmp=n.bc({type:fo,selectors:[["homescreen-new-features-block"]],decls:7,vars:4,consts:[[1,"widget-box--additional-info"],[1,"widget-box--description"],[3,"innerHtml"],[1,"widget-box--teaser-image"],["target","_blank",3,"href"]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"p",0),n.cd(1),n.mc(),n.nc(2,"div",1),n.ic(3,"p",2),n.ic(4,"a",3),n.mc(),n.nc(5,"a",4),n.cd(6),n.mc()),2&amp;e&amp;&amp;(n.Tb(1),n.ed(" ",t.text.descriptionNewFeatures," "),n.Tb(2),n.Dc("innerHtml",t.currentNewFeatureHtml,n.Tc),n.Tb(2),n.Dc("href",t.teaserWebsiteUrl,n.Vc),n.Tb(1),n.dd(t.text.learnAbout))},styles:[".widget-box--description[_ngcontent-%COMP%]   .widget-box--teaser-image[_ngcontent-%COMP%]{background-image:var(--new-feature-teaser-image);min-width:170px;background-size:contain;background-repeat:no-repeat;background-position-x:right}"]});var bo=i("wOIT"),vo=i("yCBR");class wo{}wo.\u0275fac=function(e){return new(e||wo)},wo.\u0275cmp=n.bc({type:wo,selectors:[["global-search-work-packages-entry"]],decls:2,vars:0,consts:[["wp-isolated-query-space",""]],template:function(e,t){1&amp;e&amp;&amp;(n.lc(0,0),n.ic(1,"global-search-work-packages"),n.kc())},directives:[Ne.a,go],encapsulation:2});var yo=i("feia");class ko{constructor(e){this.elementRef=e,this.isHidden=!1}ngOnInit(){this.$element=jQuery(this.elementRef.nativeElement),this.$targetNotification=this.getTargetNotification(),this.identifier=this.$element.data("identifier"),this.isHidden="true"===window.OpenProject.guardedLocalStorage(this.identifier),this.$targetNotification.prop("hidden",!!this.isHidden),this.$element.parent().find(".persistent-toggle--click-handler").on("click",()=&gt;this.toggle(!this.isHidden)),this.$targetNotification.find(".notification-box--close").on("click",()=&gt;this.toggle(!0))}getTargetNotification(){return this.$element.parent().find(".persistent-toggle--notification")}toggle(e){this.isHidden=e,window.OpenProject.guardedLocalStorage(this.identifier,(!!e).toString()),e?this.$targetNotification.slideUp(400,()=&gt;{this.$targetNotification.prop("hidden",!0)}):(this.$targetNotification.slideDown(400),this.$targetNotification.prop("hidden",!1))}}ko.\u0275fac=function(e){return new(e||ko)(n.hc(n.q))},ko.\u0275cmp=n.bc({type:ko,selectors:[["persistent-toggle"]],decls:0,vars:0,template:function(e,t){},encapsulation:2});class Co{constructor(e){this.displayed=Object(c.f)(),this.all=[];const t=e.get("hideSections");this.all=t.all,this.displayed.putValue(t.active.map(e=&gt;(this.toggleVisibility(e.key,!0),e.key))),this.removeHiddenOnSubmit()}section(e){return document.querySelector(`section.hide-section[data-section-name="${e}"]`)}hide(e){this.displayed.doModify(t=&gt;t.filter(t=&gt;t!==e)),this.toggleVisibility(e,!1)}show(e){this.displayed.doModify(t=&gt;[...t,e]),this.toggleVisibility(e,!0)}toggleVisibility(e,t){const i=this.section(e);i&amp;&amp;(i.hidden=!t)}removeHiddenOnSubmit(){jQuery(document.body).on("submit","form",(function(e){const t=jQuery(this),i=t.find("section.hide-section:hidden");return!(!t.data("hideSectionRemoved")&amp;&amp;0!==i.length)||(t.data("hideSectionRemoved",!0),i.remove(),t.trigger("submit"),e.preventDefault(),!1)}))}}Co.\u0275fac=function(e){return new(e||Co)(n.rc(Ua.a))},Co.\u0275prov=n.dc({token:Co,factory:Co.\u0275fac,providedIn:"root"});class xo{constructor(e,t){this.elementRef=e,this.hideSectionService=t,this.displayed=!0}ngOnInit(){this.sectionName=this.elementRef.nativeElement.dataset.sectionName}hideSection(){return this.hideSectionService.hide(this.sectionName),!1}}xo.\u0275fac=function(e){return new(e||xo)(n.hc(n.q),n.hc(Co))},xo.\u0275cmp=n.bc({type:xo,selectors:[["hide-section-link"]],decls:2,vars:0,consts:[["linkTitle","Remove","linkAriaLabel","Remove",3,"execute"],["icon-classes","icon-close icon-small","icon-title","Remove"]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"accessible-by-keyboard",0),n.vc("execute",(function(){return t.hideSection()})),n.ic(1,"op-icon",1),n.mc())},directives:[vn.a,Ct.a],encapsulation:2});class jo{constructor(e,t){this.HideSectionService=e,this.elementRef=t}ngOnInit(){const e=jQuery(this.elementRef.nativeElement);this.optValue=e.data("optValue"),this.hideSecWithName=e.data("hideSecWithName"),jQuery(this.elementRef.nativeElement).prev().on("change",e=&gt;{jQuery("option:selected",e.target).val()!==this.optValue?this.HideSectionService.hide(this.hideSecWithName):this.HideSectionService.show(this.hideSecWithName)})}}jo.\u0275fac=function(e){return new(e||jo)(n.hc(Co),n.hc(n.q))},jo.\u0275cmp=n.bc({type:jo,selectors:[["show-section-dropdown"]],decls:0,vars:0,template:function(e,t){},encapsulation:2});var So=i("4EDS");const To=["fallbackOption"];function Po(e,t){if(1&amp;e&amp;&amp;n.ic(0,"option",4),2&amp;e){const e=t.$implicit;n.Dc("value",e.key)("textContent",e.label)}}class Io extends Je.a{constructor(e,t,i){super(),this.hideSectionService=e,this.elementRef=t,this.I18n=i,this.trackByKey=So.a.trackByProperty("key"),this.selectable=[],this.active=[],this.placeholder=this.I18n.t("js.placeholders.selection")}ngOnInit(){this.htmlId=this.elementRef.nativeElement.dataset.htmlId,this.hideSectionService.displayed.values$().pipe(this.untilDestroyed()).subscribe(e=&gt;{this.selectable=this.hideSectionService.all.filter(t=&gt;-1===e.indexOf(t.key)).sort((e,t)=&gt;e.label.localeCompare(t.label)),this.option.nativeElement.selected=!0})}show(e){this.hideSectionService.show(e)}}function _o(e,t){if(1&amp;e&amp;&amp;n.cd(0),2&amp;e){const e=t.item;n.ed(" ",e.label," ")}}Io.\u0275fac=function(e){return new(e||Io)(n.hc(Co),n.hc(n.q),n.hc(C.a))},Io.\u0275cmp=n.bc({type:Io,selectors:[["add-section-dropdown"]],viewQuery:function(e,t){var i;(1&amp;e&amp;&amp;n.Yc(To,!0),2&amp;e)&amp;&amp;(n.Pc(i=n.wc())&amp;&amp;(t.option=i.first))},features:[n.Qb],decls:4,vars:3,consts:[[1,"form--select",3,"id","change"],["value","","selected","","disabled","",3,"textContent"],["fallbackOption",""],[3,"value","textContent",4,"ngFor","ngForTrackByKey","ngForOf"],[3,"value","textContent"]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"select",0),n.vc("change",(function(e){return t.show(e.target.value)})),n.ic(1,"option",1,2),n.ad(3,Po,1,2,"option",3),n.mc()),2&amp;e&amp;&amp;(n.Dc("id",t.htmlId),n.Tb(1),n.Dc("textContent",t.placeholder),n.Tb(2),n.Dc("ngForOf",t.selectable))},directives:[l.r,l.B,G.p],encapsulation:2});class Oo{constructor(e){this.elementRef=e,this.multiselect=!1}ngOnInit(){const e=this.elementRef.nativeElement;this.multiselect="true"===e.dataset.multiselect,this.labelForId=e.dataset.inputId,this.syncInputFieldName=e.dataset.inputName,this.multiselect&amp;&amp;(this.syncInputFieldName+="[]");const t=JSON.parse(e.dataset.options);this.setInitialSelection(t),this.multiselect||(this.selected=this.selected[0]),this.options=t,e.parentElement.hidden=!1}setInitialSelection(e){this.updateSelection(e.filter(e=&gt;e.selected))}updateSelection(e){this.selected=e,e=_.castArray(e),this.removeCurrentSyncedFields(),e.forEach(e=&gt;{this.createSyncedField(e.value)})}createSyncedField(e){jQuery(this.elementRef.nativeElement).parent().append(`
                                                   <input "}"="" name="${this.syncInputFieldName||" type="hidden" value="${e}">
                                                    `)}removeCurrentSyncedFields(){jQuery(this.elementRef.nativeElement).parent().find(`input[name="${this.syncInputFieldName}"]`).remove()}}function Do(e,t){if(1&amp;e){const e=n.oc();n.nc(0,"li"),n.nc(1,"a",11),n.vc("click",(function(){n.Sc(e);const i=t.$implicit;return n.xc().clickTab(i.id)})),n.mc(),n.mc()}if(2&amp;e){const e=t.$implicit,i=n.xc();n.Yb("selected",e.id===i.currentTabId),n.Ub("tab-id",e.id),n.Tb(1),n.Dc("href",e.path,n.Vc)("textContent",e.name)}}Oo.\u0275fac=function(e){return new(e||Oo)(n.hc(n.q))},Oo.\u0275cmp=n.bc({type:Oo,selectors:[["autocomplete-select-decoration"]],viewQuery:function(e,t){var i;(1&amp;e&amp;&amp;n.hd(wn.a,!0),2&amp;e)&amp;&amp;(n.Pc(i=n.wc())&amp;&amp;(t.ngSelectComponent=i.first))},decls:2,vars:5,consts:[["bindLabel","label","appendTo","body","placeholder","Please select",3,"items","labelForId","multiple","virtualScroll","ngModel","ngModelChange"],["ng-option-tmp",""]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"ng-select",0),n.vc("ngModelChange",(function(e){return t.updateSelection(e)})),n.ad(1,_o,1,1,"ng-template",1),n.mc()),2&amp;e&amp;&amp;n.Dc("items",t.options)("labelForId",t.labelForId)("multiple",t.multiselect)("virtualScroll",!0)("ngModel",t.selected)},directives:[wn.a,l.m,l.p,wn.c],encapsulation:2});class Ro extends Ln.a{constructor(e,t,i,n){super(),this.elementRef=e,this.$state=t,this.gon=i,this.I18n=n,this.classes=["content--tabs","scrollable-tabs"],this.gonTabs=JSON.parse(this.gon.get("contentTabs").tabs),this.currentTab=JSON.parse(this.gon.get("contentTabs").selected),this.tabs=this.gonTabs.map(e=&gt;({id:e.name,name:this.I18n.t("js."+e.label),path:e.path})),this.currentTabId=this.currentTab.name}}Ro.\u0275fac=function(e){return new(e||Ro)(n.hc(n.q),n.hc(Ue.G),n.hc(Ua.a),n.hc(C.a))},Ro.\u0275cmp=n.bc({type:Ro,selectors:[["content-tabs"]],features:[n.Qb],decls:11,vars:4,consts:[[3,"ngClass"],["scrollContainer",""],[1,"tabrow",3,"scroll"],["scrollPane",""],[3,"selected",4,"ngFor","ngForOf"],[1,"scrollable-tabs--button","-left",3,"hidden","click"],["scrollLeftBtn",""],[1,"icon-arrow-left2"],[1,"scrollable-tabs--button","-right",3,"hidden","click"],["scrollRightBtn",""],[1,"icon-arrow-right2"],[3,"href","textContent","click"]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"div",0,1),n.nc(2,"ul",2,3),n.vc("scroll",(function(e){return t.onScroll(e)})),n.ad(4,Do,2,5,"li",4),n.mc(),n.nc(5,"div",5,6),n.vc("click",(function(){return t.scrollLeft()})),n.ic(7,"span",7),n.mc(),n.nc(8,"div",8,9),n.vc("click",(function(){return t.scrollRight()})),n.ic(10,"span",10),n.mc(),n.mc()),2&amp;e&amp;&amp;(n.Dc("ngClass",t.classes),n.Tb(4),n.Dc("ngForOf",t.tabs),n.Tb(1),n.Dc("hidden",t.hideLeftButton),n.Tb(3),n.Dc("hidden",t.hideRightButton))},directives:[G.n,G.p],encapsulation:2,changeDetection:0});class Eo{constructor(e,t,i,n){this.NotificationsService=e,this.elementRef=t,this.I18n=i,this.ConfigurationService=n}ngOnInit(){const e=this.elementRef.nativeElement;this.clickTarget=e.getAttribute("click-target"),this.clipboardTarget=e.getAttribute("clipboard-target"),jQuery(this.clickTarget).on("click",e=&gt;this.onClick(e)),e.classList.add("copy-to-clipboard"),this.target=jQuery(this.clipboardTarget?this.clipboardTarget:e)}addNotification(e,t){let i=this.NotificationsService[e](t);setTimeout(()=&gt;this.NotificationsService.remove(i),5e3)}onClick(e){var t=document.queryCommandSupported&amp;&amp;document.queryCommandSupported("copy");if(e.preventDefault(),this.target.select().focus(),t)try{if(document.execCommand("copy"))return void this.addNotification("addSuccess",this.I18n.t("js.clipboard.copied_successful"))}catch(i){console.log("Your browser seems to support the clipboard API, but copying failed: "+i)}this.addNotification("addError",this.I18n.t("js.clipboard.browser_error"))}}Eo.\u0275fac=function(e){return new(e||Eo)(n.hc(k.a),n.hc(n.q),n.hc(C.a),n.hc(Ze.a))},Eo.\u0275cmp=n.bc({type:Eo,selectors:[["copy-to-clipboard"]],decls:0,vars:0,template:function(e,t){},encapsulation:2});class Fo{constructor(e,t,i){this.element=e,this.confirmDialog=t,this.I18n=i,this.confirmed=!1,this.text={title:this.I18n.t("js.modals.form_submit.title"),text:this.I18n.t("js.modals.form_submit.text")}}ngOnInit(){this.$element=jQuery(this.element.nativeElement),this.$element.is("form")?this.$form=this.$element:this.$form=this.$element.closest("form"),this.$form.on("submit",e=&gt;!!this.confirmed||(e.preventDefault(),this.openConfirmationDialog(),!1))}openConfirmationDialog(){this.confirmDialog.confirm({text:this.text,closeByEscape:!0,showClose:!0,closeByDocument:!0}).then(()=&gt;{this.confirmed=!0,this.$form.trigger("submit")}).catch(()=&gt;this.confirmed=!1)}}Fo.\u0275fac=function(e){return new(e||Fo)(n.hc(n.q),n.hc(g.a),n.hc(C.a))},Fo.\u0275cmp=n.bc({type:Fo,selectors:[["confirm-form-submit"]],decls:0,vars:0,template:function(e,t){},encapsulation:2});var Mo=i("Sulb");const Ao=function(e){return{open:e}};class Lo extends Je.a{constructor(e,t,i){super(),this.toggleService=e,this.cdRef=t,this.elementRef=i,this.mainMenu=jQuery("#main-menu")[0],this.moving=!1}ngOnInit(){this.toggleService.titleData$.pipe(Object(mr.a)(),this.untilDestroyed()).subscribe(e=&gt;{this.toggleTitle=e,this.cdRef.detectChanges()}),this.resizeEvent="main-menu-resize",this.localStorageKey="openProject-mainMenuWidth"}resizeStart(){this.elementWidth=this.mainMenu.clientWidth}resizeMove(e){this.toggleService.saveWidth(this.elementWidth+e.absolute.x)}resizeEnd(){const e=new Event(this.resizeEvent);window.dispatchEvent(e)}}Lo.\u0275fac=function(e){return new(e||Lo)(n.hc(Mo.a),n.hc(n.i),n.hc(n.q))},Lo.\u0275cmp=n.bc({type:Lo,selectors:[["main-menu-resizer"]],features:[n.Qb],decls:4,vars:6,consts:[[1,"main-menu--resizer",3,"customHandler","cursorClass","end","start","move"],[1,"resizer-toggle-container"],[1,"main-menu--navigation-toggler",3,"ngClass","accessibleClick"],["aria-hidden","true",1,"icon-resizer-vertical-lines"]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"resizer",0),n.vc("end",(function(){return t.resizeEnd()}))("start",(function(){return t.resizeStart()}))("move",(function(e){return t.resizeMove(e)})),n.nc(1,"div",1),n.nc(2,"i",2),n.vc("accessibleClick",(function(e){return t.toggleService.toggleNavigation(e)})),n.mc(),n.ic(3,"i",3),n.mc(),n.mc()),2&amp;e&amp;&amp;(n.Dc("customHandler",!0)("cursorClass","col-resize"),n.Tb(2),n.Dc("ngClass",n.Ic(4,Ao,t.toggleService.showNavigation)),n.Ub("title",t.toggleTitle))},directives:[Rn.a,G.n,fn.a],encapsulation:2});var qo=i("C21z"),$o=i("K247"),Vo=i("LRne"),No=i("yrbL"),Ho=i("iuWW"),zo=i("13ri");const Bo=["btn"];function Qo(e,t){if(1&amp;e){const e=n.oc();n.nc(0,"a",8),n.vc("click",(function(){return n.Sc(e),n.xc().toggleMobileSearch()})),n.ic(1,"i",9),n.mc()}if(2&amp;e){const e=n.xc();n.Ec("title",e.text.close_search)}}function Wo(e,t){if(1&amp;e){const e=n.oc();n.nc(0,"div"),n.nc(1,"div",12),n.vc("click",(function(){n.Sc(e);const t=n.xc().item;return n.xc().followItem(t)})),n.nc(2,"div",13),n.nc(3,"span",14),n.cd(4),n.mc(),n.nc(5,"span",15),n.cd(6),n.mc(),n.mc(),n.mc(),n.mc()}if(2&amp;e){const e=n.xc().item,t=n.xc();n.Tb(4),n.ed(" ",t.currentValue," "),n.Tb(1),n.Ec("title",e.projectScope),n.Tb(1),n.ed(" ",e.text," \u21b5 ")}}function Uo(e,t){if(1&amp;e){const e=n.oc();n.nc(0,"div",12),n.vc("click",(function(t){n.Sc(e);const i=n.xc().item;return n.xc().redirectToWp(i.id,t)})),n.nc(1,"a",16),n.nc(2,"span",17),n.cd(3),n.mc(),n.nc(4,"span",18),n.cd(5),n.mc(),n.mc(),n.mc()}if(2&amp;e){const e=n.xc().item,t=n.xc();n.Tb(1),n.Dc("href",t.wpPath(e.id),n.Vc),n.Tb(1),n.Ec("title",e.status),n.Dc("ngOptionHighlight",t.currentValue)("ngClass",t.statusHighlighting(e.statusId)),n.Tb(1),n.ed(" #",e.id," "),n.Tb(1),n.Dc("ngOptionHighlight",t.currentValue),n.Tb(1),n.ed(" ",e.subject," ")}}function Xo(e,t){if(1&amp;e&amp;&amp;(n.ad(0,Wo,7,3,"div",10),n.ad(1,Uo,6,7,"ng-template",null,11,n.bd)),2&amp;e){const e=t.item,i=n.Qc(2);n.Dc("ngIf",!e.id)("ngIfElse",i)}}const Yo=function(e){return{"top-menu-search--input":!0,"-markable":e}};class Go{constructor(e,t,i,n,s,a,r,o,c){this.elementRef=e,this.I18n=t,this.PathHelperService=i,this.halResourceService=n,this.globalSearchService=s,this.currentProjectService=a,this.deviceService=r,this.cdRef=o,this.halNotification=c,this.expanded=!1,this.markable=!1,this.requests=new Ho.a(e=&gt;this.autocompleteWorkPackages(e).pipe(Object(No.tap)(()=&gt;{setTimeout(()=&gt;this.setMarkedOption(),50)})),Object(Ho.b)(this.halNotification)),this.currentValue="",this.text={all_projects:this.I18n.t("js.global_search.all_projects"),current_project:this.I18n.t("js.global_search.current_project"),current_project_and_all_descendants:this.I18n.t("js.global_search.current_project_and_all_descendants"),search:this.I18n.t("js.global_search.search"),search_dots:this.I18n.t("js.global_search.search")+" ...",close_search:this.I18n.t("js.global_search.close_search")}}ngOnInit(){this.ngSelectComponent.searchTerm=this.currentValue=this.globalSearchService.searchTerm,this.expanded=this.ngSelectComponent.searchTerm.length&gt;0,this.toggleTopMenuClass()}ngOnDestroy(){this.unregister()}handleClick(e){e.stopPropagation(),e.preventDefault(),qo.a.insideOrSelf(this.btn.nativeElement,e.target)&amp;&amp;(this.deviceService.isMobile?(this.toggleMobileSearch(),jQuery(".ng-input input").focus()):0===this.ngSelectComponent.searchTerm.length?this.ngSelectComponent.focus():this.submitNonEmptySearch())}toggleMobileSearch(){this.expanded=!this.expanded,this.toggleTopMenuClass()}redirectToWp(e,t){return t.stopImmediatePropagation(),!!zo.a.isClickedWithModifier(t)||(window.location.href=this.wpPath(e),t.preventDefault(),!1)}wpPath(e){return this.PathHelperService.workPackagePath(e)}search(e){this.currentValue=this.ngSelectComponent.searchTerm,this.openCloseMenu(e.term)}openCloseMenu(e){this.ngSelectComponent.isOpen=e.trim().length&gt;0}onFocus(){this.expanded=!0,this.toggleTopMenuClass(),this.openCloseMenu(this.currentValue)}onFocusOut(){this.deviceService.isMobile||(this.expanded=this.ngSelectComponent.searchTerm.length&gt;0,this.ngSelectComponent.isOpen=!1,this.toggleTopMenuClass())}clearSearch(){this.currentValue=this.ngSelectComponent.searchTerm="",this.openCloseMenu(this.currentValue)}onEnterBeforeResultsLoaded(){this.requests.loading$.pipe(Object(No.filter)(e=&gt;!1===e),Object(No.take)(1)).subscribe(()=&gt;{this.selectedItem?this.followSelectedItem():this.searchInScope(this.currentScope)})}statusHighlighting(e){return oo.a.inlineClass("status",e)}get isDirectHit(){return this.selectedItem&amp;&amp;this.selectedItem.hasOwnProperty("id")}followItem(e){e.hasOwnProperty("id")?window.location.href=this.wpPath(e.id):(this.globalSearchService.searchTerm=this.currentValue,this.searchInScope(e.projectScope))}followSelectedItem(){this.selectedItem&amp;&amp;this.followItem(this.selectedItem)}customSearchFn(e,t){return void 0===t.id||-1!==t.subject.toLowerCase().indexOf(e.toLowerCase())}autocompleteWorkPackages(e){if(!e)return Object(Vo.a)([]);this.selectedItem=null,this.markable=!1;let t=this.queryWithoutHash(e);return this.fetchSearchResults(t,t!==e).pipe(Object(No.map)(e=&gt;this.searchResultsToOptions(e.elements,t)))}queryWithoutHash(e){return e.match(/^#(\d+)/)?e.substr(1):e}fetchSearchResults(e,t){let i=this.PathHelperService.api.v3.wpBySubjectOrId(e,t);return this.halResourceService.get(i)}searchResultsToOptions(e,t){let i=e.map(e=&gt;{let i={id:e.id,subject:e.subject,status:e.status.name,statusId:e.status.idFromLink,$href:e.$href};return t===e.id.toString()&amp;&amp;(this.selectedItem=i),i}),n=this.detailedSearchOptions();return this.selectedItem||(this.selectedItem=n[0]),n.concat(i)}detailedSearchOptions(){let e=[];return this.currentProjectService.path&amp;&amp;(e.push("current_project_and_all_descendants"),e.push("current_project")),"current_project"===this.globalSearchService.projectScope&amp;&amp;e.reverse(),e.push("all_projects"),e.map(e=&gt;({projectScope:e,text:this.text[e]}))}setMarkedOption(){this.markable=!0,this.ngSelectComponent.itemsList.markItem(this.ngSelectComponent.itemsList.selectedItems[0]),this.cdRef.detectChanges()}searchInScope(e){switch(e){case"all_projects":{let e=!1;"all"!==this.globalSearchService.projectScope&amp;&amp;(e=!0,this.globalSearchService.resultsHidden=!0),this.globalSearchService.projectScope="all",this.submitNonEmptySearch(e);break}case"current_project":this.globalSearchService.projectScope="current_project",this.submitNonEmptySearch();break;case"current_project_and_all_descendants":this.globalSearchService.projectScope="",this.submitNonEmptySearch()}}submitNonEmptySearch(e=!1){if(this.globalSearchService.searchTerm=this.currentValue,this.currentValue.length&gt;0){if(this.ngSelectComponent.close(),!e&amp;&amp;this.globalSearchService.isAfterSearch()&amp;&amp;"work_packages"===this.globalSearchService.currentTab)return void window.history.replaceState({},`${I18n.t("global_search.search")}: ${this.ngSelectComponent.searchTerm}`,this.globalSearchService.searchPath());this.globalSearchService.submitSearch()}}blur(){this.ngSelectComponent.searchTerm="",document.activeElement.blur()}get currentScope(){let e=this.globalSearchService.projectScope;return""===e?"current_project_and_all_descendants":e}unregister(){this.unregisterGlobalListener&amp;&amp;(this.unregisterGlobalListener(),this.unregisterGlobalListener=void 0)}toggleTopMenuClass(){jQuery("#top-menu").toggleClass("-global-search-expanded",this.expanded)}}Go.\u0275fac=function(e){return new(e||Go)(n.hc(n.q),n.hc(C.a),n.hc(z.a),n.hc(x.a),n.hc(Na),n.hc(Se.a),n.hc($o.a),n.hc(n.i),n.hc(de.a))},Go.\u0275cmp=n.bc({type:Go,selectors:[["global-search-input"]],viewQuery:function(e,t){var i;(1&amp;e&amp;&amp;(n.Yc(Bo,!0),n.Yc(wn.a,!0)),2&amp;e)&amp;&amp;(n.Pc(i=n.wc())&amp;&amp;(t.btn=i.first),n.Pc(i=n.wc())&amp;&amp;(t.ngSelectComponent=i.first))},hostBindings:function(e,t){1&amp;e&amp;&amp;n.vc("click",(function(e){return t.handleClick(e)}))},decls:10,vars:20,consts:[[1,"top-menu-search"],["class","top-menu-search--back-button","href","#",3,"title","click",4,"ngIf"],["name","global-search-input","id","global-search-input","accesskey","4",3,"items","placeholder","ngClass","ngModel","openOnEnter","searchFn","typeahead","loading","ngModelChange","focus","blur","search","open","close","change","keydown.enter","keydown.escape","clear"],["select",""],["ng-option-tmp",""],["id","top-menu-search-button","tabindex","0","role","button",1,"top-menu-search--button","search-form-normal",3,"title","accessibleClick"],["btn",""],["icon-classes","icon5 icon-search ellipsis"],["href","#",1,"top-menu-search--back-button",3,"title","click"],["aria-hidden","true",1,"icon-arrow-left1"],[4,"ngIf","ngIfElse"],["workPackageItemTemplate",""],["tabindex","-1",1,"global-search--option",3,"click"],[1,"global-search--option-wrapper"],[1,"global-search--search-term"],[1,"global-search--project-scope",3,"title"],[1,"global-search--option-wrapper",3,"href"],[1,"global-search--wp-id",3,"title","ngOptionHighlight","ngClass"],[1,"global-search--wp-subject",3,"ngOptionHighlight"]],template:function(e,t){if(1&amp;e){const e=n.oc();n.nc(0,"div",0),n.ad(1,Qo,2,1,"a",1),n.nc(2,"ng-select",2,3),n.vc("ngModelChange",(function(e){return t.selectedItem=e}))("focus",(function(){return t.onFocus()}))("blur",(function(){return t.onFocusOut()}))("search",(function(e){return t.search(e)}))("open",(function(){return t.openCloseMenu(t.currentValue)}))("close",(function(){return n.Sc(e),n.Qc(3).searchTerm=t.currentValue}))("change",(function(){return t.followSelectedItem()}))("keydown.enter",(function(){return t.onEnterBeforeResultsLoaded()}))("keydown.escape",(function(){return t.blur()}))("clear",(function(){return t.clearSearch()})),n.yc(4,"async"),n.yc(5,"async"),n.ad(6,Xo,3,2,"ng-template",4),n.mc(),n.nc(7,"a",5,6),n.vc("accessibleClick",(function(e){return t.handleClick(e)})),n.ic(9,"op-icon",7),n.mc(),n.mc()}2&amp;e&amp;&amp;(n.Tb(1),n.Dc("ngIf",t.expanded),n.Tb(1),n.Yb("-expanded",t.expanded),n.Ec("placeholder",t.text.search_dots),n.Dc("items",n.zc(4,14,t.requests.output$))("ngClass",n.Ic(18,Yo,t.markable))("ngModel",t.selectedItem)("openOnEnter",!1)("searchFn",t.customSearchFn)("typeahead",t.requests.input$)("loading",n.zc(5,16,t.requests.loading$)),n.Tb(5),n.Yb("-input-focused",t.expanded),n.Ec("title",t.text.search))},directives:[G.q,wn.a,G.n,l.m,l.p,Tn.a,wn.c,fn.a,Ct.a,yn.a],pipes:[G.a],styles:[".cdk-drag-preview{box-shadow:0 0 10px 5px rgba(0,0,0,.1);z-index:10000!important}.top-menu-search{display:flex;align-items:center;position:relative;height:var(--header-height);line-height:var(--header-height);margin:0 15px}.top-menu-search .top-menu-search--back-button{display:none}.top-menu-search .top-menu-search--button{position:absolute;right:2px;font-size:var(--header-item-font-size);color:var(--header-item-font-color)}.top-menu-search .top-menu-search--button:hover{text-decoration:none}.top-menu-search .top-menu-search--button.-input-focused{color:var(--header-search-field-font-color)}.top-menu-search .top-menu-search--loading{top:var(--header-height)-11px;height:46px;z-index:1051}.top-menu-search #global-search-input{width:calc(160px + 3vw);font-size:.9rem;transition:width .2s ease-in-out}.top-menu-search #global-search-input::-ms-clear{margin-right:5px;width:20px}.top-menu-search #global-search-input .ng-select-container{background:transparent;border-color:var(--header-item-font-color)}.top-menu-search #global-search-input .ng-arrow-wrapper{display:none}.top-menu-search #global-search-input .ng-clear-wrapper{color:var(--header-item-font-color);top:1px;width:30px;right:25px;text-align:center}.top-menu-search #global-search-input .ng-input{top:0}.top-menu-search #global-search-input .ng-input input{color:var(--header-item-font-color);height:30px;cursor:text}.top-menu-search #global-search-input .ng-placeholder{color:var(--header-item-font-color)}.top-menu-search #global-search-input.-expanded{width:calc(160px + 13vw);background:#fff;border-radius:4px;color:var(--header-search-field-font-color)}.top-menu-search #global-search-input.-expanded .ng-clear-wrapper,.top-menu-search #global-search-input.-expanded .ng-placeholder,.top-menu-search #global-search-input.-expanded input{color:var(--header-search-field-font-color)}.top-menu-search #global-search-input .scroll-host{scrollbar-color:transparent transparent;scrollbar-width:thin;max-height:80vh;height:auto}.top-menu-search #global-search-input .scroll-host::-webkit-scrollbar{height:10px;width:10px}.top-menu-search #global-search-input .scroll-host::-webkit-scrollbar-track{background:transparent}.top-menu-search #global-search-input .scroll-host::-webkit-scrollbar-thumb{background:#ddd;visibility:hidden}.top-menu-search #global-search-input .scroll-host:hover{scrollbar-color:#ddd transparent}.top-menu-search #global-search-input .scroll-host:hover::-webkit-scrollbar-thumb{visibility:visible}.top-menu-search #global-search-input .ng-option{border-bottom:1px solid #eaeaea;white-space:normal;padding:5px 10px;background-color:unset}.top-menu-search #global-search-input .ng-option:last-child{border-bottom:none}.top-menu-search #global-search-input .ng-option.ng-option-marked{color:var(--header-drop-down-item-font-hover-color)}.top-menu-search #global-search-input .ng-option.ng-option-disabled{display:none}.top-menu-search #global-search-input .ng-option.ng-option-selected{color:var(--header-drop-down-item-font-hover-color)}.top-menu-search #global-search-input.-markable .ng-option.ng-option-marked{background-color:var(--drop-down-hover-bg-color)}.top-menu-search #global-search-input.-markable .ng-option.ng-option-selected{background-color:var(--drop-down-selected-bg-color)}.global-search--wp-id{color:var(--gray-dark);font-size:13px;white-space:nowrap}.top-menu-search--input .ng-spinner-loader{position:relative;right:14px}.global-search--option-wrapper{padding:5px;line-height:25px;min-height:35px;word-break:break-word}.global-search--project-scope{position:absolute;right:7px;border:1px solid var(--button--border-color);font-size:13px;background:var(--button--background-color);border-radius:2px;padding:0 4px;color:var(--body-font-color)}",".cdk-drag-preview{box-shadow:0 0 10px 5px rgba(0,0,0,.1);z-index:10000!important}@media only screen and (max-width:679px){#top-menu.-global-search-expanded #account-nav-left,#top-menu.-global-search-expanded #account-nav-right,#top-menu.-global-search-expanded #main-menu-toggle{display:none}#top-menu.-global-search-expanded .top-menu-search{width:100vw;margin:0;padding-right:15px}#top-menu.-global-search-expanded .top-menu-search .top-menu-search--button{display:none;color:var(--header-item-font-color)}#top-menu #global-search-input{display:none}#top-menu #global-search-input.-expanded{display:block;width:calc(100vw - 50px);min-width:unset;position:unset}#top-menu #global-search-input.-expanded .scroll-host{max-height:calc(100vh - var(--header-height))}#top-menu #global-search-input.-expanded .ng-clear-wrapper{width:40px;right:0}#top-menu #global-search-input.-expanded .ng-select-bottom{height:calc(100vh - var(--header-height));overflow-y:auto;margin:0}#top-menu #global-search-input.-expanded .ng-select-container{height:36px!important;border-radius:4px}#top-menu #global-search-input.-expanded .ng-input input{height:36px}#top-menu .top-menu-search--back-button{display:initial;width:50px;text-align:center;color:var(--header-item-font-color)}#top-menu .top-menu-search--back-button:active,#top-menu .top-menu-search--back-button:focus,#top-menu .top-menu-search--back-button:hover{text-decoration:none}#top-menu .top-menu-search--loading{top:var(--header-height)1px}#top-menu .top-menu-search--button.-input-focused{color:var(--header-item-font-color)}}"],encapsulation:2,changeDetection:0});const Ko=["sectionBody"],Zo=function(e){return{"-expanded":e}};class Jo{constructor(e){this.elementRef=e,this.expanded=!1}ngOnInit(){const e=this.elementRef.nativeElement;this.sectionTitle=e.getAttribute("section-title"),"true"===e.getAttribute("initially-expanded")&amp;&amp;(this.expanded=!0);const t=e.nextElementSibling;this.sectionBody.nativeElement.appendChild(t),t.removeAttribute("hidden")}toggle(){this.expanded=!this.expanded}}Jo.\u0275fac=function(e){return new(e||Jo)(n.hc(n.q))},Jo.\u0275cmp=n.bc({type:Jo,selectors:[["collapsible-section-augment"]],viewQuery:function(e,t){var i;(1&amp;e&amp;&amp;n.Yc(Ko,!0),2&amp;e)&amp;&amp;(n.Pc(i=n.wc())&amp;&amp;(t.sectionBody=i.first))},decls:5,vars:6,consts:[[1,"collapsible-section",3,"ngClass"],["linkClass","collapsible-section--toggle-link","spanClass","collapsible-section--legend",3,"linkAriaLabel","execute"],[3,"textContent"],[1,"collapsible-section--body","toggle-slide-animation",3,"hidden"],["sectionBody",""]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"section",0),n.nc(1,"accessible-by-keyboard",1),n.vc("execute",(function(){return t.toggle()})),n.ic(2,"span",2),n.mc(),n.ic(3,"div",3,4),n.mc()),2&amp;e&amp;&amp;(n.Dc("ngClass",n.Ic(4,Zo,t.expanded)),n.Tb(1),n.Dc("linkAriaLabel",t.sectionTitle),n.Tb(1),n.Dc("textContent",t.sectionTitle),n.Tb(1),n.Dc("hidden",!t.expanded))},directives:[G.n,vn.a],encapsulation:2});class ec{constructor(e,t){this.elementRef=e,this.i18n=t}ngOnInit(){let e=jQuery(this.elementRef.nativeElement);this.textMessage=e.attr("text-message"),this.linkMessage=e.attr("link-message")||this.i18n.t("js.work_packages.table_configuration.upsale.check_out_link"),this.referrer=e.attr("referrer")}}ec.\u0275fac=function(e){return new(e||ec)(n.hc(n.q),n.hc(C.a))},ec.\u0275cmp=n.bc({type:ec,selectors:[["enterprise-banner-bootstrap"]],decls:1,vars:3,consts:[[3,"textMessage","linkMessage","opReferrer"]],template:function(e,t){1&amp;e&amp;&amp;n.ic(0,"enterprise-banner",0),2&amp;e&amp;&amp;n.Dc("textMessage",t.textMessage)("linkMessage",t.linkMessage)("opReferrer",t.referrer)},directives:[qn.a],encapsulation:2});var tc,ic=i("/+cc");!function(e){e.register=function(e,t){jQuery.widget(`custom.${e}`,jQuery.ui.autocomplete,{_create:function(){t.currentPage=0,this._super(),this.widget().menu("option","items","&gt; .ui-matched-item"),this._search("")},_renderMenu:function(e,t){jQuery(e).unbind("scroll"),this._renderLazyMenu(e,t)},_renderMenuPage(e,i,n=null){let s=this,a=i.length,r=i,o=t.maxItemsPerPage;if(null!==n&amp;&amp;(r=i.slice(n*o,n*o+o),a=Math.min(i.length,n*o+o)),jQuery.each(r,(function(t,i){s._renderItemData(e,i)})),e.css("height","auto"),a
                                                    <i.length){const t='32*a;t&lt;.55*document.body.offsetHeight&amp;&amp;e.css("height",t-50)}},_pages:e='>
                                                     Math.ceil(e.length/t.maxItemsPerPage),_repositionMenu:function(e){const t=this.menu;t.refresh(),this._resizeMenu(),e.position(jQuery.extend({of:this.element},this.options.position)),this.options.autoFocus&amp;&amp;t.next(new jQuery.Event("mouseover"))},_resizeMenu:function(){this.menu.element.outerWidth(this.element.outerWidth())},_renderItem:function(e,i){const n=this.element.val(),s="disabled"===i.render,a=jQuery("
                                                     <div>
                                                      ").addClass("ui-menu-item-wrapper");t.renderItem(i,a);const r=jQuery("
                                                      <li>
                                                       ").toggleClass("ui-state-disabled",s).toggleClass("ui-matched-item",!s).append(a).appendTo(e);return""!==n&amp;&amp;r.mark(n,{className:"ui-autocomplete-match"}),r},_renderLazyMenu:function(e,i){const n=this,s=jQuery(e),a=this._pages(i);if(a&lt;=1)return n._renderMenuPage(e,i);n._renderMenuPage(e,i,0),s.scroll((function(){if(function(e){var t=e.outerHeight(),i=e[0].scrollHeight;return e.scrollTop()&gt;=i-t}(s)){if(++t.currentPage&gt;=a)return;n._renderMenuPage(e,i,t.currentPage),n._repositionMenu(e)}}))}})}}(tc||(tc={}));var nc=i("E5Dd");class sc extends class{constructor(e){this.widgetName=e,tc.register(e,this)}renderItem(e,t){t.text(e.label)}fuzzySearch(e,t){if(""===t)return e;if(t.length&gt;=3){const i=this.literalSearch(e,t);if(i.length&gt;0)return i}return this.fuseInstance.search(t)}literalSearch(e,t){const i=[],n=t.toLowerCase();return e.forEach(e=&gt;{-1!==e.label.toLowerCase().indexOf(n)&amp;&amp;i.push(e)}),i}augmentedResultSet(e,t){const i=[];return t.forEach(e=&gt;{i.push({label:e.label,object:e.object,render:"match"})}),i}setup(e,t){this.currentPage=0,this.input=e,this.input[this.widgetName].call(this.input,this.setupParams(t));this.fuseInstance=new ic(t,{shouldSort:!0,tokenize:!1,threshold:.2,location:0,distance:1e4,maxPatternLength:16,minMatchCharLength:2,keys:["label"]})}setupParams(e){const t=this;return{delay:50,source:function(i,n){const s=t.fuzzySearch(e,i.term);n(t.augmentedResultSet(e,s))},select:(e,i)=&gt;{"match"===i.item.render&amp;&amp;t.onItemSelected(i.item.object)},create:()=&gt;t.input.focus(),response:(e,i)=&gt;{t.onNoResultsFound(e,i)},autoFocus:!0,minLength:0}}}{constructor(e,t,i,n,s,a){super("projectMenuAutocomplete"),this.PathHelper=e,this.elementRef=t,this.http=i,this.cdRef=n,this.I18n=s,this.currentProject=a,this.results=null,this.loaded=!1,this.text={label:s.t("js.projects.autocompleter.label"),no_results:s.t("js.notice_no_principals_found"),loading:s.t("js.ajax.loading")}}ngOnInit(){this.$element=jQuery(this.elementRef.nativeElement),this.dropdownMenu=this.$element.parents("li.drop-down"),this.input=this.$element.find(".project-menu-autocomplete--input"),this.noResults=this.$element.find(".project-menu-autocomplete--no-results"),this.dropdownMenu.on("opened",()=&gt;this.open()),this.dropdownMenu.on("closed",()=&gt;this.close())}close(){try{this.input.projectMenuAutocomplete("destroy")}catch(e){console.warn("Failed to destroy autocomplete: %O",e)}this.$element.find(".project-search-results").css("visibility","hidden")}open(){this.$element.find(".project-search-results").css("visibility","visible"),this.loadProjects().then(e=&gt;{let t=_.map(e,e=&gt;({label:e.name,render:"match",object:e}));this.setup(this.input,t),this.addInputHandlers(),this.addClickHandler(),this.loaded=!0,this.cdRef.detectChanges(),this.scrollCurrentProjectIntoView()})}get maxItemsPerPage(){return 250}onItemSelected(e){window.location.href=this.projectLink(e.identifier)}onNoResultsFound(e,t){this.noResults.toggle(0===t.content.length)}renderItem(e,t){const i=jQuery("
                                                       <a>
                                                        ").attr("href",this.projectLink(e.object.identifier)).text(e.label).appendTo(t);e.object.level&gt;0&amp;&amp;i.text(`\xbb ${e.label}`).css("padding-left",4+16*e.object.level+"px"),e.object.identifier===this.currentProject.identifier&amp;&amp;t.addClass("selected")}projectLink(e){const t=jQuery('meta[name="current_menu_item"]').attr("content");let i=this.PathHelper.projectPath(e);return t&amp;&amp;(i+="?jump="+encodeURIComponent(t)),i}get loadingText(){return this.loaded?"":this.text.loading}loadProjects(){if(null!==this.results)return Promise.resolve(this.results);const e=this.PathHelper.projectLevelListPath();return this.http.get(e).toPromise().then(e=&gt;this.results=this.augmentWithParents(e.projects))}augmentWithParents(e){const t=[];let i=-1;return e.map(e=&gt;{for(;i&gt;=e.level;)t.pop(),i--;return t.push(e),i=e.level,e.parents=t.slice(0,-1),e})}augmentedResultSet(e,t){const i=t.map(e=&gt;e.object.identifier),n=_.flatten(t.map(e=&gt;e.object.parents)),s=[];return e.forEach(e=&gt;{const t=e.object.identifier;let a;if(i.indexOf(t)&gt;=0)a="match";else{if(!_.find(n,e=&gt;e.identifier===t))return;a="disabled"}s.push({label:e.label,object:e.object,render:a})}),s}addInputHandlers(){this.input.off("blur"),this.input.keydown(e=&gt;e.which!==nc.a.ESCAPE||(this.input.val(""),this.input[this.widgetName].call(this.input,"search",""),!1))}addClickHandler(){var e=!1;this.$element.find(".project-menu-autocomplete--results").on("click",".ui-menu-item a",e=&gt;(zo.a.isClickedWithModifier(e)&amp;&amp;e.stopImmediatePropagation(),!0)).on("touchend",".ui-menu-item a",(function(t){e||(window.location.href=t.target.href)})).on("touchmove",".ui-menu-item a",(function(){e=!0})).on("touchstart",".ui-menu-item a",(function(){e=!1}))}setupParams(e){const t=super.setupParams(e);return t.appendTo=".project-menu-autocomplete--wrapper",t.classes={"ui-autocomplete":"-inplace project-menu-autocomplete--results"},t.position={of:".project-menu-autocomplete--input-container"},t}scrollCurrentProjectIntoView(){let e=document.querySelector(".ui-menu-item-wrapper.selected");if(!e)return;let t=e.offsetHeight,i=document.getElementsByClassName("project-menu-autocomplete--results")[0],n=e.offsetTop-i.offsetHeight/2+t/2;i.scrollTop=n%t==0?n:n-n%t}}sc.\u0275fac=function(e){return new(e||sc)(n.hc(z.a),n.hc(n.q),n.hc(ue.b),n.hc(n.i),n.hc(C.a),n.hc(Se.a))},sc.\u0275cmp=n.bc({type:sc,selectors:[["project-menu-autocomplete"]],features:[n.Qb],decls:7,vars:3,consts:[["id","project_autocompletion_wrapper",1,"dropdown","dropdown-relative","project-search-results"],[1,"project-menu-autocomplete--wrapper"],[1,"project-menu-autocomplete--input-container"],["for","project_autocompletion_input",1,"hidden-for-sighted",3,"textContent"],["type","text","id","project_autocompletion_input","name","project_autocompletion_input",1,"ui-autocomplete--input","project-menu-autocomplete--input"],[1,"project-menu-autocomplete--search-icon","icon-search"],["hidden","",1,"project-menu-autocomplete--no-results",3,"textContent"]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"div",0),n.nc(1,"div",1),n.nc(2,"div",2),n.ic(3,"label",3),n.ic(4,"input",4),n.ic(5,"i",5),n.mc(),n.ic(6,"p",6),n.mc(),n.mc()),2&amp;e&amp;&amp;(n.Tb(3),n.Dc("textContent",t.text.label),n.Tb(1),n.Ub("placeholder",t.loadingText),n.Tb(2),n.Dc("textContent",t.text.no_results))},encapsulation:2,changeDetection:0});class ac{constructor(e,t){this.elementRef=e,this.http=t}ngOnInit(){const e=jQuery(this.elementRef.nativeElement),t=e.parent();this.inputs=t.find(".remote-field--input"),this.target=t.find(".remote-field--target"),this.url=e.data("url"),this.htmlMode="html"===e.data("mode"),this.inputs.on("keyup change",_.debounce(e=&gt;{let t=[nc.a.TAB,nc.a.ENTER,nc.a.SHIFT];("change"===e.type||e.which&amp;&amp;-1===t.indexOf(e.which))&amp;&amp;this.updater()},500))}request(e){const t={};return this.htmlMode?t.Accept="text/html":t.Accept="application/json",this.http.get(this.url,{params:e,headers:t,responseType:this.htmlMode?"text":"json",withCredentials:!0})}updater(){let e={};this.inputs.each((t,i)=&gt;{e[i.dataset.remoteFieldKey]=i.value}),this.request(e).subscribe(e=&gt;{this.htmlMode?this.target.html(e):_.each(e,(e,t)=&gt;{jQuery("#"+t).html(e)})})}}ac.\u0275fac=function(e){return new(e||ac)(n.hc(n.q),n.hc(ue.b))},ac.\u0275cmp=n.bc({type:ac,selectors:[["remote-field-updater"]],decls:0,vars:0,template:function(e,t){},encapsulation:2});var rc=i("5gqY");class oc extends Je.a{constructor(e,t,i,n,s){super(),this.elementRef=e,this.cdRef=t,this.globalSearchService=i,this.I18n=n,this.injector=s,this.text={all_projects:this.I18n.t("js.global_search.title.all_projects"),project_and_subprojects:this.I18n.t("js.global_search.title.project_and_subprojects"),search_for:this.I18n.t("js.global_search.title.search_for"),in:this.I18n.t("js.label_in")}}ngOnInit(){Object(po.a)([this.globalSearchService.searchTerm$,this.globalSearchService.projectScope$]).pipe(Object(mr.a)(),this.untilDestroyed()).subscribe(([e,t])=&gt;{this.searchTerm=e,this.project=this.projectText(t),this.searchTitle=`${this.text.search_for} ${this.searchTerm} ${""===this.project?"":this.text.in} ${this.project}`,this.cdRef.detectChanges()})}projectText(e){let t=this.currentProjectService.name?this.currentProjectService.name:"";switch(e){case"all":return this.text.all_projects;case"current_project":return t;case"":return t+" "+this.text.project_and_subprojects;default:return""}}}function cc(e,t){if(1&amp;e){const e=n.oc();n.nc(0,"li"),n.nc(1,"a",11),n.vc("click",(function(){n.Sc(e);const i=t.$implicit;return n.xc().clickTab(i.id)})),n.mc(),n.mc()}if(2&amp;e){const e=t.$implicit,i=n.xc();n.Yb("selected",e.id===i.currentTabId),n.Ub("tab-id",e.id),n.Tb(1),n.Dc("href",e.path,n.Vc)("textContent",e.name)}}oc.\u0275fac=function(e){return new(e||oc)(n.hc(n.q),n.hc(n.i),n.hc(Na),n.hc(C.a),n.hc(n.A))},oc.\u0275cmp=n.bc({type:oc,selectors:[["global-search-title"]],inputs:{searchTerm:"searchTerm",project:"project",projectScope:"projectScope",searchTitle:"searchTitle"},features:[n.Qb],decls:11,vars:5,consts:[[1,"toolbar-container"],[1,"toolbar"],[1,"title-container"],[1,"toolbar-items"]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"div",0),n.nc(1,"div",1),n.nc(2,"div",2),n.nc(3,"h2"),n.cd(4),n.nc(5,"i"),n.cd(6),n.mc(),n.cd(7),n.nc(8,"i"),n.cd(9),n.mc(),n.mc(),n.ic(10,"ul",3),n.mc(),n.mc(),n.mc()),2&amp;e&amp;&amp;(n.Tb(3),n.Ub("title",t.searchTitle),n.Tb(1),n.ed(" ",t.text.search_for," "),n.Tb(2),n.ed('"',t.searchTerm,'"'),n.Tb(1),n.ed(" ",""===t.project?"":t.text.in," "),n.Tb(2),n.dd(t.project))},encapsulation:2}),Object(y.c)([Object(W.a)(),Object(y.e)("design:type",Se.a)],oc.prototype,"currentProjectService",void 0);class lc extends Ln.a{constructor(e){super(),this.globalSearchService=e,this.classes=["global-search--tabs","scrollable-tabs"]}ngOnInit(){this.currentTabSub=this.globalSearchService.currentTab$.subscribe(e=&gt;{this.currentTabId=e}),this.tabsSub=this.globalSearchService.tabs$.subscribe(e=&gt;{this.tabs=e,this.tabs.map(e=&gt;e.path="#")})}clickTab(e){super.clickTab(e),this.globalSearchService.currentTab=e,this.globalSearchService.submitSearch()}ngOnDestroy(){this.currentTabSub.unsubscribe(),this.tabsSub.unsubscribe()}}function dc(e,t){if(1&amp;e){const e=n.oc();n.nc(0,"div",1),n.vc("accessibleClick",(function(t){return n.Sc(e),n.xc().toggleService.toggleNavigation(t)})),n.nc(1,"a",2),n.ic(2,"i",3),n.mc(),n.mc()}if(2&amp;e){const e=n.xc();n.Ub("title",e.toggleTitle)}}lc.\u0275fac=function(e){return new(e||lc)(n.hc(Na))},lc.\u0275cmp=n.bc({type:lc,selectors:[["global-search-tabs"]],features:[n.Qb],decls:11,vars:4,consts:[[3,"ngClass"],["scrollContainer",""],[1,"tabrow",3,"scroll"],["scrollPane",""],[3,"selected",4,"ngFor","ngForOf"],[1,"scrollable-tabs--button","-left",3,"hidden","click"],["scrollLeftBtn",""],[1,"icon-arrow-left2"],[1,"scrollable-tabs--button","-right",3,"hidden","click"],["scrollRightBtn",""],[1,"icon-arrow-right2"],[3,"href","textContent","click"]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"div",0,1),n.nc(2,"ul",2,3),n.vc("scroll",(function(e){return t.onScroll(e)})),n.ad(4,cc,2,5,"li",4),n.mc(),n.nc(5,"div",5,6),n.vc("click",(function(){return t.scrollLeft()})),n.ic(7,"span",7),n.mc(),n.nc(8,"div",8,9),n.vc("click",(function(){return t.scrollRight()})),n.ic(10,"span",10),n.mc(),n.mc()),2&amp;e&amp;&amp;(n.Dc("ngClass",t.classes),n.Tb(4),n.Dc("ngForOf",t.tabs),n.Tb(1),n.Dc("hidden",t.hideLeftButton),n.Tb(3),n.Dc("hidden",t.hideRightButton))},directives:[G.n,G.p],encapsulation:2});class uc extends Je.a{constructor(e,t,i,n){super(),this.toggleService=e,this.cdRef=t,this.deviceService=i,this.injector=n,this.toggleTitle=""}ngOnInit(){this.toggleService.initializeMenu(),this.toggleService.titleData$.pipe(Object(mr.a)(),this.untilDestroyed()).subscribe(e=&gt;{this.toggleTitle=e,this.cdRef.detectChanges()})}}uc.\u0275fac=function(e){return new(e||uc)(n.hc(Mo.a),n.hc(n.i),n.hc($o.a),n.hc(n.A))},uc.\u0275cmp=n.bc({type:uc,selectors:[["main-menu-toggle"]],features:[n.Qb],decls:1,vars:1,consts:[["id","main-menu-toggle","aria-haspopup","true","tabindex","0",3,"accessibleClick",4,"ngIf"],["id","main-menu-toggle","aria-haspopup","true","tabindex","0",3,"accessibleClick"],["icon","icon-hamburger"],["aria-hidden","true",1,"icon-hamburger"]],template:function(e,t){1&amp;e&amp;&amp;n.ad(0,dc,3,1,"div",0),2&amp;e&amp;&amp;n.Dc("ngIf",null!==t.currentProject.id||t.deviceService.isMobile)},directives:[G.q,fn.a],encapsulation:2,changeDetection:0}),Object(y.c)([Object(W.a)(),Object(y.e)("design:type",Se.a)],uc.prototype,"currentProject",void 0);var hc=i("lJxs"),pc=i("Ng29");function mc(e,t){if(1&amp;e&amp;&amp;n.ic(0,"user-avatar",3),2&amp;e){const e=n.xc().item;n.Dc("user",e)}}function gc(e,t){if(1&amp;e&amp;&amp;(n.ad(0,mc,1,1,"user-avatar",2),n.cd(1)),2&amp;e){const e=t.item;n.Dc("ngIf",e&amp;&amp;e.id),n.Tb(1),n.ed(" ",e.name," ")}}class fc extends An.a{getAvailableUsers(e,t){return this.http.get(e,{params:new ue.f({encoder:new pc.a,fromObject:{q:t}}),responseType:"json",headers:{"Content-Type":"application/json; charset=utf-8"}}).pipe(Object(hc.a)(e=&gt;e.results.items.map(e=&gt;({name:e.name,id:e.id,href:e.id}))))}}fc.\u0275fac=function(e){return bc(e||fc)},fc.\u0275cmp=n.bc({type:fc,selectors:[["members-autocompleter"]],features:[n.Qb],decls:4,vars:12,consts:[["bindLabel","name","bindValue","id",3,"items","ngModel","virtualScroll","trackByFn","typeahead","loading","appendTo","multiple","focus","change"],["ng-option-tmp",""],["data-class-list","avatar-mini",3,"user",4,"ngIf"],["data-class-list","avatar-mini",3,"user"]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"ng-select",0),n.vc("focus",(function(){return t.onFocus()}))("change",(function(e){return t.onModelChange(e)})),n.yc(1,"async"),n.yc(2,"async"),n.ad(3,gc,2,2,"ng-template",1),n.mc()),2&amp;e&amp;&amp;n.Dc("items",n.zc(1,8,t.requests.output$))("ngModel",t.initialSelection)("virtualScroll",!0)("trackByFn",t.userTracker)("typeahead",t.requests.input$)("loading",n.zc(2,10,t.requests.loading$))("appendTo",t.appendTo)("multiple",t.multiple)},directives:[wn.a,l.m,l.p,Tn.a,wn.c,G.q,ti.a],pipes:[G.a],encapsulation:2}),Object(y.c)([Object(W.a)(),Object(y.e)("design:type",ue.b)],fc.prototype,"http",void 0);const bc=n.pc(fc);class vc{constructor(e,t,i,n){this.I18n=e,this.http=t,this.pathHelper=i,this.notificationsService=n,this.userData$=Object(c.f)(),this.modalOpen=!1,this.cancelled=!1,this.emailInvalid=!1,this.text={invalid_email:this.I18n.t("js.admin.enterprise.trial.form.invalid_email"),taken_email:this.I18n.t("js.admin.enterprise.trial.form.taken_email"),taken_domain:this.I18n.t("js.admin.enterprise.trial.form.taken_domain")};let s=window.gon;this.baseUrlAugur=s.augur_url,window.gon.ee_trial_key&amp;&amp;this.setMailSubmittedStatus()}sendForm(e){this.http.post(this.baseUrlAugur+"/public/v1/trials",e.value).toPromise().then(t=&gt;{this.userData$.putValue(e.value),this.cancelled=!1,this.trialLink=t._links.self.href,this.saveTrialKey(this.trialLink),this.retryConfirmation()}).catch(e=&gt;{422===e.status||400===e.status?this.error=e:this.notificationsService.addWarning(e.error.description||I18n.t("js.error.internal"))})}getToken(){this.http.get(this.trialLink).toPromise().then(e=&gt;Object(y.b)(this,void 0,void 0,(function*(){this.confirmed=!0,e.token_retrieved||(yield this.saveToken(e.token)),this.modalOpen||setTimeout(()=&gt;{window.location.reload()},500)}))).catch(e=&gt;{422===e.status&amp;&amp;"waiting_for_email_verification"===e.error.identifier?(this.resendLink=e.error._links.resend.href,this.status&amp;&amp;!this.cancelled||this.saveTrialKey(this.resendLink),this.setMailSubmittedStatus(),this.confirmed=!1):"Error"===_.get(e,"error._type")?this.notificationsService.addError(e.error.message):this.notificationsService.addError(e.error||I18n.t("js.error.internal"))})}saveTrialKey(e){let t=e.split("/")[6];return this.http.post(this.pathHelper.api.v3.appBasePath+"/admin/enterprise/save_trial_key",{trial_key:t},{withCredentials:!0}).toPromise().catch(e=&gt;{this.notificationsService.addError(e.error.message||e.message||e)})}saveToken(e){return this.http.post(this.pathHelper.api.v3.appBasePath+"/admin/enterprise",{enterprise_token:{encoded_token:e}},{withCredentials:!0}).toPromise().catch(e=&gt;{this.notificationsService.addError(e.error.description||I18n.t("js.error.internal"))})}retryConfirmation(e=5e3,t=60){this.cancelled||this.confirmed||(0===t?this.cancelled=!0:(this.getToken(),setTimeout(()=&gt;{this.retryConfirmation(e,t-1)},e)))}setStartTrialStatus(){this.status="startTrial"}setMailSubmittedStatus(){this.status="mailSubmitted"}get trialStarted(){return"startTrial"===this.status}get mailSubmitted(){return"mailSubmitted"===this.status}get domainTaken(){return!!this.error&amp;&amp;"domain_taken"===this.error.error.identifier}get emailTaken(){return!!this.error&amp;&amp;"user_already_created_trial"===this.error.error.identifier}get emailError(){return!!this.emailInvalid||!!this.error&amp;&amp;this.emailTaken}get errorMsg(){let e="";return this.emailInvalid?e=this.text.invalid_email:this.domainTaken?e=this.text.taken_domain:this.emailTaken&amp;&amp;(e=this.text.taken_email),e}}vc.\u0275fac=function(e){return new(e||vc)(n.rc(C.a),n.rc(ue.b),n.rc(z.a),n.rc(k.a))},vc.\u0275prov=n.dc({token:vc,factory:vc.\u0275fac});var wc,yc=i("vK8y");function kc(e,t){if(1&amp;e&amp;&amp;(n.nc(0,"div",25),n.cd(1),n.mc()),2&amp;e){const e=n.xc();n.Tb(1),n.dd(e.eeTrialService.errorMsg)}}function Cc(e,t){if(1&amp;e&amp;&amp;(n.nc(0,"div",25),n.cd(1),n.mc()),2&amp;e){const e=n.xc();n.Tb(1),n.dd(e.eeTrialService.errorMsg)}}!function(e){e.localizeLink=function(e){return e[I18n.locale]||e.en}}(wc||(wc={}));const xc=function(e){return{"-required-highlighting":e}};class jc{constructor(e,t,i,n,s){this.elementRef=e,this.I18n=t,this.formBuilder=i,this.currentUserService=n,this.eeTrialService=s,this.userData=this.eeTrialService.userData$.getValueOr({}),this.trialForm=this.formBuilder.group({company:[this.userData.company,l.A.required],first_name:[this.userData.first_name,l.A.required],last_name:[this.userData.last_name,l.A.required],email:["",[l.A.required,l.A.email]],domain:[this.userData.domain||window.location.host,l.A.required],general_consent:[null,l.A.required],newsletter_consent:null,language:this.currentUserService.language}),this.text={general_consent:this.I18n.t("js.admin.enterprise.trial.form.general_consent",{link_terms:wc.localizeLink({en:"https://www.openproject.com/terms-of-service/",de:"https://www.openproject.org/de/nutzungsbedingungen/"}),link_privacy:wc.localizeLink({en:"https://www.openproject.org/data-privacy-and-security/",de:"https://www.openproject.org/de/datenschutz/"})}),label_test_ee:this.I18n.t("js.admin.enterprise.trial.form.test_ee"),label_company:this.I18n.t("js.admin.enterprise.trial.form.label_company"),label_first_name:this.I18n.t("js.admin.enterprise.trial.form.label_first_name"),label_last_name:this.I18n.t("js.admin.enterprise.trial.form.label_last_name"),label_email:this.I18n.t("js.admin.enterprise.trial.form.label_email"),label_domain:this.I18n.t("js.admin.enterprise.trial.form.label_domain"),privacy_policy:this.I18n.t("js.admin.enterprise.trial.form.privacy_policy"),receive_newsletter:this.I18n.t("js.admin.enterprise.trial.form.receive_newsletter",{link:"https://www.openproject.com/newsletter/"}),terms_of_service:this.I18n.t("js.admin.enterprise.trial.form.terms_of_service")}}checkMailField(){""!==this.trialForm.value.email&amp;&amp;this.trialForm.controls.email.errors?this.eeTrialService.emailInvalid=!0:(this.eeTrialService.emailInvalid=!1,this.eeTrialService.error=void 0)}}jc.\u0275fac=function(e){return new(e||jc)(n.hc(n.q),n.hc(C.a),n.hc(l.e),n.hc(yc.a),n.hc(vc))},jc.\u0275cmp=n.bc({type:jc,selectors:[["enterprise-trial-form"]],decls:45,vars:16,consts:[["id","enterprise-trial-form",1,"form",3,"formGroup"],[1,"form--field","-wide-label","-required"],["for","trial-company-name",1,"form--label"],[1,"form--field-container"],[1,"form--text-field-container"],["type","text","id","trial-company-name","formControlName","company",1,"form--text-field"],["for","trial-first-name",1,"form--label"],["type","text","id","trial-first-name","formControlName","first_name",1,"form--text-field"],["for","trial-last-name",1,"form--label"],["type","text","id","trial-last-name","formControlName","last_name",1,"form--text-field"],["for","trial-email",1,"form--label"],[1,"form--text-field-container",3,"ngClass"],["type","email","id","trial-email","formControlName","email",1,"form--text-field",3,"blur"],["class","form--field-instructions",4,"ngIf"],["for","trial-domain-name",1,"form--label"],["type","text","id","trial-domain-name","formControlName","domain",1,"form--text-field"],[1,"form--field","-required"],["for","trial-general-consent",1,"form--label-with-check-box","-no-ellipsis"],[1,"form--check-box-container"],["type","checkbox","id","trial-general-consent","formControlName","general_consent","required","",1,"form--check-box"],[3,"innerHTML"],[1,"form--field"],["for","trial-newsletter-consent",1,"form--label-with-check-box","-no-ellipsis"],["type","checkbox","id","trial-newsletter-consent","formControlName","newsletter_consent",1,"form--check-box"],[3,"innerHtml"],[1,"form--field-instructions"]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"form",0),n.nc(1,"div",1),n.nc(2,"label",2),n.cd(3),n.mc(),n.nc(4,"div",3),n.nc(5,"div",4),n.ic(6,"input",5),n.mc(),n.mc(),n.mc(),n.nc(7,"div",1),n.nc(8,"label",6),n.cd(9),n.mc(),n.nc(10,"div",3),n.nc(11,"div",4),n.ic(12,"input",7),n.mc(),n.mc(),n.mc(),n.nc(13,"div",1),n.nc(14,"label",8),n.cd(15),n.mc(),n.nc(16,"div",3),n.nc(17,"div",4),n.ic(18,"input",9),n.mc(),n.mc(),n.mc(),n.nc(19,"div",1),n.nc(20,"label",10),n.cd(21),n.mc(),n.nc(22,"div",3),n.nc(23,"div",11),n.nc(24,"input",12),n.vc("blur",(function(){return t.checkMailField()})),n.mc(),n.mc(),n.mc(),n.ad(25,kc,2,1,"div",13),n.mc(),n.nc(26,"div",1),n.nc(27,"label",14),n.cd(28),n.mc(),n.nc(29,"div",3),n.nc(30,"div",11),n.ic(31,"input",15),n.mc(),n.mc(),n.ad(32,Cc,2,1,"div",13),n.mc(),n.nc(33,"div",16),n.nc(34,"div",3),n.nc(35,"label",17),n.nc(36,"div",18),n.ic(37,"input",19),n.mc(),n.ic(38,"span",20),n.mc(),n.mc(),n.mc(),n.nc(39,"div",21),n.nc(40,"div",3),n.nc(41,"label",22),n.nc(42,"div",18),n.ic(43,"input",23),n.mc(),n.ic(44,"span",24),n.mc(),n.mc(),n.mc(),n.mc()),2&amp;e&amp;&amp;(n.Dc("formGroup",t.trialForm),n.Tb(3),n.dd(t.text.label_company),n.Tb(6),n.dd(t.text.label_first_name),n.Tb(6),n.dd(t.text.label_last_name),n.Tb(6),n.dd(t.text.label_email),n.Tb(2),n.Dc("ngClass",n.Ic(12,xc,t.eeTrialService.emailError)),n.Tb(2),n.Dc("ngIf",t.eeTrialService.emailError),n.Tb(3),n.dd(t.text.label_domain),n.Tb(2),n.Dc("ngClass",n.Ic(14,xc,t.eeTrialService.domainTaken)),n.Tb(2),n.Dc("ngIf",t.eeTrialService.domainTaken),n.Tb(6),n.Dc("innerHTML",t.text.general_consent,n.Tc),n.Tb(6),n.Dc("innerHtml",t.text.receive_newsletter,n.Tc))},directives:[l.C,l.n,l.h,l.c,l.m,l.g,G.n,G.q,l.a,l.b],encapsulation:2});class Sc extends Je.a{constructor(e){super(),this.I18n=e,this.text={label_email:this.I18n.t("js.admin.enterprise.trial.form.label_email"),label_expires_at:this.I18n.t("js.admin.enterprise.trial.form.label_expires_at"),label_maximum_users:this.I18n.t("js.admin.enterprise.trial.form.label_maximum_users"),label_company:this.I18n.t("js.admin.enterprise.trial.form.label_company"),label_domain:this.I18n.t("js.admin.enterprise.trial.form.label_domain"),label_starts_at:this.I18n.t("js.admin.enterprise.trial.form.label_starts_at"),label_subscriber:this.I18n.t("js.admin.enterprise.trial.form.label_subscriber")}}}function Tc(e,t){if(1&amp;e&amp;&amp;n.ic(0,"div",3),2&amp;e){const e=n.xc();n.Dc("textContent",e.text.label_company)}}function Pc(e,t){if(1&amp;e&amp;&amp;(n.nc(0,"div",4),n.nc(1,"div",5),n.ic(2,"span",6),n.mc(),n.mc()),2&amp;e){const e=n.xc();n.Tb(2),n.Dc("textContent",e.company)}}function Ic(e,t){if(1&amp;e&amp;&amp;n.ic(0,"div",3),2&amp;e){const e=n.xc();n.Dc("textContent",e.text.label_domain)}}function _c(e,t){if(1&amp;e&amp;&amp;(n.nc(0,"div",4),n.nc(1,"div",5),n.ic(2,"span",6),n.mc(),n.mc()),2&amp;e){const e=n.xc();n.Tb(2),n.Dc("textContent",e.domain)}}function Oc(e,t){if(1&amp;e&amp;&amp;n.ic(0,"div",3),2&amp;e){const e=n.xc();n.Dc("textContent",e.text.label_maximum_users)}}function Dc(e,t){if(1&amp;e&amp;&amp;(n.nc(0,"div",4),n.nc(1,"div",5),n.ic(2,"span",6),n.mc(),n.mc()),2&amp;e){const e=n.xc();n.Tb(2),n.Dc("textContent",e.userCount)}}function Rc(e,t){if(1&amp;e&amp;&amp;n.ic(0,"div",3),2&amp;e){const e=n.xc();n.Dc("textContent",e.text.label_starts_at)}}function Ec(e,t){if(1&amp;e&amp;&amp;(n.nc(0,"div",4),n.nc(1,"div",5),n.ic(2,"span",6),n.mc(),n.mc()),2&amp;e){const e=n.xc();n.Tb(2),n.Dc("textContent",e.startsAt)}}function Fc(e,t){if(1&amp;e&amp;&amp;n.ic(0,"div",3),2&amp;e){const e=n.xc();n.Dc("textContent",e.text.label_expires_at)}}function Mc(e,t){if(1&amp;e&amp;&amp;(n.nc(0,"div",4),n.nc(1,"div",5),n.ic(2,"span",6),n.mc(),n.mc()),2&amp;e){const e=n.xc();n.Tb(2),n.Dc("textContent",e.expiresAt)}}class Ac extends Sc{constructor(e,t,i,n,s,a){super(i),this.elementRef=e,this.cdRef=t,this.I18n=i,this.http=n,this.Gon=s,this.eeTrialService=a}ngOnInit(){this.subscriber||(this.eeTrialService.userData$.values$().pipe(Object(mr.a)(),this.untilDestroyed()).subscribe(e=&gt;{this.formatUserData(e),this.cdRef.detectChanges()}),this.initialize())}initialize(){let e=this.Gon.get("ee_trial_key");e&amp;&amp;!this.eeTrialService.userData$.hasValue()&amp;&amp;(this.eeTrialService.trialLink=this.eeTrialService.baseUrlAugur+"/public/v1/trials/"+e.value,this.getUserDataFromAugur())}getUserDataFromAugur(){this.http.get(this.eeTrialService.trialLink+"/details").toPromise().then(e=&gt;{this.eeTrialService.userData$.putValue(e),this.eeTrialService.retryConfirmation()}).catch(e=&gt;{this.eeTrialService.getToken()})}formatUserData(e){this.subscriber=e.first_name+" "+e.last_name,this.email=e.email,this.company=e.company,this.domain=e.domain}}function Lc(e,t){if(1&amp;e&amp;&amp;(n.nc(0,"p"),n.cd(1),n.mc()),2&amp;e){const e=n.xc(2);n.Tb(1),n.dd(e.text.session_timeout)}}function qc(e,t){if(1&amp;e){const e=n.oc();n.nc(0,"span",2),n.cd(1),n.nc(2,"a",3),n.vc("click",(function(){return n.Sc(e),n.xc().resendMail()})),n.cd(3),n.mc(),n.ad(4,Lc,2,1,"p",4),n.mc()}if(2&amp;e){const e=n.xc();n.Tb(1),n.ed(" ",e.text.status_waiting," "),n.Tb(2),n.dd(e.text.resend),n.Tb(1),n.Dc("ngIf",e.eeTrialService.cancelled)}}function $c(e,t){if(1&amp;e&amp;&amp;(n.nc(0,"span",5),n.cd(1),n.mc()),2&amp;e){const e=n.xc();n.Tb(1),n.ed(" ",e.text.status_confirmed,"")}}Ac.\u0275fac=function(e){return new(e||Ac)(n.hc(n.q),n.hc(n.i),n.hc(C.a),n.hc(ue.b),n.hc(Ua.a),n.hc(vc))},Ac.\u0275cmp=n.bc({type:Ac,selectors:[["enterprise-active-trial"]],features:[n.Qb],decls:21,vars:14,consts:[[1,"enterprise--active-token"],[1,"attributes-group"],[1,"attributes-key-value"],[1,"attributes-key-value--key",3,"textContent"],[1,"attributes-key-value--value-container"],[1,"attributes-key-value--value","-text"],[3,"textContent"],["class","attributes-key-value--key",3,"textContent",4,"ngIf"],["class","attributes-key-value--value-container",4,"ngIf"]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"div",0),n.nc(1,"div",1),n.nc(2,"div",2),n.ic(3,"div",3),n.nc(4,"div",4),n.nc(5,"div",5),n.ic(6,"span",6),n.mc(),n.mc(),n.ic(7,"div",3),n.nc(8,"div",4),n.nc(9,"div",5),n.ic(10,"span",6),n.mc(),n.mc(),n.ad(11,Tc,1,1,"div",7),n.ad(12,Pc,3,1,"div",8),n.ad(13,Ic,1,1,"div",7),n.ad(14,_c,3,1,"div",8),n.ad(15,Oc,1,1,"div",7),n.ad(16,Dc,3,1,"div",8),n.ad(17,Rc,1,1,"div",7),n.ad(18,Ec,3,1,"div",8),n.ad(19,Fc,1,1,"div",7),n.ad(20,Mc,3,1,"div",8),n.mc(),n.mc(),n.mc()),2&amp;e&amp;&amp;(n.Tb(3),n.Dc("textContent",t.text.label_subscriber),n.Tb(3),n.Dc("textContent",t.subscriber),n.Tb(1),n.Dc("textContent",t.text.label_email),n.Tb(3),n.Dc("textContent",t.email),n.Tb(1),n.Dc("ngIf",t.company),n.Tb(1),n.Dc("ngIf",t.company),n.Tb(1),n.Dc("ngIf",t.domain),n.Tb(1),n.Dc("ngIf",t.domain),n.Tb(1),n.Dc("ngIf",t.userCount),n.Tb(1),n.Dc("ngIf",t.userCount),n.Tb(1),n.Dc("ngIf",t.startsAt),n.Tb(1),n.Dc("ngIf",t.startsAt),n.Tb(1),n.Dc("ngIf",t.expiresAt),n.Tb(1),n.Dc("ngIf",t.expiresAt))},directives:[G.q],styles:[".attributes-group[_ngcontent-%COMP%]{margin-bottom:1.25rem}"]});class Vc{constructor(e,t,i,n,s){this.elementRef=e,this.I18n=t,this.http=i,this.notificationsService=n,this.eeTrialService=s,this.text={confirmation_info:this.I18n.t("js.admin.enterprise.trial.confirmation_info"),resend:this.I18n.t("js.admin.enterprise.trial.resend_link"),resend_success:this.I18n.t("js.admin.enterprise.trial.resend_success"),resend_warning:this.I18n.t("js.admin.enterprise.trial.resend_warning"),session_timeout:this.I18n.t("js.admin.enterprise.trial.session_timeout"),status_confirmed:this.I18n.t("js.admin.enterprise.trial.status_confirmed"),status_label:this.I18n.t("js.admin.enterprise.trial.status_label"),status_waiting:this.I18n.t("js.admin.enterprise.trial.status_waiting")}}resendMail(){this.eeTrialService.cancelled=!1,this.http.post(this.eeTrialService.resendLink,{}).toPromise().then(()=&gt;{this.notificationsService.addSuccess(this.text.resend_success),this.eeTrialService.retryConfirmation()}).catch(()=&gt;{this.eeTrialService.trialLink?this.eeTrialService.getToken():this.notificationsService.addError(this.text.resend_warning)})}}function Nc(e,t){if(1&amp;e){const e=n.oc();n.nc(0,"a",10),n.nc(1,"i",11),n.vc("click",(function(t){return n.Sc(e),n.xc().closeModal(t)})),n.mc(),n.mc()}if(2&amp;e){const e=n.xc();n.Tb(1),n.Ub("title",e.text.close_popup)}}function Hc(e,t){1&amp;e&amp;&amp;(n.nc(0,"div"),n.ic(1,"enterprise-trial-form"),n.mc())}function zc(e,t){1&amp;e&amp;&amp;(n.nc(0,"div"),n.ic(1,"enterprise-trial-waiting"),n.mc())}function Bc(e,t){if(1&amp;e&amp;&amp;(n.nc(0,"div"),n.nc(1,"div",12),n.nc(2,"div",13),n.nc(3,"span"),n.cd(4),n.mc(),n.mc(),n.nc(5,"div",14),n.ic(6,"iframe",15),n.mc(),n.mc(),n.mc()),2&amp;e){const e=n.xc();n.Tb(4),n.dd(e.text.quick_overview),n.Tb(2),n.Dc("src",e.trustedEEVideoURL,n.Uc)}}function Qc(e,t){if(1&amp;e){const e=n.oc();n.nc(0,"div"),n.nc(1,"button",16),n.vc("click",(function(){return n.Sc(e),n.xc().onSubmit()})),n.mc(),n.nc(2,"button",17),n.vc("click",(function(t){return n.Sc(e),n.xc().closeModal(t)})),n.mc(),n.mc()}if(2&amp;e){const e=n.xc();n.Tb(1),n.Dc("disabled",!e.trialForm||e.trialForm.invalid)("textContent",e.text.button_submit)("hidden",e.eeTrialService.mailSubmitted&amp;&amp;!e.eeTrialService.cancelled),n.Ub("title",e.text.button_submit),n.Tb(1),n.Dc("textContent",e.text.button_cancel),n.Ub("title",e.text.button_cancel)}}function Wc(e,t){if(1&amp;e){const e=n.oc();n.nc(0,"button",20),n.vc("click",(function(t){return n.Sc(e),n.xc(2).closeModal(t)})),n.mc()}if(2&amp;e){const e=n.xc(2);n.Dc("textContent",e.text.button_continue),n.Ub("title",e.text.button_continue)}}function Uc(e,t){if(1&amp;e){const e=n.oc();n.nc(0,"button",18),n.vc("click",(function(){return n.Sc(e),n.xc().startEnterpriseTrial()})),n.mc(),n.ad(1,Wc,1,2,"button",19)}if(2&amp;e){const e=n.xc();n.Dc("textContent",e.text.button_continue)("disabled",!e.eeTrialService.confirmed)("hidden",e.eeTrialService.trialStarted),n.Ub("title",e.text.button_continue),n.Tb(1),n.Dc("ngIf",e.eeTrialService.trialStarted)}}Vc.\u0275fac=function(e){return new(e||Vc)(n.hc(n.q),n.hc(C.a),n.hc(ue.b),n.hc(k.a),n.hc(vc))},Vc.\u0275cmp=n.bc({type:Vc,selectors:[["enterprise-trial-waiting"]],decls:9,vars:4,consts:[["class","status--waiting",4,"ngIf","ngIfElse"],["confirmedStatus",""],[1,"status--waiting"],["id","resend-link",3,"click"],[4,"ngIf"],[1,"status--confirmed","icon-yes"]],template:function(e,t){if(1&amp;e&amp;&amp;(n.ic(0,"enterprise-active-trial"),n.nc(1,"p"),n.cd(2),n.mc(),n.nc(3,"p"),n.nc(4,"span"),n.cd(5),n.mc(),n.ad(6,qc,5,3,"span",0),n.ad(7,$c,2,1,"ng-template",null,1,n.bd),n.mc()),2&amp;e){const e=n.Qc(8);n.Tb(2),n.dd(t.text.confirmation_info),n.Tb(3),n.ed("",t.text.status_label," "),n.Tb(1),n.Dc("ngIf",!t.eeTrialService.confirmed)("ngIfElse",e)}},directives:[Ac,G.q],styles:["#resend-link[_ngcontent-%COMP%]{float:right}.status--confirmed[_ngcontent-%COMP%]{color:var(--button--alt-highlight-background-color)}.status--waiting[_ngcontent-%COMP%]{color:orange}"]});class Xc extends ut.a{constructor(e,t,i,n,s,a){super(t,i,e),this.elementRef=e,this.locals=t,this.cdRef=i,this.I18n=n,this.domSanitizer=s,this.eeTrialService=a,this.showClose=!0,this.closeOnEscape=!1,this.closeOnOutsideClick=!1,this.text={button_submit:this.I18n.t("js.modals.button_submit"),button_cancel:this.I18n.t("js.modals.button_cancel"),button_continue:this.I18n.t("js.button_continue"),close_popup:this.I18n.t("js.close_popup_title"),heading_confirmation:this.I18n.t("js.admin.enterprise.trial.confirmation"),heading_next_steps:this.I18n.t("js.admin.enterprise.trial.next_steps"),heading_test_ee:this.I18n.t("js.admin.enterprise.trial.test_ee"),quick_overview:this.I18n.t("js.admin.enterprise.trial.quick_overview")},this.trustedEEVideoURL=this.trustedURL("https://www.youtube.com/embed/zLMSydhFSkw?autoplay=1")}ngAfterViewInit(){this.trialForm=this.formComponent.trialForm}onSubmit(){this.trialForm.valid&amp;&amp;(this.trialForm.addControl("_type",new l.f("enterprise-trial")),this.eeTrialService.sendForm(this.trialForm))}startEnterpriseTrial(){this.eeTrialService.setStartTrialStatus()}headerText(){return this.eeTrialService.mailSubmitted?this.text.heading_confirmation:this.eeTrialService.trialStarted?this.text.heading_next_steps:this.text.heading_test_ee}closeModal(e){this.closeMe(e),(this.eeTrialService.trialStarted||this.eeTrialService.confirmed)&amp;&amp;window.location.reload(),this.eeTrialService.modalOpen=!1}trustedURL(e){return this.domSanitizer.bypassSecurityTrustResourceUrl(e)}openWindow(){return!this.eeTrialService.status||this.eeTrialService.cancelled?1:this.eeTrialService.mailSubmitted&amp;&amp;!this.eeTrialService.cancelled?2:3}}function Yc(e,t){if(1&amp;e){const e=n.oc();n.nc(0,"div"),n.nc(1,"p"),n.cd(2),n.mc(),n.nc(3,"p",2),n.cd(4),n.mc(),n.nc(5,"p"),n.nc(6,"span",2),n.cd(7),n.mc(),n.ic(8,"br"),n.nc(9,"span"),n.cd(10),n.mc(),n.mc(),n.nc(11,"button",3),n.vc("click",(function(){return n.Sc(e),n.xc().openTrialModal()})),n.cd(12),n.mc(),n.mc()}if(2&amp;e){const e=n.xc();n.Tb(2),n.dd(e.text.enterprise_edition),n.Tb(2),n.dd(e.text.confidence),n.Tb(3),n.dd(e.text.become_hero),n.Tb(3),n.dd(e.text.you_contribute),n.Tb(2),n.ed(" ",e.text.button_trial," ")}}function Gc(e,t){if(1&amp;e){const e=n.oc();n.ic(0,"enterprise-trial-waiting"),n.nc(1,"p",4),n.cd(2),n.nc(3,"a",5),n.vc("click",(function(){return n.Sc(e),n.xc().openTrialModal()})),n.cd(4),n.mc(),n.mc()}if(2&amp;e){const e=n.xc();n.Tb(2),n.ed("",e.text.email_not_received," "),n.Tb(2),n.dd(e.text.try_another_email)}}Xc.\u0275fac=function(e){return new(e||Xc)(n.hc(n.q),n.hc(I.a),n.hc(n.i),n.hc(C.a),n.hc(N.b),n.hc(vc))},Xc.\u0275cmp=n.bc({type:Xc,selectors:[["enterprise-trial-modal"]],viewQuery:function(e,t){var i;(1&amp;e&amp;&amp;n.hd(jc,!0),2&amp;e)&amp;&amp;(n.Pc(i=n.wc())&amp;&amp;(t.formComponent=i.first))},inputs:{opReferrer:"opReferrer"},features:[n.Qb],decls:13,vars:8,consts:[[1,"op-modal--portal"],["data-indicator-name","modal","tabindex","0",1,"op-modal--modal-container"],[1,"op-modal--modal-header"],[3,"textContent"],["class","op-modal--modal-close-button",4,"ngIf"],[1,"op-modal--modal-body",3,"ngSwitch"],[4,"ngSwitchCase"],[1,"op-modal--modal-footer"],[4,"ngIf","ngIfElse"],["mailSubmitted",""],[1,"op-modal--modal-close-button"],[1,"icon-close",3,"click"],[1,"onboarding--video-block"],[1,"onboarding--video-text"],[1,"onboarding--video","iframe-target-wrapper"],["frameborder","0","height","400","width","100%","allowfullscreen","",3,"src"],[1,"confirm-form-submit--continue","button","-highlight",3,"disabled","textContent","hidden","click"],[1,"confirm-form-submit--cancel","button",3,"textContent","click"],[1,"confirm-form-submit--continue","button","-highlight",3,"textContent","disabled","hidden","click"],["class","confirm-form-submit--continue button -highlight",3,"textContent","click",4,"ngIf"],[1,"confirm-form-submit--continue","button","-highlight",3,"textContent","click"]],template:function(e,t){if(1&amp;e&amp;&amp;(n.nc(0,"div",0),n.nc(1,"div",1),n.nc(2,"div",2),n.ic(3,"h3",3),n.ad(4,Nc,2,1,"a",4),n.mc(),n.nc(5,"div",5),n.ad(6,Hc,2,0,"div",6),n.ad(7,zc,2,0,"div",6),n.ad(8,Bc,7,2,"div",6),n.mc(),n.nc(9,"div",7),n.ad(10,Qc,3,6,"div",8),n.ad(11,Uc,2,5,"ng-template",null,9,n.bd),n.mc(),n.mc(),n.mc()),2&amp;e){const e=n.Qc(12);n.Tb(3),n.Dc("textContent",t.headerText()),n.Tb(1),n.Dc("ngIf",t.showClose),n.Tb(1),n.Dc("ngSwitch",t.openWindow()),n.Tb(1),n.Dc("ngSwitchCase",1),n.Tb(1),n.Dc("ngSwitchCase",2),n.Tb(1),n.Dc("ngSwitchCase",3),n.Tb(2),n.Dc("ngIf",!t.eeTrialService.status||t.eeTrialService.cancelled)("ngIfElse",e)}},directives:[G.q,G.u,G.v,jc,Vc],styles:[".op-modal--modal-body[_ngcontent-%COMP%]{padding:0}.op-modal--modal-body[_ngcontent-%COMP%]   .onboarding--video-text[_ngcontent-%COMP%]{margin-bottom:1.25rem}.op-modal--modal-footer[_ngcontent-%COMP%]{margin:0;padding:0}"]});class Kc{constructor(e,t,i,n){this.I18n=e,this.opModalService=t,this.injector=i,this.eeTrialService=n,this.text={button_trial:this.I18n.t("js.admin.enterprise.upsale.button_start_trial"),button_book:this.I18n.t("js.admin.enterprise.upsale.button_book_now"),link_quote:this.I18n.t("js.admin.enterprise.upsale.link_quote"),become_hero:this.I18n.t("js.admin.enterprise.upsale.become_hero"),you_contribute:this.I18n.t("js.admin.enterprise.upsale.you_contribute"),email_not_received:this.I18n.t("js.admin.enterprise.trial.email_not_received"),enterprise_edition:this.I18n.t("js.admin.enterprise.upsale.text"),confidence:this.I18n.t("js.admin.enterprise.upsale.confidence"),try_another_email:this.I18n.t("js.admin.enterprise.trial.try_another_email")}}openTrialModal(){this.eeTrialService.cancelled=!0,this.eeTrialService.modalOpen=!0,this.opModalService.show(Xc,this.injector)}get noTrialRequested(){return void 0===this.eeTrialService.status}}function Zc(e,t){if(1&amp;e&amp;&amp;n.ic(0,"div",3),2&amp;e){const e=n.xc();n.Dc("textContent",e.text.label_company)}}function Jc(e,t){if(1&amp;e&amp;&amp;(n.nc(0,"div",4),n.nc(1,"div",5),n.ic(2,"span",6),n.mc(),n.mc()),2&amp;e){const e=n.xc();n.Tb(2),n.Dc("textContent",e.company)}}function el(e,t){if(1&amp;e&amp;&amp;n.ic(0,"div",3),2&amp;e){const e=n.xc();n.Dc("textContent",e.text.label_domain)}}function tl(e,t){if(1&amp;e&amp;&amp;(n.nc(0,"div",4),n.nc(1,"div",5),n.ic(2,"span",6),n.mc(),n.mc()),2&amp;e){const e=n.xc();n.Tb(2),n.Dc("textContent",e.domain)}}function il(e,t){if(1&amp;e&amp;&amp;n.ic(0,"div",3),2&amp;e){const e=n.xc();n.Dc("textContent",e.text.label_maximum_users)}}function nl(e,t){if(1&amp;e&amp;&amp;(n.nc(0,"div",4),n.nc(1,"div",5),n.ic(2,"span",6),n.mc(),n.mc()),2&amp;e){const e=n.xc();n.Tb(2),n.Dc("textContent",e.userCount)}}function sl(e,t){if(1&amp;e&amp;&amp;n.ic(0,"div",3),2&amp;e){const e=n.xc();n.Dc("textContent",e.text.label_starts_at)}}function al(e,t){if(1&amp;e&amp;&amp;(n.nc(0,"div",4),n.nc(1,"div",5),n.ic(2,"span",6),n.mc(),n.mc()),2&amp;e){const e=n.xc();n.Tb(2),n.Dc("textContent",e.startsAt)}}function rl(e,t){if(1&amp;e&amp;&amp;n.ic(0,"div",3),2&amp;e){const e=n.xc();n.Dc("textContent",e.text.label_expires_at)}}function ol(e,t){if(1&amp;e&amp;&amp;(n.nc(0,"div",4),n.nc(1,"div",5),n.ic(2,"span",6),n.mc(),n.mc()),2&amp;e){const e=n.xc();n.Tb(2),n.Dc("textContent",e.expiresAt)}}Kc.\u0275fac=function(e){return new(e||Kc)(n.hc(C.a),n.hc(I.b),n.hc(n.A),n.hc(vc))},Kc.\u0275cmp=n.bc({type:Kc,selectors:[["enterprise-base"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["alreadyRequested",""],[1,"-bold"],[1,"button","-alt-highlight",3,"click"],[1,"confirmation-hint"],[3,"click"]],template:function(e,t){if(1&amp;e&amp;&amp;(n.ad(0,Yc,13,5,"div",0),n.ad(1,Gc,5,2,"ng-template",null,1,n.bd)),2&amp;e){const e=n.Qc(2);n.Dc("ngIf",t.noTrialRequested)("ngIfElse",e)}},directives:[G.q,Vc],styles:[".button[_ngcontent-%COMP%]{float:left}.confirmation-hint[_ngcontent-%COMP%]{font-size:.9em;font-style:italic;margin-bottom:2rem}"]});class cl extends Sc{constructor(e,t){super(t),this.elementRef=e,this.I18n=t,this.subscriber=this.elementRef.nativeElement.dataset.subscriber,this.email=this.elementRef.nativeElement.dataset.email,this.userCount=this.elementRef.nativeElement.dataset.userCount,this.startsAt=this.elementRef.nativeElement.dataset.startsAt,this.expiresAt=this.elementRef.nativeElement.dataset.expiresAt}}cl.\u0275fac=function(e){return new(e||cl)(n.hc(n.q),n.hc(C.a))},cl.\u0275cmp=n.bc({type:cl,selectors:[["enterprise-active-saved-trial"]],features:[n.Qb],decls:21,vars:14,consts:[[1,"enterprise--active-token"],[1,"attributes-group"],[1,"attributes-key-value"],[1,"attributes-key-value--key",3,"textContent"],[1,"attributes-key-value--value-container"],[1,"attributes-key-value--value","-text"],[3,"textContent"],["class","attributes-key-value--key",3,"textContent",4,"ngIf"],["class","attributes-key-value--value-container",4,"ngIf"]],template:function(e,t){1&amp;e&amp;&amp;(n.nc(0,"div",0),n.nc(1,"div",1),n.nc(2,"div",2),n.ic(3,"div",3),n.nc(4,"div",4),n.nc(5,"div",5),n.ic(6,"span",6),n.mc(),n.mc(),n.ic(7,"div",3),n.nc(8,"div",4),n.nc(9,"div",5),n.ic(10,"span",6),n.mc(),n.mc(),n.ad(11,Zc,1,1,"div",7),n.ad(12,Jc,3,1,"div",8),n.ad(13,el,1,1,"div",7),n.ad(14,tl,3,1,"div",8),n.ad(15,il,1,1,"div",7),n.ad(16,nl,3,1,"div",8),n.ad(17,sl,1,1,"div",7),n.ad(18,al,3,1,"div",8),n.ad(19,rl,1,1,"div",7),n.ad(20,ol,3,1,"div",8),n.mc(),n.mc(),n.mc()),2&amp;e&amp;&amp;(n.Tb(3),n.Dc("textContent",t.text.label_subscriber),n.Tb(3),n.Dc("textContent",t.subscriber),n.Tb(1),n.Dc("textContent",t.text.label_email),n.Tb(3),n.Dc("textContent",t.email),n.Tb(1),n.Dc("ngIf",t.company),n.Tb(1),n.Dc("ngIf",t.company),n.Tb(1),n.Dc("ngIf",t.domain),n.Tb(1),n.Dc("ngIf",t.domain),n.Tb(1),n.Dc("ngIf",t.userCount),n.Tb(1),n.Dc("ngIf",t.userCount),n.Tb(1),n.Dc("ngIf",t.startsAt),n.Tb(1),n.Dc("ngIf",t.startsAt),n.Tb(1),n.Dc("ngIf",t.expiresAt),n.Tb(1),n.Dc("ngIf",t.expiresAt))},directives:[G.q],styles:[".attributes-group[_ngcontent-%COMP%]{margin-bottom:1.25rem}"]});const ll=[{selector:"openproject-base",cls:xa},{selector:jn.b,cls:jn.a},{selector:ro.b,cls:ro.a,embeddable:!0},{selector:"colors-autocompleter",cls:uo},{selector:Ht.b,cls:Ht.a},{selector:ks.b,cls:ks.a,embeddable:!0},{selector:An.b,cls:An.a},{selector:"members-autocompleter",cls:fc},{selector:"global-search-tabs",cls:lc},{selector:"global-search-work-packages",cls:go},{selector:"homescreen-new-features-block",cls:fo},{selector:bo.b,cls:bo.a},{selector:vo.b,cls:vo.a},{selector:"global-search-work-packages-entry",cls:wo},{selector:In.b,cls:In.a},{selector:"admin-type-form-configuration",cls:er},{selector:yo.b,cls:yo.a,embeddable:!0},{selector:"persistent-toggle",cls:ko},{selector:ti.b,cls:ti.a},{selector:"hide-section-link",cls:xo},{selector:"show-section-dropdown",cls:jo},{selector:"add-section-dropdown",cls:Io},{selector:"autocomplete-select-decoration",cls:Oo},{selector:"content-tabs",cls:Ro},{selector:"global-search-title",cls:oc},{selector:"copy-to-clipboard",cls:Eo},{selector:"confirm-form-submit",cls:Fo},{selector:"main-menu-resizer",cls:Lo},{selector:"main-menu-toggle",cls:uc},{selector:"global-search-input",cls:Go},{selector:"collapsible-section-augment",cls:Jo},{selector:"enterprise-banner-bootstrap",cls:ec},{selector:"enterprise-base",cls:Kc},{selector:"enterprise-active-saved-trial",cls:cl},{selector:"project-menu-autocomplete",cls:sc},{selector:"remote-field-updater",cls:ac},{selector:"wp-overview-graph",cls:mn},{selector:rc.b,cls:rc.a}];class dl{}dl.\u0275mod=n.fc({type:dl}),dl.\u0275inj=n.ec({factory:function(e){return new(e||dl)},imports:[[b.a,wn.b]]});class ul{}ul.\u0275mod=n.fc({type:ul}),ul.\u0275inj=n.ec({factory:function(e){return new(e||ul)},providers:[vc],imports:[[b.a,l.i,l.w]]});class hl{ngDoBootstrap(e){B.DynamicBootstrapper.register(...ll),B.DynamicBootstrapper.bootstrapOptionalDocument(e,document),e._injector.get(w.a).call("openProjectAngularBootstrap").forEach(t=&gt;{B.DynamicBootstrapper.bootstrapOptionalDocument(e,document,t)})}}hl.\u0275mod=n.fc({type:hl}),hl.\u0275inj=n.ec({factory:function(e){return new(e||hl)},providers:[{provide:u.a,useValue:new u.a},{provide:n.c,useFactory:function(e){return()=&gt;{const t=e.get(p.a),i=e.get(m.a),n=e.get(ve.ModalWrapperAugmentService),s=e.get(Nr),a=e.get(za.a),r=e.get(ao);a.register(),n.setupListener(),s.setupListener(),r.register(),t.setupListener(),i.setupListener()}},deps:[n.A],multi:!0},h.a,$.a,v.a,g.a],imports:[[N.a,b.a,Ia,d.a,ke.a,f.a,ka,ye.a,io.a,we.a,Va,cs,Yt,qr,Xr,to,Ha,cr,ul,X,be,dl,l.w]]}),window.global=window;window.appBasePath=s("meta[name=app_base_path]").attr("content")||"",i.p=window.appBasePath+"/assets/frontend/",window.ErrorReporter=new class{constructor(){this.contextCallbacks=[],this.messageStack=[],this.sentryConfigured=!0;const e=document.querySelector("meta[name=openproject_sentry]");e?Promise.all([i.e(1),i.e(13)]).then(i.bind(null,"WSEr")).then(t=&gt;{t.init({dsn:e.dataset.dsn,debug:!a.a.production,ignoreErrors:["The transition has been superseded by a different transition","Uncaught (in promise)"],beforeSend:e=&gt;this.filterEvent(e)}),this.sentryLoaded(t)}):(this.sentryConfigured=!1,this.messageStack=[])}sentryLoaded(e){this.client=e,e.configureScope(this.setupContext.bind(this)),this.messageStack.forEach(e=&gt;{this[e.type].bind(this).apply(e.args)})}captureMessage(e,t="info"){if(!this.client)return this.handleOfflineMessage("captureMessage",Array.from(arguments));this.client.withScope(i=&gt;{this.setupContext(i),this.client.captureMessage(e,r.a.fromString(t))})}captureException(e){if(!this.client||!e)throw this.handleOfflineMessage("captureException",Array.from(arguments)),e;if("string"==typeof e)return this.captureMessage(e,"error");this.client.withScope(t=&gt;{this.setupContext(t),this.client.captureException(e)})}addContext(...e){this.contextCallbacks.push(...e),this.client&amp;&amp;e.forEach(e=&gt;this.client.configureScope(e))}handleOfflineMessage(e,t){this.sentryConfigured?this.messageStack.push({type:e,args:t}):console.log("[ErrorReporter] Would queue sentry message %O %O, but is not configured.",e,t)}setupContext(e){e.setTag("locale",I18n.locale),e.setTag("domain",window.location.hostname),e.setTag("url_path",window.location.pathname),e.setExtra("url_query",window.location.search),this.contextCallbacks.forEach(t=&gt;t(e))}filterEvent(e){return document.body.classList.contains("-unsupported-browser")?(console.warn("Browser is not supported, skipping sentry reporting completely."),null):e}},i("GDA9"),i("buKu");const pl=s("meta[name=openproject_initializer]");I18n.locale=pl.data("defaultLocale"),I18n.locale=pl.data("locale"),I18n.firstDayOfWeek=parseInt(pl.data("firstDayOfWeek"),10),a.a.production&amp;&amp;Object(n.jb)(),Object(o.c)(()=&gt;{window.enableReactiveStatesLogging=()=&gt;Object(c.e)(!0),window.disableReactiveStatesLogging=()=&gt;Object(c.e)(!1)}),s((function(){N.f().bootstrapModule(hl).then(e=&gt;{s("body").addClass("__ng2-bootstrap-has-run")})}))},zqrF:function(e,t,i){"use strict";i.d(t,"b",(function(){return d})),i.d(t,"a",(function(){return u}));var n=i("E2tj"),s=i("FnNU"),a=i("IzEk"),r=i("CqXF"),o=i("lJxs"),c=i("VRyK"),l=i("fXoL");class d{constructor(e){this.querySpace=e,this.updatesState=Object(s.f)(),this.pristineState=Object(s.f)()}initialize(e,t,i){const n=this.valueFromQuery(e,t);this.pristineState.putValue(n)}update(e){this.updatesState.putValue(e)}clear(e){this.pristineState.clear(e),this.updatesState.clear(e)}live$(){return Object(c.a)(this.pristineState.values$(),this.updatesState.values$())}pristine$(){return this.pristineState.values$()}updates$(){return this.updatesState.values$()}onReady(){return this.pristineState.values$().pipe(Object(a.a)(1),Object(r.a)(null)).toPromise()}get lastUpdatedState(){const e=Object(s.b)(this.pristineState,this.updatesState);return Object(s.d)(e,e=&gt;e.pipe(Object(o.a)(([e,t])=&gt;void 0===t?e:t)))}set current(e){e?this.updatesState.putValue(e):this.updatesState.clear()}get current(){return this.lastUpdatedState.value}}d.\u0275fac=function(e){return new(e||d)(l.rc(n.a))},d.\u0275prov=l.dc({token:d,factory:d.\u0275fac});class u extends d{}u.\u0275fac=function(e){return h(e||u)},u.\u0275prov=l.dc({token:u,factory:u.\u0275fac});const h=l.pc(u)}},[[0,4,15]]]);
//# sourceMappingURL=main.074518708a6e1846b535.js.map
                                                       </a>
                                                      </li>
                                                     </div>
                                                    </i.length){const>
                                                   </input>
                                                  </t.offset().top+t.height();return>
                                                 </t.offset().left+t.width(),n=e.pagey>
                                                </e;n++)i+=`${this.grid_gap_dimension}>
                                               </e.endrow-1&&(this.layout.numrows=e.endrow-1),e}return>
                                              </ul>
                                             </e.total?this.toomanyresultstext=this.i18n.t("js.calendar.too_many",{count:e.total,max:tt.max_displayed}):this.toomanyresultstext=null,this.toomanyresultstext&&!this.static&&this.notificationsservice.addnotice(this.toomanyresultstext)}defaultqueryprops(e,t){let>
                                            </t&&i.endcolumn>
                                           </t&&i.endrow>
                                          </e.endcolumn}startcolumnoverlaps(e){return>
                                         </e.endrow}columnoverlaps(e){return>
                                        </e.endrow&&this.endrow>
                                       </this.value.elements.length-1){const>
                                      </n;a++)s[a]=t.charcodeat(a);return>
                                     </t.name?-1:e.name>
                                    </e.length;t++){let>
                                   </i&&(this.pane.scrollleft=i-this.container.clientwidth+40)}}d.\u0275fac=function(e){return>
                                  </e.length;++t)this.wrapelement(jquery(e[t]))}wrapelement(e){let>
                                 </n?-1:i>
                                </e.pagenumbers[e.pagenumbers.length-1])),a.tb(1),a.ub("aria-label",e.text.label_next),a.tb(3),a.dc("textcontent",e.currentrange),a.tb(1),a.dc("ngif",1===e.pagenumbers.length),a.tb(1),a.dc("ngif",e.infotext),a.tb(1),a.dc("ngif",e.showperpageoptions())}}class>
                               </e.total?i18n.t("js.work_packages.limited_results",{count:e.count}):void>
                              </e.pagenumbers[e.pagenumbers.length-1])),d.tb(1),d.ub("aria-label",e.text.label_next),d.tb(3),d.dc("textcontent",e.currentrange),d.tb(1),d.dc("ngif",1===e.pagenumbers.length),d.tb(1),d.dc("ngif",e.infotext),d.tb(1),d.dc("ngif",e.showperpageoptions())}}class>
                             </t;){i.offset=a;const>
                            </this.hooks[e].length;n++){let>
                           </e.values.length;i++)if(l(t,e.values[i]))return!0;return!1}}object(n.c)([object(c.a)(),object(n.e)("design:type",a.a)],d.prototype,"currentuser",void>
                          </this.elementminwidth?(t=this.elementminwidth,this.manageerrorclass(!0)):(t=this.elementwidth,this.manageerrorclass(!1)),window.openproject.guardedlocalstorage(this.localstoragekey,`${t}`),this.applycolumnlayout(this.resizingelement,t),this.resizingelement.style[this.resizestyle]=t+"px"}parselocalstoragevalue(){let>
                         </this.elementminwidth?this.elementminwidth:this.resizingelement.offsetwidth),0===this.elementwidth&&this.resizingelement.parentelement&&(this.elementwidth=this.resizingelement.parentelement.offsetwidth>
                        </a>
                       </a>
                      </c?"toleft":"beneath";if(!s)return;const>
                     </n?"todown":"toup",u=l>
                    </i;s++){const>
                   </this.index;t++){const>
                  </i;t++){const>
                 </this.elementminwidth&&(this.elementwidth=0)}settoggletitle(){this.shownavigation?this.toggletitle=this.i18n.t("js.label_hide_project_menu"):this.toggletitle=this.i18n.t("js.label_expand_project_menu"),this.titledata.next(this.toggletitle)}toggleclasshidden(){this.hideelements.toggleclass("hidden-navigation",!this.shownavigation)}}d.\u0275fac=function(e){return>
                </i.lockversion?this.edit(i):n}temporaryeditresource(e){const>
               </r.n.length&&this.setzoomlevel(r.n[i])}get>
              </i.right:object(n.pointinside)(e,t)}}},ohnt:function(e,t,i){"use>
             </i.bottom&&e.x>
            </s.top+this.margin?-this.maxspeed:this.point.y>
           </s.left+this.margin?-this.maxspeed:this.point.x>
          </this.elements.length;t++)this.inside(this.point,this.elements[t])&&e.push(this.elements[t]);return>
         </this.elements.length;t++)if(this.elements[t]===e.target){this.scrolling=!0;break}this.scrolling&&requestanimationframe(()=>
        </this.mobilewidthtreshold}}s.\u0275fac=function(e){return>
       </s;e++){const>
      </s.length;t++)e.bootstrap(n.cls,s[t])})}}n.optionalboostrapcomponents=[]},e05v:function(e,t,i){"use>
     </e.length;i++){const>
    </t?e:t-1,n=this.currentfilterat(i);this.focuselementindex=this.filters.indexof(n)}}currentfilterlength(){return>
   </n?i[0].scrolltop=r:o>
  </this.unfilteredactivities.length}getvisibleactivities(){return>
 </t.length;n++){let>
</i;s++)n.push(t[s]);this.uploadfiles(n),this.draggingover=!1}ondragover(e){this.containsfiles(e.datatransfer)&&(e.datatransfer.dropeffect="copy",this.draggingover=!0),e.preventdefault(),e.stoppropagation()}ondragleave(e){this.draggingover=!1,e.preventdefault(),e.stoppropagation()}onfilepickerchanged(){const>